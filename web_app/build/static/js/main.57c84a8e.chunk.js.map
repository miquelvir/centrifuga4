{"version":3,"sources":["theme.js","_context/confirm-context.js","_context/user-context.js","_components/PrivateRoute.js","_helpers/auth-header.js","config.js","_services/service-factory.js","_services/students.service.js","_skeletons/iconButton.js","_components/dirtytextfield.component.js","_data/countries.js","_components/contry-select.component.js","_helpers/handle-response.js","_helpers/normik.js","_data/education.js","_components/formik_discard_button.js","_helpers/needs.js","_components/formik_save_button.js","_data/password_regex.js","_yup/validators.js","_components/students.student.person.component.js","_services/guardians.service.js","_services/payments.service.js","_data/payment_methods.js","_data/empty_objects.js","_context/loading-context.js","_components/students.student.attendee.component.js","_services/emailsGrants.service.js","_services/emailsEnrollment.service.js","_services/student_guardians.service.js","_data/relations.js","_components/students.student.guardian.component.js","_components/students.student.payments.payment.component.js","_services/emailsReceipts.service.js","_components/students.student.payments.component.js","_services/schedules.service.js","_context/tab-context.js","_components/scheduler.component.js","_components/students.student.schedule.component.js","_services/student_courses.service.js","_services/courses.service.js","_components/searchbar.component.js","_context/theme-context.js","_components/ExportSearchChip.component.js","_components/items_list.component.js","_components/items_list_secondary.component.js","_components/items_list_terciary.component.js","_components/subresource_add_delete.component.js","_components/tab.js","_components/students.student.component.js","_components/items_list_main.component.js","_components/students.component.js","_components/user.role-select.component.js","_services/userInvites.service.js","_services/users.service.js","_services/teachers.service.js","_components/users.user.userperson.component.js","_services/user_needs.service.js","_components/dirty_checkbox.js","_helpers/set_operations.js","_components/users.user.permissions.component.js","_components/users.user.component.js","_components/users.component.js","_components/payments.component.js","_services/rooms.service.js","_components/rooms.room.schedule.component.js","_components/rooms.room.details.component.js","_components/rooms.room.component.js","_components/rooms.component.js","_services/teachers_courses.service.js","_services/calendar.service.js","_components/teachers.teacher.details.component.js","_components/teachers.teacher.schedule.component.js","_components/teachers.teacher.component.js","_components/teachers.component.js","_services/course_rooms.service.js","_services/course_students.service.js","_services/course_teachers.service.js","_components/courses.course.details.component.js","_data/price_term.js","_services/course_labels.service.js","_components/labels_selection.component.js","_components/courses.course.labels.component.js","_components/courses.course.schedule.component.js","_components/courses.course.component.js","_components/courses.component.js","_services/bulkEmail.service.js","_components/emailTo.component.js","_components/email.component.js","HomePage/routes.js","_services/god.service.js","_services/auth.service.js","i18nextConf.js","_translations/utils.js","_components/translate_button.component.js","_components/theme_button.component.js","_components/teacher_dashboard_button.js","_components/toolbar.home.component.js","HomePage/HomePage.js","_services/password-reset.service.js","_helpers/on-mount.js","LoginPage/LoginPage.js","_services/signup.service.js","SignupPage/SignupPage.js","ResetPage/ResetPage.js","_components/xamfra.logo.component.js","_services/pre-enrolment.service.js","utils/localized-weekdays.js","_components/xamfra.header.component.js","PreEnrolmentPage/PreEnrolmentPage.js","_components/home_button.js","TeacherDashboardPage/components/WelcomeTitle.js","TeacherDashboardPage/components/CourseCard.js","TeacherDashboardPage/components/MoreButton.js","TeacherDashboardPage/components/NotATeacherTitle.js","TeacherDashboardPage/TeacherDashboardPage.js","_components/not_found.js","_services/attendance.service.js","AttendancePage/components/attendance.component.item.js","AttendancePage/components/status.js","AttendancePage/components/commentDialog.js","AttendancePage/components/attendance.component.js","AttendancePage/AttendancePage.js","App/App.js","reportWebVitals.js","index.js"],"names":["lightTheme","createMuiTheme","palette","type","primary","main","light","dark","contrastText","emphasisText","high","medium","low","secondary","neutral","status","dirty","success","error","darkTheme","confirmContext","React","createContext","confirm","title","subtitle","successCallable","userContext","user","setUser","needs","setNeeds","teacher","setTeacher","PrivateRoute","Component","component","rest","userCtx","useContext","render","props","to","pathname","state","from","location","authHeader","Cookies","get","API_VERSION","process","BACKEND_URL","RECAPTCHA","PUBLIC_URL","CHECK_NEEDS","REACT_CHECK_NEEDS","axios","require","serviceFactory","resource","subresource","serviceName","baseUrl","apiVersion","url","likeSearchText","page","include","filters","parent_id","Promise","resolve","reject","myFilters","JSON","stringify","name","value","Object","keys","forEach","key","method","params","headers","then","response","data","catch","err","id","ids","length","getOne","join","res","body","initial_values","dirtyBody","reduce","filtered","subresourcId","subresourceid","subresourceId","all","map","delete","searchtermfield","searchterm","responseType","filename","split","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","appendChild","click","remove","IconButtonSkeleton","Skeleton","variant","IconButton","useStyles","makeStyles","theme","createStyles","root","color","borderBottomColor","DirtyTextField","formik","noDirty","values","initialValues","classes","formikProps","undefined","onChange","handleChange","onBlur","handleBlur","errors","helperText","touched","TextField","className","InputLabelProps","shrink","countries","code","label","phone","suggested","textField","borderColor","option","fontSize","marginRight","DirtyCountrySelect","style","width","getInitialOption","find","x","useState","_setOption","useEffect","inputValue","setInputValue","t","useTranslation","Autocomplete","options","autoHighlight","getOptionLabel","getOptionSelected","o","event","newValue","newOption","setFieldValue","setOption","onInputChange","newInputValue","renderOption","Fragment","isoCode","String","fromCodePoint","toUpperCase","replace","char","charCodeAt","renderInput","inputProps","autoComplete","useErrorHandler","useSnackbar","enqueueSnackbar","closeSnackbar","successHandlerFactory","snackbarSuccess","successHandler","failureHandler401","logged","ping","failureHandler403","failureHandler","handle401","handle403","handle400","errorOut","reportUnexpected","handler","showSnackbar","message","autoHideDuration","action","src","alt","height","Button","onClick","navigator","clipboard","writeText","platform","userAgent","appVersion","vendor","r","alert","request","text","parse","failureHandlerUnexpected","failureHandlerFactory","useNormik","onlyChangedValuesOnSubmit","allowArrays","originalInitialValues","nullSafeInitialValues","entries","oldOnSubmit","onSubmit","nullSafeOnSubmit","actions","normalizedValues","normalizedValue","Array","isArray","useFormik","education_years","DiscardButton","handleReset","disabled","isSubmitting","Tooltip","NEEDS","patch","post","send_email","invite_users","students","courses","guardians","payments","rooms","schedules","teachers","users","paymentReceipts","attendance","useNeeds","every","need","includes","SaveButton","hasNeeds","longer_8","shorter_64","has_lowercase","has_uppercase","has_digit","has_special","no_plus","safe_password","RegExp","source","yup","required","matches","safe_password_repetition","oneOf","safe_username_email","email","safe_username_email_required","safe_username_required","safe_email_required","safe_email","one_of","test","toString","v","line","marginTop","spacing","composite","display","flexDirection","flex","flexWrap","gap","actionIcon","float","Person","elements","currentPerson","dataService","patchService","newPerson","updateCurrentPerson","updateCurrentStudent","additionalFields","additionalValidation","onUpdate","studentId","loading","errorHandler","validationSchema","is_studying","is_working","career","when","is","education_entity","education_year","enableReinitialize","changedValues","setStatus","setSubmitting","new_id","finally","patched_body","resetForm","Box","clear","idx","py","handleSubmit","my","Divider","select","MenuItem","level","idx2","cloneElement","payment_methods","surname1","surname2","address","city","zip","dni","gender","country_of_origin","emptyGuardian","relation","emptyAttendee","price_term","payment_comments","birth_date","other_comments","image_agreement","image_agreement_external","enrolment_status","default_payment_method","loadingContext","startLoading","stopLoading","button","margin","Attendee","children","setNewStudent","addStudentId","newStudent","currentStudent","deleteStudent","addNewGuardian","loadingCtx","sendGrantLetter","sendGrantEmail","sendEnrollmentAgreement","p","px","e","StudentsDataService","PaymentsDataService","deleteMany","GuardiansDataService","deleteFullStudent","changedBody","InputProps","endAdornment","InputAdornment","position","multiline","rowsMax","s","startIcon","downloadSubresource","downloadAttendances","student_guardian_relations","Guardian","guardianId","deleteGuardianId","addGuardianId","deleteNewGuardian","newGuardian","guardian","setGuardian","StudentGuardianDataService","postWithId","maxWidth","backgroundColor","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","PaymentCard","payment","updatePayment","deletePayment","newPayment","addPaymentId","student_id","expanded","setExpanded","sendReceipt","sendReceiptEmail","quantity","date","Card","CardHeader","Avatar","subheader","CardActions","disableSpacing","clsx","Collapse","in","timeout","unmountOnExit","CardContent","DialogActions","getDefaultValues","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","newLine","Payments","paymentIds","deletePaymentFromStudent","setPayments","newPaymentCard","setNewPaymentCard","getMany","sort","p1","p2","localeCompare","_","Typography","tabContext","currentTab","goTo","eventFromSchedule","schedule","daysOfWeek","groupId","startTime","endTime","textColor","extendedProps","evaluate","expression","console","log","args","Scheduler","snapDuration","allowView","viewUrl","allowDelete","selectable","scheduleIds","viewStudent","deleteCustom","setScheduleIds","onEventSelected","onEventClick","onEventChange","editable","useTheme","calendarRef","createRef","StyleWrapper","styled","div","setSchedules","SchedulesDataService","withScheduleInfo","info","getDay","toLocaleTimeString","hour12","open","currentSchedule","setCurrentSchedule","handleClose","minHeight","Dialog","onClose","DialogTitle","filter","plugins","timeGridPlugin","interactionPlugin","initialView","firstDay","ref","buttonText","prev","next","prevYear","nextYear","today","month","week","day","selectMirror","dayMaxEvents","weekends","events","eventAdd","eventChange","clickInfo","eventRemove","selectInfo","view","calendar","unselect","start","end","eventContent","eventClick","handleClickOpen","eventTimeFormat","hour","minute","eventResize","eventDrop","Schedule","padding","alignItems","input","iconButton","SearchBar","searchTitle","onSearch","Paper","InputBase","placeholder","onKeyPress","preventDefault","themeContext","switchTheme","ExportSearchChip","searchTermField","searchTerm","exportAll","getFilters","Chip","size","downloadCsv","overflow","list","searchAndFilters","pagination","chip","selectedAvatar","chips","heading","typography","pxToRem","fontWeight","fontWeightRegular","noResults","textAlign","ItemsList","setCurrentItemId","auxFields","displayText","onItemClick","secondaryDisplayNameField","secondaryAction","secondaryActionNeeds","secondaryActionTooltip","secondaryActionIcon","secondaryActionCallable","withAvatar","withFiltersBox","currentItemId","items","setItems","displayNameField","usableFilters","defaultSearchBy","searchByOptions","searchBarLabel","exportPage","exportAllPages","setSearchTerm","f","initialValue","setFilters","searchBy","setSearchBy","setPage","count","setCount","fromEntries","search","getAll","Set","target","Accordion","AccordionSummary","expandIcon","AccordionDetails","tooltip","Pagination","showFirstButton","showLastButton","siblingCount","boundaryCount","List","item","ListItem","ListItemAvatar","charAt","ListItemText","ListItemSecondaryAction","edge","ItemsListSecondary","deleteTooltip","delete_message","onItemDeleted","ItemsListTerciary","dataServiceSR","add_message","onAdded","newItem","Transition","forwardRef","Slide","direction","box","appBar","AddDeleteSubresource","parentItemDataService","itemDataService","add_message_confirm","resourceName","onSubresourceAdded","onSubresourceDeleted","addDialogOpen","setAddDialogOpen","handleAddDialogClose","fullScreen","TransitionComponent","AppBar","Toolbar","autoFocus","m","a11yProps","index","TabFrame","other","role","hidden","contentPanel","boxSizing","content","overflowX","overflowY","tab","Student","currentStudentId","student","setStudent","setNewGuardian","setValue","elevation","square","Tabs","indicatorColor","scrollButtons","Tab","contact","axis","containerStyle","onChangeIndex","dir","is_base","course_id","day_week","start_time","end_time","newEvent","calendarApi","addEvent","revert","payment_id","StudentsCourseDataService","CoursesDataService","gId","ItemsListMain","downloadOneCsv","left","fab","bottom","right","RoleSelect","invitationsService","inviteUser","userEmail","user_email","role_id","UserPerson","nullable","UsersDataService","TeachersDataService","setFieldTouched","deleteFullUser","DirtyCheckbox","Checkbox","checked","symmetricDifference","setA","setB","_difference","elem","has","add","User","currentUserId","deleteUser","root2","formControl","maxHeight","minWidth","dialog","RoomSchedule","RoomDetails","setNewRoom","newRoom","RoomsDataService","Room","currentRoomId","deleteRoom","addRoomId","room","setRoom","downloadCalendar","resource_id","calendar_id","TeacherDetails","TeacherSchedule","setSchedulesIds","Teacher","currentTeacherId","setNewTeacher","newTeacher","addTeacherId","deleteTeacher","TeachersCoursesDataService","c","choose","marginBottom","CourseDetails","addCourseId","setNewCourse","newCourse","currentCourse","updateCurrentCourse","deleteCourse","history","useHistory","openDownloadAttendanceList","setOpenDownloadAttendanceList","is_published","formik2","startDate","endDate","DialogContent","id_","deleteFullCourse","LabelsSelection","FormControlLabel","control","CourseLabels","a","b","difference","jobs","CourseLabelsDataService","labels","CourseSchedule","Course","currentCourseId","course","setCourse","CourseStudentsDataService","defaultValue","CourseTeachersDataService","CourseRoomsDataService","bulkEmailService","bulkSend","courseIds","subject","emailPreference","studentEnrolmentStatus","files","FormData","append","EmailTo","addTo","fullWidth","textBox","border","attach","card","Routes","path","setStudents","setCurrentStudentId","handleError","URLSearchParams","Grid","container","xs","Fab","icon","PersonIcon","setCourses","setCurrentCourseId","ClassIcon","setTeachers","setCurrentTeacherId","SchoolIcon","setRooms","setCurrentRoomId","RoomIcon","AccountBalanceIcon","setUsers","setCurrentUserId","setOpen","userId","ContactMailIcon","groups","setGroups","setTo","selectedFiles","setSelectedFiles","g","rows","selectedFile","titleTypographyProps","multiple","htmlFor","EmailIcon","authenticationService","login","username","password","totp","rememberMe","auth","logout","isLoggedIn","fallbackLng","resources","eng","translation","translationEN","cat","translationCAT","i18n","use","Backend","LanguageDetector","initReactI18next","init","detection","checkWhitelist","debug","whitelist","interpolation","escapeValue","getCurrentLanguage","localStorage","getItem","TranslateButton","selectedLanguage","i18next","changeLanguage","ThemeButton","themeCtx","TeacherDashboardButton","languageMap","active","toolbar","justifyContent","mixins","grow","flexGrow","withRouter","selected","anchorEl","setAnchorEl","isMenuOpen","Boolean","handleMenuClose","anchorElLan","setAnchorElLan","isLanguageMenuOpen","handleLanguageMenuClose","languageMenu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","language","userMenuId","userMenu","handleDrawerOpen","menuButton","hide","noWrap","currentTarget","drawerWidth","zIndex","drawer","easing","sharp","leavingScreen","background","appBarShift","enteringScreen","flexShrink","whiteSpace","drawerOpen","drawerClose","breakpoints","up","backdrop","flexFlow","selectedIcon","HomePage","baseRouter","currentRoute","useRouteMatch","useLocation","handleDrawerClose","setLoading","routerRef","CssBaseline","Provider","changeTheme","Drawer","paper","route","prop","Link","ListItemIcon","exact","Backdrop","CircularProgress","passwordResetService","reset","token","recaptcha","startReset","useOnMount","field","details","verticalAlign","down","cursor","md","remember","LoginPage","mobile","useMediaQuery","setRecaptcha","showRecaptcha","setShowRecaptcha","setLogged","push","val","Number","align","justify","resetPa","sitekey","signup","SignupPage","step","setStep","totpUri","setTotpUri","query","password2","signupService","result","isValid","ResetPage","XamfraLogo","mx","preEnrolmentService","getCourses","postPreEnrollment","getLocalisedWeekday","dayOfWeek","resultDate","getTime","setDate","getNextDayOfWeek","toLocaleString","weekday","textSchedulesForCourse","slice","XamfraHeader","cards","buttons","bullet","pos","isUnderage","birthDateString","birthDate","age","PreEnrolmentPage","can_pay_80","skipped","setSkipped","availableCourses","setAvailableCourses","filteredCourses","setFilteredCourses","chosenCourses","setChosenCourses","raw_economic_comments","setRawEconomicComments","isStepSkipped","activeStep","setActiveStep","steps","handleSkip","isStepOptional","Error","prevActiveStep","prevSkipped","newSkipped","__person1__name","__person2__name","__person1__surname1","__person1__surname2","__person1__email","__person1__phone","__person1__relation","__person1__is_studying","__person1__is_working","__person1__career","__person1__education_entity","__person1__education_year","__person2__surname1","__person2__surname2","__person2__email","__person2__phone","__person2__relation","__person2__is_studying","__person2__is_working","__person2__career","__person2__education_entity","__person2__education_year","schema","notOneOf","years_in_xamfra","prefix","some","l","fieldsToValidatePerStep","secondaryListItemTextForCourse","description","canNotGoNext","courseToListItem","disableRipple","tabIndex","autocomplete","defaultChecked","BottomNavigation","showLabels","MobileStepper","nextButton","scrollTo","backButton","HomeButton","welcomeMessage","WelcomeTitle","hi","welcomeEmoji","setWelcomeEmoji","onMouseOver","onMouseOut","CourseCard","courseId","gutterBottom","MoreButton","clickable","NotATeacherTitle","rootBase","more","TeacherDashboardPage","maxPage","setMaxPage","loadedUntilPage","setLoadedUntilPage","attemptLoadedUntilPage","setAttemptLoadedUntilPage","attemptingLoad","setAttemptingLoad","TeacherCoursesService","newCourses","sm","NotFound","selectStatus","AttendanceItem","setAttendance","handleOpenCommentBox","labelId","newStatus","outlinedInputClasses","focused","notchedOutline","useOutlinedInputStyles","dense","FormControl","Select","stopPropagation","OutlinedInput","CommentDialog","commentBox","setCommentBoxValue","handleCloseCommentBox","commentBoxValue","handleCloseCancelCommentBox","paddingBottom","fabs","Attendance","initialAttendances","setInitialAttendances","attendances","setAttendances","getAddedStudentIds","studentsInInitial","hasChanges","initial","updated","hasChangesGlobal","hasUpdatedAttendances","setDirty","allDone","setAllDone","createEmptyAttendances","newAttendances","comment","loadAttendances","AttendanceService","toISOString","setCommentBox","commentBoxId","setCommentBoxId","targetStatus","markAll","promises","addedStudentIds","obj","getNewAttendances","updatedAttendances","initialAttendance","listCard","header","AttendancePage","App","setTheme","appliedTheme","_setNeeds","cancel","confirmDialog","setConfirmDialog","handleCloseConfirm","ThemeProvider","maxSnack","setItem","cancelCallable","basename","DialogContentText","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","Helmet","nonce","rel","getElementById"],"mappings":"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","file":"static/js/main.57c84a8e.chunk.js","sourcesContent":["import {createMuiTheme} from \"@material-ui/core/styles\";\n\nexport const lightTheme = createMuiTheme({\n  palette: {\n    type: 'light',\n    primary: {\n      main: '#e98300',\n      light: '#ffb342',\n      dark: '#b05500',\n      contrastText: '#000000',  // todo deprecate\n      emphasisText: {\n        high: '#000000DF',\n        medium: '#00000098',\n        low: '#0000005E',\n      },\n    },\n    secondary: {\n      main: '#934d98',\n      light: '#c57bc9',\n      dark: '#63206a',\n      contrastText: '#000000',  // todo deprecate\n      emphasisText: {\n        high: '#000000DF',\n        medium: '#00000098',\n        low: '#0000005E',\n      },\n\n    },\n    neutral: {\n      main: '#ffffff',\n      contrastText: '#000000',\n      emphasisText: {\n        high: '#000000DF',\n        medium: '#00000098',\n        low: '#0000005E',\n      },\n      status: {\n        dirty: '#fbc02d',\n        success: '#43a047',\n        error: '#ff5252'\n      }\n    }\n  }\n})\n\nexport const darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#934d98',\n      light: '#c57bc9',\n      dark: '#63206a',\n      contrastText: '#000000',  // todo deprecate\n      emphasisText: {\n        high: '#000000DF',\n        medium: '#00000098',\n        low: '#0000005E',\n      },\n    },\n    secondary: {\n      main: '#ffcc80',\n      light: '#ffffb0',\n      dark: '#ca9b52',\n      contrastText: '#000000',  // todo deprecate\n      emphasisText: {\n        high: '#000000DF',\n        medium: '#00000098',\n        low: '#0000005E',\n      },\n    },\n    neutral: {\n      main: '#1f1f1f',\n      contrastText: '#ffffff',  // todo deprecate\n      emphasisText: {\n        high: '#ffffffDF',\n        medium: '#ffffff98',\n        low: '#ffffff5E',\n      },\n      status: {\n        dirty: '#ffcf3d',\n        success: '#c0e882',\n        error: '#ff5252'\n      }\n    }\n  }\n})\n","import React from \"react\";\n\nconst confirmContext = React.createContext(\n    {confirm: (title, subtitle, successCallable, cancelCallable=null) => {}}); // Create a context object\n\nexport {\n  confirmContext // Export it so it can be used by other Components\n};","import React from \"react\";\n\nconst userContext = React.createContext({\n  user: null, \n  setUser: () => {}, \n  needs: [], \n  setNeeds: () => {},\n  teacher: [],\n  setTeacher: () => {}\n}); // Create a context object\n\nexport {\n  userContext // Export it so it can be used by other Components\n};","import {Redirect, Route} from 'react-router-dom';\nimport React from \"react\";\nimport {userContext} from '../_context/user-context';\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n    const userCtx = React.useContext(userContext);\n    return (\n        <Route {...rest} render={props =>\n        {\n          if (!userCtx[\"user\"][\"logged\"]) {\n            // not logged in so redirect to login page with the return url\n            return <Redirect to={{ pathname: `/login`, state: { from: props.location } }} />\n            }\n\n            // authorised so return component\n            return <Component {...props} {...rest}/>\n      }}/>\n    );\n}\n\n\nexport default PrivateRoute;","import Cookies from 'js-cookie';\n\nexport function authHeader() {\n    // return authorization header with jwt token\n    return { 'X-CSRFToken': Cookies.get('X-CSRF-TOKEN')};\n}","export const API_VERSION = process.env.REACT_APP_API_VERSION;\nexport const BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nexport const RECAPTCHA = process.env.REACT_APP_RECAPTCHA;\nexport const PUBLIC_URL = process.env.PUBLIC_URL;\nexport const CHECK_NEEDS = process.env.REACT_CHECK_NEEDS === \"true\";\nexport const DOCS_URL = process.env.REACT_APP_DOCS_URL;","import {authHeader} from \"../_helpers/auth-header\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\n\nconst axios = require('axios');  // todo default headers\n\nexport default function serviceFactory(resource, subresource=null, serviceName=null, baseUrl=null, apiVersion=null){  // todo subresource for all methods?\n    \n    baseUrl = baseUrl === null? BACKEND_URL: baseUrl;\n    serviceName = serviceName === null? 'api': serviceName;\n    apiVersion = apiVersion === null? API_VERSION: apiVersion;\n    const url = `${baseUrl}/${serviceName}/${apiVersion}`;\n\n    return class {\n        \n\n        getAll(likeSearchText=null, page = 1, include=null, filters=null, parent_id=null) {\n            return new Promise(function (resolve, reject) {\n\n                let myFilters = {\n                        \"page\": page,\n                        \"include\": include === null? null: JSON.stringify(include)\n                    };\n                if (likeSearchText !== null) {\n                    myFilters[`filter.${likeSearchText.name}.match`] = likeSearchText.value;\n                }\n\n                if (filters !== null) {\n                    Object.keys(filters).forEach((key) => {\n                    myFilters[`filter.${key}.eq`] = filters[key];\n                })\n                }\n                \n                axios({\n                    method: 'get',\n                    url: `${url}/${resource}${subresource===null? '': `/${parent_id}/${subresource}`}`,\n                    params: myFilters,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()  // todo are auth headers needed for gets?\n                    }\n                }).then(function (response) {\n                        resolve(response.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        getOne(id, include=null, expect_batch=false) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'get',\n                    url: `${url}/${resource}/${id}`,\n                    params: {\n                        \"include\": include === null? null: JSON.stringify(include)\n                    },\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()  // todo are auth headers needed for gets?\n                    }\n                }).then(function (response) {\n                        resolve(response.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        getMany(ids) {\n            return new Promise((resolve, reject) => {\n                if (ids.length === 0) {\n                    resolve([]);\n                }\n                this.getOne(ids.join(','))\n                    .then(res => {\n                    if (ids.length === 1) {\n                        resolve([res]);\n                    } else {\n                        resolve(res);\n                    }\n                    })\n                    .catch(err => {\n                        reject(err);\n                    })\n            });\n        }\n\n        patch({id, body, initial_values = null}) {\n            if (initial_values !== null) {\n                var dirtyBody = Object.keys(body).reduce(function (filtered, key) {\n                    if (!(key in initial_values && initial_values[key] === body[key])){\n                        filtered[key] = body[key];\n                    }\n                    return filtered;\n                }, {});\n            }\n\n            if (\"id\" in dirtyBody) {\n                delete dirtyBody[\"id\"];  // no id is to be sent in the body, since it is sent as url param\n            }\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'patch',\n                    url: `${url}/${resource}/${id}`,\n                    data: dirtyBody,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (response) {\n                        resolve(response.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        post(body, subresourcId=null) {\n            if (\"id\" in body) delete body[\"id\"];  // no id is to be sent in the body, since it is sent as url param\n\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${url}/${resource}${subresource !== null? `/${subresourcId}/${subresource}`: ''}`,\n                    data: body,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        // todo arent post and postwith id nearly same? merge\n\n        postWithId(id, subresourceid=null) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${url}/${resource}/${id}${subresourceid === null?\n                    '': `/${subresource}/${subresourceid}`}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        delete(id, subresourceId=null) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'delete',\n                    url: `${url}/${resource}/${id}${subresource !== null? `/${subresource}/${subresourceId}`: ''}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (response) {\n                        resolve(response);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        deleteMany(ids) {\n            return Promise.all(ids.map(id => (this.delete(id))));\n        }\n\n        downloadCsv(searchtermfield, searchterm, page = 1, filters=null) {\n            return new Promise(function (resolve, reject) {\n                let myFilters = {\n                        \"page\": page\n                    };\n\n                if (searchtermfield !== null){\n                    myFilters[`filter.${searchtermfield}.like`]= `%${searchterm}%`;\n                }\n\n                if (filters !== null){\n                    Object.keys(filters).forEach((key) => {\n                    myFilters[`filter.${key}.eq`] = filters[key];\n                })\n                }\n\n                axios({\n                    url: `${url}/${resource}`,\n                    method: 'GET',\n                    responseType: 'blob', // important\n                    params: myFilters,\n                    headers: {\n                        ...{\n                            'Accept': 'text/csv',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(response => {\n                    let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                    if (filename === null) filename = \"export.csv\";\n\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', filename);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    resolve();\n                }).catch(function (err) {\n                    reject(err);\n                });\n\n            });\n        }\n\n\n        downloadOneCsv(id) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    url: `${url}/${resource}/${id}`,\n                    method: 'GET',\n                    responseType: 'blob', // important\n                    headers: {\n                        ...{\n                            'Accept': 'text/csv',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(response => {\n                    /*\n                    _download(response){\n                let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                if (filename === null) filename = \"export.csv\";\n\n                const url = window.URL.createObjectURL(new Blob([response.data]));\n                const link = document.createElement('a');\n                link.href = url;\n                link.setAttribute('download', filename);\n                document.body.appendChild(link);\n                link.click();\n                link.remove();\n                resolve();\n        }\n                    **/\n                    let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                    if (filename === null) filename = \"export.csv\";\n\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', filename);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    resolve();\n                }).catch(function (err) {\n                    reject(err);\n                });\n\n            });\n        }\n\n\n        downloadSubresource(id, subresource, params) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    url: `${url}/${resource}/${id}/${subresource}`,\n                    method: 'POST',\n                    params: params,\n                    responseType: 'blob', // important\n                    headers: {\n                        ...{\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(response => {\n                    let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', filename);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    resolve();\n                }).catch(function (err) {\n                    reject(err);\n                });\n\n            });\n        }\n    }\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('students'))();\n\n","import IconButton from \"@material-ui/core/IconButton\";\nimport PersonAddIcon from \"@material-ui/icons/PersonAdd\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport React from \"react\";\n\nexport const IconButtonSkeleton = ({...props}) => {\n    return <Skeleton {...props} variant=\"circle\">\n                <IconButton><PersonAddIcon /></IconButton>\n          </Skeleton>\n}","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport {makeStyles} from \"@material-ui/core\";\nimport createStyles from \"@material-ui/styles/createStyles\";\n\n\nconst useStyles = makeStyles(theme => (createStyles({\n  root: dirty => ({\n          '& label.Mui-focused':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},\n          '& .MuiInput-underline:after': {borderBottomColor: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},\n          '& label':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium}\n  })\n})));\n\n\nconst DirtyTextField = (props) => {\n    const name = props.name;\n    const formik = props.formik;\n    const dirty = props.noDirty === true? false: formik.values[name] !== formik.initialValues[name];\n    const classes = useStyles(dirty);\n    const formikProps = {\n        value: formik.values[name] === undefined? '': formik.values[name],  // todo why is this being called with undefined tho\n        onChange: formik.handleChange,\n        onBlur: formik.handleBlur,\n        error: formik.status  || formik.errors[name] !== undefined,\n        helperText: formik.touched[name] && formik.errors[name]\n    }\n    return <TextField className={classes.root}\n       InputLabelProps={{shrink: formik.values[name] !== ''}}\n      {...formikProps}\n       {...props}\n                  />\n}\n\nexport default DirtyTextField;","export const countries = [\n    { code: 'ES', label: 'Spain', phone: '34' },\n  { code: 'AD', label: 'Andorra', phone: '376' },\n  { code: 'AE', label: 'United Arab Emirates', phone: '971' },\n  { code: 'AF', label: 'Afghanistan', phone: '93' },\n  { code: 'AG', label: 'Antigua and Barbuda', phone: '1-268' },\n  { code: 'AI', label: 'Anguilla', phone: '1-264' },\n  { code: 'AL', label: 'Albania', phone: '355' },\n  { code: 'AM', label: 'Armenia', phone: '374' },\n  { code: 'AO', label: 'Angola', phone: '244' },\n  { code: 'AQ', label: 'Antarctica', phone: '672' },\n  { code: 'AR', label: 'Argentina', phone: '54' },\n  { code: 'AS', label: 'American Samoa', phone: '1-684' },\n  { code: 'AT', label: 'Austria', phone: '43' },\n  { code: 'AU', label: 'Australia', phone: '61', suggested: true },\n  { code: 'AW', label: 'Aruba', phone: '297' },\n  { code: 'AX', label: 'Alland Islands', phone: '358' },\n  { code: 'AZ', label: 'Azerbaijan', phone: '994' },\n  { code: 'BA', label: 'Bosnia and Herzegovina', phone: '387' },\n  { code: 'BB', label: 'Barbados', phone: '1-246' },\n  { code: 'BD', label: 'Bangladesh', phone: '880' },\n  { code: 'BE', label: 'Belgium', phone: '32' },\n  { code: 'BF', label: 'Burkina Faso', phone: '226' },\n  { code: 'BG', label: 'Bulgaria', phone: '359' },\n  { code: 'BH', label: 'Bahrain', phone: '973' },\n  { code: 'BI', label: 'Burundi', phone: '257' },\n  { code: 'BJ', label: 'Benin', phone: '229' },\n  { code: 'BL', label: 'Saint Barthelemy', phone: '590' },\n  { code: 'BM', label: 'Bermuda', phone: '1-441' },\n  { code: 'BN', label: 'Brunei Darussalam', phone: '673' },\n  { code: 'BO', label: 'Bolivia', phone: '591' },\n  { code: 'BR', label: 'Brazil', phone: '55' },\n  { code: 'BS', label: 'Bahamas', phone: '1-242' },\n  { code: 'BT', label: 'Bhutan', phone: '975' },\n  { code: 'BV', label: 'Bouvet Island', phone: '47' },\n  { code: 'BW', label: 'Botswana', phone: '267' },\n  { code: 'BY', label: 'Belarus', phone: '375' },\n  { code: 'BZ', label: 'Belize', phone: '501' },\n  { code: 'CA', label: 'Canada', phone: '1', suggested: true },\n  { code: 'CC', label: 'Cocos (Keeling) Islands', phone: '61' },\n  { code: 'CD', label: 'Congo, Democratic Republic of the', phone: '243' },\n  { code: 'CF', label: 'Central African Republic', phone: '236' },\n  { code: 'CG', label: 'Congo, Republic of the', phone: '242' },\n  { code: 'CH', label: 'Switzerland', phone: '41' },\n  { code: 'CI', label: \"Cote d'Ivoire\", phone: '225' },\n  { code: 'CK', label: 'Cook Islands', phone: '682' },\n  { code: 'CL', label: 'Chile', phone: '56' },\n  { code: 'CM', label: 'Cameroon', phone: '237' },\n  { code: 'CN', label: 'China', phone: '86' },\n  { code: 'CO', label: 'Colombia', phone: '57' },\n  { code: 'CR', label: 'Costa Rica', phone: '506' },\n  { code: 'CU', label: 'Cuba', phone: '53' },\n  { code: 'CV', label: 'Cape Verde', phone: '238' },\n  { code: 'CW', label: 'Curacao', phone: '599' },\n  { code: 'CX', label: 'Christmas Island', phone: '61' },\n  { code: 'CY', label: 'Cyprus', phone: '357' },\n  { code: 'CZ', label: 'Czech Republic', phone: '420' },\n  { code: 'DE', label: 'Germany', phone: '49', suggested: true },\n  { code: 'DJ', label: 'Djibouti', phone: '253' },\n  { code: 'DK', label: 'Denmark', phone: '45' },\n  { code: 'DM', label: 'Dominica', phone: '1-767' },\n  { code: 'DO', label: 'Dominican Republic', phone: '1-809' },\n  { code: 'DZ', label: 'Algeria', phone: '213' },\n  { code: 'EC', label: 'Ecuador', phone: '593' },\n  { code: 'EE', label: 'Estonia', phone: '372' },\n  { code: 'EG', label: 'Egypt', phone: '20' },\n  { code: 'EH', label: 'Western Sahara', phone: '212' },\n  { code: 'ER', label: 'Eritrea', phone: '291' },\n  { code: 'ET', label: 'Ethiopia', phone: '251' },\n  { code: 'FI', label: 'Finland', phone: '358' },\n  { code: 'FJ', label: 'Fiji', phone: '679' },\n  { code: 'FK', label: 'Falkland Islands (Malvinas)', phone: '500' },\n  { code: 'FM', label: 'Micronesia, Federated States of', phone: '691' },\n  { code: 'FO', label: 'Faroe Islands', phone: '298' },\n  { code: 'FR', label: 'France', phone: '33', suggested: true },\n  { code: 'GA', label: 'Gabon', phone: '241' },\n  { code: 'GB', label: 'United Kingdom', phone: '44' },\n  { code: 'GD', label: 'Grenada', phone: '1-473' },\n  { code: 'GE', label: 'Georgia', phone: '995' },\n  { code: 'GF', label: 'French Guiana', phone: '594' },\n  { code: 'GG', label: 'Guernsey', phone: '44' },\n  { code: 'GH', label: 'Ghana', phone: '233' },\n  { code: 'GI', label: 'Gibraltar', phone: '350' },\n  { code: 'GL', label: 'Greenland', phone: '299' },\n  { code: 'GM', label: 'Gambia', phone: '220' },\n  { code: 'GN', label: 'Guinea', phone: '224' },\n  { code: 'GP', label: 'Guadeloupe', phone: '590' },\n  { code: 'GQ', label: 'Equatorial Guinea', phone: '240' },\n  { code: 'GR', label: 'Greece', phone: '30' },\n  { code: 'GS', label: 'South Georgia and the South Sandwich Islands', phone: '500' },\n  { code: 'GT', label: 'Guatemala', phone: '502' },\n  { code: 'GU', label: 'Guam', phone: '1-671' },\n  { code: 'GW', label: 'Guinea-Bissau', phone: '245' },\n  { code: 'GY', label: 'Guyana', phone: '592' },\n  { code: 'HK', label: 'Hong Kong', phone: '852' },\n  { code: 'HM', label: 'Heard Island and McDonald Islands', phone: '672' },\n  { code: 'HN', label: 'Honduras', phone: '504' },\n  { code: 'HR', label: 'Croatia', phone: '385' },\n  { code: 'HT', label: 'Haiti', phone: '509' },\n  { code: 'HU', label: 'Hungary', phone: '36' },\n  { code: 'ID', label: 'Indonesia', phone: '62' },\n  { code: 'IE', label: 'Ireland', phone: '353' },\n  { code: 'IL', label: 'Israel', phone: '972' },\n  { code: 'IM', label: 'Isle of Man', phone: '44' },\n  { code: 'IN', label: 'India', phone: '91' },\n  { code: 'IO', label: 'British Indian Ocean Territory', phone: '246' },\n  { code: 'IQ', label: 'Iraq', phone: '964' },\n  { code: 'IR', label: 'Iran, Islamic Republic of', phone: '98' },\n  { code: 'IS', label: 'Iceland', phone: '354' },\n  { code: 'IT', label: 'Italy', phone: '39' },\n  { code: 'JE', label: 'Jersey', phone: '44' },\n  { code: 'JM', label: 'Jamaica', phone: '1-876' },\n  { code: 'JO', label: 'Jordan', phone: '962' },\n  { code: 'JP', label: 'Japan', phone: '81', suggested: true },\n  { code: 'KE', label: 'Kenya', phone: '254' },\n  { code: 'KG', label: 'Kyrgyzstan', phone: '996' },\n  { code: 'KH', label: 'Cambodia', phone: '855' },\n  { code: 'KI', label: 'Kiribati', phone: '686' },\n  { code: 'KM', label: 'Comoros', phone: '269' },\n  { code: 'KN', label: 'Saint Kitts and Nevis', phone: '1-869' },\n  { code: 'KP', label: \"Korea, Democratic People's Republic of\", phone: '850' },\n  { code: 'KR', label: 'Korea, Republic of', phone: '82' },\n  { code: 'KW', label: 'Kuwait', phone: '965' },\n  { code: 'KY', label: 'Cayman Islands', phone: '1-345' },\n  { code: 'KZ', label: 'Kazakhstan', phone: '7' },\n  { code: 'LA', label: \"Lao People's Democratic Republic\", phone: '856' },\n  { code: 'LB', label: 'Lebanon', phone: '961' },\n  { code: 'LC', label: 'Saint Lucia', phone: '1-758' },\n  { code: 'LI', label: 'Liechtenstein', phone: '423' },\n  { code: 'LK', label: 'Sri Lanka', phone: '94' },\n  { code: 'LR', label: 'Liberia', phone: '231' },\n  { code: 'LS', label: 'Lesotho', phone: '266' },\n  { code: 'LT', label: 'Lithuania', phone: '370' },\n  { code: 'LU', label: 'Luxembourg', phone: '352' },\n  { code: 'LV', label: 'Latvia', phone: '371' },\n  { code: 'LY', label: 'Libya', phone: '218' },\n  { code: 'MA', label: 'Morocco', phone: '212' },\n  { code: 'MC', label: 'Monaco', phone: '377' },\n  { code: 'MD', label: 'Moldova, Republic of', phone: '373' },\n  { code: 'ME', label: 'Montenegro', phone: '382' },\n  { code: 'MF', label: 'Saint Martin (French part)', phone: '590' },\n  { code: 'MG', label: 'Madagascar', phone: '261' },\n  { code: 'MH', label: 'Marshall Islands', phone: '692' },\n  { code: 'MK', label: 'Macedonia, the Former Yugoslav Republic of', phone: '389' },\n  { code: 'ML', label: 'Mali', phone: '223' },\n  { code: 'MM', label: 'Myanmar', phone: '95' },\n  { code: 'MN', label: 'Mongolia', phone: '976' },\n  { code: 'MO', label: 'Macao', phone: '853' },\n  { code: 'MP', label: 'Northern Mariana Islands', phone: '1-670' },\n  { code: 'MQ', label: 'Martinique', phone: '596' },\n  { code: 'MR', label: 'Mauritania', phone: '222' },\n  { code: 'MS', label: 'Montserrat', phone: '1-664' },\n  { code: 'MT', label: 'Malta', phone: '356' },\n  { code: 'MU', label: 'Mauritius', phone: '230' },\n  { code: 'MV', label: 'Maldives', phone: '960' },\n  { code: 'MW', label: 'Malawi', phone: '265' },\n  { code: 'MX', label: 'Mexico', phone: '52' },\n  { code: 'MY', label: 'Malaysia', phone: '60' },\n  { code: 'MZ', label: 'Mozambique', phone: '258' },\n  { code: 'NA', label: 'Namibia', phone: '264' },\n  { code: 'NC', label: 'New Caledonia', phone: '687' },\n  { code: 'NE', label: 'Niger', phone: '227' },\n  { code: 'NF', label: 'Norfolk Island', phone: '672' },\n  { code: 'NG', label: 'Nigeria', phone: '234' },\n  { code: 'NI', label: 'Nicaragua', phone: '505' },\n  { code: 'NL', label: 'Netherlands', phone: '31' },\n  { code: 'NO', label: 'Norway', phone: '47' },\n  { code: 'NP', label: 'Nepal', phone: '977' },\n  { code: 'NR', label: 'Nauru', phone: '674' },\n  { code: 'NU', label: 'Niue', phone: '683' },\n  { code: 'NZ', label: 'New Zealand', phone: '64' },\n  { code: 'OM', label: 'Oman', phone: '968' },\n  { code: 'PA', label: 'Panama', phone: '507' },\n  { code: 'PE', label: 'Peru', phone: '51' },\n  { code: 'PF', label: 'French Polynesia', phone: '689' },\n  { code: 'PG', label: 'Papua New Guinea', phone: '675' },\n  { code: 'PH', label: 'Philippines', phone: '63' },\n  { code: 'PK', label: 'Pakistan', phone: '92' },\n  { code: 'PL', label: 'Poland', phone: '48' },\n  { code: 'PM', label: 'Saint Pierre and Miquelon', phone: '508' },\n  { code: 'PN', label: 'Pitcairn', phone: '870' },\n  { code: 'PR', label: 'Puerto Rico', phone: '1' },\n  { code: 'PS', label: 'Palestine, State of', phone: '970' },\n  { code: 'PT', label: 'Portugal', phone: '351' },\n  { code: 'PW', label: 'Palau', phone: '680' },\n  { code: 'PY', label: 'Paraguay', phone: '595' },\n  { code: 'QA', label: 'Qatar', phone: '974' },\n  { code: 'RE', label: 'Reunion', phone: '262' },\n  { code: 'RO', label: 'Romania', phone: '40' },\n  { code: 'RS', label: 'Serbia', phone: '381' },\n  { code: 'RU', label: 'Russian Federation', phone: '7' },\n  { code: 'RW', label: 'Rwanda', phone: '250' },\n  { code: 'SA', label: 'Saudi Arabia', phone: '966' },\n  { code: 'SB', label: 'Solomon Islands', phone: '677' },\n  { code: 'SC', label: 'Seychelles', phone: '248' },\n  { code: 'SD', label: 'Sudan', phone: '249' },\n  { code: 'SE', label: 'Sweden', phone: '46' },\n  { code: 'SG', label: 'Singapore', phone: '65' },\n  { code: 'SH', label: 'Saint Helena', phone: '290' },\n  { code: 'SI', label: 'Slovenia', phone: '386' },\n  { code: 'SJ', label: 'Svalbard and Jan Mayen', phone: '47' },\n  { code: 'SK', label: 'Slovakia', phone: '421' },\n  { code: 'SL', label: 'Sierra Leone', phone: '232' },\n  { code: 'SM', label: 'San Marino', phone: '378' },\n  { code: 'SN', label: 'Senegal', phone: '221' },\n  { code: 'SO', label: 'Somalia', phone: '252' },\n  { code: 'SR', label: 'Suriname', phone: '597' },\n  { code: 'SS', label: 'South Sudan', phone: '211' },\n  { code: 'ST', label: 'Sao Tome and Principe', phone: '239' },\n  { code: 'SV', label: 'El Salvador', phone: '503' },\n  { code: 'SX', label: 'Sint Maarten (Dutch part)', phone: '1-721' },\n  { code: 'SY', label: 'Syrian Arab Republic', phone: '963' },\n  { code: 'SZ', label: 'Swaziland', phone: '268' },\n  { code: 'TC', label: 'Turks and Caicos Islands', phone: '1-649' },\n  { code: 'TD', label: 'Chad', phone: '235' },\n  { code: 'TF', label: 'French Southern Territories', phone: '262' },\n  { code: 'TG', label: 'Togo', phone: '228' },\n  { code: 'TH', label: 'Thailand', phone: '66' },\n  { code: 'TJ', label: 'Tajikistan', phone: '992' },\n  { code: 'TK', label: 'Tokelau', phone: '690' },\n  { code: 'TL', label: 'Timor-Leste', phone: '670' },\n  { code: 'TM', label: 'Turkmenistan', phone: '993' },\n  { code: 'TN', label: 'Tunisia', phone: '216' },\n  { code: 'TO', label: 'Tonga', phone: '676' },\n  { code: 'TR', label: 'Turkey', phone: '90' },\n  { code: 'TT', label: 'Trinidad and Tobago', phone: '1-868' },\n  { code: 'TV', label: 'Tuvalu', phone: '688' },\n  { code: 'TW', label: 'Taiwan, Province of China', phone: '886' },\n  { code: 'TZ', label: 'United Republic of Tanzania', phone: '255' },\n  { code: 'UA', label: 'Ukraine', phone: '380' },\n  { code: 'UG', label: 'Uganda', phone: '256' },\n  { code: 'US', label: 'United States', phone: '1', suggested: true },\n  { code: 'UY', label: 'Uruguay', phone: '598' },\n  { code: 'UZ', label: 'Uzbekistan', phone: '998' },\n  { code: 'VA', label: 'Holy See (Vatican City State)', phone: '379' },\n  { code: 'VC', label: 'Saint Vincent and the Grenadines', phone: '1-784' },\n  { code: 'VE', label: 'Venezuela', phone: '58' },\n  { code: 'VG', label: 'British Virgin Islands', phone: '1-284' },\n  { code: 'VI', label: 'US Virgin Islands', phone: '1-340' },\n  { code: 'VN', label: 'Vietnam', phone: '84' },\n  { code: 'VU', label: 'Vanuatu', phone: '678' },\n  { code: 'WF', label: 'Wallis and Futuna', phone: '681' },\n  { code: 'WS', label: 'Samoa', phone: '685' },\n  { code: 'XK', label: 'Kosovo', phone: '383' },\n  { code: 'YE', label: 'Yemen', phone: '967' },\n  { code: 'YT', label: 'Mayotte', phone: '262' },\n  { code: 'ZA', label: 'South Africa', phone: '27' },\n  { code: 'ZM', label: 'Zambia', phone: '260' },\n  { code: 'ZW', label: 'Zimbabwe', phone: '263' },\n    { code: '', label: \"empty\", phone: '-'},\n    { code: 'OTHER', label: 'other', phone: '-'}\n];\n\nexport default countries;","import {makeStyles} from \"@material-ui/core/styles\";\nimport {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport {Autocomplete} from \"@material-ui/lab\";\nimport {countries} from \"../_data/countries\";\nimport TextField from \"@material-ui/core/TextField\";\nimport createStyles from \"@material-ui/styles/createStyles\";\n\n// ISO 3166-1 alpha-2\n//  No support for IE 11\nfunction countryToFlag(isoCode) {\n  return typeof String.fromCodePoint !== 'undefined'\n    ? isoCode\n        .toUpperCase()\n        .replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + 127397))\n    : isoCode;\n}\n\n\nconst useStyles = makeStyles(theme => (createStyles({\n  textField: dirty => ({\n    '& label.Mui-focused':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},  // todo color to theme\n    '& .MuiInput-underline:after': {borderBottomColor: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},\n      '& label':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium},\n      '& fieldset': {borderColor: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium},\n  }\n  ),\n    option: {\n    fontSize: 15,\n    '& > span': {\n      marginRight: 10,\n      fontSize: 18,\n    },\n  },})));\n\nexport default function DirtyCountrySelect({formik, noDirty, name, label, style={ width: 300 }, ...textFieldProps}) {\n  const getInitialOption = (code) => {\n      if (code === undefined) return countries.find(x=>x.code==='');\n      return countries.find(x=>x.code===code);\n  }\n\n  const [option, _setOption] = React.useState(getInitialOption(formik.values[name]));\n\n  React.useEffect(() => {\n    _setOption(getInitialOption(formik.values[name]));\n  }, [formik.values, name]);\n\n  const setOption = (option) => {\n      const newOption = (option !== null)? option.code: '';\n      formik.setFieldValue(name, newOption);\n      _setOption(option);\n  }\n\n  const dirty = noDirty === true? false: formik.values[name] !== formik.initialValues[name];\n  const classes = useStyles(dirty);\n\n  const [inputValue, setInputValue] = React.useState('');\n\n  const { t } = useTranslation();\n\n  return (\n    <Autocomplete\n      style={style}\n      options={countries}\n      classes={{\n        option: classes.option,\n      }}\n      autoHighlight\n      getOptionLabel={(option) => t(option.code) }\n      getOptionSelected={(o) => o.code === option.code}\n      value={option}\n        onChange={(event, newValue) => {\n          setOption(newValue);\n        }}\n        inputValue={inputValue}\n        onInputChange={(event, newInputValue) => {\n          setInputValue(newInputValue);\n        }}\n        name={name}\n      onBlur={formik.handleBlur}\n      renderOption={(option) => (\n        <React.Fragment key={option.code}>\n          <span>{option.code !== \"\" && option.code !== \"OTHER\"? countryToFlag(option.code): \"\"}</span>\n          {option.code !== \"\" && option.code !== \"OTHER\"? t(option.code): t(option.label)} {option.code !== \"\" && option.code !== \"OTHER\"? \"(\"+option.code+\") +\"+option.phone: \"\"}\n        </React.Fragment>\n      )}\n\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          label={label}\n          noDirty={noDirty}\n          className={classes.textField}\n          inputProps={{\n            ...params.inputProps,\n            autoComplete: 'new-password', // disable autocomplete and autofill\n          }}\n          error={formik.status  || formik.errors[name] !== undefined}\n        helperText={formik.touched[name] && formik.errors[name]}\n        />\n      )}\n    />\n  );\n}","import {userContext} from \"../_context/user-context\";\nimport React from 'react';\nimport {useSnackbar} from \"notistack\";\nimport {useTranslation} from \"react-i18next\";\nimport {Button} from \"@material-ui/core\";\n\n\nexport function useErrorHandler() {\n\n    const userCtx = React.useContext(userContext);\n    const {enqueueSnackbar, closeSnackbar} = useSnackbar();\n    const {t} = useTranslation();\n\n    const successHandler = (res, snackbarSuccess) => {\n        if (snackbarSuccess) enqueueSnackbar(t(\"success\"), {variant: \"success\"});\n        return Promise.resolve(res);\n    }\n\n    const successHandlerFactory = (snackbarSuccess) => {\n        return (res) => successHandler(res, snackbarSuccess)\n    }\n\n    const failureHandler401 = (res) => {\n        // auto logout if 401 unauthenticated\n        userCtx[\"setUser\"]({logged: false, ping: false});\n\n        enqueueSnackbar(t(\"warning_not_logged_in\"), {variant: \"warning\"});\n\n        return Promise.reject(res);\n    }\n\n    const failureHandler403 = (res) => {\n        // unauthorized\n        enqueueSnackbar(t(\"warning_not_enough_privileges\"), {variant: \"warning\"});\n\n        return Promise.reject(res);\n    }\n\n    const failureHandlerUnexpected = (res, reportUnexpected) => {\n        // an unexpected error happened\n        \n        \n        const showSnackbar = (message) => {\n            enqueueSnackbar(`Something went wrong!  ${message}`,\n            {\n                variant: \"error\",\n                autoHideDuration: 10000,\n                action: key => {\n                    return <React.Fragment>\n                        <img src={true ? \"logo_centrifuga4_dark_error.svg\" : \"logo_centrifuga4_light_error.svg\"}\n                             alt=\"Logo Centrfuga\" style={{height: \"35px\"}}/>\n\n                        {reportUnexpected? <Button onClick={() => {\n                            navigator.clipboard.writeText(\n                                \"TO: vazquezrius.miquel@gmail.com\\n\\n\" +\n                                \"To mark an item, use a cross, like this: [X]\\n\\n\" +\n                                \" TRIAGE\\n\" +\n                                \"[ ] This issue has been reported previously and has NOT been marked as solved\\n\" +\n                                \"[ ] This issue has been reported previously and has been marked as solved\\n\" +\n                                \"[ ] This issue has not been reported previously\\n\" +\n                                \"[ ] I have written the steps to reproduce the issue in the specified section below - required!\\n\\n\" +\n                                \" TYPE OF REQUEST\\n\" +\n                                \"[ ] Feature request\\n\" +\n                                \"[X] Error report\\n\\n\" +\n                                \" STEPS\\n\" +\n                                \"Describe what were you doing when this error happened!\\n\" +\n                                \"\\n    example\\n\" +\n                                \"    1. Searched 'john' in the students section, two students appeared.\\n\" +\n                                \"    2. Clicked the CSV export option.\\n\" +\n                                \"    3. Nothing happened, the the error message appeared.\\n\\n\" +\n                                \"Write your steps for repeating the issue here:\\n1. ...\\n\\n\\n\" +\n                                \" STACK TRACE\\n\" + JSON.stringify(res) + \"\\n\\n\\n\" +\n                                \" RESPONSE\\n\" + JSON.stringify(res.response) + \"\\n\\n\\n\" +\n                                \" DEVICE CONTEXT\\n\" + navigator.platform + \"\\n\" + navigator.userAgent + \"\\n\" +\n                                navigator.appVersion + \"\\n\" + navigator.vendor + \"\\n\")\n                                .then(r => {\n                                    closeSnackbar(key);\n                                    alert(\"Okey, so something got messed up...  Let's fix it!\\n\\n\" +\n                                        \" Open your email client\\n\" +\n                                        \" Ctrl+V\\n\" +\n                                        \" Fill in the details\\n\" +\n                                        \" Send it to the support team!\\n\\n\")\n                                });\n                        }}>\n                            {t(\"Report\")}\n                        </Button>: null}\n                        <Button onClick={() => {\n                            closeSnackbar(key)\n                        }}>\n                            {t(\"Dismiss\")}\n                        </Button>\n\n                    </React.Fragment>\n                }\n            });\n        }\n\n        if (res.request.responseType == 'blob'){\n            res.response.data.text().then(res => {\n                showSnackbar(JSON.parse(res)['message']);\n            });\n        } else {\n            showSnackbar('');\n        }\n\n        return Promise.reject(res);\n    }\n\n    const failureHandler = (res, handle401, handle403, handle400, errorOut, reportUnexpected) => {\n        // decide which handler is going to handle the error response depending on status code\n        let handler = (res) => failureHandlerUnexpected(res, reportUnexpected);\n        if (res.request.status === 401) {\n            if (handle401) { handler = failureHandler401; }\n            else { return Promise.reject(res) }\n        }\n        if (res.request.status === 403) {\n            if (handle403) { handler = failureHandler403; }\n            else { return Promise.reject(res) }\n        }\n        if (res.request.status === 400) {\n            if (!handle400) { return Promise.reject(res) }\n            // else just use the default handler\n        }\n\n        // use the handler, return a rejected promise if errorOut,\n        // else just execute the handler but don't return a rejected catch\n        // (otherwise there will be either empty rejection handlers or unhandled rejections everywhere)\n        if (errorOut) {\n            return handler(res);\n        } else {\n            handler(res).catch(()=>{});  // ignores the rejection response\n            return null;\n        }\n    }\n\n    const failureHandlerFactory = (handle401, handle403, handle400, errorOut, reportUnexpected) => {\n        return (res) => (failureHandler(res, handle401, handle403, handle400, errorOut, reportUnexpected))\n    }\n\n    return ({\n                handle401 = true,\n                handle403 = true,\n                handle400 = true,\n                errorOut = true,\n                reportUnexpected = true,\n                snackbarSuccess = false\n            }) => {\n        return [successHandlerFactory(snackbarSuccess),\n                failureHandlerFactory(handle401, handle403, handle400, errorOut, reportUnexpected)]\n    };\n}","import {useFormik} from \"formik\";\n\n\nexport function useNormik(onlyChangedValuesOnSubmit, props, allowArrays=false) {\n    let originalInitialValues = {};\n    if (\"initialValues\" in props) {\n        let nullSafeInitialValues = {};\n        originalInitialValues = props.initialValues;\n        for (const [key, value] of Object.entries(originalInitialValues)) {\n          if (value === null) {\n              nullSafeInitialValues[key] = '';\n          } else {\n              nullSafeInitialValues[key] = value;\n          }\n        }\n        props.initialValues = nullSafeInitialValues;\n    }\n\n    if (\"onSubmit\" in props){\n        const oldOnSubmit = props.onSubmit;\n        const nullSafeOnSubmit = (values, actions) => {\n            let normalizedValues = {};\n            for (const [key, value] of Object.entries(values)) {\n                const normalizedValue = value === ''? null : value;\n                if (!onlyChangedValuesOnSubmit ||\n                    (onlyChangedValuesOnSubmit && normalizedValue !== originalInitialValues[key] &&\n                        (allowArrays || !Array.isArray(originalInitialValues[key])) )){\n                  normalizedValues[key] = normalizedValue;\n                }\n\n            }\n            oldOnSubmit(normalizedValues, actions);\n        }\n        props.onSubmit = nullSafeOnSubmit;\n    }\n\n    return useFormik(props);\n}","export const education_years = [\n    \"kindergarten_p0\",\n    \"kindergarten_p1\",\n    \"kindergarten_p2\",\n    \"kindergarten_p3\",\n    \"kindergarten_p4\",\n    \"kindergarten_p5\",\n    \"primary_1\",\n    \"primary_2\",\n    \"primary_3\",\n    \"primary_4\",\n    \"primary_5\",\n    \"primary_6\",\n    \"eso_1\",\n    \"eso_2\",\n    \"eso_3\",\n    \"eso_4\",\n    \"baccalaureate_1\",\n    \"baccalaureate_2\",\n    \"FP_lower\",\n    \"FP_higher\",\n    \"undergraduate\",\n    \"master\",\n    \"phd\",\n    \"other\"\n];\n","import React, {useEffect} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Checkbox, FormControlLabel} from \"@material-ui/core\";\nimport {allNeeds} from \"../_data/needs\";\nimport Typography from \"@material-ui/core/Typography\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport RestoreIcon from \"@material-ui/icons/Restore\";\n\n\nconst DiscardButton = ({formik, ...props}) => {\n    const {t} = useTranslation();\n\n    return   <IconButton\n                                     onClick={formik.handleReset}\n                                     disabled={!formik.dirty || formik.isSubmitting}\n                         {...props}>\n                            <Tooltip title={t(\"reset\")} aria-label={t(\"reset\")}>\n                                <RestoreIcon/>\n                            </Tooltip>\n                        </IconButton>\n}\n\nexport default DiscardButton;","import {userContext} from \"../_context/user-context\";\nimport React from 'react';\nimport {useSnackbar} from \"notistack\";\nimport {useTranslation} from \"react-i18next\";\nimport {Button} from \"@material-ui/core\";\nimport {CHECK_NEEDS} from \"../config\";\n\n\nexport const NEEDS = {\n        get: \"get\",\n        patch: \"patch\",\n        delete: \"delete\",\n        post: \"post\",\n        send_email: \"send_email\",\n        invite_users: \"invite_users\",\n        students: \"students\",\n        courses: \"courses\",\n        guardians: \"guardians\",\n        payments: \"payments\",\n        rooms: \"rooms\",\n        schedules: \"schedules\",\n        teachers: \"teachers\",\n        users: \"users\",\n        paymentReceipts: \"payments-receipts\",\n        attendance: \"attendance\"\n    };\n\n\nexport function useNeeds() {\n\n    const userCtx = React.useContext(userContext);\n\n    const hasNeed = (needs) => (!CHECK_NEEDS || needs.every(need => userCtx.needs.includes(need)));\n\n    return [hasNeed, NEEDS];\n}","import React, {useEffect} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Checkbox, FormControlLabel} from \"@material-ui/core\";\nimport {allNeeds} from \"../_data/needs\";\nimport Typography from \"@material-ui/core/Typography\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport {useNeeds} from \"../_helpers/needs\";\n\n\nconst SaveButton = ({formik, ...props}) => {\n    const {t} = useTranslation();\n    const [hasNeeds, NEEDS] = useNeeds();\n    return   hasNeeds([NEEDS.patch]) && <IconButton  type=\"submit\"\n                                    disabled={!formik.dirty || formik.isSubmitting}\n                          {...props}>\n                            <Tooltip title={t(\"save\")} aria-label={t(\"save\")}>\n                                <SaveIcon/>\n                            </Tooltip>\n                        </IconButton>\n}\n\nexport default SaveButton;","export const longer_8 = /^.{8,}$/;\nexport const shorter_64 = /^.{0,64}$/;\nexport const has_lowercase = /(?=.*[a-z])/;\nexport const has_uppercase = /(?=.*[A-Z])/;\nexport const has_digit = /(?=.*\\d)/;\nexport const has_special = /(?=.*[-\\/:-@\\!.,+`\\-%&\\(\\)#$_[-`{-~]{1,})/;\nexport const no_plus = /^((?!\\+).)*$/;\n","import * as yup from \"yup\";\nimport {\n    has_digit,\n    has_lowercase,\n    has_special,\n    has_uppercase,\n    longer_8,\n    no_plus,\n    shorter_64\n} from \"../_data/password_regex\";\n\nexport const DNI_REGEX = /^[0-9]{8}[TRWAGMYFPDXBNJZSQVHLCKE]$/i;\nexport const NIE_REGEX =  /^[XYZ][0-9]{7}[A-Z]$/i;\nexport const DNI_OR_NIE_REGEX = new RegExp(DNI_REGEX.source + \"|\" + NIE_REGEX.source).source;\nexport const safe_password = (t) => (\n    yup.string()\n        .required(t(\"password_required\"))\n        .matches(longer_8, t(\"longer_8\"))\n        .matches(shorter_64, t(\"shorter_64\"))\n        .matches(has_lowercase, t(\"has_lowercase\"))\n        .matches(has_uppercase, t(\"has_uppercase\"))\n        .matches(has_digit, t(\"has_digit\"))\n        .matches(has_special, t(\"has_special\"))\n)\n\nexport const safe_password_repetition = (t) => (\n    yup.string()\n        .required(t(\"password_required\"))\n        .oneOf([yup.ref('password'), null], t(\"passwords_unmatched\"))\n)\n\n\nconst safe_username_email = (t) => (\n    yup.string()\n        .email(t(\"invalid_email\"))\n        .matches(no_plus, t(\"no_plus\"))\n)\n\nconst safe_username_email_required = (t) => (\n    safe_username_email(t).required(t(\"email_required\"))\n);\n\n\nexport const safe_username_required = safe_username_email_required;\nexport const safe_email_required = safe_username_email_required;\nexport const safe_email = safe_username_email;\n\nexport const one_of = (t, options) => yup.string().required(t('field_required'))\n                                .test(  // one of the array\n                                  'oneOfRequired',\n                                  `${t(\"one_of\")}: ${options.toString()}`,\n                                  v => options.includes(v)\n                                )","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport {MenuItem} from \"@material-ui/core\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport * as yup from 'yup';\nimport DirtyCountrySelect from \"./contry-select.component\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNormik} from \"../_helpers/normik\";\nimport {education_years} from \"../_data/education\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport DiscardButton from \"./formik_discard_button\";\nimport SaveButton from \"./formik_save_button\";\nimport {safe_email} from \"../_yup/validators\";\n\nconst useStyles = makeStyles((theme) => ({\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    },\n    actionIcon: {\n        float: 'right'\n    }\n}));\n\nfunction Person(props) {\n    const currentPerson = props.currentPerson;\n    const dataService = props.patchService;\n    const newPerson = props.newPerson;\n    const updateCurrentPerson = props.updateCurrentStudent;\n    const additionalFields = props.additionalFields;\n    const additionalValidation = props.additionalValidation === undefined? {}: props.additionalValidation;\n    const studentId = props.studentId;\n    const onUpdate = props.onUpdate;\n    const loading = currentPerson === null;\n\n    const {t} = useTranslation();\n    const classes = useStyles();\n    const errorHandler = useErrorHandler();\n    let initialValues = loading ? {} : currentPerson;\n\n\n    const formik = useNormik(!newPerson, {\n        initialValues: initialValues,\n        validationSchema: yup.object({...{\n            email: safe_email(t),\n            name: yup.string().required(t(\"name_required\")),\n            is_studying: yup.boolean().required(t(\"studying_required\")),\n            is_working: yup.boolean().required(t(\"working_required\")),\n            career: yup.string().when('is_working', {\n                                                  is: true,\n                                                  then: yup.string().required(t(\"career_required\"))\n                                                }),\n            education_entity: yup.string().when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(t(\"education_entity_required\"))\n                                                }),\n            education_year: yup.string().when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(t(\"education_year_required\"))\n                                                })\n        }, ...additionalValidation}),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (newPerson) {\n                setStatus();\n                dataService.post({...changedValues})\n                    .then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (new_id) {\n                        updateCurrentPerson(new_id['id']);\n                        if (typeof onUpdate === 'function') onUpdate(changedValues, new_id['id']);\n                    }).catch(function (err) {\n                    setStatus(true);\n                    }).finally(() => {\n                    setSubmitting(false);\n                });\n            } else {\n                if (Object.keys(changedValues).length > 0) {\n                setStatus();\n                dataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentPerson(patched_body);\n\n                        if (typeof onUpdate === 'function') onUpdate(changedValues, initialValues[\"id\"]);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n\n\n            } else {\n                setSubmitting(false);\n            }\n            }\n        }\n    });\n\n    function recursiveForm(elements) {\n        if (elements === undefined) return null;\n\n        return <div>\n            <Box my={3}>\n            <Divider />\n            </Box>\n            {\n            elements.map((res, idx) => (\n                res == null? <Box my={3}>\n            <Divider />\n            </Box>:\n                <Box key={idx} className={`${classes.line} ${classes.composite}`}>\n                    {res instanceof Array ?\n                        res.map((r, idx2) => (\n                            React.cloneElement(r, {formik: formik, key: idx+\"-\"+idx2})\n                        ))\n                        : React.cloneElement(res, {formik: formik})}\n                </Box>))\n        }\n        </div>;\n    }\n\n\n    return (\n        <Box>\n            {loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\", \"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name=\"surname1\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"surname2\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"email\"\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"address\")}\n                                formik={formik}\n                                style={{flex: 4}}\n                                name=\"address\"\n                            />\n                            <DirtyTextField\n                                label={t(\"city\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"city\"\n                            />\n                            <DirtyTextField\n                                label={t(\"zip\")}\n                                formik={formik}\n                                type=\"number\"\n                                style={{flex: 1}}\n                                name=\"zip\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"dni\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"dni\"\n                            />\n                            <DirtyTextField\n                                label={t(\"phone\")}\n                                type=\"tel\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"phone\"\n                            />\n\n\n\n                        </Box>\n\n\n\n                        <Box className={[classes.line, classes.composite]}>\n\n                            <DirtyCountrySelect\n                                formik={formik}\n                                style={{flex: 1}}\n                                name={\"country_of_origin\"}\n                                label={t(\"country_of_origin\")}\n                            />\n<DirtyTextField\n                                label={t(\"gender\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"gender\"\n                                select>\n                                <MenuItem value=\"m\">{t(\"male\")}</MenuItem>\n                                <MenuItem value=\"f\">{t(\"female\")}</MenuItem>\n                                <MenuItem value=\"nb\">{t(\"nb\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n<Box my={3}>\n            <Divider />\n            </Box>\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"is_studying\")}\n                                style={{flex: 1}}\n                                name=\"is_studying\"\n                                formik={formik}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"education_entity\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"education_entity\"\n                            />\n                            <DirtyTextField\n                                label={t(\"education_year\")}\n                                style={{flex: 2}}\n                                name=\"education_year\"\n                                formik={formik}\n                                select>\n                                {education_years.map((level) => (\n                                    <MenuItem key={level} value={level}>{t(level)}</MenuItem>\n                                ))}\n                            </DirtyTextField>\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n\n\n                            <DirtyTextField\n                                label={t(\"is_working\")}\n                                style={{flex: 1}}\n                                name=\"is_working\"\n                                formik={formik}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"career\")}\n                                style={{flex: 4}}\n                                formik={formik}\n                                name=\"career\"\n                            />\n                        </Box>\n\n                        {recursiveForm(additionalFields)}\n\n                    </form>\n                )\n\n            }\n        </Box>\n    );\n}\n\n\nexport default Person;\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('guardians'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('payments'))();\n\n","export const payment_methods = [\n    \"bank-transfer\",\n    \"cash\",\n    \"bank-direct-debit\"\n]","const newPerson = {\n                name: null,\n                surname1: null,\n                surname2: null,\n                email: null,\n                address: null,\n                city: null,\n                zip: null,\n                dni: null,\n                phone: null,\n                gender: null,\n\n                country_of_origin: null,\n                is_studying: null,\n                education_entity: null,\n                education_year: null,\n                is_working: null,\n                career: null\n              };\nexport const emptyGuardian = {...newPerson, relation: null};\nexport const emptyAttendee = {...newPerson,\n    price_term: null,\n    payment_comments: null,\n    birth_date: null,\n    other_comments: null,\n    image_agreement: null,\n    image_agreement_external: null,\n    enrolment_status: null,\n    default_payment_method: null\n};\n","import React from \"react\";\n\nconst loadingContext = React.createContext({loading: false,\n  startLoading: () => {},\n  stopLoading: () => {},\n}); // Create a context object\n\nexport {\n  loadingContext // Export it so it can be used by other Components\n};","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport {MenuItem} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport StudentsDataService from \"../_services/students.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport * as yup from 'yup';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\"\nimport Person from \"./students.student.person.component\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Button from \"@material-ui/core/Button\";\nimport GuardiansDataService from \"../_services/guardians.service\";\nimport PaymentsDataService from \"../_services/payments.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport {sendEnrollmentEmail} from \"../_services/emailsEnrollment.service\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {sendGrantEmail} from \"../_services/emailsGrants.service\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport {payment_methods} from \"../_data/payment_methods\";\nimport {emptyAttendee} from \"../_data/empty_objects\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {loadingContext} from \"../_context/loading-context\";\nimport {confirmContext} from \"../_context/confirm-context\";\nimport TextField from \"@material-ui/core/TextField\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction Attendee({ children, setNewStudent, addStudentId, newStudent, title, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const [hasNeeds, NEEDS] = useNeeds();\n  const confirm = React.useContext(confirmContext);\n\n  const deleteFullStudent = () => {\n    StudentsDataService\n              .delete(currentStudent['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                PaymentsDataService\n                      .deleteMany(currentStudent['payments'])\n                      .then(...errorHandler({}))  // todo everywhere\n                      .then(function (res) {\n\n                      });\n\n                GuardiansDataService\n                      .deleteMany(currentStudent['guardians'])\n                      .then(...errorHandler({}))  // todo everywhere\n                      .then(function (res) {\n\n                      });\n\n\n                // todo schedules, courses\n\n\n                deleteStudent(currentStudent['id']);\n              });\n  }\n  const loadingCtx = React.useContext(loadingContext);\n  const sendGrantLetter = (id) => {\n      loadingCtx.startLoading();\n      sendGrantEmail(id)\n          .then(...errorHandler({snackbarSuccess: true}))\n          .finally(() => {\n              loadingCtx.stopLoading();\n          });\n  }\n  const sendEnrollmentAgreement = () => {\n      loadingCtx.startLoading();\n      sendEnrollmentEmail(currentStudent['id'])\n          .then(...errorHandler({snackbarSuccess: true}))\n          .finally(() => {\n              loadingCtx.stopLoading();\n          });\n  }\n  \n  const downloadAttendances = () => {\n    StudentsDataService\n        .downloadSubresource(currentStudent['id'], 'attendance-list')\n        .then(...errorHandler({snackbarSuccess: true}));\n  }\n\n\n  return (\n    <React.Fragment>\n\n        <Box p={3}>\n            <Box px={2}>\n              {loading?\n                  !newStudent && <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n              !newStudent && hasNeeds([NEEDS.guardians, NEEDS.post]) && <Tooltip style={{float: 'right'}} title={t(\"new_guardian\")} aria-label={t(\"new_guardian\")}>\n                <IconButton onClick={(e) => {\n                  addNewGuardian();\n                }}>\n                  <PersonAddIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n\n              {loading && !newStudent ?\n                   <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n                hasNeeds([NEEDS.delete]) && <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                    if (newStudent) {\n                        setNewStudent(false);\n                    } else {\n                        confirm.confirm(\"delete_student_question\",\n      \"student_also_deletes\",\n      () => {\n                            deleteFullStudent(currentStudent['id'])\n      });\n                    }\n\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <Person\n                      currentPerson={newStudent? emptyAttendee: currentStudent}\n                      newPerson={newStudent}\n                      updateCurrentStudent={(x) => {\n                        if (!newStudent) return updateCurrentStudent(x);\n                        addStudentId(x);\n                      }}\n                      patchService={patchService}\n                      onUpdate={(changedBody, id) => {\n                        if (\"enrolment_status\" in changedBody && changedBody[\"enrolment_status\"] === \"enrolled\"){\n                          confirm.confirm(\"send_grant_letter_question\",\n                          \"this_will_be_sent\",\n                          () => {\n                                sendGrantLetter(id);\n                          });\n                        }\n                      }}\n                      additionalValidation={{\n                        enrolment_status: yup.string().required(t(\"status_required\")),\n                        image_agreement: yup.boolean().required(t(\"image_required\")),\n                        image_agreement_external: yup.boolean().required(t(\"image_required\")),\n                        birth_date: yup.date().required(t(\"birthdate_required\"))\n                      }}\n                      additionalFields={\n                        [[<DirtyTextField\n                                label={t(\"price_term\")}\n                                style={{flex: 1}}\n                                name=\"price_term\"\n                                type=\"number\"\n                                InputProps={{endAdornment: <InputAdornment position=\"end\"></InputAdornment>,}}\n                            />,\n                            <DirtyTextField\n                                label={t(\"default_payment_method\")}\n                                style={{flex: 1}}\n                                name=\"default_payment_method\"\n                                select>\n                                { payment_methods.map(\n                                                    (method) => (\n                                                        <MenuItem key={method} value={method}>{t(method)}</MenuItem>\n                                                    )\n                                                )\n                                                }\n                            </DirtyTextField>],\n                            <DirtyTextField\n                                label={t(\"payment_comments\")}\n                                style={{flex: 1}}\n                                multiline\n                                rowsMax={8}\n                                name=\"payment_comments\"\n                            />,\n                            null,\n                            [<DirtyTextField\n                                label={t(\"birthdate\")}\n                                type=\"date\"\n                                style={{flex: 1}}\n                                name=\"birth_date\"\n                                InputLabelProps={{shrink: true}}/>,\n                            <DirtyTextField\n                              label={t(\"years_in_xamfra\")}\n                              type=\"number\"\n                              style={{flex: 1}}\n                              name=\"years_in_xamfra\"/>],\n                          [\n                              <DirtyTextField\n                                label={t(\"status\")}\n                                style={{flex: 1}}\n                                name=\"enrolment_status\"\n                                select>\n                                {['enrolled', 'early-unenrolled', 'pre-enrolled'].map((s) => (\n                                    <MenuItem key={s} value={s}>{t(s)}</MenuItem>\n                                ))}\n                            </DirtyTextField>,\n                              <DirtyTextField\n                                label={t(\"image_agreement\")}\n                                style={{flex: 1}}\n                                name=\"image_agreement\"\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>,\n                              <DirtyTextField\n                              label={t(\"image_agreement_external\")}\n                              style={{flex: 1}}\n                              name=\"image_agreement_external\"\n                              select>\n                              <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                              <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                          </DirtyTextField>\n                          ], [<DirtyTextField\n                                label={t(\"pre_enrolment_date\")}\n                                type=\"date\"\n                                style={{flex: 1}}\n                                name=\"pre_enrolment_date\"\n                                InputLabelProps={{shrink: true}}/>,\n                                <DirtyTextField\n                                label={t(\"enrolment_date\")}\n                                type=\"date\"\n                                style={{flex: 1}}\n                                name=\"enrolment_date\"\n                                InputLabelProps={{shrink: true}}/>,\n                                <DirtyTextField\n                                label={t(\"early_unenrolment_date\")}\n                                type=\"date\"\n                                style={{flex: 1}}\n                                name=\"early_unenrolment_date\"\n                                InputLabelProps={{shrink: true}}/>\n                            ],\n                        <DirtyTextField\n                                label={t(\"other_comments\")}\n                                style={{flex: 1}}\n                                multiline\n                                rowsMax={8}\n                                name=\"other_comments\"\n                            />]}\n              >\n\n              </Person>\n\n              {!loading && !newStudent && <Box my={3}>\n            <Divider />\n            </Box>}\n\n              <Box className={[classes.line, classes.composite]}>\n                {!loading && !newStudent && hasNeeds([NEEDS.send_email]) &&\n                <Tooltip style={{flex: 1}} title={t(\"send_grant_letter\")} aria-label={t(\"send_grant_letter\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      disabled={loadingCtx.loading}\n                      startIcon={<SendIcon/>}\n                      onClick={(e) => {\n                        sendGrantLetter(currentStudent['id']);\n                      }}\n                  >\n                    {t(\"grant_letter\")}\n                  </Button>\n                </Tooltip>}\n\n                {!loading && !newStudent &&\n                <Tooltip style={{flex: 1}} title={t(\"export_grant_letter\")} aria-label={t(\"export_grant_letter\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      disabled={loadingCtx.loading}\n                      startIcon={<GetAppIcon/>}\n                      onClick={(e) => {\n                          if (loadingCtx.loading) return;\n                          loadingCtx.startLoading();\n                        StudentsDataService\n                            .downloadSubresource(currentStudent[\"id\"], 'grantLetter')\n                            .then(...errorHandler({snackbarSuccess: true}))\n                            .finally(() => {\n                                loadingCtx.stopLoading();\n                            })\n                      }}\n                  >\n                    {t(\"grant_letter\")}\n                  </Button>\n                </Tooltip>}\n              </Box>\n\n              <Box className={[classes.line, classes.composite]}>\n                {!loading && !newStudent && hasNeeds([NEEDS.send_email]) &&\n                <Tooltip style={{flex: 1}} title={t(\"send_enrolment_agreement\")}\n                                                     aria-label={t(\"enrolment_agreement\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<SendIcon/>}\n                      disabled={loadingCtx.loading}\n                      onClick={(e) => {\n                        sendEnrollmentAgreement();\n                      }}\n                  >\n                    {t(\"enrolment_agreement\")}\n                  </Button>\n                </Tooltip>}\n\n                {!loading && !newStudent && <Tooltip style={{flex: 1}} title={t(\"export_enrolment_agreement\")}\n                                                     aria-label={t(\"export_enrolment_agreement\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<GetAppIcon/>}\n                      disabled={loadingCtx.loading}\n                      onClick={(e) => {\n                          if (loadingCtx.loading) return;\n                          loadingCtx.startLoading();\n                        StudentsDataService\n                            .downloadSubresource(currentStudent[\"id\"], 'enrolmentAgreement')\n                            .then(...errorHandler({snackbarSuccess: true}))\n                            .finally(() => {\n                                loadingCtx.stopLoading();\n                            })\n                      }}\n                  >\n                    {t(\"enrolment_agreement\")}\n                  </Button>\n                </Tooltip>}\n              </Box>\n\n              <Box className={[classes.line, classes.composite]}>\n                {!loading && !newStudent &&\n                <Tooltip style={{flex: 1}} title={t(\"export_attendance_list\")}\n                                                     aria-label={t(\"export_attendance_list\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<GetAppIcon/>}\n                      disabled={loadingCtx.loading}\n                      onClick={(e) => {\n                        downloadAttendances();\n                      }}\n                  >\n                    {t(\"export_attendance_list\")}\n                  </Button>\n                </Tooltip>}\n              </Box>\n            </Box>\n        </Box>\n    </React.Fragment>\n  );\n}\n\n\nexport default Attendee;\n","import serviceFactory from \"./service-factory\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\n\nexport const sendGrantEmail = (id) => {  // todo abstract\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/emails/v1/grantEmail/${id}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        };\n\n","import serviceFactory from \"./service-factory\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\n\nexport const sendEnrollmentEmail = (id) => {  // todo abstract\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/emails/v1/enrolmentEmail/${id}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        };\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('students', 'guardians'))();\n\n","export const student_guardian_relations = [\n    'father',\n    'mother',\n    'grandfather',\n    'grandmother',\n    'brother',\n    'sister',\n    'uncle',\n    'aunt',\n    'cousin',\n    'legal_guardian',\n    'ss_agent',\n    'other'\n]","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport {MenuItem} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport React, {useEffect, useState} from \"react\";\nimport StudentGuardianDataService from \"../_services/student_guardians.service\"\nimport {student_guardian_relations} from \"../_data/relations\"\nimport Person from \"./students.student.person.component\";\nimport GuardiansDataService from \"../_services/guardians.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport * as yup from \"yup\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {emptyGuardian} from \"../_data/empty_objects\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {confirmContext} from \"../_context/confirm-context\";\n\nfunction Guardian({  studentId, title, guardianId, deleteGuardianId, addGuardianId, deleteNewGuardian, newGuardian=false, ...other }) {\n  const { t } = useTranslation();\n  const errorHandler = useErrorHandler();\n\n  const [guardian, setGuardian] = useState(null);\n\n   const [hasNeeds, NEEDS] = useNeeds();\n  useEffect(() => {\n    if (newGuardian) return;\n\n    GuardiansDataService\n            .getOne(guardianId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setGuardian(res[\"data\"]);\n\n                });\n  }, [guardianId]);\nconst confirm = React.useContext(confirmContext);\n  return (\n    <React.Fragment>\n\n\n        <Box p={3}>\n            <Box px={2}>\n\n\n              {hasNeeds([NEEDS.delete]) && <IconButton style={{float: 'right'}} onClick={(e) => {\n                if (!newGuardian) {\n                  confirm.confirm(\"delete_guardian_question\", \"not_undone\", () => {\n                    GuardiansDataService\n                      .delete(guardianId)\n                      .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n                      .then(function (res) {\n                        deleteGuardianId(guardianId);\n                      });\n                  })\n                  return;\n                }\n                deleteNewGuardian();\n              }}>\n                <Tooltip title={t(\"delete\")} aria-label={t(\"delete\")}>\n                  <DeleteIcon/>\n                </Tooltip>\n              </IconButton>}\n\n\n              <Person currentPerson={newGuardian? emptyGuardian: guardian}\n                      studentId={studentId}\n                      newPerson={newGuardian}\n                      updateCurrentStudent={(x) => {\n                        if (!newGuardian) return setGuardian(x);\n                        StudentGuardianDataService.postWithId(studentId, x)\n                          .then(...errorHandler({snackbarSuccess: true}))\n                          .then(() => {\n                          addGuardianId(x);\n                        });\n                      }}\n                      patchService={GuardiansDataService}\n                      additionalValidation={{\n                        relation: yup.string().required(t(\"relation_required\"))}}\n                      additionalFields={\n                        [[<DirtyTextField\n                                label={t(\"relation\")}\n                                style={{flex: 1}}\n                                name=\"relation\"\n                                select\n                            >\n                          {student_guardian_relations.map((r) => (\n                                   <MenuItem key={r} value={r}>{t(r)}</MenuItem>\n                                ))}\n                                ))}\n\n                        </DirtyTextField>]]}\n              />\n\n            </Box>\n        </Box>\n\n    </React.Fragment>\n  );\n}\n\nexport default Guardian;","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport AccountBalanceIcon from '@material-ui/icons/AccountBalance';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport SendIcon from '@material-ui/icons/Send';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport clsx from 'clsx';\nimport AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ReceiptIcon from '@material-ui/icons/Receipt';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport EuroIcon from '@material-ui/icons/Euro';\nimport PaymentsDataService from '../_services/payments.service';\nimport {sendReceiptEmail} from '../_services/emailsReceipts.service';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Box from \"@material-ui/core/Box\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {Button, DialogActions, MenuItem} from \"@material-ui/core\";\nimport {useNormik} from \"../_helpers/normik\";\nimport * as yup from \"yup\";\nimport {one_of} from \"../_yup/validators\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport {payment_methods} from \"../_data/payment_methods\"\nimport {useNeeds} from \"../_helpers/needs\";\nimport {loadingContext} from \"../_context/loading-context\";\nimport {confirmContext} from \"../_context/confirm-context\";\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    maxWidth: '100%',\n    backgroundColor: theme.palette.type === 'dark'? '#575757': null\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: theme.palette.secondary.main,\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nexport default function PaymentCard({ payment, updatePayment, deletePayment, newPayment=false, addPaymentId, student_id} ) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(newPayment);\n  const errorHandler = useErrorHandler();\n  const [hasNeeds, NEEDS] = useNeeds();\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  const confirm = React.useContext(confirmContext);\nconst loadingCtx = React.useContext(loadingContext);\n\nconst sendReceipt = (id) => {\n     loadingCtx.startLoading();\n      sendReceiptEmail(id)\n          .then(...errorHandler({snackbarSuccess:true}))\n          .finally(() => {\n              loadingCtx.stopLoading();\n          });\n}\n  const formik = useNormik(!newPayment, {\n        initialValues: payment,\n        validationSchema: yup.object({method: one_of(t, payment_methods),\n                                        quantity: yup.number().required(t(\"import_required\")),\n                                        date: yup.date().required(t(\"date_required\"))}),  // todo\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (Object.keys(changedValues).length > 0){\n                setStatus();\n\n                if (newPayment) {\n                    PaymentsDataService\n                        .post({...changedValues, student_id: student_id})\n                        .then(...errorHandler({snackbarSuccess:true}))\n                        .then(function (res) {\n                            addPaymentId(res['id']);\n                            confirm.confirm(\"send_receipt\", \"send_receipt\",\n                                () => sendReceipt(res['id']))\n                            }).catch(function (err){\n                                setStatus(true);\n                            })\n                        .finally(() => {\n                                setSubmitting(false);\n\n                        });\n                } else {\n                    PaymentsDataService.patch({\n                      id: payment[\"id\"],    // id\n                      body: changedValues,\n                      initial_values: payment  // todo doesnt normik do this?\n                  }).then(...errorHandler({snackbarSuccess:true}))\n                        .then(function (patched_body) {\n                                formik.resetForm(patched_body);\n                                updatePayment(patched_body['id'], patched_body);\n                            }).catch(function (err){\n                                setStatus(true);\n                    })\n                        .finally(() => {\n                                setSubmitting(false);\n                        });\n\n                }\n\n                    } else {\n                setSubmitting(false);\n            }\n\n        }\n    });\n\n\n  return (\n      <Box my={2}>\n    <Card className={classes.root}>\n      <CardHeader\n        avatar={\n          <Tooltip title={payment[\"method\"] === 'cash'? t('has_paid_cash'):\n                payment[\"method\"] === 'bank-transfer' ? t('tooltip-bank-transfer'):\n                    payment[\"method\"] === 'bank-direct-debit'? t('tooltip-bank-direct-debit'):\n                        t('other-payment-method')\n            }>\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            {payment[\"method\"] === 'cash'? <EuroIcon/>:\n                payment[\"method\"] === 'bank-transfer'? <AccountBalanceWalletIcon/>:\n                    payment[\"method\"] === 'bank-direct-debit'? <AccountBalanceIcon/>:\n                    <MoreHorizIcon/>\n            }\n          </Avatar>\n        </Tooltip>\n\n        }\n        action={\n         hasNeeds([NEEDS.delete]) && <Tooltip title={t(\"delete\")} aria-label={t(\"delete\")}>\n          <IconButton onClick={(e) => {\n              confirm.confirm(\"delete_payment\", \"not_undone\", () => {\n                  deletePayment(payment['id'])\n              });\n\n          }}>\n            <DeleteIcon />\n          </IconButton>\n        </Tooltip>\n        }\n        title={newPayment? t('new_payment') : `${t(\"has_paid\")} ${payment['quantity']}`}\n        subheader={payment['date']}\n      />\n\n        {!newPayment && <CardActions disableSpacing>\n            {hasNeeds([NEEDS.paymentReceipts]) &&\n            <Tooltip title={t(\"export_receipt\")} aria-label={t(\"export_receipt\")}>\n          <IconButton disabled={loadingCtx.loading} aria-label={t(\"export_receipt\")} onClick={(e) => {\n              loadingCtx.startLoading();\n              PaymentsDataService\n                  .downloadSubresource(payment[\"id\"], 'receipt')\n                  .then(...errorHandler({snackbarSuccess:true}))\n                  .finally(() => {\n                      loadingCtx.stopLoading();\n                  })\n          }}>\n            <ReceiptIcon />\n          </IconButton>\n        </Tooltip>}\n            {hasNeeds([NEEDS.paymentReceipts, NEEDS.send_email]) &&\n        <Tooltip title={t(\"send_receipt\")} aria-label={t(\"send_receipt\")}>\n          <IconButton  disabled={loadingCtx.loading} aria-label={t(\"send_receipt\")} onClick={() => sendReceipt(payment['id'])}>\n            <SendIcon />\n          </IconButton>\n        </Tooltip>}\n        <IconButton\n          className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n          })}\n          onClick={handleExpandClick}\n          aria-expanded={expanded}\n          aria-label=\"show more\"\n        >\n          <ExpandMoreIcon />\n        </IconButton>\n      </CardActions>}\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <CardContent>\n          <Box>\n            {payment === null\n                ?\n                (\n\n                    <Box>\n                        {\n                            [\"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0}>\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })\n                        }\n                    </Box>\n                )\n                :\n                (\n                        <form onSubmit={formik.handleSubmit}>\n                                        <DirtyTextField\n                                            label={t(\"id\")}\n                                            name=\"id\"\n                                            disabled\n                                            className={classes.line}\n                                            formik={formik}\n                                            />\n\n                                        <Box className={[classes.line, classes.composite]}>\n                                            <DirtyTextField\n                                                label={t(\"method\")}\n                                                style={{flex: 1}}\n                                                formik={formik}\n                                                name=\"method\"\n                                                select>\n                                                { payment_methods.map(\n                                                    (method) => (\n                                                        <MenuItem key={method} value={method}>{t(method)}</MenuItem>\n                                                    )\n                                                )\n                                                }\n                                            </DirtyTextField>\n                                            <DirtyTextField\n                                                label={t(\"import\")}\n                                                formik={formik}\n                                                type=\"number\"\n                                                style={{flex: 1}}\n                                                name=\"quantity\"\n                                                InputProps={{\n                                                    endAdornment: <InputAdornment position=\"end\"></InputAdornment>,\n                                                  }}\n                                            />\n                                            <DirtyTextField\n                                                label={t(\"date\")}\n                                                formik={formik}\n                                                type=\"date\"\n                                                style={{flex: 1}}\n                                                name=\"date\"\n                                                InputLabelProps={{shrink: true}}/>\n                                        </Box>\n\n                             <Box className={[classes.line, classes.composite]}>\n                                            <DirtyTextField\n                                                label={t(\"concept\")}\n                                                formik={formik}\n                                                style={{flex: 1}}\n                                                multiline\n                                                rowsMax={8}\n                                                name=\"concept\"\n                                            />\n                                        </Box>\n\n\n                                        <DialogActions>\n                                            <Button\n                                                type=\"button\"\n                                                className=\"outline\"\n                                                onClick={formik.handleReset}\n                                                disabled={!formik.dirty || formik.isSubmitting}\n                                            >\n                                                {t(\"reset\")}\n                                            </Button>\n                                            {hasNeeds([NEEDS.patch]) && <Button type=\"submit\" disabled={!formik.dirty || formik.isSubmitting}>\n                                                {newPayment ? t(\"create\") : t(\"save\")}\n                                            </Button>}\n                                        </DialogActions>\n                                    </form>\n                )\n\n            }\n        </Box>\n        </CardContent>\n      </Collapse>\n    </Card></Box>\n  );\n}\n","import serviceFactory from \"./service-factory\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\n\nexport const sendReceiptEmail = (id) => {  // todo abstract\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/emails/v1/paymentReceipt/${id}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        };\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PropTypes from \"prop-types\";\nimport React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport PaymentsDataService from \"../_services/payments.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport PaymentCard from \"./students.student.payments.payment.component\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst getDefaultValues = () => {\n    const date = new Date();\n    const dd = date.getDate();\n    const mm = date.getMonth() + 1; //Month from 0 to 11\n    const yyyy = date.getFullYear();\n    return {'id': null, 'date': `${yyyy}-${mm<=9 ? '0' + mm : mm}-${dd <= 9 ? '0' + dd : dd}`, 'quantity': null, 'concept': null, 'method': null}\n}\nconst useStyles = makeStyles((theme) => ({\n\n  actionIcon: {\n    float: 'right'\n  },\n  newLine: {\n    width: '100%',\n       marginTop: theme.spacing(1),\n        display: \"flex\",\n    flexDirection: \"column\"\n  }\n}));\n\nfunction Payments({ children,  title, paymentIds, deletePaymentFromStudent, addPaymentId, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const loading = paymentIds === null;\n\n  const [payments, setPayments] = useState([]);\n  const [newPaymentCard, setNewPaymentCard] = useState(false);\n\n  useEffect(()=>{\n    setNewPaymentCard(false);\n  }, [payments])\n\n  const updatePayment = (id, body) => {\n    setPayments(payments.map(payment => {\n      if (payment.id !== id) return payment;\n      return body;\n    }))\n  }\n  const [hasNeeds, NEEDS] = useNeeds();\n\n  const deletePayment = (id) => {\n    PaymentsDataService.delete(id)\n        .then(...errorHandler({snackbarSuccess:true}))\n        .then(function (r) {\n             deletePaymentFromStudent(id);\n        });\n  }\n\n  useEffect(() => {\n    if (paymentIds === null) return;\n\n    if (paymentIds.length === 0){\n      setPayments([]);\n    } else {\n      PaymentsDataService\n            .getMany(paymentIds)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setPayments(res.map(res => res[\"data\"]).sort((p1, p2) => p1.date.localeCompare(p2.date)));\n                });\n    }\n  }, [paymentIds])\n\n  return (\n    <Box p={3}>  {// todo simplify everywhere\n        } <Box px={2}>\n\n              {loading?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n              hasNeeds([NEEDS.post]) && <Tooltip className={classes.actionIcon} title={t(\"new_payment\")} aria-label={t(\"new_payment\")}>\n                <IconButton onClick={(e) => { setNewPaymentCard(true); }}>\n                  <AddCircleIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <div className={classes.newLine}>\n\n              {\n                payments && payments.map(payment =>\n                    (<PaymentCard payment={payment} key={payment['id']} updatePayment={updatePayment} deletePayment={deletePayment}/>)\n                )\n              }\n\n              {newPaymentCard &&\n                <PaymentCard payment={getDefaultValues()}\n                             updatePayment={updatePayment}\n                             deletePayment={(_) => {setNewPaymentCard(false)}}\n                            newPayment={true}\n                             student_id={student_id}\n                addPaymentId={addPaymentId}/>\n              }\n\n              {loading &&\n                <Skeleton width=\"100%\" height=\"250px\"/>  // todo we can do better\n              }\n\n              {!loading && payments.length === 0 && !newPaymentCard &&\n                <Typography>{t(\"no_payments\")}</Typography>\n              }\n              </div>\n            </Box>\n        </Box>\n  );\n}\n\nPayments.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nexport default Payments;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('schedules'))();\n\n","import React from \"react\";\n\nconst tabContext = React.createContext(\n    {currentTab: null, goTo: (res) => {}}); // Create a context object\n\nexport {\n  tabContext // Export it so it can be used by other Components\n};","import Box from \"@material-ui/core/Box\";\nimport React, {useEffect, useState} from \"react\";\nimport SchedulesDataService from \"../_services/schedules.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport styled from \"@emotion/styled\";\nimport {useTheme} from '@material-ui/core/styles';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport {Dialog, DialogActions, DialogContent, DialogTitle, TextField} from \"@material-ui/core\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport Button from \"@material-ui/core/Button\";\nimport {useTranslation} from \"react-i18next\";\nimport {confirmContext} from \"../_context/confirm-context\";\nimport {tabContext} from \"../_context/tab-context\";\n\n\nexport const eventFromSchedule = (theme, schedule) => {\n    return {\n        daysOfWeek: [schedule['day_week']],\n        title: schedule['display_name'],\n        groupId: [schedule['id']],\n        id: schedule['id'],\n        startTime: schedule['start_time'],\n        endTime: schedule['end_time'],\n        color: schedule[\"is_base\"] ? theme.palette.secondary.main : theme.palette.secondary.light,\n        textColor: schedule[\"is_base\"] ? theme.palette.secondary.contrastText : theme.palette.secondary.contrastText,\n        extendedProps: {\n            schedule: schedule\n        },\n    }\n}\n\nfunction evaluate(expression, ...args){\n    console.log(typeof expression);\n    if (typeof expression === 'function'){\n        return expression(...args);\n    }\n\n    return expression;\n}\n\nfunction Scheduler({snapDuration = '00:15',\n                       allowView=false, viewUrl=null,\n                        allowDelete=false,\n                    selectable=false,\n                       viewStudent=false, deleteCustom=false,\n                      scheduleIds,\n                    setScheduleIds,\n                       onEventClick, onEventSelected,\n                       onEventChange, editable=false, ...other}) {\n    const errorHandler = useErrorHandler();\n    const theme = useTheme();\n    const calendarRef = React.createRef();\n    const StyleWrapper = styled.div`\n      .fc-button, .fc-button.fc-button-primary {\n        background: ${theme.palette.primary.main};\n        color: ${theme.palette.primary.contrastText};\n        border-color: ${theme.palette.primary.main};\n        background-image: none;\n    }\n    .fc-button:enabled:hover {\n        background: ${theme.palette.primary.dark};\n        color: ${theme.palette.primary.contrastText};\n        border-color: ${theme.palette.primary.dark};\n        background-image: none;\n    }\n    `\n\n    const [schedules, setSchedules] = useState(null);\n\n\n    const loading = scheduleIds === null;\n    const {t} = useTranslation();\n    // todo right click menu to delete\n\n\n    useEffect(() => {\n        if (scheduleIds === null) return;\n\n        if (scheduleIds.length === 0) {\n            setSchedules([]);\n        } else {\n            SchedulesDataService\n                .getMany(scheduleIds)\n                .then(...errorHandler({}))\n                .then(function (res) {\n                    setSchedules(res.map(res => res[\"data\"]).map(schedule => {\n                        return eventFromSchedule(theme, schedule);\n                    }));\n                });\n        }\n    }, [scheduleIds, theme]);\n\n    const withScheduleInfo = (method, info) => {\n        return method(info,\n            info.event['start'].getDay(),\n            info.event['start'].toLocaleTimeString('en-US', {hour12: false}),\n            info.event['end'].toLocaleTimeString('en-US', {hour12: false}),\n            info.event.extendedProps[\"schedule\"]);\n    }\n    const navigator = React.useContext(tabContext);\n\n    const [currentSchedule, setCurrentSchedule] = React.useState({open: false, event: null, schedule: null})\n\n      const handleClickOpen = (info) => {\n        setCurrentSchedule({open: true, event: info.event, schedule: info.event.extendedProps['schedule']});\n      };\n\n      const handleClose = () => {\n        setCurrentSchedule({open: false, event: null, schedule: null});\n      };\n      const handleView = () => {\n          navigator.goTo(...evaluate(viewUrl, currentSchedule.schedule));\n          handleClose();\n      }\n      const handleDelete = () => {\n          SchedulesDataService\n               .delete(currentSchedule.schedule.id)\n               .then(...errorHandler({snackbarSuccess: true}))\n               .then(function (res) {\n                  handleClose();\n                    setScheduleIds(scheduleIds.filter(id => id !== currentSchedule.schedule.id));\n                    setSchedules(schedules.filter(s => s.id !== currentSchedule.schedule.id));\n               });\n      }\n\n    return (\n        <Box p={2} style={{height: '100%', flex: 1, minHeight: \"70vh\" }}>\n            {loading ? <Skeleton variant=\"rect\" width=\"100%\" height=\"100%\"/>\n                :\n                <React.Fragment>\n                    <Dialog open={currentSchedule.open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                        <DialogTitle id=\"form-dialog-title\">{currentSchedule.schedule? currentSchedule.schedule[\"display_name\"]: \"\"}</DialogTitle>\n                        <DialogActions>\n                          <Button onClick={handleClose} color=\"primary\">\n                              {t(\"cancel\")}\n                          </Button>\n\n                             <Button\n                                 disabled={!(currentSchedule.schedule !== null &&\n                                            evaluate(allowView, currentSchedule.schedule))}\n                                 onClick={handleView}\n                                 color=\"primary\">\n                                {t(\"view\")}\n                            </Button>\n\n                            <Button\n                                    disabled={!(currentSchedule.schedule !== null &&\n                                            evaluate(allowDelete, currentSchedule.schedule))}\n                                    onClick={handleDelete}\n                                    color=\"secondary\">\n                                    {t(\"delete\")}\n                            </Button>\n                        </DialogActions>\n                      </Dialog>\n                    <StyleWrapper style={{height: \"100%\"}}>\n                    <FullCalendar\n                        plugins={[timeGridPlugin, interactionPlugin]}\n                        initialView=\"timeGridWeek\"\n                        height=\"100%\"\n                        firstDay={1}\n                        ref={calendarRef}\n                        editable={editable}\n                        buttonText={{\n                            prev:     '<', // <\n                              next:     '>', // >\n                              prevYear: '<<',  // <<\n                              nextYear: '>>',  // >>\n                              today:    'today',\n                              month:    'month',\n                              week:     'week',\n                              day:      'day'\n                        }}\n                        selectable={selectable}\n                        selectMirror={true}\n                        dayMaxEvents={true}\n                        weekends={true}\n                        snapDuration={snapDuration}\n                        events={schedules}\n                        eventAdd={function () {\n                        }}\n                        eventChange={function (clickInfo) {\n                            // const schedule = clickInfo.event.extendedProps[\"schedule\"];\n                            // if (schedule[\"is_base\"] === true) return enqueueSnackbar(t(\"cant_remove_schedule\"), {'variant': 'warning'});\n                        }}\n                        eventRemove={function () {\n                        }}\n                        select={function (selectInfo) {\n                            selectInfo.view.calendar.unselect();\n                            onEventSelected( selectInfo.start.getDay(),\n            selectInfo.start.toLocaleTimeString('en-US', {hour12: false}),\n            selectInfo.end.toLocaleTimeString('en-US', {hour12: false}),)\n                        }}\n                        eventContent={function () {\n                        }} // custom render function\n                        eventClick={(info) => {\n                            /* let calendarApi = calendarRef.current.getApi();\n                              console.log(calendarApi.getEventById(info.event.id).remove());\n                              setSchedules(schedules.filter(s=>s.id !== info.event.id));*/\n                            handleClickOpen(info);\n                        }}\n                        eventTimeFormat={{\n                            hour: '2-digit',\n                            minute: '2-digit',\n                            hour12: false\n                        }}\n                        eventResize={(info) => (withScheduleInfo(onEventChange, info))}\n                        eventDrop={(info) => (withScheduleInfo(onEventChange, info))}\n                    />\n                </StyleWrapper>\n                </React.Fragment>\n                }\n        </Box>\n    );\n}\n\nexport default Scheduler;","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport SchedulesDataService from \"../_services/schedules.service\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useSnackbar} from \"notistack\";\nimport Scheduler, {eventFromSchedule} from \"./scheduler.component\";\nimport {confirmContext} from \"../_context/confirm-context\";\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n    calendar: {\n      margin: theme.spacing(2)\n    }\n\n}));\n\n\nfunction Schedule({ title, scheduleIds, setScheduleIds, student_id, ...other }) {\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const theme = useTheme();\n\n  return (\n    <div style={{height: '100%', flex: 1, minHeight: \"70vh\" }}>\n\n    </div>\n  );\n}\n\nexport default Schedule;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('students', 'courses'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses'))();\n\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {useTranslation} from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: '2px 4px',\n    display: 'flex',\n    alignItems: 'center',\n    width: '100%',\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1,\n  },\n  iconButton: {\n    padding: 10,\n  }\n}));\n\nexport default function SearchBar({label, searchTitle, onChange, onSearch}) {\n  const classes = useStyles();\n\n  const { t } = useTranslation();\n\n  return (\n    <Paper className={classes.root}>\n      <InputBase\n        className={classes.input}\n        placeholder={t(\"search\")+ \" \" + label}\n        inputProps={{ 'aria-label': 'search ' + label}}\n        value={searchTitle}\n        onChange={onChange}\n        onKeyPress={(e) =>\n        { if(e.key === 'Enter'){\n            onSearch();\n            e.preventDefault();\n        } }}\n\n      />\n      <IconButton\n          type=\"submit\"\n          className={classes.iconButton}\n          aria-label=\"search\"\n            onClick={onSearch}>\n        <SearchIcon/>\n      </IconButton>\n    </Paper>\n  );\n}","import React from \"react\";\n\nconst themeContext = React.createContext({theme: null, switchTheme: () => {}, label: null}); // Create a context object\n\nexport {\n  themeContext // Export it so it can be used by other Components\n};","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Chip, CircularProgress} from \"@material-ui/core\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {loadingContext} from \"../_context/loading-context\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: '2px 4px',\n    display: 'flex',\n    alignItems: 'center',\n    flexWrap: 'wrap'\n  },\n}));\n\nexport default function ExportSearchChip({searchTermField=\"full_name\", searchTerm=null, page=null, dataService, exportAll=false, getFilters=null}) {\n  const classes = useStyles();\n\n  const {t} = useTranslation();\n  const errorHandler = useErrorHandler();\n  const loadingCtx = React.useContext(loadingContext);\n\n  return (\n      <Tooltip title={t(exportAll ? \"export_all_csv\" : \"export_results_csv\")}\n               aria-label={t(exportAll ? \"export_all_csv\" : \"export_results_csv\")}>\n\n        <Chip variant=\"outlined\"\n              color=\"primary\"\n              size=\"small\"\n              disabled={loadingCtx.loading}\n              avatar={<Avatar>csv</Avatar>}\n              label={t(exportAll ? \"export_all\" : \"export\")}\n              onClick={() => {\n                if (loadingCtx.loading) return;\n\n                loadingCtx.startLoading();\n                dataService\n                    .downloadCsv(searchTermField, searchTerm,\n                        exportAll ? \"*\" : page,\n                        getFilters === null ? {} : getFilters(),\n                        exportAll)\n                    .then(...errorHandler({}))\n                    .finally(() => {\n                      loadingCtx.stopLoading();\n                    })\n              }}/>\n      </Tooltip>\n\n  );\n}","import React, {useEffect, useState} from \"react\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport List from \"@material-ui/core/List\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport SearchBar from './searchbar.component'\nimport Box from \"@material-ui/core/Box\";\nimport {useTranslation} from \"react-i18next\";\nimport {Accordion, AccordionDetails, AccordionSummary, Chip, ListItemSecondaryAction} from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ExportSearchChip from \"./ExportSearchChip.component\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flex: 1,\n        overflow: 'auto',\n        display: \"flex\",\n        flexDirection: \"column\"\n    },\n    list: {\n        overflow: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1,\n        minHeight: '150px'\n    },\n    searchAndFilters: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: theme.spacing(3)\n    },\n    chip: {\n        margin: theme.spacing(2)\n    },\n    avatar: {},\n    selectedAvatar: {\n        backgroundColor: theme.palette.primary.dark\n    },\n    chips: {\n        flexWrap: 'wrap',\n        '& > *': {\n            margin: theme.spacing(0.5),\n        },\n        heading: {\n            fontSize: theme.typography.pxToRem(15),\n            fontWeight: theme.typography.fontWeightRegular,\n        },\n    },\n    noResults: {\n        textAlign: 'center'\n    }\n}));\n\nconst ItemsList = ({setCurrentItemId=() => {}, auxFields = [], displayText = null, onItemClick = () => {}, parent_id=null, secondaryDisplayNameField=null,\n                        secondaryAction=null, secondaryActionNeeds=[], secondaryActionTooltip=null, secondaryActionIcon=null, secondaryActionCallable=null,\n                       withAvatar=true, withFiltersBox = true,\n                       chips=[], currentItemId = null, items, setItems, displayNameField=\"full_name\",\n                       usableFilters=[], defaultSearchBy=\"full_name\", searchByOptions=[\"full_name\"],\n                        dataService, searchBarLabel, exportPage=true, exportAllPages=true}) => {\n    \n    \n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [filters, setFilters] = useState(usableFilters.reduce((map, f) => {\n        map[f.name] = f.initialValue;\n        return map;\n        }, {})\n    );\n    const [searchBy, setSearchBy] = useState(defaultSearchBy);\n\n    const {t} = useTranslation();\n\n    const [page, setPage] = useState(1);\n    const [count, setCount] = useState(0);\n    const errorHandler = useErrorHandler();\n     const [hasNeeds, NEEDS] = useNeeds();\n\n    const classes = useStyles();\n\n    const onChangeSearchTerm = (e) => {\n        setSearchTerm(e.target.value);\n    };\n\n    const resetSearchBy = () => {\n        setSearchBy(defaultSearchBy);\n    }\n\n    function getFilters(){\n        return Object.fromEntries(Object.entries(filters).filter(([k,v]) => (v !== null)))\n    }\n\n    function search() {\n        dataService\n            .getAll({name: searchBy, value: searchTerm}, page, [...new Set(['id', displayNameField, secondaryDisplayNameField === null? 'id': secondaryDisplayNameField, ...auxFields])], getFilters(), parent_id)\n            .then(...errorHandler({}))\n            .then(function (res) {\n                setItems(res[\"data\"]);\n                setCount(res[\"_pagination\"][\"totalPages\"]);\n            });\n    }\n\n    // we don't want the search to trigger for each searchTerm change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => {\n        if (page === 1) {\n            search(); // no need to change page, since we are at page 1\n        } else {\n            setPage(1);  // will trigger search due tot the effect below\n        }\n    }, [filters]);  // todo\n\n    useEffect(search, [page, searchBy, parent_id]);\n\n    const handlePageChange = (event, value) => {\n        setPage(value);\n    };\n\n    return (\n        <Box className={classes.root}>\n            <Box className={classes.searchAndFilters}>\n                <SearchBar\n                    label={t(searchBarLabel)}\n                    value={searchTerm}\n                    onChange={onChangeSearchTerm}\n                    onSearch={() => {\n                        if (page === 1){\n                            search();\n                        } else {\n                            setPage(1);  // search will be triggered\n                        }\n\n                    }}\n                />\n\n                {withFiltersBox && <Accordion>\n                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\n                        <Typography className={classes.heading}>{t(\"filters_actions\")}</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                        <Box className={classes.chips}>\n\n                            {exportPage && Array.isArray(items) && items.length > 0 && <ExportSearchChip\n                                searchTerm={searchTerm}\n                                page={page}\n                                searchTermField={searchBy}\n                                dataService={dataService}\n                                getFilters={getFilters}\n                            />}\n                            {exportAllPages && Array.isArray(items) && items.length > 0 && <ExportSearchChip\n                                searchTerm={searchTerm}\n                                page={page}\n                                dataService={dataService}\n                                searchTermField={searchBy}\n                                exportAll={true}\n                                getFilters={getFilters}\n                            />}\n\n                            {chips.map((chip) => (\n                                chip\n                            ))}\n\n                            \n\n                            {searchByOptions.map(option => (\n                                <Tooltip key={option} title={`${t(\"search_by\")} ${t(option)}`}>\n                                    <Chip size=\"small\"\n                                          color={searchBy === option ? \"primary\" : \"default\"}\n                                          label={`${t(\"search_by\")} ${t(option)}`}\n                                          onClick={(e) => {\n                                              if (searchBy === option) {\n                                                  resetSearchBy();\n                                              } else {\n                                                  setSearchBy(option);\n                                              }\n                                          }}/>\n                                </Tooltip>\n                            ))}\n\n\n                            {usableFilters.map(f => (\n                                <React.Fragment>\n                                     {f['options'].map(option => (\n                                        <Tooltip key={f.name + option.name}\n                                                 title={t(option.tooltip)}\n                                                 aria-label={t(option.tooltip)}>\n                                            <Chip size=\"small\"\n                                                  color={filters[f.name] === option.name ? \"primary\" : \"default\"}\n                                                  label={t(option.label)}\n                                                  onClick={(e) => {\n                                                      setFilters({\n                                                          ...filters,\n                                                          [f.name]: (filters[f.name] === option.name) ? null : option.name\n                                                      })\n                                                  }}/>\n                                        </Tooltip>\n                                    )\n                                )}\n\n                                </React.Fragment>))\n                            }\n                        </Box>\n                    </AccordionDetails>\n                </Accordion>}\n\n\n                <Box my={2}>\n                    <Pagination\n                        className=\"pagination\"\n                        count={count}\n                        page={page}\n                        size=\"small\"\n                        showFirstButton\n                        showLastButton\n                        siblingCount={1}\n                        boundaryCount={1}\n                        color=\"primary\"\n                        onChange={handlePageChange}\n                    />\n                </Box>\n            </Box>\n            <List className={classes.list}>\n                {items && items.map((item) => (\n                    <div key={item[\"id\"]}>\n                        <ListItem key={item[\"id\"]} button\n                                  onClick={() => {\n                                      onItemClick(item['id']);\n                                      setCurrentItemId(item['id']);\n                                  }}>\n                            {withAvatar && <ListItemAvatar>\n                                <Avatar\n                                    className={item[\"id\"] === currentItemId ? classes.selectedAvatar : classes.avatar}>{item[displayNameField].charAt(0).toUpperCase()}</Avatar>\n                            </ListItemAvatar>}\n                            <ListItemText id=\"name\" primary={displayText === null? item[displayNameField]: displayText(item)} secondary={secondaryDisplayNameField === null? null: item[secondaryDisplayNameField]}/>\n\n                            {secondaryAction &&  hasNeeds(secondaryActionNeeds) &&\n                            <ListItemSecondaryAction>\n                                <Tooltip title={t(secondaryActionTooltip)}>\n                                    <IconButton edge=\"end\" aria-label={t(\"export\")} onClick={(e) => {\n                                        secondaryActionCallable(item['id']);\n                                    }}>\n                                        {secondaryActionIcon}\n                                    </IconButton>\n                                </Tooltip>\n                            </ListItemSecondaryAction>}\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n                {\n                    (items.length === 0) && <Typography className={classes.noResults}>\n                        {t(\"no_results\") +\" \"}\n                    </Typography>\n                }\n            </List>\n        </Box>\n    );\n};\n\nexport default ItemsList;\n","import React from \"react\";\nimport {useTranslation} from \"react-i18next\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport ItemsList from \"./items_list.component\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport {NEEDS} from \"../_helpers/needs\";\nimport {confirmContext} from \"../_context/confirm-context\";\n\n\nconst ItemsListSecondary = ({dataService, displayText, auxFields, parent_id, deleteTooltip, delete_message, onItemDeleted = () => {}, ...props}) => {\n    const errorHandler = useErrorHandler();\n    const confirm = React.useContext(confirmContext);\n    const {t} = useTranslation();\n\n    return <ItemsList\n        secondaryAction={true}\n        withFiltersBox={false}\n        withAvatar={false}\n        secondaryActionCallable={(id) => {\n             confirm.confirm(delete_message, \"not_undone\", () => {\n                dataService\n                .delete(parent_id, id)\n                .then(...errorHandler({snackbarSuccess:true}))\n                .then(function (r) {\n                    onItemDeleted(id);\n                });\n            });\n        }}\n        parent_id={parent_id}\n        displayText={displayText}\n        auxFields={auxFields}\n        secondaryActionTooltip={deleteTooltip}\n        secondaryActionNeeds={[NEEDS.delete]}\n        secondaryActionIcon={<DeleteIcon/>}\n        dataService={dataService}\n        {...props}\n    />\n};\n\nexport default ItemsListSecondary;\n","import React, {useState} from \"react\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport ItemsList from \"./items_list.component\";\nimport {confirmContext} from \"../_context/confirm-context\";\n\n\nconst ItemsListTerciary = ({dataService, dataServiceSR, add_message, parent_id, onAdded = () => {}, ...props}) => {\n    const errorHandler = useErrorHandler();\n    const confirm = React.useContext(confirmContext);\n    const [items, setItems] = useState([]);\n    return <ItemsList\n        secondaryAction={false}\n        items={items}\n        setItems={setItems}\n        withFiltersBox={false}\n        withAvatar={false}\n        dataService={dataService}\n        onItemClick={(id) => {\n            confirm.confirm(add_message,null,  () => {\n                if (dataServiceSR === null) return onAdded(id, null);\n                dataServiceSR\n                    .postWithId(parent_id, id)\n                    .then(...errorHandler({snackbarSuccess: true}))\n                    .then((newItem) => {\n                        onAdded(id, newItem[\"data\"]);\n                    })\n            });\n\n        }\n        }\n        {...props}\n    />\n};\n\nexport default ItemsListTerciary;\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, {useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    AppBar,\n    Dialog,\n    Slide\n} from \"@material-ui/core\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport ItemsListSecondary from \"./items_list_secondary.component\";\nimport ItemsListTerciary from \"./items_list_terciary.component\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport {tabContext} from \"../_context/tab-context\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n        overflow: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1\n    },\n    box: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: '30px'\n    },\n    appBar: {\n    position: 'relative',\n  },\n  newLine: {\n    width: '100%',\n       marginTop: theme.spacing(1),\n        display: \"flex\",\n    flexDirection: \"column\"\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1,\n  }, actionIcon: {\n      float: 'right'\n    }\n}));\n\n\nfunction AddDeleteSubresource({  defaultSearchBy, withFiltersBox=false, displayText, auxFields, parentItemDataService, itemDataService, add_message_confirm, parent_id, secondaryDisplayNameField, searchByOptions, resourceName, displayNameField, add_message,onSubresourceAdded, onSubresourceDeleted, usableFilters, ...other}) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const handleAddDialogClose = () => {\n        setAddDialogOpen(false);\n  };\n  const handleAddDialogOpen = () => {\n      setAddDialogOpen(true);\n  }\n\n   const [hasNeeds, NEEDS] = useNeeds();\n  const loading = parent_id === null;\n  const [items, setItems] = useState([]);\nconst navigator = React.useContext(tabContext);\n\n  return (\n\n        <Box p={3}>  {// todo simplify everywhere\n        } <Box px={2}>\n\n            <Dialog fullScreen open={addDialogOpen} onClose={handleAddDialogClose} TransitionComponent={Transition}>\n        <AppBar className={classes.appBar} color=\"secondary\">\n          <Toolbar>\n            <Typography variant=\"h6\" className={classes.title}>\n                {t(add_message)}\n            </Typography>\n            <Button autoFocus color=\"inherit\" onClick={handleAddDialogClose}>\n                {t(\"cancel\")}\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Box className={classes.box} m={3}>\n            <ItemsListTerciary\n                    dataService={itemDataService}\n                    dataServiceSR={parentItemDataService}\n                    defaultSearchBy={defaultSearchBy}\n                    searchByOptions={searchByOptions}\n                    searchBarLabel={resourceName}\n                    displayNameField={displayNameField}\n                    secondaryDisplayNameField={secondaryDisplayNameField}\n                    parent_id={parent_id}\n                    add_message={add_message_confirm}\n                    onAdded={(id, body) => {\n                        setItems([...items, body]);\n                        onSubresourceAdded(id);\n                        handleAddDialogClose();\n                    }}\n                />\n            </Box>\n          </Dialog>\n\n              {loading?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n              hasNeeds([NEEDS.post]) && <Tooltip className={classes.actionIcon} title={t(add_message)} aria-label={t(add_message)}>\n                <IconButton onClick={handleAddDialogOpen}>\n                  <AddCircleIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n\n              <div className={classes.newLine}>\n                  {loading?\n                      <Skeleton width=\"100%\" height=\"250px\"/>\n                  :\n                <ItemsListSecondary\n                    dataService={parentItemDataService}\n                    defaultSearchBy={defaultSearchBy}\n                    searchByOptions={searchByOptions}\n                    items={items}\n                    withFiltersBox={withFiltersBox}\n                    setItems={setItems}\n                    displayText={displayText}\n                    auxFields={auxFields} \n                    searchBarLabel={resourceName}\n                    displayNameField={displayNameField}\n                    usableFilters={usableFilters}\n                    parent_id={parent_id}\n                    deleteTooltip={\"delete\"}\n                    delete_message={t(\"delete\") + \" \" + t(resourceName)}\n                    onItemDeleted={(id) => {\n                        setItems(items.filter(x => x.id !== id));\n                        onSubresourceDeleted(id);\n                    }}\n                    onItemClick={(id) => {\n                        navigator.goTo(resourceName, id);\n                    }}\n                />}\n              </div>\n            </Box>\n        </Box>\n\n  );\n}\n\nexport default AddDeleteSubresource;\n","import React from \"react\";\n\nexport function a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`,\n  };\n}\n\nfunction TabFrame({ value, index, children, ...other }) {\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      style={{height: '100%', flex: 1}}\n      {...other}>\n        {children}\n    </div>\n  );\n}\n\nexport default TabFrame;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport Attendee from \"./students.student.attendee.component\";\nimport Guardian from \"./students.student.guardian.component\";\nimport StudentsDataService from \"../_services/students.service\";\nimport Payments from \"./students.student.payments.component\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport Schedule from \"./students.student.schedule.component\";\nimport StudentsCourseDataService from \"../_services/student_courses.service\";\nimport CoursesDataService from \"../_services/courses.service\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport AddDeleteSubresource from \"./subresource_add_delete.component\";\nimport TabFrame, {a11yProps} from \"./tab\";\nimport SchedulesDataService from \"../_services/schedules.service\";\nimport Scheduler, {eventFromSchedule} from \"./scheduler.component\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\n\n\nexport default function Student({setNewStudent,newStudent,addStudentId, currentStudentId, deleteStudent, ...props}) {\n\n  const loading = currentStudentId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [student, setStudent] = useState(null);  // todo rename to student\n  const [newGuardian, setNewGuardian] = useState(false);\n    const [hasNeeds, NEEDS] = useNeeds();\n\n\n  useEffect(() => {\n    if (loading) return setStudent(null);\n    StudentsDataService\n            .getOne(currentStudentId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setStudent(res[\"data\"]);\n                });\n  }, [currentStudentId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentStudentId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };\n\n\n\n  const guardians = student === null? []: student.guardians;\n    // todo maybe tabs with or only with icons\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"attendee\")} {...a11yProps(0)} />\n\n                    { !newStudent && hasNeeds([NEEDS.schedules]) &&\n                  <Tab label={t(\"schedules\")} {...a11yProps(1)} />}\n                 { !newStudent  && hasNeeds([NEEDS.payments]) &&  <Tab label={t(\"payments\")} {...a11yProps(2)} />}\n                 { !newStudent  && hasNeeds([NEEDS.courses]) &&  <Tab label={t(\"courses\")} {...a11yProps(3)} />}\n\n                  {\n                  (!newStudent && guardians  && hasNeeds([NEEDS.guardians]) ) && guardians.map((contact, index) => (\n                  <Tab key={t(\"contact\") + \" \" + (index+1)} label={t(\"contact\") + \" \" + (index+1)} {...a11yProps(index+4)} />\n                      ))}\n\n\n                  {\n                    (!newStudent && newGuardian) &&\n                        <Tab key={t(\"new_guardian\")} label={t(\"new_guardian\")} {...a11yProps(4+guardians.length)} />\n                  }\n\n\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n            <TabFrame value={value} index={0}>\n                <Attendee\n                      setNewStudent={setNewStudent}\n                      dir={theme.direction}\n                      newStudent={newStudent}\n                      title={t(\"attendee\")}\n                      currentStudent={student}\n                      addStudentId={addStudentId}\n                      patchService={StudentsDataService}\n                      updateCurrentStudent={setStudent}\n                      deleteStudent={deleteStudent}\n                      addNewGuardian={() => {\n                        setNewGuardian(true);\n                        setValue(4+guardians.length);\n                      }}/>\n            </TabFrame>\n\n              {hasNeeds([NEEDS.schedules]) && <TabFrame value={value} index={1}>\n              <Scheduler\n                    allowDelete={(s) => !s.is_base}\n                    allowView={true}\n                    viewUrl={(s) => ['/courses', s.course_id]}\n                    setScheduleIds={(ids) => setStudent({...student, schedules: ids})}\n                    onEventChange={(info, day_week, start_time, end_time, schedule) => {\n                       const newEvent = info.event;\n                       let body = {};\n                        body['day_week'] = day_week;\n                        body['start_time'] = start_time;\n                        body['end_time'] = end_time;\n\n                        if (schedule[\"is_base\"]) {\n                            body['course_id'] = schedule[\"course_id\"];\n                            body['student_id'] = currentStudentId;\n                            SchedulesDataService\n                                    .post(body)\n                                    .then(...errorHandler({errorOut: true, snackbarSuccess: true}))\n                                    .then(function (res) {\n                                        let calendarApi = info.view.calendar;\n                                        newEvent['is_base'] = false;  // todo needed?\n                                        calendarApi.addEvent(eventFromSchedule(theme, res));\n                                        info.revert();\n                                        setStudent({...student, schedules: [...student.schedules, res.id]})\n                                    }).catch(function(err){\n                                        info.revert();\n                            });\n\n                        } else {\n                            SchedulesDataService\n                                    .patch({id: schedule['id'],\n                                                                body: body,\n                                                                initial_values: schedule})\n                                    .then(...errorHandler({errorOut: true, snackbarSuccess: true}))\n                                    .then(function (res) {\n                                    }).catch(function (err){\n                                        info.revert();\n                                    });\n                        }\n                    }}\n                    scheduleIds={student === null ? null : student['schedules']}\n                    editable={true}\n                    selectable={false}\n                />\n\n              </TabFrame>}\n              {hasNeeds([NEEDS.payments]) && <TabFrame value={value} index={2}>\n                  <Payments\n                         paymentIds={student === null ? null : student.payments}\n                         addPaymentId={(payment_id) => {\n                             setStudent({...student, payments: [...student.payments, payment_id]})\n                         }}\n                         student_id={currentStudentId}\n                         deletePaymentFromStudent={(payment_id) => {\n                             setStudent({\n                                 ...student,\n                                 payments: student.payments.filter((p) => p !== payment_id)\n                             });\n                         }}\n              /></TabFrame>}\n\n              {hasNeeds([NEEDS.courses]) &&\n\n             <TabFrame value={value} index={3}> <AddDeleteSubresource\n                  defaultSearchBy=\"name\"\n                  parentItemDataService={StudentsCourseDataService}\n                  itemDataService={CoursesDataService}\n                  add_message_confirm=\"confirm_enroll_to_course\"\n                  parent_id={currentStudentId}\n                  secondaryDisplayNameField=\"description\"\n                  searchByOptions={[\"name\"]}\n                  resourceName={\"courses\"}\n                  displayNameField={\"name\"}\n                  add_message=\"enroll_to_course\"\n                  onSubresourceAdded={(id) => {\n                    setStudent({...student, courses: [...student[\"courses\"], id]})\n                  }}\n                  onSubresourceDeleted={(id) => {\n                    setStudent({...student, courses: student[\"courses\"].filter(x => x !== id)});\n                  }}\n             /></TabFrame>\n              }\n\n            {\n              guardians && hasNeeds([NEEDS.guardians]) && guardians.map((guardian, index) => (\n                  <TabFrame value={value} index={index+4}>\n                      <Guardian\n                            key={guardian}\n                            dir={theme.direction}\n                            guardianId={guardian}\n                            deleteGuardianId={(id) => {\n                              setStudent({...student, guardians: student['guardians'].filter((gId) => gId !== id)});\n                              setValue(0);\n                            }}\n                  /></TabFrame>\n                  ))}\n\n                  <TabFrame value={value} index={4+guardians.length}>\n                      <Guardian\n                        dir={theme.direction}\n                        newGuardian={true}\n                        deleteNewGuardian={() => {\n                            setNewGuardian(false);\n                            setValue(0);\n                        }}\n                            studentId={currentStudentId}\n                        addGuardianId={(id) => {\n                            setNewGuardian(false);\n                            setStudent({...student, guardians: [...student.guardians, id]});\n                            setValue(4+guardians.length);\n                        }\n                        }\n                        deleteGuardianId={(id) => {\n                            setStudent({...student, guardians: student['guardians'].filter((gId) => gId !== id)});\n                            setValue(0);\n                        }}\n                  /></TabFrame>\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React from \"react\";\nimport {useTranslation} from \"react-i18next\";\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport ItemsList from \"./items_list.component\";\n\n\nconst ItemsListMain = ({dataService, ...props}) => {\n    const errorHandler = useErrorHandler();\n    const {t} = useTranslation();\n\n\n    return <ItemsList\n        secondaryAction={true}\n        secondaryActionCallable={(id) => {\n            dataService\n                .downloadOneCsv(id)\n                .then(...errorHandler({}));\n        }}\n        secondaryActionTooltip={t(\"export\") + \" .csv\"}\n        secondaryActionIcon={<GetAppIcon/>}\n        dataService={dataService}\n        {...props}\n    />\n};\n\nexport default ItemsListMain;\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Student from \"./students.student.component\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {Chip, Tooltip} from \"@material-ui/core\";\nimport StudentsDataService from \"../_services/students.service\";\nimport ItemsList from \"./items_list.component\";\nimport ExportSearchChip from \"./ExportSearchChip.component\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport {downloadGodFile} from \"../_services/god.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {loadingContext} from \"../_context/loading-context\";\nimport ItemsListMain from \"./items_list_main.component\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Students({...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [students, setStudents] = useState([]);\n  const [newStudent, setNewStudent] = useState(false);\n  const [currentStudentId, setCurrentStudentId] = useState(null);\n    const handleError = useErrorHandler();\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  const [hasNeeds, NEEDS] = useNeeds();\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentStudentId(id);\n  }, [id]);\n  const loadingCtx = React.useContext(loadingContext);\n\n\n  useEffect(() => {\n      if (currentStudentId !== null) setNewStudent(false);\n  }, [currentStudentId])\n\n  return (\n      <Grid container spacing={3} className={classes.root}>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"students\")}</h1>\n            <ItemsListMain\n                setCurrentItemId={setCurrentStudentId}\n                currentItemId={currentStudentId}\n                items={students}\n                setItems={setStudents}\n                chips={[\n                    <Tooltip title={t(\"export_contact_sheets\")}\n                           aria-label={t(\"export_contact_sheets\")}>\n                    <Chip variant=\"outlined\"\n                          color=\"primary\"\n                          disabled={loadingCtx.loading}\n                          size=\"small\"\n                          avatar={<Avatar>csv</Avatar>}\n                          label={t(\"export_all_plus\")}\n                          onClick={() => {\n                              if (loadingCtx.loading) return;\n                              loadingCtx.startLoading();\n                            downloadGodFile()\n                                .then(...handleError({}))\n                                .finally(() => {\n                                    loadingCtx.stopLoading();\n                                })\n                          }}/>\n                  </Tooltip>\n                ]}\n                usableFilters={[{\n                    name: 'enrolment_status',\n                    defaultValue: null,\n                    options: [\n                        {\n                            label: \"enrolled\",\n                            tooltip: \"only_enrolled\",\n                            name: 'enrolled'\n                        }, {\n                            label: \"pre-enrolled\",\n                            tooltip: \"only_preenrolled\",\n                            name: 'pre-enrolled'\n                        }, {\n                            label: \"early-unenrolled\",\n                            tooltip: \"only_earlyunenrolled\",\n                            name: 'early-unenrolled'\n                        }\n                    ]\n                },\n                    {\n                      name: 'default_payment_method',\n                        defaultValue: null,\n                        options: [\n                           {label: \"cash\", tooltip: \"only_cash\", name: 'cash'},\n                                {label: \"bank-transfer\", tooltip: \"only_banktransfer\", name: 'bank-transfer'},\n                                {\n                                    label: \"bank-direct-debit\",\n                                    tooltip: \"only_bankdirectdebit\",\n                                    name: 'bank-direct-debit'\n                                }\n                        ]\n                    }]}\n                defaultSearchBy=\"full_name\"\n                searchByOptions={[\"full_name\", \"id\"]}\n                dataService={StudentsDataService}\n                searchBarLabel=\"students\"\n            />\n\n            {hasNeeds([NEEDS.post]) && <Tooltip title={t(\"new_student\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={(e) => {\n                    setCurrentStudentId(null);\n                    setNewStudent(true);\n                }}>\n                    <AddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <Student\n            currentStudentId={currentStudentId}\n            newStudent={newStudent}\n            setNewStudent={setNewStudent}\n            addStudentId={(id) =>{\n                setCurrentStudentId(id);\n            }}\n            deleteStudent={(studentId) => {\n                if (studentId === currentStudentId) setCurrentStudentId(null);\n\n                setStudents(students.filter((s) => s['id'] !== studentId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import DirtyTextField from \"./dirtytextfield.component\";\nimport {useTranslation} from \"react-i18next\";\nimport {MenuItem} from \"@material-ui/core\";\n\nexport default function RoleSelect({formik}) {\n    const { t } = useTranslation();\n\n    return <DirtyTextField\n    label={t(\"role\")}\n    style={{flex: 1}}\n    name=\"role_id\"\n    formik={formik}\n    select>\n    {[{name: 'administrator',\n       id: 'administrator'},\n       {name: 'administrative',\n       id: 'administrative'},\n       {name: 'layman',\n       id: 'layman'},\n       {name: 'teacher',\n       id: 'teacher'},\n       {name: 'empty',\n       id: 'empty'},\n       {name: 'no role',\n       id: null}].map((role) => (\n        <MenuItem key={role.name} value={role.id}>{t(role.name)}</MenuItem>\n    ))}\n</DirtyTextField>;\n}","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const invitationsService = {\n    inviteUser\n};\n\nfunction inviteUser(userEmail, role) {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/user-invites/v1/request`,  // todo server url\n            method: 'POST',\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()},\n            data: {\n                user_email: userEmail,\n                role_id: role\n            }\n        }).then(res => {\n            resolve(true);\n        }).catch(function (res) {\n            reject(res);\n        });\n    });\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('users'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('teachers'))();\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    AppBar,\n    Dialog,\n    Slide\n} from \"@material-ui/core\";\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport EditIcon from '@material-ui/icons/Edit';\nimport TeachersDataService from \"../_services/teachers.service\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport ItemsListTerciary from \"./items_list_terciary.component\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport * as yup from 'yup';\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport UsersDataService from \"../_services/users.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport {safe_email_required} from \"../_yup/validators\";\nimport {confirmContext} from \"../_context/confirm-context\";\nimport RoleSelect from \"./user.role-select.component\";\n\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n  });\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    },\n    list: {\n        overflow: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1\n    },\n    box: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: '30px'\n    },\n    appBar: {\n    position: 'relative',\n  },\n  newLine: {\n    width: '100%',\n       marginTop: theme.spacing(1),\n        display: \"flex\",\n    flexDirection: \"column\"\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1,\n  }, actionIcon: {\n      float: 'right'\n    }\n}));\n\n\n  \nfunction UserPerson({ children, addStudentId, newStudent, title, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const handleAddDialogClose = () => {\n        setAddDialogOpen(false);\n  };\n  const handleAddDialogOpen = () => {\n      setAddDialogOpen(true);\n  }\nconst confirm = React.useContext(confirmContext);\nconst deleteFullUser = () => {\n    UsersDataService\n              .delete(currentStudent['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                    deleteStudent(currentStudent['id']);\n              });\n  }\n\n\n  let initialValues = loading ? {} : currentStudent;\n\n\n    const formik = useNormik(true, {\n        initialValues: initialValues,\n        validationSchema: yup.object({\n            email: safe_email_required(t),\n            name: yup.string().required(t(\"name_required\")),\n            role_id: yup.string().nullable()\n        }),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n                if (Object.keys(changedValues).length > 0) {\n                setStatus();\n\n                UsersDataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentStudent(patched_body);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n            } else {\n                setSubmitting(false);\n            }\n        }\n    });\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n        <Box p={3}>\n            <Box px={2}>\n                <Dialog fullScreen open={addDialogOpen} onClose={handleAddDialogClose} TransitionComponent={Transition}>\n        <AppBar className={classes.appBar} color=\"secondary\">\n          <Toolbar>\n            <Typography variant=\"h6\" className={classes.title}>\n                {t(\"teacher-user\")}\n            </Typography>\n            <Button autoFocus color=\"inherit\" onClick={handleAddDialogClose}>\n                {t(\"cancel\")}\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Box className={classes.box} m={3}>\n            <ItemsListTerciary\n                    dataService={TeachersDataService}\n                    dataServiceSR={null}\n                    defaultSearchBy=\"full_name\"\n                    searchByOptions={[\"full_name\"]}\n                    searchBarLabel={\"teachers\"}\n                    displayNameField={\"full_name\"}\n                    secondaryDisplayNameField={null}\n                    parent_id={currentStudent === null? null: currentStudent['id']}\n                    add_message={\"link-user-to-teacher\"}\n                    onAdded={(id, body) => {\n                        handleAddDialogClose();\n                        formik.setFieldValue('teacher_id', id);\n                        formik.setFieldTouched('teacher_id', true);\n                    }}\n                />\n            </Box>\n          </Dialog>\n\n              {loading ?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n               hasNeeds([NEEDS.delete]) && <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                 confirm.confirm(\"delete_user_question\", \"not_undone\", () => {\n                     deleteFullUser();\n                 })\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              {loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name=\"surname1\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"surname2\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"email\"\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <RoleSelect formik={formik}/>\n                        </Box>\n\n                        {formik.values[\"role\"] == \"teacher\" && <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"teacher\")}\n                                style={{flex: 1}}\n                                name=\"teacher_id\"\n                                formik={formik}\n                                disabled\n                                InputProps={{endAdornment:\n                                    <InputAdornment position=\"end\">\n                                      <IconButton\n                                        aria-label=\"link teacher\"\n                                        onClick={handleAddDialogOpen}\n                                      >\n                                        <EditIcon></EditIcon>\n                                      </IconButton>\n                                    </InputAdornment>\n                                  }}/>\n                        </Box>}\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n\n  );\n}\n\nexport default UserPerson;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('users', 'needs'))();\n\n","import React, {useEffect} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Checkbox, FormControlLabel} from \"@material-ui/core\";\nimport {allNeeds} from \"../_data/needs\";\nimport Typography from \"@material-ui/core/Typography\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\n\nconst useStyles = makeStyles(theme => (createStyles({\n  root: dirty => ({\n         color: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium,\n    \"&.Mui-checked\": {\n      color: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main\n    }\n\n})})));\n\n\nconst DirtyCheckbox = ({name, value, formik, noDirty=false, ...props}) => {\n    const dirty = noDirty === true? false: formik.values[name] !== undefined && formik.initialValues[name] !== undefined && formik.values[name].includes(value) !== formik.initialValues[name].includes(value);\n\n    const classes = useStyles(dirty);\n\n\n    return  <Checkbox\n                      name={name}\n                      className={classes.root}\n                      value={value}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                    error={formik.status  || formik.errors[name] !== undefined}\n                    helperText={formik.touched[name] && formik.errors[name]}\n                      checked={formik.values[name]}\n                     {...props}/>\n}\n\nexport default DirtyCheckbox;","export const symmetricDifference = (setA, setB) => {\n    let _difference = new Set(setA)\n    for (let elem of setB) {\n        if (_difference.has(elem)) {\n            _difference.delete(elem)\n        } else {\n            _difference.add(elem)\n        }\n    }\n    return _difference\n}","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\"\nimport UsersNeedsDataService from \"../_services/user_needs.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNormik} from \"../_helpers/normik\";\nimport NeedsSelection from \"./needs_selection.component\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport {symmetricDifference} from \"../_helpers/set_operations\";\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction UserPerson({ children, addStudentId,  newStudent, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n\n  let initialValues = loading ? {} : currentStudent;\n\n\n    const formik = useNormik(false, {\n        initialValues: initialValues,\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n               setStatus();\n\n               const a = new Set(values[\"needs\"]);\n               const b = new Set(initialValues[\"needs\"]);\n               const difference = Array.from(symmetricDifference(a, b));\n\n               if (difference.size !== 0){\n                   setSubmitting(true);\n                   const jobs = difference.map(need => {\n                    if (b.has(need)){\n                       // has been removed\n                        return UsersNeedsDataService.delete(currentStudent['id'], need)\n                          .then(...errorHandler({}));\n                   } else {\n                        // has been added\n                        return UsersNeedsDataService.postWithId(currentStudent['id'], need)\n                          .then(...errorHandler({}));\n                    }\n                });\n                   Promise\n                       .all(jobs)\n                       .then(...errorHandler({snackbarSuccess: true}))\n                       .then(() => {\n                           updateCurrentStudent({...currentStudent, needs: values[\"needs\"]});\n                       })\n                       .finally(() => {\n                           setSubmitting(false);\n                       })\n               }\n\n\n\n\n        }\n    }, true);\n\n  return (\n\n        <Box p={3}>\n            <Box px={2}>\n\n              {loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               <Box py={0} >\n                                        <Skeleton variant=\"text\" width={\"100%\"} height=\"150px\"/>\n                                    </Box>\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n                                    <Box style={{display: \"inline-block\"}}>\n                        <NeedsSelection\n                formik={formik}\n            /></Box>\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n\n  );\n}\n\nexport default UserPerson;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport UsersDataService from \"../_services/users.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport UserPerson from \"./users.user.userperson.component\";\nimport UserPermissions from \"./users.user.permissions.component\";\nimport * as PropTypes from \"prop-types\";\nimport TabFrame, {a11yProps} from \"./tab\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\n\nexport default function User({currentUserId, deleteUser}) {\n  const loading = currentUserId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    if (loading) return setUser(null);\n    UsersDataService\n            .getOne(currentUserId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setUser(res[\"data\"]);\n                });\n  }, [currentUserId, loading])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentUserId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };\n\n\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"user\")} {...a11yProps(0)} />\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n            <TabFrame value={value} index={0}>\n            <UserPerson\n                      dir={theme.direction}\n                      currentStudent={user}\n                      updateCurrentStudent={setUser}\n                      deleteStudent={deleteUser}\n            /></TabFrame>\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Fab from \"@material-ui/core/Fab\";\nimport {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    TextField,\n    Tooltip\n} from \"@material-ui/core\";\nimport RoleSelect from './user.role-select.component';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport Button from \"@material-ui/core/Button\";\nimport Box from \"@material-ui/core/Box\";\nimport * as yup from \"yup\";\nimport {useFormik} from \"formik\";\nimport {invitationsService} from \"../_services/userInvites.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport User from \"./users.user.component\";\nimport UsersDataService from \"../_services/users.service\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {safe_email_required} from \"../_yup/validators\";\nimport ItemsListMain from \"./items_list_main.component\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n    root2: {\n    display: 'flex',\n  },\n  line: {\n    width: \"100%\",\n    marginTop: theme.spacing(1)\n  },\n  composite: {\n      display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n      gap: theme.spacing(1), width: \"100%\"\n  },\n  formControl: {\n      padding: theme.spacing(2),\n        maxHeight: '50vh',\n      overflow: 'auto',\n      minWidth: '40vw'\n  },\n  dialog: {\n\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\nexport default function Users({...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [users, setUsers] = useState([]);\n  const [currentUserId, setCurrentUserId] = useState(null);\n  const [open, setOpen] = React.useState(false);\n    const [hasNeeds, NEEDS] = useNeeds();\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentUserId(id);\n  }, [id]);\n  const errorHandler = useErrorHandler();\n\n  const formik = useFormik({\n        initialValues: {email: '', needs: []},\n        validationSchema: yup.object({\n            email: safe_email_required(t)}),\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n            setSubmitting(true);\n            invitationsService\n                .inviteUser(values['email'], values['role_id'])\n                .then(...errorHandler({snackbarSuccess: true}))\n                .then(res => {\n                    handleClose();\n                }).catch(_ => {\n                    setStatus(true);\n                }).finally(() => {\n                    setSubmitting(false);\n            })\n        }\n    });\n\n\n  return (\n      <Grid container spacing={3} className={classes.root}>\n          <Dialog  open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n              <DialogTitle id=\"form-dialog-title\">\n                  {t(\"invite_user\")}\n              </DialogTitle> \n              <form onSubmit={formik.handleSubmit}>\n                <DialogContent>\n                  <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"email\"\n                    name=\"email\"\n                    label={t(\"email\")}\n                    type=\"email\"\n                    fullWidth\n                    value={formik.values['email']}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                    error={formik.status  || formik.errors['email'] !== undefined}\n                    helperText={formik.touched['email'] && formik.errors['email']}\n                  />\n                  <Box my={2} className={classes.dialog}>\n                    <Box className={[classes.line, classes.composite]}>\n                      <RoleSelect formik={formik}/>\n                    </Box>\n                  </Box>\n                </DialogContent>\n                <DialogActions>\n                  <Button onClick={handleClose} color=\"primary\">\n                      {t(\"cancel\")}\n                  </Button>\n                  <Button type=\"submit\" color=\"primary\" disabled={formik.isSubmitting}>\n                      {t(\"invite\")}\n                  </Button>\n                </DialogActions>\n              </form>\n          </Dialog>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"users\")}</h1>\n          <ItemsListMain\n                setCurrentItemId={setCurrentUserId}\n                currentItemId={currentUserId}\n                items={users}\n                setItems={setUsers}\n                defaultSearchBy=\"full_name\"\n                searchByOptions={[\"full_name\", \"id\"]}\n                dataService={UsersDataService}\n                searchBarLabel=\"users\"\n            />\n            {hasNeeds([NEEDS.invite_users]) && <Tooltip title={t(\"new_user\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={handleClickOpen}>\n                    <PersonAddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <User\n            currentUserId={currentUserId}\n            deleteUser={(userId) => {\n                if (userId === currentUserId) setCurrentUserId(null);\n\n                setUsers(users.filter((s) => s['id'] !== userId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport PaymentsDataService from \"../_services/payments.service\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {loadingContext} from \"../_context/loading-context\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n    root2: {\n    display: 'flex',\n  },\n  formControl: {\n      padding: theme.spacing(2),\n        maxHeight: '50vh',\n      overflow: 'auto',\n      minWidth: '40vw'\n  },\n    dialog: {\n\n    },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Payments({...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const errorHandler = useErrorHandler();\n const loadingCtx = React.useContext(loadingContext);\n  return (\n      <div>\n          <h1>{t(\"payments\")}</h1>\n\n      <List className={classes.list}>\n        <ListItem button\n                  onClick={() => {\n                      if (loadingCtx.loading) return;\n                      loadingCtx.startLoading();\n                      PaymentsDataService\n                          .downloadCsv(null, null,'*', null)\n                          .then(...errorHandler({}))\n                          .finally(() => {\n                              loadingCtx.stopLoading();\n                          })\n\n                  }}>\n        <ListItemAvatar>\n            <Avatar className={classes.avatar}>\n                csv\n            </Avatar>\n        </ListItemAvatar>\n        <ListItemText id=\"name\" primary={t(\"export_all\")}/>\n\n    </ListItem>\n    <Divider/>\n    </List></div>\n  );\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('rooms'))();\n\n","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport Scheduler, {eventFromSchedule} from \"./scheduler.component\";\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n    calendar: {\n      margin: theme.spacing(2)\n    }\n\n}));\n\n\nfunction RoomSchedule({ scheduleIds, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  // todo no minHeight ? and also tabpanel component\n  return (\n    <div\n\n      {...other}\n        style={{height: '100%', flex: 1, minHeight: \"70vh\" }}\n\n    >\n       <Scheduler\n            scheduleIds={scheduleIds}\n            editable={false}\n            allowView={true}\n            viewUrl={(s) => ['/courses', s.course_id]}\n        />\n    </div>\n  );\n}\n\nexport default RoomSchedule;","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport RoomsDataService from \"../_services/rooms.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport * as yup from 'yup';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {safe_email_required} from \"../_yup/validators\";\nimport {confirmContext} from \"../_context/confirm-context\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction RoomDetails({ children, addStudentId, setNewRoom, newRoom, newStudent, title, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n\nconst confirm = React.useContext(confirmContext);\n  const deleteFullStudent = () => {\n    RoomsDataService\n              .delete(currentStudent['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                deleteStudent(currentStudent['id']);\n              });\n  }\n\n\n  let initialValues = loading ? {} : currentStudent;\n\n\n    const formik = useNormik(!newRoom, {\n        initialValues: initialValues,\n        validationSchema: yup.object({\n            name: yup.string().required(t(\"name_required\")),\n        }),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (Object.keys(changedValues).length > 0) {\n                setStatus();\n\n                if (newRoom) {\n                    RoomsDataService.post(changedValues)\n                         .then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (new_id) {\n                        updateCurrentStudent(new_id);\n                        setNewRoom(false);\n                    }).catch(function (err) {\n                    setStatus(true);\n                    }).finally(() => {\n                    setSubmitting(false);\n                });\n                } else {\n                   RoomsDataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentStudent(patched_body);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n                }\n\n\n\n\n            } else {\n                setSubmitting(false);\n            }\n        }\n    });const [hasNeeds, NEEDS] = useNeeds();\n\n  return (\n\n        <Box p={3}>\n            <Box px={2}>\n\n              {!newRoom && loading ?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              : hasNeeds([NEEDS.delete]) &&\n               <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                    if (newRoom) {\n                        setNewRoom(false);\n                    } else{\n                        confirm.confirm(\"delete_room_question\", \"not_undone\", () => {\n                            deleteFullStudent();\n                        })\n                    }\n\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              {!newRoom && loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 4}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"capacity\")}\n                                style={{flex: 1}}\n                                name=\"capacity\"\n                                formik={formik}\n                                type=\"number\"\n                            />\n                        </Box>\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n  );\n}\n\nexport default RoomDetails;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport RoomsDataService from \"../_services/rooms.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport RoomSchedule from \"./rooms.room.schedule.component\";\nimport RoomDetails from \"./rooms.room.details.component\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport TabFrame from \"./tab\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`,\n  };\n}\n\n\nexport default function Room({setNewRoom, currentRoomId, deleteRoom, newRoom, addRoomId}) {\n  const loading = currentRoomId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [room, setRoom] = useState(null);\n\n  useEffect(() => {\n    if (loading) return setRoom(null);\n    RoomsDataService\n            .getOne(currentRoomId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setRoom(res[\"data\"]);\n                });\n  }, [currentRoomId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentRoomId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };const [hasNeeds, NEEDS] = useNeeds();\n\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"room\")} {...a11yProps(0)} />\n\n                    { !newRoom && hasNeeds([NEEDS.schedules]) &&\n                  <Tab label={t(\"schedules\")} {...a11yProps(1)} />}\n\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n                  <TabFrame value={value} index={0}> <RoomDetails\n\n                                newRoom={newRoom}\n                                setNewRoom={setNewRoom}\n                      dir={theme.direction}\n                      currentStudent={room}\n                      updateCurrentStudent={setRoom}\n                      deleteStudent={deleteRoom}\n                  /></TabFrame>\n\n\n              {hasNeeds([NEEDS.schedules]) && <TabFrame value={value} index={1}><RoomSchedule value={value}\n                             index={1}\n                             className={classes.tab}\n                             dir={theme.direction}\n                             scheduleIds={room === null ? null : room['schedules']}\n                             student_id={currentRoomId}\n              /></TabFrame>}\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Student from \"./students.student.component\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {Tooltip} from \"@material-ui/core\";\nimport ItemsList from \"./items_list.component\";\nimport RoomsDataService from \"../_services/rooms.service\";\nimport Room from \"./rooms.room.component\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport ItemsListMain from \"./items_list_main.component\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Rooms({...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [rooms, setRooms] = useState([]);\n  const [newRoom, setNewRoom] = useState(false);\n  const [currentRoomId, setCurrentRoomId] = useState(null);\n\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentRoomId(id);\n  }, [id])\n\n  useEffect(() => {\n      if (currentRoomId !== null) setNewRoom(false);\n  }, [currentRoomId])\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n      <Grid container spacing={3} className={classes.root}>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"rooms\")}</h1>\n          <ItemsListMain\n            setCurrentItemId={setCurrentRoomId}\n            currentItemId={currentRoomId}\n            items={rooms}\n            setItems={setRooms}\n            defaultSearchBy=\"name\"\n            displayNameField=\"name\"\n            searchByOptions={[\"name\", \"id\"]}\n            dataService={RoomsDataService}\n            searchBarLabel=\"rooms\"\n          />\n            {hasNeeds([NEEDS.post]) && <Tooltip title={t(\"new_room\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={(e) => {\n                    setCurrentRoomId(null);\n                    setNewRoom(true);\n                }}>\n                    <AddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <Room\n            currentRoomId={currentRoomId}\n            newRoom={newRoom}\n            setNewRoom={setNewRoom}\n            addRoomId={(id) =>{\n                setCurrentRoomId(id);\n            }}\n            deleteRoom={(studentId) => {\n                if (studentId === currentRoomId) setCurrentRoomId(null);\n\n                setRooms(rooms.filter((s) => s['id'] !== studentId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('teachers', 'courses'))();\n\n","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\n\nexport function downloadCalendar(resource, resource_id, calendar_id) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/calendars/v1/${resource}/${resource_id}/${calendar_id}`,\n            method: 'GET',\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n            if (filename === null) filename = \"calendar.ics\";\n\n            const url = window.URL.createObjectURL(new Blob([response.data]));\n            const link = document.createElement('a');\n            link.href = url;\n            link.setAttribute('download', filename);\n            document.body.appendChild(link);\n            link.click();\n            link.remove();\n            resolve();\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport TeachersDataService from \"../_services/teachers.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport * as yup from 'yup';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {safe_email_required} from \"../_yup/validators\";\nimport {confirmContext} from \"../_context/confirm-context\";\nimport Button from \"@material-ui/core/Button\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport {downloadCalendar} from \"../_services/calendar.service\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction TeacherDetails({ children, addStudentId, setNewRoom, newRoom, title, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n   const deleteFullStudent = () => {\n    TeachersDataService\n              .delete(currentStudent['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                deleteStudent(currentStudent['id']);\n              });\n  }\n\n\nconst confirm = React.useContext(confirmContext);\n  let initialValues = loading ? {} : currentStudent;\n\n\n    const formik = useNormik(!newRoom, {\n        initialValues: initialValues,\n        validationSchema: yup.object({\n            email: safe_email_required(t),  // todo\n            name: yup.string().required(t(\"name_required\")),\n        }),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (Object.keys(changedValues).length > 0) {\n                setStatus();\n\n                if (newRoom) {\n                    TeachersDataService.post(changedValues)\n                         .then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (new_id) {\n                        updateCurrentStudent(new_id);\n                        setNewRoom(false);\n                    }).catch(function (err) {\n                    setStatus(true);\n                    }).finally(() => {\n                    setSubmitting(false);\n                });\n                } else {\n                   TeachersDataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentStudent(patched_body);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n                }\n\n\n\n\n            } else {\n                setSubmitting(false);\n            }\n        }\n    });\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n        <Box p={3}>\n            <Box px={2}>\n\n              {!newRoom && loading ?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n              hasNeeds([NEEDS.delete]) &&  <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                    if (newRoom) {\n                        setNewRoom(false);\n                    } else{\n                        confirm.confirm(\"delete_teacher\", \"not_undone\", () => {\n                            deleteFullStudent();\n                        })\n                    }\n\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              {!newRoom && loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <DirtyTextField\n                            label={t(\"calendar_url\")}\n                            name=\"calendar_url\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                            />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name=\"surname1\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"surname2\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"email\"\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"address\")}\n                                formik={formik}\n                                style={{flex: 4}}\n                                name=\"address\"\n                            />\n                            <DirtyTextField\n                                label={t(\"city\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"city\"\n                            />\n                            <DirtyTextField\n                                label={t(\"zip\")}\n                                formik={formik}\n                                type=\"number\"\n                                style={{flex: 1}}\n                                name=\"zip\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"dni\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"dni\"\n                            />\n                            <DirtyTextField\n                                label={t(\"phone\")}\n                                type=\"tel\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"phone\"\n                            />\n\n\n\n                        </Box>\n\n                         {!loading && !newRoom && <Box my={3}>\n            <Divider />\n            </Box>}\n\n                        <Box className={[classes.line, classes.composite]}>\n                {!loading && !newRoom &&\n                <Tooltip style={{flex: 1}} title={t(\"export_calendar\")} aria-label={t(\"send_grant_letter\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<GetAppIcon/>}\n                      onClick={(e) => {\n                        downloadCalendar(\"teachers\", currentStudent['id'], currentStudent['calendar_id']).then(r => {});\n                      }}\n                  >\n                    {t(\"export_calendar\")}\n                  </Button>\n                </Tooltip>}\n              </Box>\n\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n  );\n}\n\nexport default TeacherDetails;","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport Scheduler, {eventFromSchedule} from \"./scheduler.component\";\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n    calendar: {\n      margin: theme.spacing(2)\n    }\n\n}));\n\n\nfunction TeacherSchedule({  setSchedulesIds, scheduleIds, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <div\n      {...other}\n        style={{height: '100%', flex: 1, minHeight: \"70vh\" }}\n\n    >\n        <Scheduler\n            scheduleIds={scheduleIds}\n            editable={false}\n            allowView={true}\n            viewUrl={(s) => ['/courses', s.course_id]}\n        />\n    </div>\n  );\n}\n\nexport default TeacherSchedule;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport TeachersDataService from \"../_services/teachers.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport TeachersCoursesDataService from \"../_services/teachers_courses.service\";\nimport TeacherDetails from \"./teachers.teacher.details.component\";\nimport TeacherSchedule from \"./teachers.teacher.schedule.component\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport CoursesDataService from \"../_services/courses.service\";\nimport AddDeleteSubresource from \"./subresource_add_delete.component\";\nimport TabFrame, {a11yProps} from \"./tab\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\n\nexport default function Teacher({currentTeacherId, setNewTeacher, addTeacherId, newTeacher, deleteTeacher}) {\n  const loading = currentTeacherId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [teacher, setTeacher] = useState(null);  // todo rename to student\n\n  useEffect(() => {\n    if (loading) return setTeacher(null);\n    TeachersDataService\n            .getOne(currentTeacherId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setTeacher(res[\"data\"]);\n                });\n  }, [currentTeacherId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentTeacherId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };const [hasNeeds, NEEDS] = useNeeds();\n\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"teacher\")} {...a11yProps(0)} />\n\n                    { !newTeacher && hasNeeds([NEEDS.schedules]) &&\n                  <Tab label={t(\"schedules\")} {...a11yProps(1)} />}\n\n                   { !newTeacher && hasNeeds([NEEDS.courses]) &&\n                  <Tab label={t(\"courses\")} {...a11yProps(2)} />}\n\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n\n              <TabFrame value={value} index={0}>\n                  <TeacherDetails\n                    newRoom={newTeacher}\n                    setNewRoom={setNewTeacher}\n                    dir={theme.direction}\n                    currentStudent={teacher}\n                    updateCurrentStudent={setTeacher}\n                    deleteStudent={deleteTeacher}\n              /></TabFrame>\n\n\n              {hasNeeds([NEEDS.schedules]) && <TabFrame value={value} index={1}>\n                  <TeacherSchedule\n                                className={classes.tab}\n                                dir={theme.direction}\n                                scheduleIds={teacher === null ? null : teacher['schedules']}\n                                student_id={currentTeacherId}\n              /></TabFrame>}\n\n              {hasNeeds([NEEDS.courses]) &&\n<TabFrame value={value} index={2}>\n              <AddDeleteSubresource\n                  defaultSearchBy=\"name\"\n                  parentItemDataService={TeachersCoursesDataService}\n                  itemDataService={CoursesDataService}\n                  add_message_confirm=\"confirm_enroll_to_course\"\n                  parent_id={currentTeacherId}\n                  secondaryDisplayNameField=\"description\"\n                  searchByOptions={[\"name\"]}\n                  resourceName={\"courses\"}\n                  displayNameField={\"name\"}\n                  value={value}\n                  add_message=\"enroll_to_course\"\n                  index={2}\n                  onSubresourceAdded={(id) => {\n                    setTeacher({\n                                ...teacher,\n                                courses: [...teacher['courses'], id]\n                            })\n                  }}\n                  onSubresourceDeleted={(id) => {\n                     setTeacher({\n                                ...teacher,\n                                courses: teacher['courses'].filter((c) => c !== id)\n                            });\n                  }}\n              /></TabFrame>}\n\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {Tooltip} from \"@material-ui/core\";\nimport TeachersDataService from \"../_services/teachers.service\";\nimport ItemsList from \"./items_list.component\";\nimport Teacher from \"./teachers.teacher.component\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport ItemsListMain from \"./items_list_main.component\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Teachers({...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [teachers, setTeachers] = useState([]);\n  const [newTeacher, setNewTeacher] = useState(false);\n  const [currentTeacherId, setCurrentTeacherId] = useState(null);\nconst [hasNeeds, NEEDS] = useNeeds();\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentTeacherId(id);\n  }, [id])\n\n  useEffect(() => {\n      if (currentTeacherId !== null) setNewTeacher(false);\n  }, [currentTeacherId])\n\n  return (\n      <Grid container spacing={3} className={classes.root}>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"teachers\")}</h1>\n            <ItemsListMain\n                setCurrentItemId={setCurrentTeacherId}\n                currentItemId={currentTeacherId}\n                items={teachers}\n                setItems={setTeachers}\n                defaultSearchBy=\"full_name\"\n                searchByOptions={[\"full_name\", \"id\"]}\n                dataService={TeachersDataService}\n                searchBarLabel=\"teachers\"\n            />\n\n            {hasNeeds([NEEDS.post]) && <Tooltip title={t(\"new_teacher\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={(e) => {\n                    setCurrentTeacherId(null);\n                    setNewTeacher(true);\n                }}>\n                    <AddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <Teacher\n            currentTeacherId={currentTeacherId}\n            newTeacher={newTeacher}\n            setNewTeacher={setNewTeacher}\n            addTeacherId={(id) =>{\n                setCurrentTeacherId(id);\n            }}\n            deleteTeacher={(studentId) => {\n                if (studentId === currentTeacherId) setCurrentTeacherId(null);\n\n                setTeachers(teachers.filter((s) => s['id'] !== studentId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses', 'rooms'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses', 'students'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses', 'teachers'))();\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport CoursesDataService from \"../_services/courses.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport * as yup from 'yup';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {DialogContent, MenuItem, TextField} from \"@material-ui/core\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport StudentsDataService from \"../_services/students.service\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {useSnackbar} from \"notistack\";\nimport {useFormik} from \"formik\";\nimport {DEFAULT_COURSE_PRICE_TERM} from \"../_data/price_term\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {loadingContext} from \"../_context/loading-context\";\nimport {confirmContext} from \"../_context/confirm-context\";\nimport { useHistory } from \"react-router-dom\";\nimport {downloadCalendar} from \"../_services/calendar.service\";\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n    textField: {\n    marginRight: theme.spacing(1),\n    width: 200,\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    },\n    choose: {\n      marginBottom: theme.spacing(3)\n    }\n}));\n\nfunction CourseDetails({ children, addCourseId, setNewCourse, newCourse, currentCourse, updateCurrentCourse, patchService, deleteCourse, ...other }) {\n  const { t } = useTranslation();\n  let history = useHistory();\n  const loading = currentCourse === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const deleteFullCourse = (id_) => {\n    CoursesDataService\n              .delete(id_)\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                deleteCourse(id_);\n              });\n  }\n\n  const [openDownloadAttendanceList, setOpenDownloadAttendanceList] = React.useState(false);\n\nconst confirm = React.useContext(confirmContext);\n\n  let initialValues = loading ? {} : currentCourse;\n  if (newCourse) {\n      initialValues = {\n          price_term: DEFAULT_COURSE_PRICE_TERM,\n          is_published: false\n      }\n  }\n\n    const formik2 = useFormik({\n        initialValues: {},\n        validationSchema: yup.object({\n            startDate: yup.date().required(t(\"required\")),\n             endDate: yup.date().required(t(\"required\")),\n        }),\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n\n\n            setSubmitting(true);\n            setStatus();\n\n             CoursesDataService\n                    .downloadSubresource(currentCourse[\"id\"], 'attendance-list/v1', values)\n                    .then(...errorHandler({snackbarSuccess: true}))\n                    .then(() => {\n                        setOpenDownloadAttendanceList(false);\n                    })\n                 .catch(() => {\n                     setStatus(true);\n                 })\n                 .finally(() => {\n                     setSubmitting(false);\n                 })\n\n\n        }\n    });\n\n    const downloadAttendances = () => {\n      CoursesDataService\n          .downloadSubresource(currentCourse[\"id\"], 'attendance-list/v2')\n          .then(...errorHandler({snackbarSuccess: true}));\n    }\n\n    const formik = useNormik(!newCourse, {\n        initialValues: initialValues,\n        validationSchema: yup.object({\n            name: yup.string().required(t(\"name_required\")),\n        }),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (Object.keys(changedValues).length > 0) {\n                setStatus();\n\n                if (newCourse) {\n                    CoursesDataService.post(changedValues)\n                         .then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (new_id) {\n                        updateCurrentCourse(new_id);\n                        setNewCourse(false);\n                    }).catch(function (err) {\n                    setStatus(true);\n                    }).finally(() => {\n                    setSubmitting(false);\n                });\n                } else {\n                   CoursesDataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentCourse(patched_body);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n                }\n\n\n\n\n            } else {\n                setSubmitting(false);\n            }\n        }\n    });\n     const loadingCtx = React.useContext(loadingContext);\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n    <div\n      {...other}\n    >\n\n\n         <Dialog\n        open={openDownloadAttendanceList}\n        onClose={(e) => {setOpenDownloadAttendanceList(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      ><form onSubmit={formik2.handleSubmit}>\n        <DialogTitle id=\"alert-dialog-title\">{t(\"download\")}</DialogTitle>\n            <DialogContent>\n                <Typography className={classes.choose}>{t(\"chose_list_dates\")}</Typography>\n\n                <TextField\n                    id=\"date\"\n                    label={t(\"start\")}\n                    type=\"date\"\n                    value={formik2.values[\"startDate\"]}\n                    name={\"startDate\"}\n                    onChange={formik2.handleChange}\n                    onBlur={formik2.handleBlur}\n                    error={formik2.status  || formik2.errors[\"startDate\"] !== undefined}\n                    helperText={formik2.touched[\"startDate\"] && formik2.errors[\"startDate\"]}\n                    className={classes.textField}\n                    InputLabelProps={{\n                      shrink: true,\n                    }}\n                  />\n                  <TextField\n                    id=\"date\"\n                    label={t(\"end\")}\n                    type=\"date\"\n                    value={formik2.values[\"endDate\"]}\n                    name={\"endDate\"}\n                    onChange={formik2.handleChange}\n                    error={formik2.status  || formik2.errors[\"endDate\"] !== undefined}\n                    helperText={formik2.touched[\"endDate\"] && formik2.errors[\"endDate\"]}\n                    onBlur={formik2.handleBlur}\n                    className={classes.textField}\n                    InputLabelProps={{\n                      shrink: true,\n                    }}\n                  />\n            </DialogContent>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenDownloadAttendanceList(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button type=\"submit\" color=\"primary\"   disabled={formik2.isSubmitting} autoFocus>\n            {t(\"download\")}\n          </Button>\n        </DialogActions></form>\n      </Dialog>\n\n\n        <Box p={3}>\n            <Box px={2}>\n\n              {!newCourse && loading ?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n               hasNeeds([NEEDS.delete]) && <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                    if (newCourse) {\n                        setNewCourse(false);\n                    } else{\n                        confirm.confirm(\"delete_course_question\", \"not_undone\", () => {\n                            deleteFullCourse(currentCourse['id']);\n                        })\n                    }\n\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              {!newCourse && loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n\n                        <DirtyTextField\n                            label={t(\"calendar_url\")}\n                            name=\"calendar_url\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                            />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                           <DirtyTextField\n                                label={t(\"description\")}\n                                style={{flex: 1}}\n                                multiline\n                                rowsMax={8}\n                                name=\"description\"\n                                formik={formik}\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"price_term\")}\n                                style={{flex: 1}}\n                                name=\"price_term\"\n                                formik={formik}\n                                type=\"number\"\n                            />\n                            <DirtyTextField\n                                label={t(\"public\")}\n                                style={{flex: 1}}\n                                name=\"is_published\"\n                                formik={formik}\n                                select\n                            >\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n\n                    </form>\n\n\n                )\n\n\n\n            }\n\n             {!loading && !newCourse && <Box my={3}>\n            <Divider />\n            </Box>}\n\n\n            <Box className={[classes.line, classes.composite]}>\n                {!loading && !newCourse &&\n                <Tooltip style={{flex: 1}} title={t(\"take attendance\")} aria-label={t(\"take_attendance\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<AssignmentTurnedInIcon/>}\n                      onClick={(e) => {\n                        history.replace(`/attendance?id=${currentCourse['id']}`)\n                      }}\n                  >\n                    {t(\"take attendance\")}\n                  </Button>\n                </Tooltip>}\n              </Box>\n\n            <Box className={[classes.line, classes.composite]}>\n                {!loading && hasNeeds([NEEDS.students]) &&  !newCourse &&\n                <Tooltip style={{flex: 1}} title={t(\"export_attendance_list\")} aria-label={t(\"export_attendance_list\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<GetAppIcon/>}\n                      onClick={(e) => {\n                        setOpenDownloadAttendanceList(true);\n                      }}\n                  >\n                    {t(\"attendance_list\")}\n                  </Button>\n                </Tooltip>}\n\n                {!loading && hasNeeds([NEEDS.students]) &&  !newCourse &&\n                <Tooltip style={{flex: 1}} title={t(\"export_attendance_list\")} aria-label={t(\"export_attendance_list\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<GetAppIcon/>}\n                      onClick={downloadAttendances}\n                  >\n                    {t(\"export_attendance_list\") + ` (${t(\"v2\")})`}\n                  </Button>\n                </Tooltip>}\n\n                \n              </Box>\n\n\n                <Box className={[classes.line, classes.composite]}>\n                {!loading && !newCourse &&\n                <Tooltip style={{flex: 1}} title={t(\"export_calendar\")} aria-label={t(\"send_grant_letter\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<GetAppIcon/>}\n                      onClick={(e) => {\n                        downloadCalendar(\"courses\", currentCourse['id'], currentCourse['calendar_id']).then(r => {});\n                      }}\n                  >\n                    {t(\"export_calendar\")}\n                  </Button>\n                </Tooltip>}\n\n                {!loading && hasNeeds([NEEDS.students, NEEDS.guardians]) && !newCourse &&\n                <Tooltip style={{flex: 1}} title={t(\"export_students_contact_sheet\")} aria-label={t(\"export_grant_letter\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      disabled={loadingCtx.loading}\n                      startIcon={<GetAppIcon/>}\n                      onClick={(e) => {\n                          loadingCtx.startLoading();\n                        CoursesDataService\n                            .downloadSubresource(currentCourse[\"id\"], 'contactsSheet')\n                            .then(...errorHandler({snackbarSuccess: true}))\n                            .finally(() => {\n                                loadingCtx.stopLoading();\n                            })\n                      }}\n                  >\n                    {t(\"students_contact_sheet\")}\n                  </Button>\n                </Tooltip>}\n              </Box>\n\n\n\n\n            </Box>\n        </Box>\n    </div>\n  );\n}\n\nexport default CourseDetails;","export const DEFAULT_COURSE_PRICE_TERM = 75;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses', 'labels'))();\n\n","import React from 'react';\nimport {useTranslation} from \"react-i18next\";\nimport {FormControlLabel} from \"@material-ui/core\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DirtyCheckbox from \"./dirty_checkbox\";\nimport {education_years} from \"../_data/education\";\n\nexport default function LabelsSelection({formik, name=\"labels\", noDirty=false}) {\n  const { t } = useTranslation();\n\n  return <React.Fragment>\n      <Typography>{t(\"labels\")}</Typography>\n                  {education_years.map(label => (\n                    <FormControlLabel\n                        control={\n                            <DirtyCheckbox\n                            checked={formik.values[name]===undefined? false: formik.values[name].includes(label)}\n                            name={name}\n                            value={label}\n                            formik={formik}\n                            noDirty={noDirty}\n                            />\n                        }\n                        key={label}\n                        label={t(label)}\n                      />))}\n\n                      <FormControlLabel\n                        control={\n                            <DirtyCheckbox\n                            checked={formik.values[name]===undefined? false: formik.values[name].includes(\"adult\")}\n                            name={name}\n                            value=\"adult\"\n                            formik={formik}\n                            noDirty={noDirty}\n                            />\n                        }\n                        label={t(\"adult\")}\n                      />\n        </React.Fragment>\n}\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\"\nimport CourseLabelsDataService from \"../_services/course_labels.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport LabelsSelection from \"./labels_selection.component\";\nimport {symmetricDifference} from \"../_helpers/set_operations\";\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction CourseLabels({  currentCourse, updateCurrentCourse, patchService, deleteCourse, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentCourse === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n\n  let initialValues = loading ? {} : currentCourse;\n\n\n    const formik = useNormik(false, {\n        initialValues: initialValues,\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n               setStatus();\n\n               const a = new Set(values[\"labels\"]);\n               const b = new Set(initialValues[\"labels\"]);\n               const difference = Array.from(symmetricDifference(a, b));\n\n               if (difference.size !== 0){\n                   setSubmitting(true);\n                   const jobs = difference.map(need => {\n                    if (b.has(need)){\n                       // has been removed\n                        return CourseLabelsDataService.delete(currentCourse['id'], need)\n                          .then(...errorHandler({}));\n                   } else {\n                        // has been added\n                        return CourseLabelsDataService.postWithId(currentCourse['id'], need)\n                          .then(...errorHandler({}));\n                    }\n                });\n                   Promise\n                       .all(jobs)\n                       .then(...errorHandler({snackbarSuccess: true}))\n                       .then(() => {\n                           updateCurrentCourse({...currentCourse, labels: values[\"labels\"]});\n                       })\n                       .finally(() => {\n                           setSubmitting(false);\n                       })\n               }\n\n\n\n\n        }\n    }, true);\n\n  return (\n        <Box p={3}>\n            <Box px={2}>\n\n              {loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               <Box py={0} >\n                                        <Skeleton variant=\"text\" width={\"100%\"} height=\"150px\"/>\n                                    </Box>\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n                                    <Box style={{display: \"inline-block\"}}>\n                        <LabelsSelection\n                formik={formik}\n            /></Box>\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n  );\n}\n\nexport default CourseLabels;","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport SchedulesDataService from \"../_services/schedules.service\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useSnackbar} from \"notistack\";\nimport Scheduler, {eventFromSchedule} from \"./scheduler.component\";\nimport {confirmContext} from \"../_context/confirm-context\";\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n    calendar: {\n      margin: theme.spacing(2)\n    }\n\n}));\n\n\nfunction CourseSchedule({ title, scheduleIds, setScheduleIds, student_id, ...other }) {\n  const errorHandler = useErrorHandler();\n\n  return (\n    <div\n      {...other}\n        style={{height: '100%', flex: 1, minHeight: \"70vh\" }}\n\n    >\n        <Scheduler\n            allowDelete={(s) => true}\n            allowView={(s) => !s.is_base}\n            viewUrl={(s) => ['/students', s.student_id]}\n            setScheduleIds={setScheduleIds}\n            onEventChange={(info, day_week, start_time, end_time, schedule) => {\n                SchedulesDataService\n                    .patch({id: schedule['id'],\n                                                body: {day_week: day_week, start_time: start_time, end_time: end_time},\n                                                initial_values: schedule})\n                    .then(...errorHandler({errorOut: true, snackbarSuccess: true}))\n                    .then(function (res) {})\n                    .catch(function (err){ info.revert(); });\n            }}\n            viewStudent={true}\n            scheduleIds={scheduleIds}\n            editable={true}\n            selectable={true}\n            onEventSelected={(day_week, start_time, end_time) => {\n                    SchedulesDataService\n                        .post({day_week: day_week, start_time: start_time, end_time: end_time, course_id: student_id})\n                        .then(res => {\n                            setScheduleIds([...scheduleIds, res['id']])\n                        })\n            }}\n        />\n    </div>\n  );\n}\n\nexport default CourseSchedule;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport CoursesDataService from \"../_services/courses.service\";\nimport StudentsDataService from \"../_services/students.service\";\nimport TeachersDataService from \"../_services/teachers.service\";\nimport CourseRoomsDataService from \"../_services/course_rooms.service\";\nimport RoomsDataService from \"../_services/rooms.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport CourseStudentsDataService from \"../_services/course_students.service\";\nimport CourseTeachersDataService from \"../_services/course_teachers.service\";\nimport CourseDetails from \"./courses.course.details.component\";\nimport CourseLabels from \"./courses.course.labels.component\";\nimport CourseSchedule from \"./courses.course.schedule.component\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport AddDeleteSubresource from \"./subresource_add_delete.component\";\nimport TabFrame, {a11yProps} from \"./tab\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\nexport default function Course({currentCourseId, setNewCourse, addCourseId, newCourse, deleteCourse}) {\n  const loading = currentCourseId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [course, setCourse] = useState(null);  // todo rename to student\nconst [hasNeeds, NEEDS] = useNeeds();\n  useEffect(() => {\n    if (loading) return setCourse(null);\n    CoursesDataService\n            .getOne(currentCourseId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setCourse(res[\"data\"]);\n                });\n  }, [currentCourseId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentCourseId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };\n\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"course\")} {...a11yProps(0)} />\n                   { !newCourse &&\n                  <Tab label={t(\"labels\")} {...a11yProps(1)} />}\n\n                    { !newCourse && hasNeeds([NEEDS.schedules]) &&\n                  <Tab label={t(\"schedules\")} {...a11yProps(2)} />}\n\n                   { !newCourse && hasNeeds([NEEDS.students]) &&\n                  <Tab label={t(\"students\")} {...a11yProps(3)} />}\n\n                   { !newCourse && hasNeeds([NEEDS.teachers]) &&\n                  <Tab label={t(\"teachers\")} {...a11yProps(4)} />}\n\n                   { !newCourse && hasNeeds([NEEDS.rooms]) &&\n                  <Tab label={t(\"rooms\")} {...a11yProps(5)} />}\n\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n\n            <TabFrame value={value} index={0}>  <CourseDetails\n                    newCourse={newCourse}\n                    setNewCourse={setNewCourse}\n                    dir={theme.direction}\n                    currentCourse={course}\n                    updateCurrentCourse={setCourse}\n                    deleteCourse={deleteCourse}\n            /></TabFrame>\n\n         <TabFrame value={value} index={1}>     <CourseLabels\n                      dir={theme.direction}\n                      currentCourse={course}\n                      updateCurrentCourse={setCourse}\n                      deleteCourse={deleteCourse}\n         /></TabFrame>\n\n              {hasNeeds([NEEDS.schedules]) && <TabFrame value={value} index={2}>\n                  <CourseSchedule\n                        setScheduleIds={(ids) => setCourse({...course, schedules: ids})}\n                       className={classes.tab}\n                       dir={theme.direction}\n                       scheduleIds={course === null ? null : course.schedules}\n                       student_id={currentCourseId}\n              /></TabFrame>}\n\n              {hasNeeds([NEEDS.students]) &&\n\n            <TabFrame value={value} index={3}>  <AddDeleteSubresource\n                  defaultSearchBy=\"full_name\"\n                  parentItemDataService={CourseStudentsDataService}\n                  itemDataService={StudentsDataService}\n                  add_message_confirm=\"confirm_enroll_to_course\"\n                  parent_id={currentCourseId}\n                  searchByOptions={[\"full_name\"]}\n                  withFiltersBox={true}\n                  resourceName={\"students\"}\n                  displayNameField={\"full_name\"}\n                  usableFilters={[{\n                    name: 'enrolment_status',\n                    defaultValue: null,\n                    options: [\n                        {\n                            label: \"enrolled\",\n                            tooltip: \"only_enrolled\",\n                            name: 'enrolled'\n                        }, {\n                            label: \"pre-enrolled\",\n                            tooltip: \"only_preenrolled\",\n                            name: 'pre-enrolled'\n                        }, {\n                            label: \"early-unenrolled\",\n                            tooltip: \"only_earlyunenrolled\",\n                            name: 'early-unenrolled'\n                        }\n                    ]\n                },\n                    {\n                      name: 'default_payment_method',\n                        defaultValue: null,\n                        options: [\n                           {label: \"cash\", tooltip: \"only_cash\", name: 'cash'},\n                                {label: \"bank-transfer\", tooltip: \"only_banktransfer\", name: 'bank-transfer'},\n                                {\n                                    label: \"bank-direct-debit\",\n                                    tooltip: \"only_bankdirectdebit\",\n                                    name: 'bank-direct-debit'\n                                }\n                        ]\n                    }]}\n                  auxFields={[\"enrolment_status\"]}\n                  displayText={(student) => student['full_name'] + (student['enrolment_status'] === 'enrolled'? ' ': '')}\n                  add_message=\"enroll_to_course\"\n                  onSubresourceAdded={(id) => {\n                    setCourse({\n                                       ...course,\n                                       students: [...course['students'], id]\n                                   })\n                  }}\n                  onSubresourceDeleted={(id) => {\n                    setCourse({\n                           ...course,\n                           students: course['students'].filter((s) => s !== id)\n                       });\n                  }}\n            /></TabFrame>\n\n\n\n              }\n\n              {hasNeeds([NEEDS.teachers]) &&\n\n                 <TabFrame value={value} index={4}>  <AddDeleteSubresource\n                  defaultSearchBy=\"full_name\"\n                  parentItemDataService={CourseTeachersDataService}\n                  itemDataService={TeachersDataService}\n                  add_message_confirm=\"confirm_add_to_course\"\n                  parent_id={currentCourseId}\n                  searchByOptions={[\"full_name\"]}\n                  resourceName={\"teachers\"}\n                  displayNameField={\"full_name\"}\n                  add_message=\"add_teacher\"\n                  onSubresourceAdded={(id) => {\n                    setCourse({\n                                       ...course,\n                                       teachers: [...course['teachers'], id]\n                                   })\n                  }}\n                  onSubresourceDeleted={(id) => {\n                    setCourse({\n                           ...course,\n                           teachers: course['teachers'].filter((c) => c !== id)\n                       });\n                  }}\n                 /></TabFrame>\n\n              }\n\n               {hasNeeds([NEEDS.rooms]) &&\n\n                 <TabFrame value={value} index={5}>  <AddDeleteSubresource\n                  defaultSearchBy=\"name\"\n                  parentItemDataService={CourseRoomsDataService}\n                  itemDataService={RoomsDataService}\n                  add_message_confirm=\"confirm_link_to_room\"\n                  parent_id={currentCourseId}\n                  searchByOptions={[\"name\"]}\n                  resourceName={\"rooms\"}\n                  displayNameField={\"name\"}\n                  add_message=\"link_room\"\n                  onSubresourceAdded={(id) => {\n                    setCourse({\n                                       ...course,\n                                       rooms: [...course['rooms'], id]\n                                   })\n                  }}\n                  onSubresourceDeleted={(id) => {\n                    setCourse({\n                           ...course,\n                           rooms: course['rooms'].filter((c) => c !== id)\n                       });\n                  }}\n                 /></TabFrame>\n\n              }\n\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {Tooltip} from \"@material-ui/core\";\nimport CoursesDataService from \"../_services/courses.service\";\nimport Course from \"./courses.course.component\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport ItemsListMain from \"./items_list_main.component\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Courses({...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [courses, setCourses] = useState([]);\n  const [newCourse, setNewCourse] = useState(false);\n  const [currentCourseId, setCurrentCourseId] = useState(null);\n\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentCourseId(id);\n  }, [id])\n\n  useEffect(() => {\n      if (currentCourseId !== null) setNewCourse(false);\n  }, [currentCourseId])\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n      <Grid container spacing={3} className={classes.root}>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"courses\")}</h1>\n            <ItemsListMain\n                setCurrentItemId={setCurrentCourseId}\n                currentItemId={currentCourseId}\n                items={courses}\n                setItems={setCourses}\n                usableFilters={[{\n                    name: 'is_published',\n                    defaultValue: null,\n                    options: [\n                        {\n                            label: \"published\",\n                            tooltip: \"only_published\",\n                            name: true\n                        }, {\n                            label: \"private\",\n                            tooltip: \"only_private\",\n                            name: false\n                        }\n                    ]\n                }]}\n                defaultSearchBy=\"name\"\n                searchByOptions={[\"name\", \"id\"]}\n                dataService={CoursesDataService}\n                searchBarLabel=\"courses\"\n                displayNameField=\"name\"\n            />\n\n\n            {hasNeeds([NEEDS.post]) && <Tooltip title={t(\"new_course\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={(e) => {\n                    setCurrentCourseId(null);\n                    setNewCourse(true);\n                }}>\n                    <AddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <Course\n            currentCourseId={currentCourseId}\n            newCourse={newCourse}\n            setNewCourse={setNewCourse}\n            addCourseId={(id) =>{\n                setCurrentCourseId(id);\n            }}\n            deleteCourse={(studentId) => {\n                if (studentId === currentCourseId) setCurrentCourseId(null);\n\n                setCourses(courses.filter((s) => s['id'] !== studentId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const bulkEmailService = {\n    bulkSend\n};\n\nfunction bulkSend(courseIds, subject, body, emailPreference, studentEnrolmentStatus, files) {\n    const data = new FormData();\n    data.append(\"courseIds\", JSON.stringify(courseIds));\n    data.append(\"emailPreference\", emailPreference);\n    data.append(\"subject\", subject);\n    data.append(\"studentEnrolmentStatus\", studentEnrolmentStatus);\n    data.append(\"body\", body);\n    files.forEach(f => {\n        data.append(f.name, f);\n    })\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/emails/v1/bulk`,  // todo server url\n            method: 'POST',\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()},\n            data: data\n        }).then(res => {\n            resolve(true);\n        }).catch(function (res) {\n            reject(res);\n        });\n    });\n}\n","import {makeStyles} from \"@material-ui/core/styles\";\nimport {useTranslation} from \"react-i18next\";\nimport React, {useEffect} from \"react\";\nimport {Autocomplete} from \"@material-ui/lab\";\nimport TextField from \"@material-ui/core/TextField\";\nimport createStyles from \"@material-ui/styles/createStyles\";\n\n// ISO 3166-1 alpha-2\n//  No support for IE 11\nfunction countryToFlag(isoCode) {\n  return typeof String.fromCodePoint !== 'undefined'\n    ? isoCode\n        .toUpperCase()\n        .replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + 127397))\n    : isoCode;\n}\n\n\nconst useStyles = makeStyles(theme => (createStyles({\n  textField: {\n    '& label.Mui-focused':  {color: theme.palette.primary.main},  // todo color to theme\n    '& .MuiInput-underline:after': {borderBottomColor: theme.palette.primary.main},\n      '& label':  {color:theme.palette.neutral.emphasisText.medium},\n      '& fieldset': {borderColor: theme.palette.neutral.emphasisText.medium},\n  },\n    option: {\n    fontSize: 15,\n    '& > span': {\n      marginRight: 10,\n      fontSize: 18,\n    },\n  },})));\n\nexport default function EmailTo({formik, name, label, options, addTo, ...textFieldProps}) {\n\n  const [option, _setOption] = React.useState(null);\n\n  React.useEffect(() => {\n    _setOption(null);\n  }, [name]);\n\n  const setOption = (option) => {\n      const newOption = (option !== null)? option.code: '';\n      formik.setFieldValue(name, newOption);\n      _setOption(option);\n      if (option) addTo(option);\n  }\n\n  const classes = useStyles();\n\n  const [inputValue, setInputValue] = React.useState('');\n\n  const { t } = useTranslation();\n\n  return (\n    <Autocomplete\n      style={{ width: \"100%\" }}\n      options={options}\n      classes={{\n        option: classes.option,\n      }}\n      defaultValue={{id: 111, name: 'name'}}\n      autoHighlight\n      getOptionLabel={(option) => option.name }\n      getOptionSelected={(o) => o.id === option.id}\n      value={option}\n      onChange={(event, newValue) => {\n        setOption(newValue);\n      }}\n      inputValue={inputValue}\n      onInputChange={(event, newInputValue) => {\n        setInputValue(newInputValue);\n      }}\n      name={name}\n      onBlur={formik.handleBlur}\n      renderOption={(option) => (\n        <React.Fragment key={option.id}>\n          <span>{option.name}</span>\n        </React.Fragment>\n      )}\n\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          label={label}\n          fullWidth={1}\n          className={classes.textField}\n          inputProps={{\n            ...params.inputProps,\n            autoComplete: 'new-password', // disable autocomplete and autofill\n          }}\n          error={formik.status  || formik.errors[name] !== undefined}\n          helperText={formik.touched[name] && formik.errors[name]}\n        />\n      )}\n    />\n  );\n}","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Fab from \"@material-ui/core/Fab\";\nimport {\n    Chip,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle, MenuItem,\n    TextField,\n    Tooltip\n} from \"@material-ui/core\";\nimport SendIcon from '@material-ui/icons/Send';\nimport dataService from \"../_services/courses.service\";\nimport * as yup from \"yup\";\nimport {useFormik} from \"formik\";\nimport {bulkEmailService} from \"../_services/bulkEmail.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {safe_email_required} from \"../_yup/validators\";\nimport EmailTo from \"./emailTo.component\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport EuroIcon from \"@material-ui/icons/Euro\";\nimport AccountBalanceWalletIcon from \"@material-ui/icons/AccountBalanceWallet\";\nimport AccountBalanceIcon from \"@material-ui/icons/AccountBalance\";\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport PaymentsDataService from \"../_services/payments.service\";\nimport ReceiptIcon from \"@material-ui/icons/Receipt\";\nimport clsx from \"clsx\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {payment_methods} from \"../_data/payment_methods\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Card from \"@material-ui/core/Card\";\nimport {loadingContext} from \"../_context/loading-context\";\nimport {confirmContext} from \"../_context/confirm-context\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n\n    textBox: {\n      width: \"100%\",\n        border: \"red\"\n    },\n    chip: {\n      margin: theme.spacing(0.5)\n    },\n    chips: {\n      marginBottom: theme.spacing(1)\n    },\n    in: {\n      marginBottom: theme.spacing(1),\n        marginTop: theme.spacing(2)\n    },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(4),\n    right: theme.spacing(4),\n  }, attach: {\n      marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1)\n    },\n    card: {\n      marginTop: theme.spacing(1)\n    }\n}));\n\nexport default function Email({...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [groups, setGroups] = useState([]);\n  const [to, setTo] = useState([]);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n\n    const addTo = (t) => {\n        setTo([...to, t]);\n    }\n    const removeTo = (id) => {\n        setTo(to.filter(x => x.id !== id));\n    }\n    const loadingCtx = React.useContext(loadingContext);\n     const confirm = React.useContext(confirmContext);\n    const handleSendEmail = () => {\n        if (loadingCtx.loading) return;\n        if (formik.isSubmitting) return;\n\n        confirm.confirm(\"send_bulk_email\", \"send_bulk_email_description\", () => {\n                  loadingCtx.startLoading();\n        formik.setSubmitting(true);\n        bulkEmailService\n            .bulkSend(to.map(g => g.id), formik.values[\"subject\"],\n                formik.values[\"body\"], formik.values[\"emailPreference\"], formik.values[\"studentEnrolmentStatus\"], selectedFiles)\n\n            .then(...errorHandler({snackbarSuccess: true}))\n            .finally(() => {\n                formik.setSubmitting(false);\n                loadingCtx.stopLoading();\n        })\n              });\n\n    }\n\n  const errorHandler = useErrorHandler();\n\n  const formik = useFormik({\n        initialValues: {emailPreference: \"resolved\", studentEnrolmentStatus: \"enrolled\"},\n        validationSchema: yup.object({\n            email: safe_email_required(t)}),\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n            setSubmitting(true);\n\n        }\n    });\n  useEffect(() => {\n      dataService\n            .getAll(null, \"*\", ['id', \"name\"])\n            .then(...errorHandler({}))\n            .then(function (res) {\n                setGroups(res[\"data\"]);\n            });\n  }, [])\n    const onFileChange = event => {\n      // Update the state\n      setSelectedFiles([...event.target.files]);\n    };\n    const getFormData = () => {\n        if (selectedFiles.length === 0) return null;\n      // Create an object of formData\n      const formData = new FormData();\n\n      // Update the formData object\n        selectedFiles.forEach(sf => {\n            formData.append(\n            sf.name,\n            sf,\n            sf.name\n          );\n        })\n\n\n      return formData;\n    };\n\n    const fileDataRepresentation = () =>  {\n        console.log(\"sfs\", selectedFiles);\n      return selectedFiles.map(selectedFile => (\n          <Card className={classes.card}>\n      <CardHeader\n        action={\n         <Tooltip title={t(\"delete\")} aria-label={t(\"delete\")}>\n          <IconButton onClick={(e) => {\n              setSelectedFiles(selectedFiles.filter(x => x !== selectedFile));\n          }}>\n            <DeleteIcon />\n          </IconButton>\n        </Tooltip>\n        }\n        titleTypographyProps={{variant: 'subheading'}}\n        title={selectedFile.name}\n      />\n    </Card>));\n    }\n\n\n  return (\n      <div>\n          <h1>{t(\"email\")}</h1>\n          <Box className={classes.chips}>\n              {t(\"to\")}: {\n                  to.length > 0? to.map(x =>\n                      <Tooltip title={t(\"delete\")}>\n                  <Chip variant=\"outlined\"\n              color=\"primary\"\n                        className={classes.chip}\n              size=\"small\"\n              avatar={<Avatar>G</Avatar>}\n              label={x.name}\n              onClick={() => {\n                removeTo(x.id);\n              }}/></Tooltip>\n                  ) : \" - \"\n              }\n          </Box>\n\n          <TextField\n              className={classes.in}\n            label={t(\"use_emails\")}\n            style={{width: \"100%\"}}\n              value={formik.values[\"emailPreference\"] === undefined? '': formik.values[\"emailPreference\"]}\n        onChange={formik.handleChange}\n        onBlur={formik.handleBlur}\n        error={formik.status  || formik.errors[\"emailPreference\"] !== undefined}\n        helperText={formik.touched[\"emailPreference\"] && formik.errors[\"emailPreference\"]}\n\n            name=\"emailPreference\"\n            select>\n            <MenuItem value=\"contacts\">{t(\"contacts\")}</MenuItem>\n            <MenuItem value=\"resolved\">{t(\"resolved\")}</MenuItem>\n          <MenuItem value=\"student\">{t(\"student\")}</MenuItem>\n          <MenuItem value=\"all\">{t(\"all\")}</MenuItem>\n        </TextField>\n\n        <TextField\n              className={classes.in}\n            label={t(\"status\")}\n            style={{width: \"100%\"}}\n              value={formik.values[\"studentEnrolmentStatus\"] === undefined? '': formik.values[\"studentEnrolmentStatus\"]}\n        onChange={formik.handleChange}\n        onBlur={formik.handleBlur}\n        error={formik.status  || formik.errors[\"studentEnrolmentStatus\"] !== undefined}\n        helperText={formik.touched[\"studentEnrolmentStatus\"] && formik.errors[\"studentEnrolmentStatus\"]}\n\n            name=\"studentEnrolmentStatus\"\n            select>\n            <MenuItem value=\"enrolled\">{t(\"enrolled\")}</MenuItem>\n            <MenuItem value=\"pre-enrolled\">{t(\"pre-enrolled\")}</MenuItem>\n          <MenuItem value=\"early-unenrolled\">{t(\"early-unenrolled\")}</MenuItem>\n          <MenuItem value={null}>{t(\"all\")}</MenuItem>\n        </TextField>\n\n        \n\n\n\n          <EmailTo\n            formik={formik}\n            style={{width: \"100%\"}}\n            options={groups.filter(g => !to.includes(g))}\n            addTo={addTo}\n            name={\"courses\"}\n            label={t(\"courses\")}\n        />\n        <TextField\n              className={classes.in}\n            label={t(\"subject\")}\n            style={{width: \"100%\"}}\n            value={formik.values[\"subject\"] === undefined? '': formik.values[\"subject\"]}\n            onChange={formik.handleChange}\n            onBlur={formik.handleBlur}\n            error={formik.status  || formik.errors[\"subject\"] !== undefined}\n            helperText={formik.touched[\"subject\"] && formik.errors[\"subject\"]}\n            name=\"subject\"\n            />\n\n        <TextField\n            className={classes.textBox}\n            multiline\n            rows={16}\n            value={formik.values[\"body\"] === undefined? '': formik.values[\"body\"]}\n            onChange={formik.handleChange}\n            onBlur={formik.handleBlur}\n            error={formik.status  || formik.errors[\"body\"] !== undefined}\n            helperText={formik.touched[\"body\"] && formik.errors[\"body\"]}\n            name={\"body\"}\n          />\n          <div>\n          {fileDataRepresentation()}\n          <input\n              style={{ display: \"none\" }}\n              id=\"contained-button-file\"\n              type=\"file\"\n              multiple\n              onChange={onFileChange}\n          />\n          <label htmlFor=\"contained-button-file\">\n            <Button className={classes.attach} variant=\"contained\" color=\"primary\" component=\"span\">\n                {t(\"upload\")}\n            </Button>\n          </label>\n          </div>\n          <Tooltip title={t(\"send_email\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={handleSendEmail} disabled={formik.isSubmitting || to.length === 0}>\n                    <SendIcon/>\n                </Fab>\n            </Tooltip>\n      </div>\n  );\n}\n","import React from \"react\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport ClassIcon from \"@material-ui/icons/Class\";\nimport RoomIcon from \"@material-ui/icons/Room\";\nimport SchoolIcon from \"@material-ui/icons/School\";\nimport AccountBalanceIcon from \"@material-ui/icons/AccountBalance\";\nimport EmailIcon from '@material-ui/icons/Email';\nimport ContactMailIcon from \"@material-ui/icons/ContactMail\";\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport Students from \"../_components/students.component\";\nimport Users from \"../_components/users.component\";\nimport Payments from \"../_components/payments.component\";\nimport Rooms from \"../_components/rooms.component\";\nimport Teachers from \"../_components/teachers.component\";\nimport Courses from \"../_components/courses.component\";\nimport {NEEDS} from \"../_helpers/needs\";\nimport Email from \"../_components/email.component\";\n\nconst Routes = [\n  {\n    path: 'students',\n    component: Students,\n    title: 'students',\n    icon: PersonIcon,\n    needs: [NEEDS.students, NEEDS.get]\n  },\n  {\n    path: 'courses',\n    component: Courses,\n    title: 'courses',\n    icon: ClassIcon,\n    needs: [NEEDS.courses, NEEDS.get]\n  },\n  {\n    path: 'teachers',\n    component: Teachers,\n    title: 'teachers',\n    icon: SchoolIcon,\n    needs: [NEEDS.teachers, NEEDS.get]\n  },\n  {\n    path: 'rooms',\n    component: Rooms,\n    title: 'rooms',\n    icon:  RoomIcon,\n    needs: [NEEDS.rooms, NEEDS.get]\n  },{\n    path: 'payments',\n    component: Payments,\n    title: 'payments',\n    icon: AccountBalanceIcon,\n    needs: [NEEDS.payments, NEEDS.get]\n  },{\n    path: 'users',\n    component: Users,\n    title: 'users',\n    icon: ContactMailIcon,\n    needs: [NEEDS.users, NEEDS.get]\n  },{\n    path: 'email',\n    component: Email,\n    title: 'email',\n    icon: EmailIcon,\n    needs: [NEEDS.send_email, NEEDS.get]\n  }\n];\n\n\nexport default Routes;","import {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\nexport const downloadGodFile = () => {\n    return new Promise(function (resolve, reject) {\n    axios({\n        url: `${BACKEND_URL}/api/${API_VERSION}/files/god`,\n        method: 'POST',\n        responseType: 'blob', // important\n        headers: {\n            ...{\n                'Accept': 'text/csv',\n                'Cache-Control': 'no-cache'\n            }, ...authHeader()\n        }\n    }).then(response => {\n        let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n        if (filename === null) filename = \"export.zip\";\n\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', filename);\n        document.body.appendChild(link);\n        link.click();\n        link.remove();\n        resolve();\n    }).catch(function (err) {\n        reject(err);\n    });\n    });\n}","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const authenticationService = {\n    login,\n    logout,\n    ping\n};\n\nfunction login(username, password, totp, rememberMe=false) {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/auth/v1/login?totp=${totp}&rememberMe=${rememberMe? 1:0}`,\n            method: 'POST',\n            auth: {\n                username: username,\n                password: password\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(res => {\n            resolve({logged: true, needs: res[\"data\"]});\n        }).catch(function (res) {\n            try { if (res[\"response\"][\"status\"] === 401) resolve({logged: false}) } catch(err){}\n            reject(res);\n        });\n    });\n}\n\nfunction logout() {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/auth/v1/logout`,\n            method: 'GET',\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(false);\n        }).catch(function (err) {\n            reject(err);\n        });});\n}\n\nfunction ping() {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/auth/v1/ping`,\n            method: 'GET',\n            headers: {'Cache-Control': 'no-cache'}\n        }).then(res => {\n            resolve({isLoggedIn: true, needs: res.data});\n        }).catch(function (res) {\n            try { if (res[\"response\"][\"status\"] === 401) resolve({isLoggedIn: false, needs: null}) } catch(err){}\n\n            reject(res);\n        });});\n}","import i18n from 'i18next';\nimport {initReactI18next} from 'react-i18next';\nimport Backend from 'i18next-xhr-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport translationEN from \"./_translations/locales/eng/translation.json\";\nimport translationCAT from \"./_translations/locales/cat/translation.json\";\n\nexport const fallbackLng = [\"cat\"];\nconst availableLanguages = [\"eng\", \"cat\"];\n\nconst resources = {\n    eng: {\n        translation: translationEN\n    },\n    cat: {\n        translation: translationCAT\n    }\n};\n\ni18n\n    .use(Backend) // load _translations using http (default                                               public/assets/locals/en/_translations)\n    .use(LanguageDetector) // detect user language\n    .use(initReactI18next) // pass the i18n instance to react-i18next.\n    .init({\n        resources,\n        fallbackLng, // fallback language is english.\n\n        detection: {\n            checkWhitelist: true, // options for language detection\n        },\n\n        debug: false,\n\n        whitelist: availableLanguages,\n\n        interpolation: {\n            escapeValue: false, // no need for react.  it escapes by default\n        },\n    }).then(_ => ({}));\n\nexport default i18n;","/**\n * returns the selected language, defaults to fallbackLng if none is selected\n *\n * @returns string, the selected language\n */\nimport {fallbackLng} from \"../i18nextConf\";\n\nexport const getCurrentLanguage = () => {\n    return localStorage.getItem(\"i18nextLng\") || fallbackLng;\n}\n","import Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useTranslation} from \"react-i18next\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport i18next from \"i18next\";\nimport {getCurrentLanguage} from \"../_translations/utils\";\n\n\n\nexport default function TranslateButton({...props}){\n    const {t} = useTranslation();\n    const selectedLanguage = getCurrentLanguage();\n\n    return  <Tooltip title={selectedLanguage === \"cat\"? t(\"use_eng\"): t(\"use_cat\")} style={{float: 'right'}} {...props}>\n                <IconButton\n                    color=\"inherit\"\n                    onClick={() => {\n\n                        i18next.changeLanguage(getCurrentLanguage() === \"eng\"? \"cat\": \"eng\").then();\n                    }}\n                    aria-label={selectedLanguage === \"cat\"? t(\"use_eng\"): t(\"use_cat\")}>\n                    <TranslateIcon/>\n                </IconButton>\n\n            </Tooltip>;\n}","import Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useTranslation} from \"react-i18next\";\n\nexport default function ThemeButton({...props}){\n    const themeCtx = React.useContext(themeContext);\n    const {t} = useTranslation();\n\n    return  <Tooltip title={themeCtx.theme? t(\"use_light\"): t(\"use_dark\")}\n                     style={{float: 'right'}} {...props}>\n                <IconButton\n                    color=\"inherit\"\n                    aria-label={themeCtx.theme? t(\"use_light\"): t(\"use_dark\")}\n                    onClick={themeCtx.switchTheme}>\n                    <Brightness4Icon/>\n                </IconButton>\n            </Tooltip>;\n}","import Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport FolderSharedIcon from \"@material-ui/icons/FolderShared\";\nimport React from \"react\";\nimport {useTranslation} from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function TeacherDashboardButton({...props}){\n    const {t} = useTranslation();\n    let history = useHistory();\n\n    return  <Tooltip title={t(\"teacher_dashboard\")} style={{float: 'right'}} {...props}>\n    <IconButton\n        color=\"inherit\"\n        onClick={() => history.replace(\"/teacher-dashboard\")}\n        aria-label={t(\"teacher_dashboard\")}\n        aria-haspopup=\"false\">\n        <FolderSharedIcon/>\n    </IconButton>\n</Tooltip>\n;\n}","import IconButton from \"@material-ui/core/IconButton\";\nimport clsx from \"clsx\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport React, {useContext} from \"react\";\nimport {useTranslation} from \"react-i18next\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport i18next from \"i18next\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport {userContext} from \"../_context/user-context\";\nimport {authenticationService} from \"../_services/auth.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport TranslateButton from \"./translate_button.component\";\nimport ThemeButton from \"./theme_button.component\";\nimport {DOCS_URL} from \"../config\";\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport SchoolIcon from '@material-ui/icons/School';\nimport { withRouter } from \"react-router\";\nimport { useHistory } from \"react-router-dom\";\nimport FolderSharedIcon from '@material-ui/icons/FolderShared';\nimport TeacherDashboardButton from \"./teacher_dashboard_button\";\n\nconst languageMap = {\n    eng: { label: \"english\", dir: \"ltr\", active: true },\n    cat: { label: \"catal\", dir: \"ltr\", active: false }\n};\n\n\nconst useStyles = makeStyles(theme => (createStyles({\n    toolbar: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        padding: theme.spacing(0, 1),\n        // necessary for content to be below app bar\n        ...theme.mixins.toolbar,\n    },\n    grow: {\n        flexGrow: 1,\n    },\n})));\n\nexport default withRouter(function HomeToolbar(props){\n    let history = useHistory();\n    const classes = useStyles();\n    const errorHandler = useErrorHandler();\n\n    const selected = localStorage.getItem(\"i18nextLng\") || \"eng\";\n    const { t } = useTranslation();\n\n    const title = \"centrfuga4\";\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const isMenuOpen = Boolean(anchorEl);\n    const handleProfileMenuOpen = (event, ) => {\n        setAnchorEl(event.currentTarget);\n    };\n    const handleMenuClose = () => {\n        setAnchorEl(null);\n    };\n\n    const [anchorElLan, setAnchorElLan] = React.useState(null);\n    const isLanguageMenuOpen = Boolean(anchorElLan);\n    const handleLanguageMenuOpen = (event) => {\n        setAnchorElLan(event.currentTarget);\n    };\n    const handleLanguageMenuClose = () => {\n        setAnchorElLan(null);\n    };\n    const changeLanguage = (language) => {\n        i18next.changeLanguage(language).then();\n        handleLanguageMenuClose();\n    }\n    React.useEffect(() => {\n        document.body.dir = languageMap[selected].dir;\n      }, [anchorElLan, selected]);\n\n    const languageMenuId = 'primary-language-select-menu';\n    const languageMenu = (\n        <Menu\n            anchorEl={anchorElLan}\n            anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n            id={languageMenuId}\n            keepMounted\n            transformOrigin={{vertical: 'top', horizontal: 'right'}}\n            open={isLanguageMenuOpen}\n            onClose={handleLanguageMenuClose}>\n            {Object.keys(languageMap)?.map(key => (\n              <MenuItem key={key} onClick={() => changeLanguage(key)}>{languageMap[key].label}</MenuItem>\n            ))}\n        </Menu>\n    );\n\n    const userCtx = useContext(userContext);\n\n\n    const userMenuId = 'primary-search-account-menu';\n    const userMenu = (\n        <Menu\n            anchorEl={anchorEl}\n            anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n            id={userMenuId}\n            keepMounted\n            transformOrigin={{vertical: 'top', horizontal: 'right'}}\n            open={isMenuOpen}\n            onClose={handleMenuClose}>\n\n\n                     <MenuItem\n                         onClick={(event) => {\n                             authenticationService\n                                 .logout()\n                                 .then(...errorHandler({}))\n                                 .then(() => {\n                                     userCtx[\"setUser\"]({logged: false, ping: false});\n                                 });\n                             handleMenuClose(event);\n                         }}>\n                         {t(\"log_out\")}\n                     </MenuItem>\n\n\n        </Menu>\n    );\n\n    return (\n    <Toolbar>\n        \n\n                    <IconButton\n                        color=\"inherit\"\n                        aria-label={t(\"open_drawer\")}\n                        onClick={props.handleDrawerOpen}\n                        edge=\"start\"\n                        className={clsx(classes.menuButton, {\n                            [classes.hide]: props.open,\n                        })}>\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                      {title}\n                    </Typography>\n                    <div className={classes.grow}/>\n\n\n                    <TeacherDashboardButton/>\n\n\n                    <Tooltip title={t(\"docs\")}>\n                        <IconButton\n                            color=\"inherit\"\n                            onClick={() => window.open(DOCS_URL, \"_blank\")}\n                            aria-label={t(\"docs\")}\n                            aria-haspopup=\"false\">\n                            <DescriptionIcon/>\n                        </IconButton>\n                    </Tooltip>\n                    <TranslateButton/>\n                    <ThemeButton />\n\n\n                        <Tooltip title={t(\"my_account\")}>\n                        <IconButton\n                            color=\"inherit\"\n                            onClick={handleProfileMenuOpen}\n                            aria-label={t(\"my_account\")}\n                            aria-controls={userMenuId}\n                            aria-haspopup=\"true\">\n                            <AccountCircleIcon/>\n                        </IconButton>\n                    </Tooltip>\n\n\n        {languageMenu}\n        {userMenu}\n                </Toolbar>\n    )\n});\n","import {makeStyles} from \"@material-ui/core/styles\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport React, {useEffect} from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport clsx from \"clsx\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport Routes from \"./routes\";\nimport {BrowserRouter, Switch, Link, Route, Redirect} from \"react-router-dom\";\nimport {useTranslation} from \"react-i18next\";\nimport HomeToolbar from \"../_components/toolbar.home.component\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {\n    Backdrop,\n    CircularProgress,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    useMediaQuery\n} from \"@material-ui/core\";\nimport {loadingContext} from '../_context/loading-context';\nimport {tabContext} from '../_context/tab-context';\nimport { useHistory } from \"react-router-dom\";\nimport { useRouteMatch, useLocation  } from \"react-router-dom\";\n\nconst drawerWidth = 240;\nconst useStyles = makeStyles(theme => (createStyles({\n    root: {\n        display: 'flex',\n        height: '100vh'\n    },\n    appBar: {\n        zIndex: theme.zIndex.drawer + 1,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        background: theme.palette.neutral.main,\n        color: theme.palette.neutral.emphasisText.medium,\n    },\n    appBarShift: {\n        marginLeft: drawerWidth,\n        width: `calc(100% - ${drawerWidth}px)`,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    },\n    menuButton: {\n        marginRight: 36,\n    },\n    hide: {\n        display: 'none',\n    },\n    drawer: {\n        width: drawerWidth,\n        flexShrink: 0,\n        whiteSpace: 'nowrap',\n    },\n    drawerOpen: {\n        width: drawerWidth,\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    },\n    drawerClose: {\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        overflowX: 'hidden',\n        width: theme.spacing(7) + 1,\n        [theme.breakpoints.up('sm')]: {\n            width: theme.spacing(9) + 1,\n        },\n    },backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n    toolbar: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        padding: theme.spacing(0, 1),\n        // necessary for content to be below app bar\n        ...theme.mixins.toolbar,\n    },\n    content: {\n        display: 'flex',\n        flexFlow: 'column',\n        height: \"100%\",\n        width: \"100%\",\n        overflow: 'auto'\n    },\n    main: {\n        flex: 1,\n        padding: theme.spacing(3),\n        overflow: 'auto'\n    },\n    icon: {\n      '&': {\n          color: theme.palette.neutral.emphasisText.medium,\n      }\n    },\n    selectedIcon: {\n      '&': {\n          color: theme.palette.primary.main,\n      }\n    },\n    grow: {\n        flexGrow: 1,\n    },\n})));\n\nconst HomePage = (props) => {\n    const theme = useTheme();\n    const classes = useStyles();\n\n    const baseRouter = props.baseRouter;\n\n    const { t } = useTranslation();\n\n    const [open, setOpen] = React.useState(false);\n\n    let match = useRouteMatch();\n    const location = useLocation();\n    const currentRoute = location.pathname;\n    const [hasNeeds, NEEDS] = useNeeds();\n\n    const handleDrawerOpen = () => {\n        setOpen(true);\n    };\n    const handleDrawerClose = () => {\n        setOpen(false);\n    };\n\n    const [loading, setLoading] = React.useState(false);\n      const handleClose = () => {\n        setLoading(false);\n      };\n\n      const routerRef = React.createRef();\n      let history = useHistory();\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n                <loadingContext.Provider value={{loading: loading, startLoading: () => {setLoading(true)}, stopLoading: () =>{setLoading(false)}}}>\n                    \n                            <AppBar\n                                position=\"fixed\"\n                                className={clsx(classes.appBar, {\n                                    [classes.appBarShift]: open,\n                                })}>\n                                <HomeToolbar\n                                    routerRef={baseRouter}\n                                    changeTheme={props.changeTheme}\n                                    handleDrawerOpen={handleDrawerOpen}\n                                    handleDrawerClose={handleDrawerClose}\n                                    open={open}\n                                />\n                            </AppBar>\n                            <Switch ref={routerRef}>\n                           \n                            \n                                <tabContext.Provider value={{currentTab: currentRoute, goTo: (res, id=null) => {\n                                if (id === null) {\n                                    history.replace(`/home/${res}`);\n                                } else {\n                                    history.replace(`/home/${res}?id=${id}`);\n                                }\n                            }}}>\n                                <Drawer\n                                    variant=\"permanent\"\n                                    className={clsx(classes.drawer, {\n                                        [classes.drawerOpen]: open,\n                                        [classes.drawerClose]: !open,\n                                    })}\n                                    classes={{\n                                        paper: clsx({\n                                            [classes.drawerOpen]: open,\n                                            [classes.drawerClose]: !open,\n                                        }),\n                                    }}\n                                >\n                                    <div className={classes.toolbar}>\n                                        <IconButton onClick={handleDrawerClose}>\n                                            {theme.direction === 'rtl' ? <ChevronRightIcon/> : <ChevronLeftIcon/>}\n                                        </IconButton>\n                                    </div>\n                                    <Divider/>\n                                    <List>\n                                        {Routes\n                                            .filter(route => hasNeeds(route.needs))\n                                            .map((prop) =>(\n                                                  <ListItem key={prop.title} to={prop.path } button component={Link}>\n                                                    <ListItemIcon className={`/home/${prop.path}` === currentRoute? classes.selectedIcon: classes.icon}>\n                                                        <Tooltip title={t(prop.title)} aria-label={t(prop.title)}>\n                                                            {<prop.icon/>}\n                                                        </Tooltip>\n                                                    </ListItemIcon>\n                                                    <ListItemText primary={t(prop.title)}/>\n                                                </ListItem>\n                                                ))}\n                                    </List>\n                                </Drawer>\n\n\n                                <div className={classes.content}>\n                                    <div className={classes.toolbar}/>\n                                    <main className={classes.main}>\n                                    <Route exact path=\"/home/\">\n                                        <Redirect to=\"/home/students\" />\n                                    </Route>\n                                        {Routes\n                                            .filter(route => hasNeeds(route.needs))\n                                            .map((prop) => <Route key={prop.title} path={`/home/${prop.path}`} component={prop.component}/>)\n                                        }\n                                    </main>\n                                </div>\n                                     </tabContext.Provider>\n                            </Switch>\n\n                    <Backdrop className={classes.backdrop} open={loading} onClick={handleClose}>\n                    <CircularProgress color=\"inherit\" />\n                  </Backdrop>\n\n                        \n\n            </loadingContext.Provider>\n        </div>\n    );\n}\n\nexport default HomePage;","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const passwordResetService = {\n    reset,\n    startReset\n};\n\nfunction reset(username, password, token, recaptcha) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/password-reset/v1/redeem`,\n            method: 'POST',\n            data: {\n                email: username,\n                password: password,\n                token: token,\n                recaptcha: recaptcha\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(true);\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n\nfunction startReset(username, recaptcha) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/password-reset/v1/request`,\n            method: 'POST',\n            data: {\n                email: username,\n                recaptcha: recaptcha\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(true);\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n","import { useEffect } from \"react\";\n\nexport const useOnMount = handler => {\n  return useEffect(() => {\n    return handler();\n  }, []);\n};","import React from 'react';\nimport {useFormik} from 'formik';\nimport {authenticationService} from '../_services/auth.service';\nimport {userContext} from \"../_context/user-context\";\nimport * as yup from 'yup';\nimport {TextField} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport Link from \"@material-ui/core/Link\";\nimport {passwordResetService} from \"../_services/password-reset.service\";\nimport {useSnackbar} from \"notistack\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport {safe_username_required} from \"../_yup/validators\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport {PUBLIC_URL, RECAPTCHA} from \"../config\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport ThemeButton from \"../_components/theme_button.component\";\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport {Checkbox} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexGrow: 1,\n        height: \"100vh\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    details: {\n        width: \"100%\",\n        display: 'flex',\n        verticalAlign: 'middle'\n    },\n    paper: {\n        height: \"50%\",\n        [theme.breakpoints.up('md')]:{minWidth: \"500px\", width: \"50%\"},\n        [theme.breakpoints.down('md')]:{width: \"100%\"},\n        margin: \"auto\",\n        padding: \"50px\"\n    },\n    reset: {\n        width: \"100%\",\n        textAlign: \"end\",\n        cursor: \"\",\n        display: 'flex',\n        flexDirection: { xs: 'column', md: 'row' },\n        verticalAlign: 'middle'\n    },\n    remember: {\n        width: \"100%\",\n        textAlign: \"start\",\n        cursor: \"\",\n        verticalAlign: 'middle'\n    }\n}));\n\n\nconst LoginPage = (props) => {\n    const classes = useStyles();\n    const userCtx = React.useContext(userContext);\n    const themeCtx = React.useContext(themeContext);\n    const mobile = useMediaQuery('(max-width:960px)');\n    const [recaptcha, setRecaptcha] = React.useState(null);\n    const [showRecaptcha, setShowRecaptcha] = React.useState(false);\n    function onChange(value) {\n      setRecaptcha(value);\n    }\n\n    const errorHandler = useErrorHandler();\n\n    const {enqueueSnackbar} = useSnackbar();\n\n    const logged = (needs) => {\n        const setLogged = userCtx[\"setUser\"];\n        const setNeeds = userCtx[\"setNeeds\"];\n        const setTeacher = userCtx[\"setTeacher\"];\n        setLogged({logged: true, ping: true});\n        setNeeds(needs[\"needs\"]);\n        setTeacher(needs[\"teacher\"]);\n        const {from} = props.location.state || {from: {pathname: \"/home/students\"}};\n        props.history.push(from);\n    }\n\n    const {t} = useTranslation();\n    const formik = useFormik({\n        initialValues: {\n            username: '',\n            password: '',\n            totp: '',\n            rememberMe: false\n        },\n        validationSchema: yup.object({\n            username: safe_username_required(t),\n            password: yup.string().required(t(\"password_required\")),\n            totp: yup.string().required(t(\"2FA_needed\")).test('len', t(\"2FA_6digits\"), (val) => (val === undefined ? \"\": val).toString().length === 6).test('digits', t(\"2FA_invalid\"), (val) => Number(val)? true: false)\n        }),\n        enableReinitialize: true,\n        onSubmit: ({username, password, totp, rememberMe}, {setStatus, setSubmitting}) => {\n            setStatus();\n            authenticationService\n                .login(username, password, totp, rememberMe)\n                .then(...errorHandler({handle401: false}))\n                .then(function (res) {\n                    if (!res['logged']) {\n                        setStatus(true);\n                        return;\n                    }\n                    logged(res['needs']);\n                })\n\n                .finally(() => {\n                   setSubmitting(false);\n                });\n        }\n    });\n\n    useOnMount(() => {\n        if (userCtx[\"user\"][\"logged\"]) {\n            props.history.push('/home/students');\n            return null;\n        }\n\n        if (userCtx[\"user\"][\"ping\"] !== false){\n             authenticationService\n            .ping()\n            .then(...errorHandler({}))\n            .then((response) => {\n                if (response.isLoggedIn) logged(response.needs);\n            })\n\n        }\n\n    });\n\n    const resetPassword = () => {\n        setShowRecaptcha(true);\n    }\n\n    const resetPassword2 = () => {\n        const username = formik.values[\"username\"];\n        if (username === null || username === '' || username === undefined) {\n            enqueueSnackbar(t(\"username_required_password_reset\"), { variant: \"warning\"});\n        } else {\n            passwordResetService\n                .startReset(username, recaptcha)\n                .then(...errorHandler({}))\n                .then(r => {\n                    setShowRecaptcha(false);\n                    enqueueSnackbar(t(\"started_password_reset\"), { variant: \"success\"});\n                })\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n\n            <Grid container>\n                {!mobile && <Grid xs={2} item/>}\n\n                <Grid xs={mobile? 12: 8} item>\n                    <Grid\n                        container\n                        spacing={0}\n                        align=\"center\"\n                        justify=\"center\"\n                        direction=\"column\"\n                        style={{height: \"100%\"}}\n                    >\n\n                        <Grid item>\n                            <Box m={2}>\n                            {mobile && <>\n                    <TranslateButton style={{float: 'right'}}/>\n                    <ThemeButton style={{float: 'right'}}/> </>\n                }\n                                <Paper className={classes.paper}>\n\n                                    <img src={`${PUBLIC_URL}/logo_centrifuga4_${themeCtx.label}.svg`} alt=\"Logo Centrfuga\" style={{height: \"85px\"}}/>\n\n                                    <form onSubmit={formik.handleSubmit}>\n                                        <TextField\n                                            label={t(\"email\")}\n                                            disabled={formik.isSubmitting}\n                                            helperText={formik.touched[\"username\"] && formik.errors[\"username\"]}\n                                            type=\"email\"\n                                            name=\"username\"\n                                            className={classes.field}\n                                            value={formik.values[\"username\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"password\")}\n                                            name=\"password\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password\"] && formik.errors[\"password\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"2FA_code\")}\n                                            name=\"totp\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"totp\"] && formik.errors[\"totp\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"totp\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        \n\n                                        <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                type=\"submit\"\n                                                disabled={formik.isSubmitting}\n                                                className={classes.field}>\n                                                {t(\"log_in\")}\n                                            </Button>\n                                        </Box>\n\n                                        <Box my={1} className={classes.details}>\n                                            <div className={classes.remember}>\n                                                <Checkbox\n                                                    name={\"rememberMe\"}\n                                                    value={formik.values[\"rememberMe\"]}\n                                                    onChange={formik.handleChange}\n                                                    onBlur={formik.handleBlur}\n                                                    error={formik.status}\n                                                    helperText={formik.touched[\"rememberMe\"] && formik.errors[\"rememberMe\"]}\n                                                    checked={formik.values[\"rememberMe\"]}\n                                                />\n                                                        \n                                                <Typography  variant=\"caption\">\n                                                    {t(\"rememberMe\")}\n                                                </Typography>\n                                            </div>\n                                            <div className={classes.resetPa}>\n                                                <Typography  className={classes.reset} variant=\"caption\">\n                                                    <Link\n                                                        component=\"button\"\n                                                        variant=\"body2\"\n                                                        onClick={resetPassword}\n                                                        style={{verticalAlign: 'middle'}}>\n                                                    {t(\"reset_password\")}\n                                                    </Link>\n                                                </Typography>\n                                            </div>\n                                        </Box>\n                                        \n                                    </form>\n\n                                     {showRecaptcha &&\n                                     <div><ReCAPTCHA sitekey={RECAPTCHA}\n                                                 onChange={onChange}\n                                                 theme={themeCtx.theme? \"dark\": \"light\"}\n\n                                                 className={classes.recaptcha}\n                                      />\n                                     <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                onClick={resetPassword2}\n                                                disabled={recaptcha === null}\n                                                className={classes.field}>\n                                                {t(\"reset_password\")}\n                                            </Button>\n                                        </Box>\n                                     </div>}\n\n                                   \n                                </Paper></Box>\n                        </Grid>\n\n                    </Grid>\n                </Grid>\n                {!mobile && <Grid xs={2} item>\n                    <TranslateButton style={{float: 'right'}}/>\n                    <ThemeButton style={{float: 'right'}}/>\n                </Grid>}\n            </Grid></div>);\n\n}\n\nexport default LoginPage;","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const authenticationService = {\n    signup\n};\n\nfunction signup(username, password, email, name, surname1, surname2, token) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/user-invites/v1/redeem`,\n            method: 'POST',\n            data: {\n                password: password,\n                email: email,\n                name: name,\n                surname1: surname1,\n                surname2: surname2,\n                token: token\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(response.data);\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n","import React, {useState} from 'react';\nimport {useFormik} from 'formik';\nimport * as yup from 'yup';\nimport {TextField} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {authenticationService as signupService} from \"../_services/signup.service\";\nimport {useSnackbar} from \"notistack\";\nimport i18next from \"i18next\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport {safe_password_repetition, safe_email_required, safe_password, safe_username_required} from \"../_yup/validators\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport ThemeButton from \"../_components/theme_button.component\";\nimport {PUBLIC_URL} from \"../config\";\nimport QRCode from \"react-qr-code\";\nimport Link from '@material-ui/core/Link';\nimport {confirmContext} from \"../_context/confirm-context\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexGrow: 1,\n        height: \"100vh\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    paper: {\n        width: \"50%\",\n        minWidth: \"500px\",\n        height: \"50%\",\n        padding: \"50px\",\n        margin: \"auto\"\n    }\n}));\n\nconst STEP_REGISTER = 0;\nconst STEP_TOTP = 1;\n\nconst SignupPage = (props) => {\n    const classes = useStyles();\n    const themeCtx = React.useContext(themeContext);\n    const {enqueueSnackbar} = useSnackbar();\n    const [step, setStep] = useState(STEP_REGISTER);\n    const [totpUri, setTotpUri] = useState(null);\n    const confirm = React.useContext(confirmContext);\n\n    useOnMount(() => {\n        i18next.changeLanguage(query.get('lan')).then();\n    })\n\n    const {t} = useTranslation();\n    const errorHandler = useErrorHandler();\n    const query = new URLSearchParams(window.location.search);\n    const token = query.get('token')\n    const email = query.get('email')\n    const formik = useFormik({\n        initialValues: {\n            username: email,\n            email: email,\n            password: '',\n            name: '',\n            surname1: '',\n            surname2: '',\n            password2: '',\n        },\n        validationSchema: yup.object({  // todo translate\n            username: safe_username_required(t),\n            email: safe_email_required(t),\n            password: safe_password(t),\n            password2: safe_password_repetition(t),\n            name: yup.string().required(t(\"name_required\")),\n            surname1: yup.string().required(t(\"surname1_required\")),\n            surname2: yup.string().required(t(\"surname2_required\"))\n        }),\n        enableReinitialize: true,\n        onSubmit: ({username, email, password, name, surname1, surname2, password2}, {setStatus, setSubmitting}) => {\n            setStatus();\n\n            signupService.signup(username, password, email, name, surname1, surname2, token)\n                .then(...errorHandler({handle401: false, handle400: false}))\n                .then(\n                    function (result) {\n                        enqueueSnackbar(t(\"sign_up_success\"), {variant: \"success\"});\n                        setSubmitting(false);\n                        setStep(STEP_TOTP);\n                        setTotpUri(result['totp']);\n                    },\n                    function (error) {\n                        setSubmitting(false);\n                        setStatus(error);\n\n                        if (error.response.status === 401){\n                            enqueueSnackbar(t(\"invalid_expired_invite\"), { variant: \"warning\"});\n                        } else if (error.response.status === 400) {\n                            enqueueSnackbar(t(\"used_invite\"), { variant: \"warning\"});\n                        }\n                    });\n        }\n    });\n\n    const RegisterStep = () => <React.Fragment>\n        <Box m={2}>\n    <Typography>{t(\"been_invited\")}</Typography>\n            </Box>\n            <form onSubmit={formik.handleSubmit}>\n                    <TextField\n                        label={t(\"email\")}\n                        helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                        type=\"email\"\n                        name=\"email\"\n                        className={classes.field}\n                        value={formik.values[\"email\"]}\n                        onChange={formik.handleChange}\n                        onBlur={formik.handleBlur}\n                        error={formik.status}\n                        disabled\n                    />\n\n                    <TextField\n                        label={t(\"name\")}\n                        helperText={formik.touched[\"name\"] && formik.errors[\"name\"]}\n                        name=\"name\"\n                        className={classes.field}\n                        value={formik.values[\"name\"]}\n                        onChange={formik.handleChange}\n                        disabled={formik.isSubmitting}\n                        onBlur={formik.handleBlur}\n                        error={formik.status}\n                    />\n                    <TextField\n                        label={t(\"surname1\")}\n                        helperText={formik.touched[\"surname1\"] && formik.errors[\"surname1\"]}\n                        name=\"surname1\"\n                        disabled={formik.isSubmitting}\n                        className={classes.field}\n                        value={formik.values[\"surname1\"]}\n                        onChange={formik.handleChange}\n                        onBlur={formik.handleBlur}\n                        error={formik.status}\n                    />\n                    <TextField\n                        label={t(\"surname2\")}\n                        helperText={formik.touched[\"surname2\"] && formik.errors[\"surname2\"]}\n                        name=\"surname2\"\n                        disabled={formik.isSubmitting}\n                        className={classes.field}\n                        value={formik.values[\"surname2\"]}\n                        onChange={formik.handleChange}\n                        onBlur={formik.handleBlur}\n                        error={formik.status}\n                    />\n                    <TextField\n                        label={t(\"password\")}\n                        name=\"password\"\n                        type=\"password\"\n                        helperText={formik.touched[\"password\"] && formik.errors[\"password\"]}\n                        className={classes.field}\n                        value={formik.values[\"password\"]}\n                        disabled={formik.isSubmitting}\n                        onChange={formik.handleChange}\n                        onBlur={formik.handleBlur}\n                        error={formik.status}\n                        autoComplete=\"new-password\"\n                    />\n                    <TextField\n                        label={t(\"confirm_password\")}\n                        name=\"password2\"\n                        type=\"password\"\n                        helperText={formik.touched[\"password2\"] && formik.errors[\"password2\"]}\n                        className={classes.field}\n                        value={formik.values[\"password2\"]}\n                        disabled={formik.isSubmitting}\n                        onChange={formik.handleChange}\n                        onBlur={formik.handleBlur}\n                        error={formik.status}\n                        autoComplete=\"new-password\"\n                    />\n                    <Box my={3}>\n                        <Button\n                            variant=\"contained\"\n                            color=\"primary\"\n                            type=\"submit\"\n                            disabled={formik.isSubmitting || !(formik.isValid && formik.dirty)}\n                            className={classes.field}>\n                            {t(\"sign_up\")}\n                        </Button>\n                    </Box>\n                </form>\n            </React.Fragment>;\n\n    const TotpStep = () => <React.Fragment>\n        <Box m={2}>\n            <Typography>{t(\"setup_2FA\")}</Typography>\n        </Box>\n        <Box m={2}>   \n            <ul style={{textAlign: 'left'}}>\n                <li><Typography variant=\"body2\" >{t(\"2FA_tip1\")}</Typography></li>\n                <li><Typography variant=\"body2\" >{t(\"2FA_tip2\")}</Typography></li>\n                <li><Typography variant=\"body2\" >{t(\"2FA_tip3\")}</Typography></li>\n            </ul>\n        </Box>\n             \n        <Box m={4}>\n            {totpUri !== null && <QRCode value={totpUri} size='125' />}\n        </Box>\n\n        <Box m={1} style={{textAlign: 'right'}}>\n            <Link variant=\"overline\" href=\"https://miquelvir.github.io/centrifuga4/docs/how-tos/2FA\" target=\"_blank\">{t(\"learn_how_2FA\")}</Link>\n        </Box>\n\n        <Box my={3}>\n            <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                    console.log(\"click\");\n                    confirm.confirm(\"title_2fa_continue\", \"description_2fa_continue\", () => {\n                        props.history.push(\"/login\");\n                      });\n                }}\n                className={classes.field}>\n                {t(\"continue\")}\n            </Button>\n        </Box>\n    </React.Fragment>\n\n    return (\n        <div className={classes.root}>\n            <Grid container>\n                <Grid xs={2} item/>\n\n                <Grid xs={8} item>\n                    <Grid\n                        container\n                        spacing={0}\n                        align=\"center\"\n                        justify=\"center\"\n                        direction=\"column\"\n                        style={{height: \"100%\"}}\n                    >\n                        <Grid item>\n                            <Box m={2}>\n                                <Paper className={classes.paper}>\n                                    <img src={`${PUBLIC_URL}/logo_centrifuga4_${themeCtx.label}.svg`} alt=\"Logo Centrfuga\" style={{height: \"85px\"}}/>\n\n                                    {step === STEP_REGISTER && RegisterStep()}\n                                    {step === STEP_TOTP && TotpStep()}\n                                </Paper></Box>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Grid xs={2} item>\n                    <TranslateButton style={{float: 'right'}}/>\n                    <ThemeButton style={{float: 'right'}}/>\n                </Grid>\n            </Grid></div>);\n\n}\n\nexport default SignupPage;","import React from 'react';\nimport {useFormik} from 'formik';\nimport * as yup from 'yup';\nimport {TextField} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useSnackbar} from \"notistack\";\nimport {passwordResetService} from \"../_services/password-reset.service\";\nimport i18next from \"i18next\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport {safe_password, safe_password_repetition, safe_username_required} from \"../_yup/validators\";\nimport {PUBLIC_URL, RECAPTCHA} from \"../config\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport ThemeButton from \"../_components/theme_button.component\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexGrow: 1,\n        height: \"100vh\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    recaptcha: {\n        margin: theme.spacing(3)\n    },\n    paper: {\n        width: \"50%\",\n        minWidth: \"500px\",\n        height: \"50%\",\n        padding: \"50px\",\n        margin: \"auto\"\n    }\n}));\n\n\nconst ResetPage = (props) => {\n    const classes = useStyles();\n    const themeCtx = React.useContext(themeContext);\n\n    const [recaptcha, setRecaptcha] = React.useState(null);\n    function onChange(value) {\n      setRecaptcha(value);\n    }\n\n    const {enqueueSnackbar} = useSnackbar();\n\n    useOnMount(() => {\n        i18next.changeLanguage(query.get('lan')).then();\n    })\n\n    const {t} = useTranslation();\n    const query = new URLSearchParams(window.location.search);\n    const errorHandler = useErrorHandler();\n    const token = query.get('token')\n    const email = query.get('email')\n    const formik = useFormik({\n        initialValues: {\n            email: email,\n            password: '',\n            password2: '',\n        },\n        validationSchema: yup.object({\n            email: safe_username_required(t),\n            password: safe_password(t),\n            password2: safe_password_repetition(t)\n        }),\n        enableReinitialize: true,\n        onSubmit: ({email, password, password2}, {setStatus, setSubmitting}) => {\n            setStatus();\n\n            passwordResetService\n                .reset(email, password, token, recaptcha)\n                .then(...errorHandler({handle401: false}))\n                .then(\n                    function (result) {\n                        enqueueSnackbar(t(\"reset_password_success\"), {variant: \"success\"});\n                        setSubmitting(false);\n                        props.history.push(\"/login\");\n                    },\n                    function (error) {\n                        setSubmitting(false);\n                        setStatus(error);\n\n                        if (error.response.status === 401){\n                            enqueueSnackbar(t(\"invalid_expired_reset\"), { variant: \"warning\"});\n                        } // TODO report, same in the signup\n                    });\n        }\n    });\n\n    console.log(\"***\", formik.error, formik.errors, formik.errors['email'], formik.touched, formik.values, formik.initialValues);\n\n    return (\n        <div className={classes.root}>\n            <Grid container>\n                <Grid xs={2} item/>\n\n                <Grid xs={8} item>\n                    <Grid\n                        container\n                        spacing={0}\n                        align=\"center\"\n                        justify=\"center\"\n                        direction=\"column\"\n                        style={{height: \"100%\"}}>\n                        <Grid item>\n                            <Box m={2}>\n                                <Paper className={classes.paper}>\n                                    <img src={`${PUBLIC_URL}/logo_centrifuga4_${themeCtx.label}.svg`} alt=\"Logo Centrfuga\" style={{height: \"85px\"}}/>\n\n                                     <Box m={2}>\n                                         <Typography>{t(\"new_password\")}</Typography>\n                                    </Box>\n\n                                    <form onSubmit={formik.handleSubmit}>\n                                        <TextField\n                                            label={t(\"email\")}\n                                            helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                                            type=\"email\"\n                                            name=\"email\"\n                                            className={classes.field}\n                                            value={formik.values[\"email\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                            disabled\n                                        />\n                                        <TextField\n                                            label={t(\"password\")}\n                                            name=\"password\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password\"] && formik.errors[\"password\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"confirm_password\")}\n                                            name=\"password2\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password2\"] && formik.errors[\"password2\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password2\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <ReCAPTCHA sitekey={RECAPTCHA}\n                                                 onChange={onChange}\n                                                 theme={themeCtx.theme? \"dark\": \"light\"}\n                                                 className={classes.recaptcha}\n                                      />\n                                        <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                type=\"submit\"\n                                                disabled={formik.isSubmitting || recaptcha==null || !(formik.isValid && formik.dirty)}\n                                                className={classes.field}>\n                                                {t(\"change_password\")}\n                                            </Button>\n                                        </Box>\n                                    </form>\n                                </Paper>\n                            </Box>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Grid xs={2} item>\n                    <TranslateButton style={{float: 'right'}}/>\n            <ThemeButton style={{float: 'right'}}/>\n                </Grid>\n            </Grid></div>);\n\n}\n\nexport default ResetPage;","import React from 'react';\nimport Box from \"@material-ui/core/Box\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {PUBLIC_URL, RECAPTCHA} from \"../config\";\n\n\nexport default function XamfraLogo() {\n    const themeCtx = React.useContext(themeContext);\n\n\n    return <Box mx={2} style={{textAlign: \"left\"}}>\n    <img src={ `${PUBLIC_URL}/logo_xamfra_${themeCtx.label}.png`} alt=\"Logo Xamfr\"\n         style={{height: \"35px\"}}/>\n        </Box>\n}","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\n\nexport const preEnrolmentService = {\n    getCourses,\n    postPreEnrollment\n};\n\nfunction getCourses() {\n        return new Promise(function (resolve, reject) {\n\n            axios({\n                method: 'get',\n                url: `${BACKEND_URL}/pre-enrolment/v1/courses`,\n                headers: {\n                    ...{\n                        'Content-Type': 'application/json',\n                        'Cache-Control': 'no-cache'\n                    }, ...authHeader()  // todo are auth headers needed for gets?\n                }\n            }).then(function (response) {\n                    resolve(response.data);\n                }).catch(function (err) {\n                    reject(err);\n            });\n        });\n    }\n\n\n    function postPreEnrollment(data, recaptcha) {\n        return new Promise(function (resolve, reject) {\n\n            axios({\n                method: 'post',\n                url: `${BACKEND_URL}/pre-enrolment/v1/pre-enrolment`,\n                data: {\n                    body: data,\n                    recaptcha: recaptcha\n                },\n                headers: {\n                    ...{\n                        'Content-Type': 'application/json',\n                        'Cache-Control': 'no-cache'\n                    }, ...authHeader()\n                }\n            }).then(function (response) {\n                    resolve(response);\n                }).catch(function (err) {\n                    reject(err);\n            });\n        });\n    }\n","export const getNextDayOfWeek = (date, dayOfWeek) => {\n    // Code to check that date and dayOfWeek are valid left as an exercise ;)\n\n    var resultDate = new Date(date.getTime());\n\n    resultDate.setDate(date.getDate() + (7 + dayOfWeek - date.getDay()) % 7);\n\n    return resultDate;\n}\n\nexport const getLocalisedWeekday = (dayOfWeek) => {\n    let today = new Date();\n    let nextDayOfWeek = getNextDayOfWeek(today, dayOfWeek);\n    return nextDayOfWeek.toLocaleString(window.navigator.language, {weekday: 'short'});\n}\n\nexport const textSchedulesForCourse = (course) => {\n    if (!course[\"base_schedules\"]) return null;\n    return course[\"base_schedules\"].map(s => getLocalisedWeekday(s.day_week) + \", \" + s.start_time.slice(0, -3) + \" - \" + s.end_time.slice(0, -3)).join(\"; \");\n}\n\n","import React from 'react';\nimport { Divider } from '@material-ui/core';\nimport Box from \"@material-ui/core/Box\";\nimport XamfraLogo from './xamfra.logo.component';\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        backgroundColor: theme.palette.background.paper\n    }\n  }));\n  \n\nexport default function XamfraHeader(props) {\n    \n    const classes = useStyles();\n\n    return <Box className={classes.root}>\n        <Box p={2} style={{width: '100%'}}>\n            {props.children}\n       <XamfraLogo/>\n</Box> \n<Divider />\n        </Box>\n}","import React, {useEffect, useRef, useState} from 'react';\nimport * as yup from 'yup';\nimport {\n    BottomNavigation,\n    Card, CardActions,\n    Checkbox,\n    FormControlLabel, ListItemIcon, ListItemSecondaryAction,\n    MenuItem, MobileStepper,\n    Step,\n    StepLabel,\n    Stepper, Tooltip, withStyles\n} from \"@material-ui/core\";\nimport XamfraLogo from '../_components/xamfra.logo.component';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport {useTranslation} from \"react-i18next\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useSnackbar} from \"notistack\";\nimport i18next from \"i18next\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport ReCAPTCHA from \"react-google-recaptcha\"\nimport DirtyTextField from \"../_components/dirtytextfield.component\";\nimport Divider from \"@material-ui/core/Divider\";\nimport DirtyCountrySelect from \"../_components/contry-select.component\";\nimport {education_years} from \"../_data/education\";\nimport {emptyAttendee} from \"../_data/empty_objects\";\nimport {useNormik} from \"../_helpers/normik\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport {student_guardian_relations} from \"../_data/relations\";\nimport SearchBar from \"../_components/searchbar.component\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport {PUBLIC_URL, RECAPTCHA} from \"../config\";\nimport ThemeButton from \"../_components/theme_button.component\";\nimport Link from \"@material-ui/core/Link\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport {preEnrolmentService} from \"../_services/pre-enrolment.service\";\nimport {DNI_OR_NIE_REGEX, safe_email, safe_email_required} from \"../_yup/validators\";\nimport {KeyboardArrowLeft, KeyboardArrowRight} from \"@material-ui/icons\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport DoneIcon from '@material-ui/icons/Done';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {textSchedulesForCourse} from \"../utils/localized-weekdays\";\n\nimport XamfraHeader from '../_components/xamfra.header.component';\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: \"100%\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    cards: {\n        '& > *': {\n            margin: theme.spacing(3),\n        },\n    },\n    buttons: {\n        '& > *': {\n            margin: theme.spacing(1),\n        },\n    }, line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    card: {\n    minWidth: 200,\n        width: 'fit-content',\n        maxWidth: 500,\n        display: 'inline-block'\n  },\n    recaptcha: {\n        margin: theme.spacing(4)\n    },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n    list: {\n        minHeight: '150px',\n        overflow: 'auto'\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\n\n\nconst isUnderage = (birthDateString) => {\n    let today = new Date();\n    let birthDate = new Date(birthDateString);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    let m = today.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--;\n    return age < 18;\n}\nconst PreEnrolmentPage = (props) => {\n    const {t} = useTranslation();\n\n    const can_pay_80 = \"Puc pagar la quota trimestral de 80/estudiant\";\n\n    const classes = useStyles();\n\n\n    const [recaptcha, setRecaptcha] = React.useState(null);\n    function onChange(value) {\n      setRecaptcha(value);\n    }\n\n    const {enqueueSnackbar} = useSnackbar();\n    const [skipped, setSkipped] = React.useState(new Set());\n    const [availableCourses, setAvailableCourses] = React.useState([]);\n    const [filteredCourses, setFilteredCourses] = React.useState([]);\n    const [chosenCourses, setChosenCourses] = React.useState([]);\n    const [raw_economic_comments, setRawEconomicComments] = React.useState([]);\n   const isStepSkipped = (step) => {\n    return skipped.has(step);\n  };\n\n    const [activeStep, setActiveStep] = React.useState(0);\n    const steps = [t(\"data_protection\"), t(\"student_info\"), t(\"contact_person_1\"), t(\"contact_person_2\"), t(\"courses\"), t(\"payment\"), t(\"confirmation\")];\n\n    const handleSkip = () => {\n    if (!isStepOptional(activeStep)) {\n      // You probably want to guard against something like this,\n      // it should never occur unless someone's actively trying to break something.\n      throw new Error(\"You can't skip a step that isn't optional.\");\n    }\n\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    setSkipped((prevSkipped) => {\n      const newSkipped = new Set(prevSkipped.values());\n      newSkipped.add(activeStep);\n      return newSkipped;\n    });\n  };\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n\n      const handleReset = () => {\n        setActiveStep(0);\n      };\n\n      useOnMount(() => {\n          i18next.changeLanguage('cat').then();  // set catalan for all visiting families as default\n         preEnrolmentService.getCourses()\n             .then(...errorHandler({}))\n             .then(courses => {\n                 setAvailableCourses(courses);\n                 setFilteredCourses(courses);\n             })\n      });\n\n      const theme = useTheme();\n\n\n      const [searchTerm, setSearchTerm] = useState('');\n\n    const errorHandler = useErrorHandler();\n    const required = t(\"required\");\n    const formik = useNormik(false,{\n        initialValues: {...emptyAttendee,\n            __person1__name: '', __person2__name: '',\n__person1__surname1: '',\n            __person1__surname2: '',\n            __person1__email: '', __person1__phone: '', __person1__relation: '',\n            __person1__is_studying: '', __person1__is_working: '', __person1__career: '',\n            __person1__education_entity: '', __person1__education_year: '',\n            __person2__surname1: '',\n            __person2__surname2: '',\n            __person2__email: '', __person2__phone: '', __person2__relation: '',\n            __person2__is_studying: '', __person2__is_working: '', __person2__career: '',\n            __person2__education_entity: '', __person2__education_year: '',\n            image_agreement: false,\n            image_agreement_external: false\n\n\n        },\n        validationSchema: yup.object({  // todo translate\n            name: yup.string(required).required(required),\n            surname1: yup.string(required).required(required),\n            surname2: yup.string(required).required(required),\n            email: safe_email(t).when('birth_date', (other, schema) => ((other && !isUnderage(other))? schema.required(required): schema)),\n            phone: yup.string().when('birth_date', (other, schema) => ((other && !isUnderage(other))? schema.required(required): schema)),\n            address: yup.string(required).required(required),\n            city: yup.string(required).required(required),\n            zip: yup.number(required).required(required),\n            country_of_origin: yup.string(required).notOneOf(['empty']).test(  // one of the array\n                                  'countryNonEmpty',\n                                  required,\n                                  v =>  v !== undefined\n                                ),\n            gender: yup.string(required).required(required),\n            is_studying: yup.boolean(required).required(required),\n            is_working: yup.boolean(required).required(required),\n            career: yup.string(required).when('is_working', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            education_entity: yup.string(required).when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            education_year: yup.string(required).when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            birth_date: yup.date(required).required(required),\n            years_in_xamfra: yup.number(required).required(required),\n            __person1__name: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => {\n                                      return v !== undefined && v !== \"\" || isStepSkipped(2)\n                                  }\n                                ),\n            __person1__surname1: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>  v !== undefined && v !== \"\"|| isStepSkipped(2)\n                                ),\n            __person1__surname2: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" || isStepSkipped(2)\n                                ),\n            __person1__email: safe_email(t).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>v !== undefined && v !== \"\"||  isStepSkipped(2)\n                                ),\n            __person1__phone: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>v !== undefined && v !== \"\" || isStepSkipped(2)\n                                ),\n            __person1__relation: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\"|| isStepSkipped(2)\n                                ),\n            __person1__is_studying: yup.boolean(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" ||  isStepSkipped(2)\n                                ),\n            __person1__is_working: yup.boolean(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" ||  isStepSkipped(2)\n\n                                ),\n            __person1__career: yup.string(required).when('__person1__is_working', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            __person2__name: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__surname1: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__surname2: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>  v !== undefined && v !== \"\"|| isStepSkipped(3)\n                                ),\n            __person2__email: safe_email(t).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__phone: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>  v !== undefined && v !== \"\"|| isStepSkipped(3)\n                                ),\n            __person2__relation: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>v !== undefined && v !== \"\"|| isStepSkipped(3)\n                                ),\n            __person2__is_studying: yup.boolean(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>  v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__is_working: yup.boolean(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__career: yup.string(required).when('__person2__is_working', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            __person2__education_entity: yup.string(required).when('__person2__is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            image_agreement: yup.boolean(required),\n            image_agreement_external: yup.boolean(required)\n        }),\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n            setStatus();\n\n            let body = {};\n\n            body['image_agreement'] = values.image_agreement;\n            body['image_agreement_external'] = values.image_agreement_external;\n            body['name'] = values.name;\n            body['surname1'] = values.surname1;\n            body['surname2'] = values.surname2;\n            body['email'] = values.email;\n            body['address'] = values.address;\n            body['city'] = values.city;\n            body['zip'] = values.zip;\n            body['dni'] = values.dni;\n            body['phone'] = values.phone;\n            body['country_of_origin'] = values.country_of_origin;\n            body['gender'] = values.gender;\n            body['is_studying'] = values.is_studying;\n            body['is_working'] = values.is_working;\n            body['education_entity'] = values.education_entity;\n            body['education_year'] = values.education_year;\n            body['career'] = values.career;\n            body['birth_date'] = values.birth_date;\n            body['years_in_xamfra'] = values.years_in_xamfra;\n            body['guardians'] = [];\n            [2,3].map(idx => {\n                if (!isStepSkipped(idx)){\n                    let guardian = {};\n                    const prefix = `__person${idx-1}__`;\n                    guardian['name'] = values[prefix+\"name\"];\n                    guardian['surname1'] = values[prefix+\"surname1\"];\n                    guardian['surname2'] = values[prefix+\"surname2\"];\n                    guardian['email'] = values[prefix+\"email\"];\n                    guardian['phone'] = values[prefix+\"phone\"];\n                    guardian['is_studying'] = values[prefix+\"is_studying\"];\n                    guardian['is_working'] = values[prefix+\"is_working\"];\n                    guardian['education_entity'] = values[prefix+\"education_entity\"];\n                    guardian['career'] = values[prefix+\"career\"];\n                    guardian['relation'] = values[prefix+\"relation\"];\n\n                    body['guardians'].push(guardian);\n                }\n            })\n            body['payment_comments'] = raw_economic_comments.join('. ');\n            if (raw_economic_comments.includes(can_pay_80)){\n                body['price_term'] = 80;\n            } else {\n                body['price_term'] = null;\n            }\n            body['other_comments'] = values['other_comments'];\n            body['courses'] = chosenCourses.map(x => x.id);\n\n            setSubmitting(false);\n\n            preEnrolmentService.postPreEnrollment(body, recaptcha)\n                .then(...errorHandler({snackbarSuccess: true}))\n                .then(() => {\n                    setActiveStep(steps.length);\n                })\n        }\n    });\n\n useEffect(() => {\n          let labels = [];\n          if (!isUnderage(formik.values['birth_date']) || formik.values['is_working'] ){\n              labels.push(\"adult\");\n          }\n          if (formik.values['is_studying']){\n              labels.push(formik.values['education_year']);\n          }\n\n          setFilteredCourses(availableCourses.filter(x => labels.some(l => x['labels'].includes(l))));\n\n      }, [availableCourses, formik.values['education_year'], formik.values['birth_date']]);\n\n\n    const isStepOptional = (step) => {\n    return step === 3 || (step === 2  && formik.values['birth_date'] !== '' && !isUnderage(formik.values['birth_date']));\n  };\n    const fieldsToValidatePerStep = [  // to have coinciding indexes with steps\n        [],\n    ['birth_date', 'name', 'surname1', 'surname2', 'address', 'city', 'zip', 'gender', 'is_studying', 'is_working', 'education_entity', 'education_year', 'career', 'years_in_xamfra', 'country_of_origin', 'phone', 'email'],\n        ['__person1__name', '__person1__surname1', '__person1__surname2', '__person1__email', '__person1__phone', '__person1__phone', '__person1__relation', '__person1__is_studying', '__person1__education_entity', '__person1__education_year', '__person1__is_working', '__person1__career'],\n        ['__person2__name', '__person2__surname1', '__person2__surname2', '__person2__email', '__person2__phone', '__person2__phone', '__person2__relation', '__person2__is_studying', '__person2__education_entity', '__person2__education_year', '__person2__is_working', '__person2__career'],\n    [], [], ['image_agreement', 'image_agreement_external'], []];\n\n    const scrollToTop = () => {\n        window.scrollTo(0,0);\n    }\n\n    const handleNext = () => {\n        formik.setFieldTouched('');\n\n        let newSkipped = skipped;\n        if (isStepSkipped(activeStep)) {\n            newSkipped = new Set(newSkipped.values());\n            newSkipped.delete(activeStep);\n        }\n\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n        setSkipped(newSkipped);\n\n        scrollToTop();\n    };\n\n    const secondaryListItemTextForCourse = (course) => {\n        const schedules = textSchedulesForCourse(course);\n        const description = course['description'];\n        if (!description && !schedules) return null;\n        if (description && schedules) return description + \"  \" + schedules;\n        if (!description) return schedules;\n        if (!schedules) return description;\n    }\n\n\n    const themeCtx = React.useContext(themeContext);\n    const canNotGoNext = (activeStep === steps.length - 1)\n        || !fieldsToValidatePerStep[activeStep].every(f => (!formik.errors[f]))\n            || (activeStep === steps.length - 3 && chosenCourses.length === 0);\n\n    const courseToListItem = (course) =>\n        <Box><ListItem key={course[\"id\"]} button alignItems=\"flex-start\"\n                                  onClick={() => {\n                                        if (chosenCourses.includes(course)) {\n                                            setChosenCourses(chosenCourses.filter(x => x.id !== course.id));\n                                        } else {\n                                            setChosenCourses([...chosenCourses, course]);\n                                        }\n                                  }}>\n            <ListItemIcon>\n                <Checkbox\n                    edge=\"start\"\n                    disableRipple\n                    tabIndex={-1}\n                    checked={chosenCourses.includes(course)}\n                    onChange={ () =>  {}}\n                    inputProps={{ 'aria-label': 'primary checkbox' }}\n                  />\n            </ListItemIcon>\n\n\n                            <ListItemText id=\"description\"\n                                          primary={course['name']}\n                                          secondary={secondaryListItemTextForCourse(course)}/>\n\n                        </ListItem>\n                        <Divider/></Box>;\n\n\n\n    return (\n        <Box>\n        <XamfraHeader>\n            <TranslateButton/>\n            <ThemeButton/>\n        </XamfraHeader> \n                    <div>\n\n                   \n     <Box marginBottom={2}>\n            \n            </Box>\n        {activeStep === steps.length ? (\n          <div style={{textAlign:\"center\"}}>\n            <Box>\n                Prematrcula completada amb xit!<br/>\n                Prematrcula completada con xito!<br/>\n                Pre-enrolment successful!\n            </Box>\n              <Box m={4}>\n              <CheckCircleIcon fontSize=\"large\"\n                               style={{ color: theme.palette.neutral.status.success }}/></Box>\n          </div>\n        ) : (\n             <form onSubmit={formik.handleSubmit}>\n          <Box p={2}>\n              <div>\n                  {activeStep === 0 &&\n                  <div>\n                      <Typography>\n                          Podeu consultar el quadre horari del curs 24-25 <Link target=\"_blank\" href=\"https://xamfra.net/com-participar-hi/horaris/\">aqu</Link>.\n                      </Typography>\n                      <br/>\n                      <Typography variant={\"caption\"}>\nEnviar aquest formulari implica consentiment per fer s de les dades per tal de rebre informaci durant el perode de preinscripci i inici de curs.\n\nLa posterior matrcula presencial al centre implica tamb l's de les dades durant tot el curs 2024-2025.\n\nLa nostra poltica protecci de dades es basa en que:\n\n1) El Responsable del Tractament de les teves dades personals s de Xamfr, Centre de Msica i Escena del Raval (Fundaci l'ARC Msica)\n2) Les finalitats del tractament de les dades personals s la de gestionar la teva vinculaci amb Xamfr. La base de dades disposa de noms, telfons, adrea postal i adrea electrnica.\n3) Les teves dades no seran comunicades a tercers sense previ consentiment.\n4) Pots exercir els drets d'accs, rectificaci i oposici segons preveu a la normativa enviant un correu electrnic a: xamfra@xamfra.net\n            </Typography>\n\n                  </div>\n                  }\n\n\n\n\n\n                  {activeStep === 1 &&\n                  <div>\n                      <Typography variant=\"h4\">{t(\"student\")}</Typography>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                autocomplete=\"name given-name\"\n                                formik={formik}\n                                noDirty={true}\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name=\"surname1\"\n                                formik={formik}\n                                autocomplete=\"name additional-name\"\n                                noDirty={true}\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"surname2\"\n                                autocomplete=\"name family-name\"\n                                noDirty={true}\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n\n                                <DirtyTextField\n                                label={t(\"birthdate\")}\n                                type=\"date\"\n                                style={{flex: 1}}\n                                noDirty={true}\n                                formik={formik}\n                                name=\"birth_date\"\n                                autoComplete=\"bday\"\n                                InputLabelProps={{shrink: true}}/>\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"email\"\n                                noDirty={true}\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"address\")}\n                                formik={formik}\n                                noDirty={true}\n                                autocomplete=\"street-address\"\n                                style={{flex: 4}}\n                                name=\"address\"\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"city\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                noDirty={true}\n                                name=\"city\"\n                                autoComplete=\"address-level2\"\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"zip\")}\n                                formik={formik}\n                                type=\"number\"\n                                autoComplete=\"postal-code\"\n                                noDirty={true}\n                                style={{flex: 1}}\n                                name=\"zip\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"dni\")}\n                                style={{flex: 1}}\n                                noDirty={true}\n                                formik={formik}\n                                name=\"dni\"\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"phone\")}\n                                type=\"tel\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                noDirty={true}\n                                name=\"phone\"\n                            />\n                        </Box>\n\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyCountrySelect\n                                formik={formik}\n                                style={{flex: 1}}\n                                noDirty={true}\n                                name={\"country_of_origin\"}\n                                label={t(\"country_of_origin\")}\n                                autoComplete=\"country\"\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"gender\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                noDirty={true}\n                                name=\"gender\"\n                                select>\n                                <MenuItem value=\"m\">{t(\"m\")}</MenuItem>\n                                <MenuItem value=\"f\">{t(\"f\")}</MenuItem>\n                                <MenuItem value=\"nb\">{t(\"nb\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n                        <Box my={3}>\n                        <Divider />\n                        </Box>\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"is_studying\")}\n                                style={{flex: 1}}\n                                name=\"is_studying\"\n                                formik={formik}\n                                noDirty={true}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"education_entity\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"education_entity\"\n                                noDirty={true}\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"education_year\")}\n                                style={{flex: 2}}\n                                noDirty={true}\n                                name=\"education_year\"\n                                formik={formik}\n                                select>\n                                {education_years.map((level) => (\n                                    <MenuItem key={level} value={level}>{t(level)}</MenuItem>\n                                ))}\n                            </DirtyTextField>\n                        </Box>\n\n                      <Box my={3}>\n                        <Divider />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n\n\n                            <DirtyTextField\n                                label={t(\"is_working\")}\n                                style={{flex: 1}}\n                                name=\"is_working\"\n                                formik={formik}\n                                noDirty={true}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n\n                            <DirtyTextField\n                                label={t(\"career\")}\n                                style={{flex: 4}}\n                                formik={formik}\n                                noDirty={true}\n                                name=\"career\"\n                            />\n                        </Box>\n\n                         <Box my={3}>\n                        <Divider />\n                        </Box>\n\n\n\n                      <Box className={[classes.line, classes.composite]}>\n\n                            <DirtyTextField\n                              label={t(\"years_in_xamfra\")}\n                              type=\"number\"\n                              noDirty={true}\n                              formik={formik}\n                              style={{flex: 1}}\n                              name=\"years_in_xamfra\"/>\n                        </Box>\n\n\n\n                  </div>\n                  }\n\n\n                  {(activeStep === 2 || activeStep === 3) &&\n                  <div>\n                      <Typography variant=\"h4\">{t(\"contact\") + \" \" + (activeStep - 1)}</Typography>\n                      {isStepOptional(activeStep) && <Tooltip title={t(\"skip\")}>\n                          <Box my={2}><Button\n                              size=\"medium\"\n                              onClick={handleSkip}\n                              variant=\"contained\"\n                              aria-label={t(\"skip\")}\n                              startIcon={<SkipNextIcon/>}\n                              color=\"primary\"\n                              disabled={!isStepOptional(activeStep)}>\n                              {t(\"skip\")}\n                          </Button></Box></Tooltip>}\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep-1) + \"__name\"}\n                                formik={formik}\n                                noDirty={true}\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep-1) + \"__surname1\"}\n                                formik={formik}\n                                noDirty={true}\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name={\"__person\" + (activeStep-1) + \"__surname2\"}\n                                noDirty={true}\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name={\"__person\" + (activeStep-1) + \"__email\"}\n                                noDirty={true}\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"phone\")}\n                                type=\"tel\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                noDirty={true}\n                                name={\"__person\" + (activeStep-1) + \"__phone\"}\n                            />\n                        </Box>\n\n                      <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"relation\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep-1) + \"__relation\"}\n                                select\n                                noDirty={true}\n                                formik={formik}\n                            >\n                          {student_guardian_relations.map((r) => (\n                                   <MenuItem key={r} value={r}>{t(r)}</MenuItem>\n                                ))}\n                                ))}\n                        </DirtyTextField>\n                        </Box>\n\n\n            <Box my={3}>\n            <Divider />\n            </Box>\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"is_studying\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep - 1) + \"__is_studying\"}\n                                formik={formik}\n                                noDirty={true}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n\n                       <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"education_entity\")}\n                                style={{flex: 4}}\n                                formik={formik}\n                                name={\"__person\" + (activeStep-1) + \"__education_entity\"}\n                                noDirty={true}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n\n\n                            <DirtyTextField\n                                label={t(\"is_working\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep-1) + \"__is_working\"}\n                                formik={formik}\n                                noDirty={true}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"career\")}\n                                style={{flex: 4}}\n                                formik={formik}\n                                noDirty={true}\n                                name={\"__person\" + (activeStep-1) + \"__career\"}\n                            />\n                        </Box>\n\n\n\n\n                  </div>\n                  }\n\n    {activeStep === 4 &&\n    <div>\n\n        {/*<Box className={classes.cards}>\n            {chosenCourses && chosenCourses.map(course => (\n                <Card className={classes.card} raised={true}>\n                    <CardContent>\n\n                        <Typography variant=\"h5\" component=\"h2\">\n                            {course['name']}\n                        </Typography>\n                        <Typography className={classes.pos} color=\"textSecondary\">\n                            {course['description'] ? course['description'] : \"...\"}\n                        </Typography>\n                        {course['base_schedules'] && course['base_schedules'].map(s => (\n                            <Typography variant=\"body2\" component=\"p\">\n                                {getLocalisedWeekday(s.day_week)}, {s.start_time.slice(0, -3)} - {s.end_time.slice(0, -3)}\n                            </Typography>\n                        ))}\n\n\n                    </CardContent>\n                    <CardActions>\n                        <IconButton size=\"small\" onClick={() => {\n                            setChosenCourses(chosenCourses.filter(c => (c !== course)))\n                        }}><DeleteIcon/></IconButton>\n                    </CardActions>\n                </Card>\n            ))}\n        </Box>*/}\n\n\n                <SearchBar\n                    label={t(\"courses\")}\n                    value={searchTerm}\n                    onChange={(e) => {\n                        setSearchTerm(e.target.value);\n                    }}\n                    onSearch={() => {}}\n                />\n            <List className={classes.list}>\n                {filteredCourses && filteredCourses.filter(x =>\n                    (x.name.includes(searchTerm) || (x.description !== null && x.description.includes(searchTerm)))).map((course) => (\n                    <div key={course[\"id\"]}>\n                        {courseToListItem(course)}\n                    </div>\n                ))}\n            </List>\n             {filteredCourses.length === 0 &&\n                <Typography>{t(\"no_courses_found_add_edu\")}</Typography>\n             }\n    </div>}\n\n  {activeStep === 5 &&\n      <div>\n          <Box fontWeight={500} my={2}>\n              Xamfr s un centre que treballa perqu tots els infants i joves puguin fer msica, teatre i dansa. Les famlies aporten el que poden per ajudar a fer sostenible el centre. En cap cas, la quota cobreix el cost dels tallers que fan els nens i nenes. Marqueu, si us plau, una o vries opcions.\n              <br/><br/>\n              CAP INFANT O JOVE HA DE DEIXAR DE FER TEATRE, MSICA O DANSA A XAMFR PER MOTIUS ECONMICS.\n              <br/><br/>\n              A qui no pugui, l'ajudarem; i qui pugui ajudar: moltes grcies!\n          </Box>\n\n          <List className={classes.list}>\n                {\n              [can_pay_80,\n              \"Puc pagar una quota a acordar personalment\",\n              \"No puc pagar la quota trimestral\",\n              \"Puc aportar una segona quota per un altre nen/a (desgravaci fiscal)\",\n              \"Puc fer-me teamer (1 /mes)\",\n              \"Puc fer donatius puntuals (desgravaci fiscal)\",\n              \"Puc fer donatius regulars (desgravaci fiscal)\",\n              \"Puc ajudar en tasques puntuals\",\n              \"Puc ajudar a la Campanya RISUONA (donaci d'instruments)\",\n              \"Puc fer serveis professionals relacionats amb els meus estudis o professi\"].map(option => (\n                  <Box><ListItem key={option} alignItems=\"flex-start\">\n                      <ListItemText id=\"description\"\n                                          primary={option}/>\n                      <ListItemSecondaryAction>\n\n                      <Checkbox\n                    edge=\"start\"\n                    disableRipple\n                    tabIndex={-1}\n                    checked={raw_economic_comments.includes(option)}\n                    onClick={(event) => {\n                        if (!raw_economic_comments.includes(option)) {\n                             setRawEconomicComments([...raw_economic_comments, option]);\n                        } else {\n                            setRawEconomicComments( raw_economic_comments.filter((x) => x !== option));\n                        }\n                    }}\n                    inputProps={{ 'aria-label': 'primary checkbox' }}\n                  />\n\n                  </ListItemSecondaryAction>\n\n\n\n                        </ListItem>\n                        <Divider/></Box>\n\n              ))\n          }\n            </List>\n\n\n      </div>\n               }\n\n               {activeStep === 6 &&\n      <div>\n          <Box className={[classes.line, classes.composite]}>\n                             <DirtyTextField\n                                label={t(\"other_comments\")}\n                                style={{flex: 1}}\n                                multiline\n                                formik={formik}\n                                rowsMax={8}\n                                noDirty={true}\n                                name=\"other_comments\"\n                            />\n                        </Box>\n          <Box my={2}>\n          <FormControlLabel\n                        control={\n                            <Checkbox\n                                defaultValue={false}\n                                defaultChecked={false}\n                                checked={formik.values['image_agreement']}\n                                name={'image_agreement'}\n                                value={formik.values['image_agreement']}\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                            />\n                        }\n                        key={'image_agreement'}\n                        label={isUnderage(formik.values['birth_date'])?\n                        \"En cas de matricular-lo, autoritzo ls de la imatge de lestudiant, menor d'edat, per a que pugui aparixer a materials escrits o multimdia corresponents a activitats educatives organitzades per Xamfr.\"\n                        : \"En cas de matricular-me, autoritzo ls de la meva imatge per a que pugui aparixer a materials escrits o multimdia corresponents a activitats educatives organitzades per Xamfr.\" }\n                      />\n       \n</Box>\n<Box my={2}>\n          <FormControlLabel\n                        control={\n                            <Checkbox\n                                defaultValue={false}\n                                defaultChecked={false}\n                                checked={formik.values['image_agreement_external']}\n                                name={'image_agreement_external'}\n                                value={formik.values['image_agreement_external']}\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                            />\n                        }\n                        key={'image_agreement_external'}\n                        label={\"En cas de matricular-me, autoritzo ls de la meva imatge i/o la dels meus fills/es matriculats per a que puguin aparixer a materials escrits o multimdia corresponents a activitats organitzades per terceres persones autoritzades per LARC Msica i sobre la possibilitat de publicar imatges on apareguin clarament identificables els seus fills/es. Aquest material mai podr ser utilitzat amb finalitats lucratives.\" }\n                      />\n</Box>\n          <Box textAlign=\"center\">\n                      <ReCAPTCHA sitekey={RECAPTCHA}\n                                 onChange={onChange}\n                                 theme={themeCtx.theme? \"dark\": \"light\"}\n                                 className={classes.recaptcha}\n                                 style={{\n                                     display: \"inline-block\",\n                                     margin: \"0 auto\",\n  width: \"fit-content\"\n                                 }}\n                      />\n                <Box my={2}><Button\n                              size=\"medium\"\n                              variant=\"contained\"\n                              aria-label={t(\"finish\")}\n                              startIcon={<DoneIcon/>}\n                              color=\"primary\"\n                              type=\"submit\"\n                          disabled={formik.isSubmitting || recaptcha === null || !fieldsToValidatePerStep[activeStep].every(f => (!formik.errors[f]))}>\n                              {t(\"finish\")}\n                          </Button></Box>\n\n              </Box>\n      </div>\n               }\n\n              </div>\n\n\n              </Box>\n\n<Box py={5}/>\n<BottomNavigation\n  showLabels\n  style={{\n      position: 'fixed',\n    bottom: 0,\n      width: '100%'\n  }}\n>\n  <MobileStepper\n                          variant=\"dots\"\n                          steps={steps.length}\n                          position=\"static\"\n                          style={{\n                              width:\"100%\",\n                              margin: 0,\n                              backgroundColor: theme.palette.primary.light,\n                          }}\n                          color={theme.palette.primary.contrastText}\n                          activeStep={activeStep}\n                          nextButton={\n                              <Box>\n{activeStep !== steps.length -1 &&\n    <Box>\n                            <Tooltip title={t(\"next\")}><IconButton size=\"small\"\n                                    onClick={handleNext}\n                                    disabled={canNotGoNext}\n                            aria-label={t(\"next\")}>\n                                <NavigateNextIcon /></IconButton></Tooltip>\n\n                            <Tooltip title={t(\"skip\")}>\n                               <IconButton\n                                size=\"small\"\n                                onClick={handleSkip}\n                                aria-label={t(\"skip\")}\n\n                                disabled={!isStepOptional(activeStep)}>\n                              <SkipNextIcon/>\n                               </IconButton></Tooltip></Box>}\n\n                                  {activeStep === steps.length -1 && <Tooltip title={t(\"finish\")}>\n                                      <IconButton\n                                          size=\"small\"\n                                          onClick={() => {}}\n                                          aria-label={t(\"finish\")}\n                                          type=\"submit\"\n                                          disabled={formik.isSubmitting || recaptcha === null || !fieldsToValidatePerStep[activeStep].every(f => (!formik.errors[f]))}>\n                                          <DoneIcon/>\n                                      </IconButton>\n\n                                  </Tooltip>}\n                              </Box>\n                          }\n                          backButton={\n                              <Tooltip title={t(\"back\")}>\n                            <IconButton\n                                size=\"small\"\n                                onClick={handleBack}\n                                aria-label={t(\"back\")}\n                                disabled={activeStep === 0}>\n                              <NavigateBeforeIcon/>\n                            </IconButton></Tooltip>\n\n                          }\n                        />\n</BottomNavigation>\n\n             </form>\n          )}\n                    </div>\n\n\n\n        </Box>\n\n\n\n\n        );\n\n}\n\nexport default PreEnrolmentPage;\n","import Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport React from \"react\";\nimport {useTranslation} from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function HomeButton({...props}){\n    const {t} = useTranslation();\n    let history = useHistory();\n\n    return  <Tooltip title={t(\"home\")}\n                     style={{float: 'right'}} {...props}>\n                <IconButton\n                    color=\"inherit\"\n                    aria-label={t(\"home\")}\n                    onClick={() => history.replace(\"/home\")}>\n                    <HomeIcon/>\n                </IconButton>\n            </Tooltip>;\n}","import React, {useEffect, useRef, useState} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport {useTranslation} from \"react-i18next\";\nimport {textSchedulesForCourse} from \"../../utils/localized-weekdays\";\nimport Box from \"@material-ui/core/Box\";\nimport {userContext} from \"../../_context/user-context\";\n\nconst useStyles = makeStyles((theme) => ({\n  welcomeMessage: {\n    '-webkit-touch-callout': 'none',\n    '-webkit-user-select': 'none',\n    '-khtml-user-select': 'none',\n    '-moz-user-select': 'none',\n    '-ms-user-select': 'none',\n    'user-select': 'none'\n}\n}));\n\nexport default function WelcomeTitle({course}) {\n  const classes = useStyles();\n  const userCtx = React.useContext(userContext);\n  const {t} = useTranslation();\n\n  const hi = \"\";\n  const hiii = \"\";\n  const [welcomeEmoji, setWelcomeEmoji] = useState(hi);\n  const switchWelcomeEmoji = () => {\n      setWelcomeEmoji(welcomeEmoji == hi? hiii: hi);\n  }\n  return (\n    <Box p={4}\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\">\n          <Typography variant=\"h4\" className={classes.welcomeMessage}>\n              {t(\"hi\")} {userCtx.teacher === undefined? '': userCtx.teacher.name} \n          </Typography>\n          <Typography variant=\"h4\" className={classes.welcomeMessage} onClick={switchWelcomeEmoji} onMouseOver={() => setWelcomeEmoji(hiii)} onMouseOut={() => setWelcomeEmoji(hi)}>\n              {welcomeEmoji}\n          </Typography>\n      </Box>\n  );\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport {useTranslation} from \"react-i18next\";\nimport {textSchedulesForCourse} from \"../../utils/localized-weekdays\";\nimport { useHistory } from \"react-router-dom\";\nimport Skeleton from '@material-ui/lab/Skeleton';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  action: {\n    float: \"bottom\"\n  },\n  flexGrow: {\n    flexGrow: 1 \n  }\n}));\n\nexport default function CourseCard(props) {\n  const classes = useStyles();\n  let history = useHistory();\n  const { course = null} = props;\n  const loading = course === null;\n  const {t} = useTranslation();\n\n  const courseId = course === null? null: course[\"id\"];\n  const handleViewCourse = () => history.replace(`/home/courses?id=${courseId}`);\n  const handleTakeAttendance = () => history.replace(`/attendance?id=${courseId}`)\n  return (\n    <Card className={classes.root}>\n        <CardContent>\n        <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\n            {loading? <Skeleton/> : t(\"course\")}\n          </Typography>\n\n          <Typography variant=\"h5\" component=\"h2\">\n            {loading? <Skeleton/> : course[\"name\"]}\n          </Typography>\n\n          <Typography className={classes.pos} color=\"textSecondary\">\n            {loading? <Skeleton/> : textSchedulesForCourse(course)}\n          </Typography>\n          \n        </CardContent>\n        <div className={classes.flexGrow} />\n        <CardActions className={classes.action}>\n          {loading? <Skeleton variant=\"rect\" width={75} height={30} />:\n          <Button variant=\"outlined\" size=\"small\" onClick={handleViewCourse}>{t(\"view\")}</Button>}\n          {loading? <Skeleton variant=\"rect\" width={210} height={30} />:\n          <Button variant=\"outlined\" color=\"secondary\" size=\"small\" onClick={handleTakeAttendance}>{t(\"take attendance\")}</Button>}\n        </CardActions>\n      </Card>\n  );\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Chip from '@material-ui/core/Chip';\nimport {useTranslation} from \"react-i18next\";\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\n\nconst useStyles = makeStyles((theme) => ({\n    \n  }));\n  \n  export default function MoreButton(props) {\n    const classes = useStyles();\n    const {t} = useTranslation();\n  \n    return (\n        <Chip\n          label={t(\"load-more\")}\n          clickable\n          variant=\"outlined\"\n          icon={<MoreHorizIcon/>}\n          {...props}\n        />\n    );\n  }","import React, {useEffect, useRef, useState} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport {useTranslation} from \"react-i18next\";\nimport {textSchedulesForCourse} from \"../../utils/localized-weekdays\";\nimport Box from \"@material-ui/core/Box\";\nimport {userContext} from \"../../_context/user-context\";\n\nconst useStyles = makeStyles((theme) => ({\n  welcomeMessage: {\n    '-webkit-touch-callout': 'none',\n    '-webkit-user-select': 'none',\n    '-khtml-user-select': 'none',\n    '-moz-user-select': 'none',\n    '-ms-user-select': 'none',\n    'user-select': 'none'\n}\n}));\n\nexport default function NotATeacherTitle({course}) {\n  const classes = useStyles();\n  const {t} = useTranslation();\n\n  return (\n    <Box p={4}\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\">\n          <Typography variant=\"h4\" className={classes.welcomeMessage}>\n           {t(\"teachers-only-zone\")} \n          </Typography>\n      </Box>\n  );\n}","import React, {useEffect, useState} from 'react';\nimport * as yup from 'yup';\nimport XamfraHeader from '../_components/xamfra.header.component';\nimport Grid from '@material-ui/core/Grid';\nimport HomeButton from '../_components/home_button';\nimport {useTranslation} from \"react-i18next\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport WelcomeTitle from \"./components/WelcomeTitle\";\nimport Box from \"@material-ui/core/Box\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useSnackbar} from \"notistack\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNormik} from \"../_helpers/normik\";\nimport ThemeButton from \"../_components/theme_button.component\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport CourseCard from \"./components/CourseCard.js\";\nimport TeacherCoursesService from \"../_services/teachers_courses.service\";\nimport {userContext} from \"../_context/user-context\";\nimport MoreButton from \"./components/MoreButton\";\nimport NotATeacherTitle from './components/NotATeacherTitle';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n        \n    },\n    rootBase: {\n        display: 'flex',\n        flexDirection: 'column',\n        height: \"100vh\",\n    },\n    more: {\n        width: '100%',\n        textAlign: 'center'\n    }\n}));\n\nconst TeacherDashboardPage = (props) => {\n    const {t} = useTranslation();\n    const classes = useStyles();\n    const {enqueueSnackbar} = useSnackbar();\n    const theme = useTheme();\n\n\n    const errorHandler = useErrorHandler();\n    \n    const formik = useNormik(false,{\n        initialValues: {},\n        validationSchema: yup.object({}),\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n            setStatus();\n            setSubmitting(false);\n        }\n    });\n\n    const themeCtx = React.useContext(themeContext);\n\n    const [courses, setCourses] = useState([]);\n    const [maxPage, setMaxPage] = useState(null);\n    const [loadedUntilPage, setLoadedUntilPage] = useState(0);\n    const [attemptLoadedUntilPage, setAttemptLoadedUntilPage] = useState(1);\n    const [attemptingLoad, setAttemptingLoad] = useState(false);\n\n    const loading = attemptingLoad && loadedUntilPage == 0;\n\n    const incrementPage = (i=1) => {\n        if (maxPage === null) return;\n        if (loadedUntilPage >= maxPage) return;\n        setAttemptLoadedUntilPage(loadedUntilPage+1);\n    }\n    \n    const userCtx = React.useContext(userContext);\n    useEffect(() => {\n        if (userCtx.teacher === null || userCtx.teacher === undefined) return;\n        \n        const page = attemptLoadedUntilPage;\n        setAttemptingLoad(true);\n        TeacherCoursesService.getAll(null, page, null, null, userCtx.teacher.id).then(...errorHandler({})).then(newCourses => {\n            setCourses([...courses, ...newCourses[\"data\"]]);\n            setMaxPage(newCourses[\"_pagination\"][\"totalPages\"]);\n            setLoadedUntilPage(page);\n        }).finally(() => setAttemptingLoad(false));\n    }, [attemptLoadedUntilPage, userCtx.teacher]);\n\n    \n    return (\n        <Box className={classes.rootBase}>\n            <XamfraHeader>\n                <TranslateButton/>\n                <ThemeButton/>\n                <HomeButton/>\n            </XamfraHeader>\n\n            <Box p={4} className={classes.root}>\n            {\n            (userCtx.teacher === null || userCtx.teacher === undefined) && \n              <NotATeacherTitle/>\n            }\n\n            {\n            !(userCtx.teacher === null || userCtx.teacher === undefined) && \n            <Box>\n                <WelcomeTitle/>\n\n                    <Grid container spacing={3} justify=\"left\">\n                   \n                   {\n                       loading &&  [1,2,3,4,5,6,7,8,9, 10].map(_ => <Grid xs={12} sm={6} md={3} key={\"loading\"} item>\n                       <CourseCard course={null}/>\n                   </Grid> )\n                   }\n                    {courses.map(course =>  \n                    <Grid xs={12} sm={6} md={3} key={course.id} item>\n                <CourseCard course={course}/>\n            </Grid> \n                )}\n            \n            \n        </Grid>\n            <Box p={2} className={classes.more}>\n            {loadedUntilPage < maxPage && <MoreButton onClick={incrementPage} disabled={attemptingLoad}/>}\n            </Box>\n        </Box>\n            }\n            </Box>\n        </Box>\n        );\n}\n\nexport default TeacherDashboardPage;","import Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useTranslation} from \"react-i18next\";\nimport Typography from \"@material-ui/core/Typography\";\n\nexport default function NotFound({}){\n    const themeCtx = React.useContext(themeContext);\n    const {t} = useTranslation();\n\n    return  <Typography variant=\"h1\">Nope, not found... </Typography>;\n}","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('attendances'))();\n\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Checkbox, Box, ListItem, ListItemIcon, ListItemText, Tooltip} from \"@material-ui/core\";\nimport Divider from \"@material-ui/core/Divider\";\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { styled } from \"@material-ui/core/styles\";\nimport InsertCommentIcon from '@material-ui/icons/InsertComment';\nimport {STATUS_ATTENDANCE, STATUS_ABSENT, STATUS_ABSENT_JUSTIFIED} from './status';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    formControl: {\n        [theme.breakpoints.down('sm')]: {minWidth: '50%', maxWidth: '50%'},\n        [theme.breakpoints.up('sm')]: {minWidth: '25%', maxWidth: '25%'}\n    },\n    selectStatus: {\n        '&:before': {\n            borderColor: 'red',\n        },\n        '&:after': {\n            borderColor: 'red',\n        }\n    },\n    root: {\n        width: '100%'\n    }\n  }));\n\nexport default function AttendanceItem({student, attendance, setAttendance, handleOpenCommentBox}) {\n    \n    const classes = useStyles();\n    const labelId = `checkbox-list-label-${student[\"id\"]}`;\n    const { t } = useTranslation();\n\n    const status = attendance === null? null: attendance[\"status\"];\n    const setStatus = (newStatus) => setAttendance({...attendance, status: newStatus});\n    \n    const handleChange = (event) => {\n        setStatus(event.target.value);\n      };\n      const toggleStatus = () => {\n          if (status === STATUS_ATTENDANCE) return setStatus(STATUS_ABSENT);\n          setStatus(STATUS_ATTENDANCE);\n      }\n\n      const useOutlinedInputStyles = makeStyles(theme => ({\n        root: {\n          \"& $notchedOutline\": {\n            borderColor: status === STATUS_ATTENDANCE? theme.palette.neutral.status.success: status === STATUS_ABSENT? theme.palette.neutral.status.error: theme.palette.neutral.status.dirty  \n          },\n        },\n        focused: {},\n        notchedOutline: {}\n      }));\n      const outlinedInputClasses = useOutlinedInputStyles();\n\n    return (\n        <ListItem key={student['id']} role={undefined} dense button onClick={toggleStatus} className={classes.root}>\n            <FormControl variant=\"outlined\" className={classes.formControl}>\n        \n            <Select\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            value={status}\n            onChange={handleChange}\n            className={classes.selectStatus}\n            onClick={(e) => e.stopPropagation()}\n            input={\n                <OutlinedInput\n                  id=\"outlined-age-simple\"\n                  classes={outlinedInputClasses}\n                />}\n            >\n                <MenuItem value={STATUS_ATTENDANCE}>{t(\"attended\")}</MenuItem>\n                <MenuItem value={STATUS_ABSENT}>{t(\"absent\")}</MenuItem>\n                <MenuItem value={STATUS_ABSENT_JUSTIFIED}>{t(\"absent-justified\")}</MenuItem>\n                </Select>\n            </FormControl>\n            <Box px={2}>\n            <Tooltip title={t(\"add-comment\")}>\n                <IconButton color=\"secondary\" aria-label={t(\"add-comment\")} onClick={(e) => {\n                    e.stopPropagation();\n                    handleOpenCommentBox();\n                    }}>\n                    <InsertCommentIcon />\n                </IconButton>\n            </Tooltip>\n            </Box>\n            <ListItemText id={labelId} primary={student[\"full_name\"]} />\n        </ListItem>\n    );\n}","export const STATUS_ATTENDANCE = 0;\nexport const STATUS_ABSENT = 1;\nexport const STATUS_ABSENT_JUSTIFIED = 2;\n","import React from 'react';\nimport {useTranslation} from \"react-i18next\";\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {Button} from \"@material-ui/core\";\n\nexport default function CommentDialog({commentBox, setCommentBoxValue, handleCloseCommentBox, commentBoxValue, handleCloseCancelCommentBox}){\n    const { t } = useTranslation();\n\n    return <Dialog open={commentBox} onClose={handleCloseCommentBox} aria-labelledby=\"form-dialog-title\">\n    <DialogTitle id=\"form-dialog-title\">{t(\"comment\")}</DialogTitle>\n    <DialogContent>\n      <TextField\n        value={commentBoxValue}\n        onChange={(event) => {\n          setCommentBoxValue(event.target.value);\n        }}\n        autoFocus\n        margin=\"dense\"\n        multiline\n        rows={4}\n        variant=\"outlined\"\n        fullWidth\n      />\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={handleCloseCancelCommentBox} color=\"primary\">\n        {t(\"cancel\")}\n      </Button>\n      <Button onClick={handleCloseCommentBox} color=\"primary\">\n        {t(\"save\")}\n      </Button>\n    </DialogActions>\n</Dialog>;\n}","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport Fab from \"@material-ui/core/Fab\";\nimport {Checkbox, ListItem, ListItemIcon, Button, ListItemText, Tooltip} from \"@material-ui/core\";\nimport CourseStudentsDataService from \"../../_services/course_students.service\";\nimport {attendanceService} from \"../../_services/course_attendance.service\";\nimport AttendanceService from \"../../_services/attendance.service\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport dataService from \"../../_services/courses.service\";\nimport * as yup from \"yup\";\nimport {useFormik} from \"formik\";\nimport {useErrorHandler} from \"../../_helpers/handle-response\";\nimport EmailTo from \"../../_components/emailTo.component\";\nimport Box from \"@material-ui/core/Box\";\nimport SaveIcon from '@material-ui/icons/Save';\nimport DirtyTextField from \"../../_components/dirtytextfield.component\";\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from \"@material-ui/core/List\";\nimport {STATUS_ATTENDANCE, STATUS_ABSENT, STATUS_ABSENT_JUSTIFIED} from './status';\nimport AttendanceItem from './attendance.component.item';\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\nimport EventAvailableIcon from '@material-ui/icons/EventAvailable';\nimport EventBusyIcon from '@material-ui/icons/EventBusy';\nimport CommentDialog from './commentDialog';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%',\n    [theme.breakpoints.down('sm')]: {paddingBottom: '100px'}\n  },\n    textBox: {\n      width: \"100%\",\n        border: \"red\"\n    },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    },\n    chip: {\n      margin: theme.spacing(0.5)\n    },\n    chips: {\n      marginBottom: theme.spacing(1)\n    },\n    in: {\n      marginBottom: theme.spacing(1)\n    },fabs: {\n    position: 'fixed',\n    bottom: theme.spacing(4),\n    right: theme.spacing(4),\n  },fab: {\n    marginLeft: theme.spacing(2),\n  }\n}));\n\nfunction areArraysEqualSets(a1, a2) {\n  const superSet = {};\n  for (const i of a1) {\n    const e = i + typeof i;\n    superSet[e] = 1;\n  }\n\n  for (const i of a2) {\n    const e = i + typeof i;\n    if (!superSet[e]) {\n      return false;\n    }\n    superSet[e] = 2;\n  }\n\n  for (let e in superSet) {\n    if (superSet[e] === 1) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n\nexport default function Attendance({...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const id = new URLSearchParams(window.location.search).get('id');\n\n  const [initialAttendances, setInitialAttendances] = useState(null);\n  const [attendances, setAttendances] = useState(null);\n  const resetAttendances = () => setAttendances(createEmptyAttendances(students, initialAttendances, date));\n\n\n  const getAddedStudentIds = () => {\n    const studentsInInitial = Object.keys(initialAttendances);\n    return Object.keys(attendances).filter(studentId => !studentsInInitial.includes(studentId) && \n    (attendances[studentId]['status'] !== null || attendances[studentId]['comment'] !== null))\n  }\n\n  const hasNewAttendances = () => {\n    const addedStudentIds = getAddedStudentIds();\n    if (addedStudentIds.length === 0) return false;\n    return true;\n  }\n\n  const getNewAttendances = () => {\n    const addedStudentIds = getAddedStudentIds();\n    if (addedStudentIds.length === 0) return null;\n\n    const filtered = Object.keys(attendances)\n      .filter(key => addedStudentIds.includes(key))\n      .reduce((obj, key) => {\n        obj[key] = attendances[key];\n        return obj;\n      }, {});\n    return filtered;\n  }\n\n  const hasChanges = (initial, updated) => {\n    console.log(\"iu\", initial, updated);\n    if (initial['student_id'] !== updated['student_id']) throw new Error(`student id has changed from ${initial['student_id']} to ${updated['student_id']}`);\n    if (initial['course_id'] !== updated['course_id']) throw new Error(`course id has changed from ${initial['course_id']} to ${updated['course_id']}`);\n    if (initial['date'] !== updated['date']) return true;\n    if (initial['comment'] !== updated['comment']) return true;\n    if (initial['status'] !== updated['status']) return true;\n    return false;\n  }\n\n  const hasChangesGlobal = () => {\n    if (initialAttendances === null) return false;\n    if (attendances === null) return false;\n    if (hasNewAttendances()) return true;\n    if (hasUpdatedAttendances()) return true;\n    return false;\n  }\n\n  const [dirty, setDirty] = useState(false);\n  useEffect(() => {\n    setDirty(hasChangesGlobal());\n  }, [initialAttendances, attendances]);\n\n  const hasUpdatedAttendances = () => Object.keys(initialAttendances).some(key => \n    hasChanges(initialAttendances[key], attendances[key]));\n\n  const getUpdatedAttendances = () => {\n    const filtered = Object.keys(initialAttendances)\n      .reduce((obj, key) => {\n        if (hasChanges(initialAttendances[key], attendances[key])) obj[key] = attendances[key];\n        return obj;\n      }, {});\n    return filtered;\n  }\n\n  const [students, setStudents] = useState(null);\n  const [courseId, setCourseId] = useState(id);\n  const [allDone, setAllDone] = useState(true);\n  \n\n  useEffect(() => {\n    if (attendances === null) return;\n    const allDone = !Object.keys(attendances).some(studentId => attendances[studentId]['status'] !== STATUS_ATTENDANCE);\n    setAllDone(allDone);\n  }, [attendances]);\n\n    const createEmptyAttendances = (students, attendances, date) => {\n      if (attendances === null) return;\n      if (students === null) return;\n      \n      const newAttendances = {...attendances};\n\n      students.forEach(student => {\n        const id = student['id'];\n        if (attendances[id] === undefined) {\n          newAttendances[id] = {\n            status: null,\n            comment: null,\n            course_id: courseId,\n            student_id: id,\n            date: date\n          };\n        } \n      });\n      return newAttendances;\n    }\n\n    const loadAttendances = () => {\n      if (courseId === null) return;\n      if (formik.values[\"start\"] === '') return;\n      if (students === null) return;\n      \n      AttendanceService \n        .getAll(null,  \"*\", null, {\n            course_id: courseId,\n            date: formik.values[\"start\"]\n          }\n        )\n        .then(...errorHandler({}))\n        .then(function (res) {\n          const newAttendances = res[\"data\"].reduce((a,x) => ({...a, [x['student_id']]: x}), {});\n          setInitialAttendances(newAttendances);\n          setAttendances(createEmptyAttendances(students, newAttendances, date));\n        });\n    }\n\n    useEffect(() => {\n        if (courseId === null) return;\n        CourseStudentsDataService\n            .getAll(null, '*', [\"full_name\", \"id\"], {enrolment_status: \"enrolled\"}, courseId)\n            .then(...errorHandler({}))\n            .then(function (res) {\n                setStudents(res[\"data\"]);\n            });\n    }, [courseId]);\n\n    \n  const errorHandler = useErrorHandler();\n  const today = new Date().toISOString().split(\"T\")[0];\n\nconst formik = useFormik({\n      initialValues: {start: today, course_id: id},\n      validationSchema: yup.object({}),\n      enableReinitialize: true,\n      onSubmit: (values, {setStatus, setSubmitting}) => {\n          setSubmitting(true);\n      }\n  });\n  const date = formik.values['start'];\n\n  useEffect(loadAttendances, [formik.values[\"start\"], courseId, students]);\n\n  const markAll = (targetStatus) => {\n    const newAttendances = {...attendances};\n    Object.keys(newAttendances).map(function(studentId, index) {\n      newAttendances[studentId]['status'] = targetStatus;\n    });\n    setAttendances(newAttendances);\n  }\n\n  const setAttendance = (studentId, attendance) => {\n    const newAttendances = {...attendances};\n    newAttendances[studentId] = attendance;\n    setAttendances(newAttendances);\n  }\n\n  const [commentBox, setCommentBox] = useState(false);\n  const handleCloseCancelCommentBox = () => {\n    setCommentBox(false);\n  }\n  const handleCloseCommentBox = () => {\n    handleCloseCancelCommentBox();\n    setAttendance(commentBoxId, {...attendances[commentBoxId], comment: commentBoxValue});\n  }\n  const handleOpenCommentBox = (studentId) => {\n    setCommentBoxValue(attendances[studentId]['comment']);\n    setCommentBox(true);\n    setCommentBoxId(studentId);\n  }\n  const [commentBoxValue, setCommentBoxValue] = useState(null);\n  const [commentBoxId, setCommentBoxId] = useState(null);\n\n  \n\n  return (\n      <div>\n        <CommentDialog \n          commentBox={commentBox}\n          handleCloseCommentBox={handleCloseCommentBox}\n          commentBoxValue={commentBoxValue}\n          handleCloseCancelCommentBox={handleCloseCancelCommentBox}\n          setCommentBoxValue={setCommentBoxValue}\n          />\n         \n          {false && <EmailTo\n            formik={formik}\n            style={{width: \"100%\"}}\n            options={[]}\n            addTo={x => {setCourseId(x.id)}}\n            name={\"course_id\"}\n            label={t(\"courses\")}\n        />}\n        <Box p={2}>\n          <h1>{t(\"attendance\")}</h1>\n          <Box className={[classes.line, classes.composite]}>\n            \n              <DirtyTextField\n                  label={t(\"date\")}\n                  type=\"date\"\n                  style={{flex: 1}}\n                  noDirty={true}\n                  name=\"start\"\n                  formik={formik}\n                  InputLabelProps={{shrink: true}}/>\n          </Box>\n        </Box>\n        \n          {students && <List className={classes.root}>\n            \n      {attendances && students && students.map((student) => <AttendanceItem\n        student={student}\n        setAttendance={(x) => setAttendance(student['id'], x)}\n        handleOpenCommentBox={() => handleOpenCommentBox(student['id'])}\n        attendance={attendances[student['id']] ?? null} \n      />)}\n    </List>}\n          <div className={classes.fabs}>\n          <Tooltip title={t(\"mark-all\")}>\n                <Fab className={classes.fab} color=\"secondary\" onClick={() => {\n                    markAll(allDone? STATUS_ABSENT: STATUS_ATTENDANCE);\n                  }} disabled={formik.isSubmitting}>\n                    {allDone? <EventBusyIcon/>: <EventAvailableIcon/>}\n                </Fab>\n            </Tooltip>\n              <Tooltip title={t(\"reset\")}>\n                <Fab className={classes.fab} color=\"secondary\" onClick={resetAttendances} disabled={formik.isSubmitting || !dirty}>\n                    <CloseIcon/>\n                </Fab>\n            </Tooltip>\n           <Tooltip title={t(\"save\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={() => {\n                  let promises = [];\n\n                  const newAttendances = getNewAttendances();\n                  if (newAttendances !== null) {\n                    Object.keys(newAttendances).forEach(studentId => {\n                      const attendance = newAttendances[studentId];\n                      promises.push(AttendanceService.post(attendance))\n                    })\n                  }\n                  \n\n                  const updatedAttendances = getUpdatedAttendances();\n                  if (updatedAttendances !== null) {\n                    Object.keys(updatedAttendances).forEach(studentId => {\n                      const attendance = updatedAttendances[studentId];\n                      const initialAttendance = initialAttendances[studentId];\n                      promises.push(AttendanceService\n                        .patch({\n                          id:initialAttendance['id'], \n                          body:attendance, \n                          initial_values:initialAttendance\n                        }));\n                    })\n                  }\n\n                  Promise.all(promises)\n                  .then(...errorHandler({}))\n                  .then(function (res) {\n                    loadAttendances();\n                  })\n                }} disabled={formik.isSubmitting || !dirty}>\n                    <SaveIcon/>\n                </Fab>\n            </Tooltip>\n          </div>\n\n      </div>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport XamfraHeader from '../_components/xamfra.header.component';\nimport HomeButton from '../_components/home_button';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport ThemeButton from \"../_components/theme_button.component\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport Attendance from \"./components/attendance.component\";\nimport TeacherDashboardButton from '../_components/teacher_dashboard_button';\n\nconst useStyles = makeStyles((theme) => ({\n    list: {\n        flexGrow: 4\n    },\n    listCard: {\n        height: '100%'\n    },\n    header: {\n    },\n    rootBase: {\n        display: 'flex',\n        flexDirection: 'column',\n        height: \"100vh\",\n        minHeight: 0,\n        alignItems: 'stretch'\n    },\n    more: {\n        width: '100%',\n        textAlign: 'center'\n    }\n}));\n\nconst AttendancePage = (props) => {\n    const classes = useStyles();\n\n    return (\n        <Box className={classes.rootBase}>\n            <XamfraHeader>\n            <HomeButton/>\n                <TranslateButton/>\n                <ThemeButton/>\n                <TeacherDashboardButton/>\n            </XamfraHeader>\n            <Box p={2}>\n                <Attendance/>\n            </Box>\n        </Box>\n        );\n}\n\nexport default AttendancePage;","import React, {useState} from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {createMuiTheme} from '@material-ui/core/styles';\nimport {ThemeProvider} from '@material-ui/styles';\nimport {darkTheme, lightTheme} from '../theme';\nimport {SnackbarProvider} from 'notistack';\nimport {confirmContext} from '../_context/confirm-context';\nimport PrivateRoute from '../_components/PrivateRoute';\nimport HomePage from '../HomePage/HomePage';\nimport LoginPage from '../LoginPage/LoginPage';\nimport {BrowserRouter, Route, Router, Switch} from 'react-router-dom';\nimport {userContext} from '../_context/user-context';\nimport {themeContext} from '../_context/theme-context';\nimport SignupPage from \"../SignupPage/SignupPage\";\nimport ResetPage from \"../ResetPage/ResetPage\";\nimport PreEnrolmentPage from \"../PreEnrolmentPage/PreEnrolmentPage\";\nimport TeacherDashboardPage from \"../TeacherDashboardPage/TeacherDashboardPage\";\nimport NotFound from \"../_components/not_found\";\nimport AttendancePage from '../AttendancePage/AttendancePage';\nimport {useTranslation} from \"react-i18next\";\nimport {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle\n} from \"@material-ui/core\";\nimport Button from \"@material-ui/core/Button\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\n\nfunction App() {\n    const [theme, setTheme] = useState(localStorage.getItem(\"darkTheme\") === \"true\");\n    const appliedTheme = createMuiTheme(theme ? darkTheme : lightTheme);\n\n\n    const [user, setUser] = useState({logged: false, ping: true});\n    const [needs, _setNeeds] = useState([]);\n    const setNeeds = (needs) => {\n        if (!Array.isArray(needs)) return _setNeeds([]);\n        return _setNeeds(needs);\n    }\n    const [teacher, setTeacher] = useState(null);\n    const routerRef = React.createRef();\n\n    const [confirmDialog, setConfirmDialog] = React.useState({\n        open: false,\n        title: null,\n        subtitle: null,\n        success: () => {},\n        cancel: () => {},\n        args: []\n    });\n    const confirm = (title, subtitle, successCallable, cancelCallable=null, args=[]) => {\n        setConfirmDialog(\n            {\n              open: true,\n              title: title,\n              subtitle: subtitle,\n              success: successCallable,\n              cancel: cancelCallable === null? () => {}: cancelCallable,\n                args: args\n            }\n        );\n    }\n    const handleCloseConfirm = () => {\n        setConfirmDialog({...confirmDialog, open: false});\n    }\n    const { t } = useTranslation();\n\n\n    return (\n      <ThemeProvider theme={appliedTheme}>\n        <CssBaseline />\n        <SnackbarProvider maxSnack={3}>\n            <userContext.Provider value={{\n                user: user, \n                setUser: setUser, \n                \n                needs: needs, \n                setNeeds: setNeeds,\n                \n                teacher: teacher,\n                setTeacher: setTeacher}}>\n                <themeContext.Provider value={{theme: theme, switchTheme: () => {\n                    localStorage.setItem(\"darkTheme\", (!theme).toString());\n                    setTheme(!theme);\n                }, label: theme? \"dark\": \"light\"}}>\n                    <confirmContext.Provider value={{confirm: confirm}}>\n                        <BrowserRouter  ref={routerRef} basename=\"/app\">\n                            <Switch>\n                            <PrivateRoute path={'/home'} baseRouter={routerRef} component={HomePage}/>\n                            <Route path={'/login'} component={LoginPage}/>\n                            <Route path={'/signup'} component={SignupPage}/>\n                            <Route path={'/password-reset'} component={ResetPage}/>\n                            <Route path={'/prematricula'} component={PreEnrolmentPage}/>\n                            <PrivateRoute path={'/teacher-dashboard'} component={TeacherDashboardPage}/>\n                            <PrivateRoute path={'/attendance'} component={AttendancePage}/>\n                            <Route component={NotFound}/>\n                            </Switch>\n                        </BrowserRouter>\n                        <Dialog\n                            open={confirmDialog.open}\n                            onClose={handleCloseConfirm}\n                            aria-labelledby=\"responsive-dialog-title\"\n                        >\n                            {confirmDialog.title &&\n                            <DialogTitle id=\"responsive-dialog-title\">\n                                {t(confirmDialog.title)}\n                            </DialogTitle>\n                            }\n                            {confirmDialog.subtitle && <DialogContent>\n                                <DialogContentText>\n                                    {t(confirmDialog.subtitle)}\n                                </DialogContentText>\n                            </DialogContent>}\n                            <DialogActions>\n                            <Button autoFocus onClick={() => {\n                                confirmDialog.cancel(...confirmDialog.args);\n                                handleCloseConfirm();\n                            }} color=\"primary\">\n                                {t(\"cancel\")}\n                            </Button>\n                            <Button onClick={() => {\n                                confirmDialog.success(...confirmDialog.args);\n                                handleCloseConfirm();\n                            }} color=\"primary\" autoFocus>\n                                {t(\"continue\")}\n                            </Button>\n                            </DialogActions>\n                        </Dialog>\n                    </confirmContext.Provider>\n                </themeContext.Provider>\n            </userContext.Provider>\n        </SnackbarProvider>\n      </ThemeProvider>\n    );\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App/App';\nimport reportWebVitals from './reportWebVitals';\nimport {Helmet} from 'react-helmet';\nimport \"./i18nextConf\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <Helmet>\n          <title>centrfuga4</title>\n                <base href={`${process.env.PUBLIC_URL}/`}/>\n          <link nonce=\"{{csp_nonce()}}\" rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\" />\n          <link nonce=\"{{csp_nonce()}}\" rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />\n          <meta\n              name=\"viewport\"\n              content=\"minimum-scale=1, initial-scale=1, width=device-width\"/>\n      </Helmet>\n      <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}