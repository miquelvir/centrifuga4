{"version":3,"sources":["theme.js","_context/user-context.js","_components/PrivateRoute.js","_helpers/auth-header.js","config.js","_services/service-factory.js","_services/students.service.js","_skeletons/iconButton.js","_components/dirtytextfield.component.js","_data/countries.js","_components/contry-select.component.js","_helpers/handle-response.js","_helpers/normik.js","_data/education.js","_data/needs.js","_components/formik_discard_button.js","_helpers/needs.js","_components/formik_save_button.js","_components/students.student.person.component.js","_services/guardians.service.js","_services/payments.service.js","_data/payment_methods.js","_data/empty_objects.js","_context/loading-context.js","_components/students.student.attendee.component.js","_services/emailsGrants.service.js","_services/emailsEnrollment.service.js","_services/student_guardians.service.js","_data/relations.js","_components/students.student.guardian.component.js","_data/password_regex.js","_yup/validators.js","_components/students.student.payments.payment.component.js","_services/emailsReceipts.service.js","_components/students.student.payments.component.js","_services/student_courses.service.js","_services/courses.service.js","_components/searchbar.component.js","_components/students.student.courses.component.js","_services/schedules.service.js","_components/scheduler.component.js","_components/students.student.schedule.component.js","_components/students.student.component.js","_context/theme-context.js","_components/ExportSearchChip.component.js","_components/items_list.component.js","_components/students.component.js","_services/userInvites.service.js","_services/users.service.js","_components/users.user.userperson.component.js","_services/user_needs.service.js","_components/dirty_checkbox.js","_components/needs_selection.component.js","_helpers/set_operations.js","_components/users.user.permissions.component.js","_components/users.user.component.js","_components/users.component.js","_components/payments.component.js","_services/rooms.service.js","_components/rooms.room.schedule.component.js","_components/rooms.room.details.component.js","_components/rooms.room.component.js","_components/rooms.component.js","_services/teachers.service.js","_services/teachers_courses.service.js","_components/teachers.teacher.details.component.js","_components/teachers.teacher.schedule.component.js","_components/teachers.teacher.component.js","_components/teachers.component.js","_services/course_students.service.js","_services/course_teachers.service.js","_components/courses.course.details.component.js","_data/price_term.js","_services/course_labels.service.js","_components/labels_selection.component.js","_components/courses.course.labels.component.js","_components/courses.course.schedule.component.js","_components/courses.course.students.component.js","_components/courses.course.teachers.component.js","_components/courses.course.component.js","_components/courses.component.js","HomePage/routes.js","_services/god.service.js","_services/auth.service.js","_translations/utils.js","_components/translate_button.component.js","_components/theme_button.component.js","_components/toolbar.home.component.js","HomePage/HomePage.js","_services/password-reset.service.js","_helpers/on-mount.js","LoginPage/LoginPage.js","_services/signup.service.js","SignupPage/SignupPage.js","ResetPage/ResetPage.js","_services/pre-enrolment.service.js","PreEnrolmentPage/PreEnrolmentPage.js","_components/not_found.js","App/App.js","reportWebVitals.js","i18nextConf.js","index.js"],"names":["lightTheme","createMuiTheme","palette","type","primary","main","light","dark","contrastText","secondary","neutral","emphasisText","high","medium","low","status","dirty","darkTheme","userContext","React","createContext","user","setUser","needs","setNeeds","PrivateRoute","Component","component","rest","userCtx","useContext","render","props","to","pathname","state","from","location","authHeader","Cookies","get","API_VERSION","process","BACKEND_URL","RECAPTCHA","PUBLIC_URL","CHECK_NEEDS","REACT_CHECK_NEEDS","axios","require","serviceFactory","resource","subresource","likeSearchText","page","include","filters","Promise","resolve","reject","myFilters","JSON","stringify","name","value","Object","keys","forEach","key","method","url","params","headers","then","response","data","catch","err","id","ids","all","map","getOne","body","initial_values","entries","subresourcId","res","subresourceid","subresourceId","delete","searchtermfield","searchterm","responseType","filename","split","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","appendChild","click","remove","IconButtonSkeleton","Skeleton","variant","IconButton","useStyles","makeStyles","theme","createStyles","root","color","borderBottomColor","DirtyTextField","formik","noDirty","values","initialValues","classes","formikProps","undefined","onChange","handleChange","onBlur","handleBlur","error","errors","helperText","touched","TextField","className","InputLabelProps","shrink","countries","code","label","phone","suggested","textField","borderColor","option","fontSize","marginRight","DirtyCountrySelect","getInitialOption","find","x","useState","_setOption","useEffect","inputValue","setInputValue","useTranslation","t","Autocomplete","style","width","options","autoHighlight","getOptionLabel","getOptionSelected","o","event","newValue","newOption","setFieldValue","setOption","onInputChange","newInputValue","renderOption","Fragment","isoCode","String","fromCodePoint","toUpperCase","replace","char","charCodeAt","renderInput","inputProps","autoComplete","useErrorHandler","useSnackbar","enqueueSnackbar","closeSnackbar","successHandlerFactory","snackbarSuccess","successHandler","failureHandler401","logged","ping","failureHandler403","failureHandler","handle401","handle403","handle400","errorOut","reportUnexpected","handler","autoHideDuration","action","src","alt","height","Button","onClick","navigator","clipboard","writeText","platform","userAgent","appVersion","vendor","r","alert","failureHandlerUnexpected","request","failureHandlerFactory","useNormik","onlyChangedValuesOnSubmit","allowArrays","originalInitialValues","nullSafeInitialValues","oldOnSubmit","onSubmit","nullSafeOnSubmit","actions","normalizedValues","normalizedValue","Array","isArray","useFormik","education_years","allNeeds","description","DiscardButton","handleReset","disabled","isSubmitting","Tooltip","title","aria-label","NEEDS","patch","post","send_email","invite_users","students","courses","guardians","payments","rooms","schedules","teachers","users","paymentReceipts","useNeeds","every","need","includes","SaveButton","hasNeeds","line","marginTop","spacing","composite","display","flexDirection","flex","flexWrap","gap","actionIcon","float","Person","elements","currentPerson","dataService","patchService","newPerson","updateCurrentPerson","updateCurrentStudent","additionalFields","additionalValidation","onUpdate","studentId","loading","errorHandler","validationSchema","yup","email","required","is_studying","is_working","career","when","is","education_entity","education_year","enableReinitialize","changedValues","setStatus","setSubmitting","new_id","finally","length","patched_body","resetForm","Box","clear","idx","py","handleSubmit","my","Divider","select","MenuItem","level","idx2","cloneElement","payment_methods","surname1","surname2","address","city","zip","dni","gender","country_of_origin","emptyGuardian","relation","emptyAttendee","price_term","payment_comments","birth_date","other_comments","image_agreement","enrolment_status","default_payment_method","loadingContext","startLoading","stopLoading","button","margin","Attendee","children","setNewStudent","addStudentId","index","newStudent","currentStudent","deleteStudent","addNewGuardian","other","openConfirmDeleteDialog","setOpenConfirmDeleteDialog","loadingCtx","sendGrantLetter","sendEnrollmentAgreement","role","hidden","aria-labelledby","Dialog","open","onClose","e","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","StudentsDataService","PaymentsDataService","deleteMany","GuardiansDataService","deleteFullStudent","autoFocus","p","px","changedBody","InputProps","endAdornment","InputAdornment","position","multiline","rowsMax","s","startIcon","downloadSubresource","student_guardian_relations","Guardian","guardianId","deleteGuardianId","addGuardianId","deleteNewGuardian","newGuardian","guardian","setGuardian","StudentGuardianDataService","postWithId","longer_8","shorter_64","has_lowercase","has_uppercase","has_digit","has_special","no_plus","safe_password","matches","safe_password_repetition","oneOf","safe_username_email","safe_username","safe_email","one_of","test","toString","v","maxWidth","backgroundColor","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","PaymentCard","payment","updatePayment","deletePayment","newPayment","addPaymentId","student_id","expanded","setExpanded","quantity","date","Card","CardHeader","Avatar","subheader","CardActions","disableSpacing","clsx","aria-expanded","Collapse","in","timeout","unmountOnExit","CardContent","getDefaultValues","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","newLine","Payments","paymentIds","deletePaymentFromStudent","setPayments","newPaymentCard","setNewPaymentCard","getMany","sort","p1","p2","localeCompare","_","Typography","padding","alignItems","input","iconButton","SearchBar","searchTitle","onSearch","Paper","InputBase","placeholder","onKeyPress","preventDefault","Transition","forwardRef","ref","Slide","direction","list","overflow","box","pagination","appBar","CloseIcon","Courses","history","courseIds","deleteCourseFromStudent","addCourseId","setCourses","allCourses","setAllCourses","newCourse","setNewCourse","handleClose","searchTerm","setSearchTerm","setPage","count","setCount","search","CoursesDataService","getAll","filter","fullScreen","TransitionComponent","AppBar","Toolbar","edge","m","target","Pagination","size","showFirstButton","showLastButton","siblingCount","boundaryCount","List","course","ListItem","confirm","ListItemText","push","ListItemSecondaryAction","deleteStudentCourse","calendar","eventFromSchedule","schedule","daysOfWeek","groupId","startTime","endTime","textColor","extendedProps","Scheduler","snapDuration","scheduleIds","onEventClick","onEventResize","onEventDrop","editable","useTheme","StyleWrapper","styled","div","setSchedules","SchedulesDataService","withScheduleInfo","info","getDay","toLocaleTimeString","hour12","plugins","timeGridPlugin","interactionPlugin","initialView","firstDay","buttonText","prev","next","prevYear","nextYear","today","month","week","day","selectable","selectMirror","dayMaxEvents","weekends","events","eventAdd","eventChange","clickInfo","eventRemove","selectInfo","eventContent","eventClick","eventTimeFormat","hour","minute","eventResize","eventDrop","Schedule","eventChanged","day_week","start_time","end_time","newEvent","calendarApi","view","addEvent","revert","minHeight","contentPanel","boxSizing","content","overflowX","overflowY","tab","a11yProps","Student","currentStudentId","student","setStudent","setNewGuardian","setValue","elevation","square","Tabs","indicatorColor","scrollButtons","Tab","contact","axis","containerStyle","onChangeIndex","dir","payment_id","StudentsCourseDataService","course_id","c","gId","themeContext","switchTheme","ExportSearchChip","searchTermField","exportAll","getFilters","Chip","downloadCsv","searchAndFilters","chip","selectedAvatar","chips","heading","typography","pxToRem","fontWeight","fontWeightRegular","ItemsList","setCurrentItemId","currentItemId","items","setItems","displayNameField","usableFilters","defaultSearchBy","searchByOptions","searchBarLabel","exportPage","exportItem","exportAllPages","reduce","f","initialValue","setFilters","searchBy","setSearchBy","fromEntries","Set","Accordion","AccordionSummary","expandIcon","AccordionDetails","tooltip","item","ListItemAvatar","charAt","downloadOneCsv","left","fab","bottom","right","invitationsService","inviteUser","userEmail","UserPerson","UsersDataService","DirtyCheckbox","Checkbox","checked","NeedsSelection","FormControlLabel","control","symmetricDifference","setA","setB","_difference","elem","has","add","a","b","difference","jobs","UsersNeedsDataService","User","currentUserId","deleteUser","UserPermissions","propTypes","PropTypes","root2","formControl","maxHeight","minWidth","dialog","RoomSchedule","RoomDetails","setNewRoom","newRoom","RoomsDataService","Room","currentRoomId","deleteRoom","addRoomId","room","setRoom","TeacherDetails","TeachersDataService","TeacherSchedule","Teacher","currentTeacherId","setNewTeacher","newTeacher","addTeacherId","deleteTeacher","teacher","setTeacher","TeachersCoursesDataService","choose","marginBottom","CourseDetails","currentCourse","updateCurrentCourse","deleteCourse","openDownloadAttendanceList","setOpenDownloadAttendanceList","is_published","formik2","startDate","endDate","LabelsSelection","CourseLabels","CourseLabelsDataService","labels","CourseSchedule","CourseStudents","CourseTeachers","Course","currentCourseId","setCourse","CourseStudentsDataService","CourseTeachersDataService","Routes","path","setStudents","setCurrentStudentId","handleError","URLSearchParams","Grid","container","xs","defaultValue","Fab","icon","PersonIcon","setCurrentCourseId","ClassIcon","setTeachers","setCurrentTeacherId","SchoolIcon","setRooms","setCurrentRoomId","RoomIcon","AccountBalanceIcon","setUsers","setCurrentUserId","setOpen","fullWidth","userId","ContactMailIcon","authenticationService","login","username","password","auth","logout","getCurrentLanguage","localStorage","getItem","TranslateButton","selectedLanguage","i18next","changeLanguage","ThemeButton","themeCtx","languageMap","eng","active","cat","toolbar","justifyContent","mixins","grow","flexGrow","HomeToolbar","changeTheme","selected","anchorEl","setAnchorEl","isMenuOpen","Boolean","handleMenuClose","anchorElLan","setAnchorElLan","isLanguageMenuOpen","handleLanguageMenuClose","languageMenu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","language","userMenuId","userMenu","handleDrawerOpen","menuButton","hide","noWrap","currentTarget","aria-controls","aria-haspopup","drawerWidth","zIndex","drawer","easing","sharp","leavingScreen","background","appBarShift","enteringScreen","flexShrink","whiteSpace","drawerOpen","drawerClose","breakpoints","up","backdrop","flexFlow","selectedIcon","HomePage","currentRoute","setCurrentRoute","handleDrawerClose","createBrowserHistory","setLoading","CssBaseline","Provider","basename","Drawer","paper","route","prop","Link","ListItemIcon","Backdrop","CircularProgress","passwordResetService","reset","token","recaptcha","startReset","useOnMount","field","textAlign","cursor","LoginPage","setRecaptcha","showRecaptcha","setShowRecaptcha","setLogged","align","justify","sitekey","signup","SignupPage","query","password2","signupService","result","ResetPage","preEnrolmentService","getCourses","postPreEnrollment","cards","buttons","card","bullet","pos","getLocalisedWeekday","num","d","currentDay","distance","setDate","toLocaleString","weekday","isUnderage","birthDateString","birthDate","age","PreEnrolmentPage","can_pay_60","can_pay_50","can_pay_40","skipped","setSkipped","availableCourses","setAvailableCourses","filteredCourses","setFilteredCourses","chosenCourses","setChosenCourses","raw_economic_comments","setRawEconomicComments","isStepSkipped","step","activeStep","setActiveStep","steps","__person1__name","__person2__name","__person1__surname1","__person1__surname2","__person1__email","__person1__phone","__person1__relation","__person1__is_studying","__person1__is_working","__person1__career","__person1__education_entity","__person1__education_year","__person2__surname1","__person2__surname2","__person2__email","__person2__phone","__person2__relation","__person2__is_studying","__person2__is_working","__person2__career","__person2__education_entity","__person2__education_year","schema","notOneOf","years_in_xamfra","prefix","join","some","l","isStepOptional","fieldsToValidatePerStep","Stepper","stepProps","labelProps","optional","completed","Step","StepLabel","raised","slice","defaultChecked","prevActiveStep","backButton","Error","prevSkipped","newSkipped","setFieldTouched","NotFound","App","setTheme","appliedTheme","_setNeeds","ThemeProvider","maxSnack","setItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","resources","translation","i18n","use","Backend","LanguageDetector","initReactI18next","init","fallbackLng","detection","checkWhitelist","debug","whitelist","interpolation","escapeValue","ReactDOM","StrictMode","Helmet","nonce","rel","getElementById"],"mappings":"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","file":"static/js/main.0eaa6511.chunk.js","sourcesContent":["import {createMuiTheme} from \"@material-ui/core/styles\";\n\nexport const lightTheme = createMuiTheme({\n  palette: {\n    type: 'light',\n    primary: {\n      main: '#e98300',\n      light: '#ffb342',\n      dark: '#b05500',\n      contrastText: '#000000',\n    },\n    secondary: {\n      main: '#934d98',\n      light: '#c57bc9',\n      dark: '#63206a',\n      contrastText: '#ffffff',\n    },\n    neutral: {\n      main: '#ffffff',\n      contrastText: '#000000',\n      emphasisText: {\n        high: '#000000DF',\n        medium: '#00000098',\n        low: '#0000005E',\n      },\n      status: {\n        dirty: '#ffcf3d'\n      }\n    }\n  }\n})\n\nexport const darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    secondary: {\n      main: '#ffcc80',\n      light: '#ffffb0',\n      dark: '#ca9b52',\n      contrastText: '#000000',\n    },\n    primary: {\n      main: '#ce93d8',\n      light: '#ffc4ff',\n      dark: '#9c64a6',\n      contrastText: '#000000',\n    },\n    neutral: {\n      main: '#1f1f1f',\n      contrastText: '#ffffff',\n      emphasisText: {\n        high: '#ffffffDF',\n        medium: '#ffffff98',\n        low: '#ffffff5E',\n      },\n      status: {\n        dirty: '#ffcf3d'\n      }\n    }\n  }\n})\n","import React from \"react\";\n\nconst userContext = React.createContext({user: null, setUser: () => {}, needs: [], setNeeds: () => {}}); // Create a context object\n\nexport {\n  userContext // Export it so it can be used by other Components\n};","import {Redirect, Route} from 'react-router-dom';\nimport React from \"react\";\nimport {userContext} from '../_context/user-context';\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n    const userCtx = React.useContext(userContext);\n    return (\n        <Route {...rest} render={props =>\n        {\n          if (!userCtx[\"user\"][\"logged\"]) {\n            // not logged in so redirect to login page with the return url\n            return <Redirect to={{ pathname: `/login`, state: { from: props.location } }} />\n            }\n\n            // authorised so return component\n            return <Component {...props} {...rest}/>\n      }}/>\n    );\n}\n\n\nexport default PrivateRoute;","import Cookies from 'js-cookie';\n\nexport function authHeader() {\n    // return authorization header with jwt token\n    return { 'X-CSRFToken': Cookies.get('X-CSRF-TOKEN')};\n}","export const API_VERSION = process.env.REACT_APP_API_VERSION;\nexport const BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nexport const RECAPTCHA = process.env.REACT_APP_RECAPTCHA;\nexport const PUBLIC_URL = process.env.PUBLIC_URL;\nexport const CHECK_NEEDS = process.env.REACT_CHECK_NEEDS === \"true\";","import {authHeader} from \"../_helpers/auth-header\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\n\nconst axios = require('axios');  // todo default headers\n\nexport default function serviceFactory(resource, subresource=null){  // todo subresource for all methods?\n    return class {\n        resource = resource;\n        subresource = subresource;\n\n        getAll(likeSearchText=null, page = 1, include=null, filters=null) {\n            return new Promise(function (resolve, reject) {\n\n                let myFilters = {\n                        \"page\": page,\n                        \"include\": include === null? null: JSON.stringify(include)\n                    };\n                if (likeSearchText !== null) {\n                    myFilters[`filter.${likeSearchText.name}.like`] = '%' + likeSearchText.value + '%';\n                }\n\n                if (filters !== null) {\n                    Object.keys(filters).forEach((key) => {\n                    myFilters[`filter.${key}.eq`] = filters[key];\n                })\n                }\n\n                axios({\n                    method: 'get',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}`,\n                    params: myFilters,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()  // todo are auth headers needed for gets?\n                    }\n                }).then(function (response) {\n                        resolve(response.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        getOne(id, include=null) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'get',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}`,\n                    params: {\n                        \"include\": include === null? null: JSON.stringify(include)\n                    },\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()  // todo are auth headers needed for gets?\n                    }\n                }).then(function (response) {\n                        resolve(response.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        getMany(ids) {\n            return Promise.all(ids.map(id => (this.getOne(id))));\n        }\n\n        patch({id, body, initial_values = null}) {\n            if (initial_values !== null) {\n                for (const [key, value] of Object.entries(body)) {\n                  if (key in initial_values && initial_values[key] === value){\n                      delete body[key];  // unchanged value, no need to patch it\n                  }\n                }\n            }\n\n            if (\"id\" in body) {\n                delete body[\"id\"];  // no id is to be sent in the body, since it is sent as url param\n            }\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'patch',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}`,\n                    data: body,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (response) {\n                        resolve(response.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        post(body, subresourcId=null) {\n            if (\"id\" in body) delete body[\"id\"];  // no id is to be sent in the body, since it is sent as url param\n\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}${subresource !== null? `/${subresourcId}/${subresource}`: ''}`,\n                    data: body,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        // todo arent post and postwith id nearly same? merge\n\n        postWithId(id, subresourceid=null) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}${subresourceid === null?\n                    '': `/${subresource}/${subresourceid}`}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        delete(id, subresourceId=null) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'delete',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}${subresource !== null? `/${subresource}/${subresourceId}`: ''}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (response) {\n                        resolve(response);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        deleteMany(ids) {\n            return Promise.all(ids.map(id => (this.delete(id))));\n        }\n\n        downloadCsv(searchtermfield, searchterm, page = 1, filters=null) {\n            return new Promise(function (resolve, reject) {\n                let myFilters = {\n                        \"page\": page\n                    };\n\n                if (searchtermfield !== null){\n                    myFilters[`filter.${searchtermfield}.like`]= `%${searchterm}%`;\n                }\n\n                if (filters !== null){\n                    Object.keys(filters).forEach((key) => {\n                    myFilters[`filter.${key}.eq`] = filters[key];\n                })\n                }\n\n                axios({\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}`,\n                    method: 'GET',\n                    responseType: 'blob', // important\n                    params: myFilters,\n                    headers: {\n                        ...{\n                            'Accept': 'text/csv',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(response => {\n                    let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                    if (filename === null) filename = \"export.csv\";\n\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', filename);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    resolve();\n                }).catch(function (err) {\n                    reject(err);\n                });\n\n            });\n        }\n\n\n        downloadOneCsv(id) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}`,\n                    method: 'GET',\n                    responseType: 'blob', // important\n                    headers: {\n                        ...{\n                            'Accept': 'text/csv',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(response => {\n                    /*\n                    _download(response){\n                let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                if (filename === null) filename = \"export.csv\";\n\n                const url = window.URL.createObjectURL(new Blob([response.data]));\n                const link = document.createElement('a');\n                link.href = url;\n                link.setAttribute('download', filename);\n                document.body.appendChild(link);\n                link.click();\n                link.remove();\n                resolve();\n        }\n                    **/\n                    let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                    if (filename === null) filename = \"export.csv\";\n\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', filename);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    resolve();\n                }).catch(function (err) {\n                    reject(err);\n                });\n\n            });\n        }\n\n\n        downloadSubresource(id, subresource, params) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}/${subresource}`,\n                    method: 'POST',\n                    params: params,\n                    responseType: 'blob', // important\n                    headers: {\n                        ...{\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(response => {\n                    let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', filename);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    resolve();\n                }).catch(function (err) {\n                    reject(err);\n                });\n\n            });\n        }\n    }\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('students'))();\n\n","import IconButton from \"@material-ui/core/IconButton\";\nimport PersonAddIcon from \"@material-ui/icons/PersonAdd\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport React from \"react\";\n\nexport const IconButtonSkeleton = ({...props}) => {\n    return <Skeleton {...props} variant=\"circle\">\n                <IconButton><PersonAddIcon /></IconButton>\n          </Skeleton>\n}","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport {makeStyles} from \"@material-ui/core\";\nimport createStyles from \"@material-ui/styles/createStyles\";\n\n\nconst useStyles = makeStyles(theme => (createStyles({\n  root: dirty => ({\n          '& label.Mui-focused':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},\n          '& .MuiInput-underline:after': {borderBottomColor: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},\n          '& label':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium}\n  })\n})));\n\n\nconst DirtyTextField = (props) => {\n    const name = props.name;\n    const formik = props.formik;\n    const dirty = props.noDirty === true? false: formik.values[name] !== formik.initialValues[name];\n    const classes = useStyles(dirty);\n    const formikProps = {\n        value: formik.values[name] === undefined? '': formik.values[name],  // todo why is this being called with undefined tho\n        onChange: formik.handleChange,\n        onBlur: formik.handleBlur,\n        error: formik.status  || formik.errors[name] !== undefined,\n        helperText: formik.touched[name] && formik.errors[name]\n    }\n    return <TextField className={classes.root}\n       InputLabelProps={{shrink: formik.values[name] !== ''}}\n      {...formikProps}\n       {...props}\n                  />\n}\n\nexport default DirtyTextField;","export const countries = [\n  { code: '', label: \"empty\", phone: '-'},\n  { code: 'AD', label: 'Andorra', phone: '376' },\n  { code: 'AE', label: 'United Arab Emirates', phone: '971' },\n  { code: 'AF', label: 'Afghanistan', phone: '93' },\n  { code: 'AG', label: 'Antigua and Barbuda', phone: '1-268' },\n  { code: 'AI', label: 'Anguilla', phone: '1-264' },\n  { code: 'AL', label: 'Albania', phone: '355' },\n  { code: 'AM', label: 'Armenia', phone: '374' },\n  { code: 'AO', label: 'Angola', phone: '244' },\n  { code: 'AQ', label: 'Antarctica', phone: '672' },\n  { code: 'AR', label: 'Argentina', phone: '54' },\n  { code: 'AS', label: 'American Samoa', phone: '1-684' },\n  { code: 'AT', label: 'Austria', phone: '43' },\n  { code: 'AU', label: 'Australia', phone: '61', suggested: true },\n  { code: 'AW', label: 'Aruba', phone: '297' },\n  { code: 'AX', label: 'Alland Islands', phone: '358' },\n  { code: 'AZ', label: 'Azerbaijan', phone: '994' },\n  { code: 'BA', label: 'Bosnia and Herzegovina', phone: '387' },\n  { code: 'BB', label: 'Barbados', phone: '1-246' },\n  { code: 'BD', label: 'Bangladesh', phone: '880' },\n  { code: 'BE', label: 'Belgium', phone: '32' },\n  { code: 'BF', label: 'Burkina Faso', phone: '226' },\n  { code: 'BG', label: 'Bulgaria', phone: '359' },\n  { code: 'BH', label: 'Bahrain', phone: '973' },\n  { code: 'BI', label: 'Burundi', phone: '257' },\n  { code: 'BJ', label: 'Benin', phone: '229' },\n  { code: 'BL', label: 'Saint Barthelemy', phone: '590' },\n  { code: 'BM', label: 'Bermuda', phone: '1-441' },\n  { code: 'BN', label: 'Brunei Darussalam', phone: '673' },\n  { code: 'BO', label: 'Bolivia', phone: '591' },\n  { code: 'BR', label: 'Brazil', phone: '55' },\n  { code: 'BS', label: 'Bahamas', phone: '1-242' },\n  { code: 'BT', label: 'Bhutan', phone: '975' },\n  { code: 'BV', label: 'Bouvet Island', phone: '47' },\n  { code: 'BW', label: 'Botswana', phone: '267' },\n  { code: 'BY', label: 'Belarus', phone: '375' },\n  { code: 'BZ', label: 'Belize', phone: '501' },\n  { code: 'CA', label: 'Canada', phone: '1', suggested: true },\n  { code: 'CC', label: 'Cocos (Keeling) Islands', phone: '61' },\n  { code: 'CD', label: 'Congo, Democratic Republic of the', phone: '243' },\n  { code: 'CF', label: 'Central African Republic', phone: '236' },\n  { code: 'CG', label: 'Congo, Republic of the', phone: '242' },\n  { code: 'CH', label: 'Switzerland', phone: '41' },\n  { code: 'CI', label: \"Cote d'Ivoire\", phone: '225' },\n  { code: 'CK', label: 'Cook Islands', phone: '682' },\n  { code: 'CL', label: 'Chile', phone: '56' },\n  { code: 'CM', label: 'Cameroon', phone: '237' },\n  { code: 'CN', label: 'China', phone: '86' },\n  { code: 'CO', label: 'Colombia', phone: '57' },\n  { code: 'CR', label: 'Costa Rica', phone: '506' },\n  { code: 'CU', label: 'Cuba', phone: '53' },\n  { code: 'CV', label: 'Cape Verde', phone: '238' },\n  { code: 'CW', label: 'Curacao', phone: '599' },\n  { code: 'CX', label: 'Christmas Island', phone: '61' },\n  { code: 'CY', label: 'Cyprus', phone: '357' },\n  { code: 'CZ', label: 'Czech Republic', phone: '420' },\n  { code: 'DE', label: 'Germany', phone: '49', suggested: true },\n  { code: 'DJ', label: 'Djibouti', phone: '253' },\n  { code: 'DK', label: 'Denmark', phone: '45' },\n  { code: 'DM', label: 'Dominica', phone: '1-767' },\n  { code: 'DO', label: 'Dominican Republic', phone: '1-809' },\n  { code: 'DZ', label: 'Algeria', phone: '213' },\n  { code: 'EC', label: 'Ecuador', phone: '593' },\n  { code: 'EE', label: 'Estonia', phone: '372' },\n  { code: 'EG', label: 'Egypt', phone: '20' },\n  { code: 'EH', label: 'Western Sahara', phone: '212' },\n  { code: 'ER', label: 'Eritrea', phone: '291' },\n  { code: 'ES', label: 'Spain', phone: '34' },\n  { code: 'ET', label: 'Ethiopia', phone: '251' },\n  { code: 'FI', label: 'Finland', phone: '358' },\n  { code: 'FJ', label: 'Fiji', phone: '679' },\n  { code: 'FK', label: 'Falkland Islands (Malvinas)', phone: '500' },\n  { code: 'FM', label: 'Micronesia, Federated States of', phone: '691' },\n  { code: 'FO', label: 'Faroe Islands', phone: '298' },\n  { code: 'FR', label: 'France', phone: '33', suggested: true },\n  { code: 'GA', label: 'Gabon', phone: '241' },\n  { code: 'GB', label: 'United Kingdom', phone: '44' },\n  { code: 'GD', label: 'Grenada', phone: '1-473' },\n  { code: 'GE', label: 'Georgia', phone: '995' },\n  { code: 'GF', label: 'French Guiana', phone: '594' },\n  { code: 'GG', label: 'Guernsey', phone: '44' },\n  { code: 'GH', label: 'Ghana', phone: '233' },\n  { code: 'GI', label: 'Gibraltar', phone: '350' },\n  { code: 'GL', label: 'Greenland', phone: '299' },\n  { code: 'GM', label: 'Gambia', phone: '220' },\n  { code: 'GN', label: 'Guinea', phone: '224' },\n  { code: 'GP', label: 'Guadeloupe', phone: '590' },\n  { code: 'GQ', label: 'Equatorial Guinea', phone: '240' },\n  { code: 'GR', label: 'Greece', phone: '30' },\n  { code: 'GS', label: 'South Georgia and the South Sandwich Islands', phone: '500' },\n  { code: 'GT', label: 'Guatemala', phone: '502' },\n  { code: 'GU', label: 'Guam', phone: '1-671' },\n  { code: 'GW', label: 'Guinea-Bissau', phone: '245' },\n  { code: 'GY', label: 'Guyana', phone: '592' },\n  { code: 'HK', label: 'Hong Kong', phone: '852' },\n  { code: 'HM', label: 'Heard Island and McDonald Islands', phone: '672' },\n  { code: 'HN', label: 'Honduras', phone: '504' },\n  { code: 'HR', label: 'Croatia', phone: '385' },\n  { code: 'HT', label: 'Haiti', phone: '509' },\n  { code: 'HU', label: 'Hungary', phone: '36' },\n  { code: 'ID', label: 'Indonesia', phone: '62' },\n  { code: 'IE', label: 'Ireland', phone: '353' },\n  { code: 'IL', label: 'Israel', phone: '972' },\n  { code: 'IM', label: 'Isle of Man', phone: '44' },\n  { code: 'IN', label: 'India', phone: '91' },\n  { code: 'IO', label: 'British Indian Ocean Territory', phone: '246' },\n  { code: 'IQ', label: 'Iraq', phone: '964' },\n  { code: 'IR', label: 'Iran, Islamic Republic of', phone: '98' },\n  { code: 'IS', label: 'Iceland', phone: '354' },\n  { code: 'IT', label: 'Italy', phone: '39' },\n  { code: 'JE', label: 'Jersey', phone: '44' },\n  { code: 'JM', label: 'Jamaica', phone: '1-876' },\n  { code: 'JO', label: 'Jordan', phone: '962' },\n  { code: 'JP', label: 'Japan', phone: '81', suggested: true },\n  { code: 'KE', label: 'Kenya', phone: '254' },\n  { code: 'KG', label: 'Kyrgyzstan', phone: '996' },\n  { code: 'KH', label: 'Cambodia', phone: '855' },\n  { code: 'KI', label: 'Kiribati', phone: '686' },\n  { code: 'KM', label: 'Comoros', phone: '269' },\n  { code: 'KN', label: 'Saint Kitts and Nevis', phone: '1-869' },\n  { code: 'KP', label: \"Korea, Democratic People's Republic of\", phone: '850' },\n  { code: 'KR', label: 'Korea, Republic of', phone: '82' },\n  { code: 'KW', label: 'Kuwait', phone: '965' },\n  { code: 'KY', label: 'Cayman Islands', phone: '1-345' },\n  { code: 'KZ', label: 'Kazakhstan', phone: '7' },\n  { code: 'LA', label: \"Lao People's Democratic Republic\", phone: '856' },\n  { code: 'LB', label: 'Lebanon', phone: '961' },\n  { code: 'LC', label: 'Saint Lucia', phone: '1-758' },\n  { code: 'LI', label: 'Liechtenstein', phone: '423' },\n  { code: 'LK', label: 'Sri Lanka', phone: '94' },\n  { code: 'LR', label: 'Liberia', phone: '231' },\n  { code: 'LS', label: 'Lesotho', phone: '266' },\n  { code: 'LT', label: 'Lithuania', phone: '370' },\n  { code: 'LU', label: 'Luxembourg', phone: '352' },\n  { code: 'LV', label: 'Latvia', phone: '371' },\n  { code: 'LY', label: 'Libya', phone: '218' },\n  { code: 'MA', label: 'Morocco', phone: '212' },\n  { code: 'MC', label: 'Monaco', phone: '377' },\n  { code: 'MD', label: 'Moldova, Republic of', phone: '373' },\n  { code: 'ME', label: 'Montenegro', phone: '382' },\n  { code: 'MF', label: 'Saint Martin (French part)', phone: '590' },\n  { code: 'MG', label: 'Madagascar', phone: '261' },\n  { code: 'MH', label: 'Marshall Islands', phone: '692' },\n  { code: 'MK', label: 'Macedonia, the Former Yugoslav Republic of', phone: '389' },\n  { code: 'ML', label: 'Mali', phone: '223' },\n  { code: 'MM', label: 'Myanmar', phone: '95' },\n  { code: 'MN', label: 'Mongolia', phone: '976' },\n  { code: 'MO', label: 'Macao', phone: '853' },\n  { code: 'MP', label: 'Northern Mariana Islands', phone: '1-670' },\n  { code: 'MQ', label: 'Martinique', phone: '596' },\n  { code: 'MR', label: 'Mauritania', phone: '222' },\n  { code: 'MS', label: 'Montserrat', phone: '1-664' },\n  { code: 'MT', label: 'Malta', phone: '356' },\n  { code: 'MU', label: 'Mauritius', phone: '230' },\n  { code: 'MV', label: 'Maldives', phone: '960' },\n  { code: 'MW', label: 'Malawi', phone: '265' },\n  { code: 'MX', label: 'Mexico', phone: '52' },\n  { code: 'MY', label: 'Malaysia', phone: '60' },\n  { code: 'MZ', label: 'Mozambique', phone: '258' },\n  { code: 'NA', label: 'Namibia', phone: '264' },\n  { code: 'NC', label: 'New Caledonia', phone: '687' },\n  { code: 'NE', label: 'Niger', phone: '227' },\n  { code: 'NF', label: 'Norfolk Island', phone: '672' },\n  { code: 'NG', label: 'Nigeria', phone: '234' },\n  { code: 'NI', label: 'Nicaragua', phone: '505' },\n  { code: 'NL', label: 'Netherlands', phone: '31' },\n  { code: 'NO', label: 'Norway', phone: '47' },\n  { code: 'NP', label: 'Nepal', phone: '977' },\n  { code: 'NR', label: 'Nauru', phone: '674' },\n  { code: 'NU', label: 'Niue', phone: '683' },\n  { code: 'NZ', label: 'New Zealand', phone: '64' },\n  { code: 'OM', label: 'Oman', phone: '968' },\n  { code: 'PA', label: 'Panama', phone: '507' },\n  { code: 'PE', label: 'Peru', phone: '51' },\n  { code: 'PF', label: 'French Polynesia', phone: '689' },\n  { code: 'PG', label: 'Papua New Guinea', phone: '675' },\n  { code: 'PH', label: 'Philippines', phone: '63' },\n  { code: 'PK', label: 'Pakistan', phone: '92' },\n  { code: 'PL', label: 'Poland', phone: '48' },\n  { code: 'PM', label: 'Saint Pierre and Miquelon', phone: '508' },\n  { code: 'PN', label: 'Pitcairn', phone: '870' },\n  { code: 'PR', label: 'Puerto Rico', phone: '1' },\n  { code: 'PS', label: 'Palestine, State of', phone: '970' },\n  { code: 'PT', label: 'Portugal', phone: '351' },\n  { code: 'PW', label: 'Palau', phone: '680' },\n  { code: 'PY', label: 'Paraguay', phone: '595' },\n  { code: 'QA', label: 'Qatar', phone: '974' },\n  { code: 'RE', label: 'Reunion', phone: '262' },\n  { code: 'RO', label: 'Romania', phone: '40' },\n  { code: 'RS', label: 'Serbia', phone: '381' },\n  { code: 'RU', label: 'Russian Federation', phone: '7' },\n  { code: 'RW', label: 'Rwanda', phone: '250' },\n  { code: 'SA', label: 'Saudi Arabia', phone: '966' },\n  { code: 'SB', label: 'Solomon Islands', phone: '677' },\n  { code: 'SC', label: 'Seychelles', phone: '248' },\n  { code: 'SD', label: 'Sudan', phone: '249' },\n  { code: 'SE', label: 'Sweden', phone: '46' },\n  { code: 'SG', label: 'Singapore', phone: '65' },\n  { code: 'SH', label: 'Saint Helena', phone: '290' },\n  { code: 'SI', label: 'Slovenia', phone: '386' },\n  { code: 'SJ', label: 'Svalbard and Jan Mayen', phone: '47' },\n  { code: 'SK', label: 'Slovakia', phone: '421' },\n  { code: 'SL', label: 'Sierra Leone', phone: '232' },\n  { code: 'SM', label: 'San Marino', phone: '378' },\n  { code: 'SN', label: 'Senegal', phone: '221' },\n  { code: 'SO', label: 'Somalia', phone: '252' },\n  { code: 'SR', label: 'Suriname', phone: '597' },\n  { code: 'SS', label: 'South Sudan', phone: '211' },\n  { code: 'ST', label: 'Sao Tome and Principe', phone: '239' },\n  { code: 'SV', label: 'El Salvador', phone: '503' },\n  { code: 'SX', label: 'Sint Maarten (Dutch part)', phone: '1-721' },\n  { code: 'SY', label: 'Syrian Arab Republic', phone: '963' },\n  { code: 'SZ', label: 'Swaziland', phone: '268' },\n  { code: 'TC', label: 'Turks and Caicos Islands', phone: '1-649' },\n  { code: 'TD', label: 'Chad', phone: '235' },\n  { code: 'TF', label: 'French Southern Territories', phone: '262' },\n  { code: 'TG', label: 'Togo', phone: '228' },\n  { code: 'TH', label: 'Thailand', phone: '66' },\n  { code: 'TJ', label: 'Tajikistan', phone: '992' },\n  { code: 'TK', label: 'Tokelau', phone: '690' },\n  { code: 'TL', label: 'Timor-Leste', phone: '670' },\n  { code: 'TM', label: 'Turkmenistan', phone: '993' },\n  { code: 'TN', label: 'Tunisia', phone: '216' },\n  { code: 'TO', label: 'Tonga', phone: '676' },\n  { code: 'TR', label: 'Turkey', phone: '90' },\n  { code: 'TT', label: 'Trinidad and Tobago', phone: '1-868' },\n  { code: 'TV', label: 'Tuvalu', phone: '688' },\n  { code: 'TW', label: 'Taiwan, Province of China', phone: '886' },\n  { code: 'TZ', label: 'United Republic of Tanzania', phone: '255' },\n  { code: 'UA', label: 'Ukraine', phone: '380' },\n  { code: 'UG', label: 'Uganda', phone: '256' },\n  { code: 'US', label: 'United States', phone: '1', suggested: true },\n  { code: 'UY', label: 'Uruguay', phone: '598' },\n  { code: 'UZ', label: 'Uzbekistan', phone: '998' },\n  { code: 'VA', label: 'Holy See (Vatican City State)', phone: '379' },\n  { code: 'VC', label: 'Saint Vincent and the Grenadines', phone: '1-784' },\n  { code: 'VE', label: 'Venezuela', phone: '58' },\n  { code: 'VG', label: 'British Virgin Islands', phone: '1-284' },\n  { code: 'VI', label: 'US Virgin Islands', phone: '1-340' },\n  { code: 'VN', label: 'Vietnam', phone: '84' },\n  { code: 'VU', label: 'Vanuatu', phone: '678' },\n  { code: 'WF', label: 'Wallis and Futuna', phone: '681' },\n  { code: 'WS', label: 'Samoa', phone: '685' },\n  { code: 'XK', label: 'Kosovo', phone: '383' },\n  { code: 'YE', label: 'Yemen', phone: '967' },\n  { code: 'YT', label: 'Mayotte', phone: '262' },\n  { code: 'ZA', label: 'South Africa', phone: '27' },\n  { code: 'ZM', label: 'Zambia', phone: '260' },\n  { code: 'ZW', label: 'Zimbabwe', phone: '263' },\n];\n\nexport default countries;","import {makeStyles} from \"@material-ui/core/styles\";\nimport {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport {Autocomplete} from \"@material-ui/lab\";\nimport {countries} from \"../_data/countries\";\nimport TextField from \"@material-ui/core/TextField\";\nimport createStyles from \"@material-ui/styles/createStyles\";\n\n// ISO 3166-1 alpha-2\n// ⚠️ No support for IE 11\nfunction countryToFlag(isoCode) {\n  return typeof String.fromCodePoint !== 'undefined'\n    ? isoCode\n        .toUpperCase()\n        .replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + 127397))\n    : isoCode;\n}\n\n\nconst useStyles = makeStyles(theme => (createStyles({\n  textField: dirty => ({\n    '& label.Mui-focused':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},  // todo color to theme\n    '& .MuiInput-underline:after': {borderBottomColor: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},\n      '& label':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium},\n      '& fieldset': {borderColor: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium},\n  }\n  ),\n    option: {\n    fontSize: 15,\n    '& > span': {\n      marginRight: 10,\n      fontSize: 18,\n    },\n  },})));\n\nexport default function DirtyCountrySelect({formik, noDirty, name, label, ...textFieldProps}) {\n  const getInitialOption = (code) => {\n      if (code === undefined) return countries.find(x=>x.code==='');\n      return countries.find(x=>x.code===code);\n  }\n\n  const [option, _setOption] = React.useState(getInitialOption(formik.values[name]));\n\n  React.useEffect(() => {\n    _setOption(getInitialOption(formik.values[name]));\n  }, [formik.values, name]);\n\n  const setOption = (option) => {\n      const newOption = (option !== null)? option.code: '';\n      formik.setFieldValue(name, newOption);\n      _setOption(option);\n  }\n\n  const dirty = noDirty === true? false: formik.values[name] !== formik.initialValues[name];\n  const classes = useStyles(dirty);\n\n  const [inputValue, setInputValue] = React.useState('');\n\n  const { t } = useTranslation();\n\n  return (\n    <Autocomplete\n      style={{ width: 300 }}\n      options={countries}\n      classes={{\n        option: classes.option,\n      }}\n      autoHighlight\n      getOptionLabel={(option) => option.label }\n      getOptionSelected={(o) => o.code === option.code}\n      value={option}\n        onChange={(event, newValue) => {\n          setOption(newValue);\n        }}\n        inputValue={inputValue}\n        onInputChange={(event, newInputValue) => {\n          setInputValue(newInputValue);\n        }}\n        name={name}\n      onBlur={formik.handleBlur}\n      renderOption={(option) => (\n        <React.Fragment key={option.code}>\n          <span>{countryToFlag(option.code)}</span>\n          {option.label} ({option.code}) +{option.phone}\n        </React.Fragment>\n      )}\n\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          label={label}\n          noDirty={noDirty}\n          className={classes.textField}\n          inputProps={{\n            ...params.inputProps,\n            autoComplete: 'new-password', // disable autocomplete and autofill\n          }}\n          error={formik.status  || formik.errors[name] !== undefined}\n        helperText={formik.touched[name] && formik.errors[name]}\n        />\n      )}\n    />\n  );\n}","import {userContext} from \"../_context/user-context\";\nimport React from 'react';\nimport {useSnackbar} from \"notistack\";\nimport {useTranslation} from \"react-i18next\";\nimport {Button} from \"@material-ui/core\";\n\n\nexport function useErrorHandler() {\n\n    const userCtx = React.useContext(userContext);\n    const {enqueueSnackbar, closeSnackbar} = useSnackbar();\n    const {t} = useTranslation();\n\n    const successHandler = (res, snackbarSuccess) => {\n        if (snackbarSuccess) enqueueSnackbar(t(\"success\"), {variant: \"success\"});\n        return Promise.resolve(res);\n    }\n\n    const successHandlerFactory = (snackbarSuccess) => {\n        return (res) => successHandler(res, snackbarSuccess)\n    }\n\n    const failureHandler401 = (res) => {\n        // auto logout if 401 unauthenticated\n        userCtx[\"setUser\"]({logged: false, ping: false});\n\n        enqueueSnackbar(t(\"warning_not_logged_in\"), {variant: \"warning\"});\n\n        return Promise.reject(res);\n    }\n\n    const failureHandler403 = (res) => {\n        // unauthorized\n        enqueueSnackbar(t(\"warning_not_enough_privileges\"), {variant: \"warning\"});\n\n        return Promise.reject(res);\n    }\n\n    const failureHandlerUnexpected = (res, reportUnexpected) => {\n        // an unexpected error happened\n\n        enqueueSnackbar(\"Something went wrong! 😣\",\n            {\n                variant: \"error\",\n                autoHideDuration: 10000,\n                action: key => {\n                    return <React.Fragment>\n                        <img src={true ? \"logo_centrifuga4_dark_error.svg\" : \"logo_centrifuga4_light_error.svg\"}\n                             alt=\"Logo Centrífuga\" style={{height: \"35px\"}}/>\n\n                        {reportUnexpected? <Button onClick={() => {\n                            navigator.clipboard.writeText(\n                                \"TO: vazquezrius.miquel@gmail.com\\n\\n\" +\n                                \"To mark an item, use a cross, like this: [X]\\n\\n\" +\n                                \"🛎️ TRIAGE\\n\" +\n                                \"[ ] This issue has been reported previously and has NOT been marked as solved\\n\" +\n                                \"[ ] This issue has been reported previously and has been marked as solved\\n\" +\n                                \"[ ] This issue has not been reported previously\\n\" +\n                                \"[ ] I have written the steps to reproduce the issue in the specified section below - ⚠️required!\\n\\n\" +\n                                \"🙋 TYPE OF REQUEST\\n\" +\n                                \"[ ] Feature request\\n\" +\n                                \"[X] Error report\\n\\n\" +\n                                \"📋 STEPS\\n\" +\n                                \"Describe what were you doing when this error happened!\\n\" +\n                                \"\\n    example\\n\" +\n                                \"    1. Searched 'john' in the students section, two students appeared.\\n\" +\n                                \"    2. Clicked the CSV export option.\\n\" +\n                                \"    3. Nothing happened, the the error message appeared.\\n\\n\" +\n                                \"Write your steps for repeating the issue here:\\n1. ...\\n\\n\\n\" +\n                                \"📚 STACK TRACE\\n\" + JSON.stringify(res) + \"\\n\\n\\n\" +\n                                \"🌩️ RESPONSE\\n\" + JSON.stringify(res.response) + \"\\n\\n\\n\" +\n                                \"⚙️ DEVICE CONTEXT\\n\" + navigator.platform + \"\\n\" + navigator.userAgent + \"\\n\" +\n                                navigator.appVersion + \"\\n\" + navigator.vendor + \"\\n\")\n                                .then(r => {\n                                    closeSnackbar(key);\n                                    alert(\"Okey, so something got messed up... 😣 Let's fix it!\\n\\n\" +\n                                        \"📤 Open your email client\\n\" +\n                                        \"📋 Ctrl+V\\n\" +\n                                        \"✏️ Fill in the details\\n\" +\n                                        \"📨 Send it to the support team!\\n\\n\")\n                                });\n                        }}>\n                            {t(\"Report\")}\n                        </Button>: null}\n                        <Button onClick={() => {\n                            closeSnackbar(key)\n                        }}>\n                            {t(\"Dismiss\")}\n                        </Button>\n\n                    </React.Fragment>\n                }\n            });\n\n        return Promise.reject(res);\n    }\n\n    const failureHandler = (res, handle401, handle403, handle400, errorOut, reportUnexpected) => {\n        // decide which handler is going to handle the error response depending on status code\n        let handler = (res) => failureHandlerUnexpected(res, reportUnexpected);\n        if (res.request.status === 401) {\n            if (handle401) { handler = failureHandler401; }\n            else { return Promise.reject(res) }\n        }\n        if (res.request.status === 403) {\n            if (handle403) { handler = failureHandler403; }\n            else { return Promise.reject(res) }\n        }\n        if (res.request.status === 400) {\n            if (!handle400) { return Promise.reject(res) }\n            // else just use the default handler\n        }\n\n        // use the handler, return a rejected promise if errorOut,\n        // else just execute the handler but don't return a rejected catch\n        // (otherwise there will be either empty rejection handlers or unhandled rejections everywhere)\n        if (errorOut) {\n            return handler(res);\n        } else {\n            handler(res).catch(()=>{});  // ignores the rejection response\n            return null;\n        }\n    }\n\n    const failureHandlerFactory = (handle401, handle403, handle400, errorOut, reportUnexpected) => {\n        return (res) => (failureHandler(res, handle401, handle403, handle400, errorOut, reportUnexpected))\n    }\n\n    return ({\n                handle401 = true,\n                handle403 = true,\n                handle400 = true,\n                errorOut = true,\n                reportUnexpected = true,\n                snackbarSuccess = false\n            }) => {\n        return [successHandlerFactory(snackbarSuccess),\n                failureHandlerFactory(handle401, handle403, handle400, errorOut, reportUnexpected)]\n    };\n}","import {useFormik} from \"formik\";\n\n\nexport function useNormik(onlyChangedValuesOnSubmit, props, allowArrays=false) {\n    let originalInitialValues = {};\n    if (\"initialValues\" in props) {\n        let nullSafeInitialValues = {};\n        originalInitialValues = props.initialValues;\n        for (const [key, value] of Object.entries(originalInitialValues)) {  // todo how to make clean\n          if (value === null) {\n              nullSafeInitialValues[key] = '';\n          } else {\n              nullSafeInitialValues[key] = value;\n          }\n        }\n        props.initialValues = nullSafeInitialValues;\n    }\n\n    if (\"onSubmit\" in props){\n        const oldOnSubmit = props.onSubmit;\n        const nullSafeOnSubmit = (values, actions) => {\n            let normalizedValues = {};\n            for (const [key, value] of Object.entries(values)) {  // todo how to make clean\n                const normalizedValue = value === ''? null : value;\n                if (!onlyChangedValuesOnSubmit ||\n                    (onlyChangedValuesOnSubmit && normalizedValue !== originalInitialValues[key] &&\n                        (allowArrays || !Array.isArray(originalInitialValues[key])) )){\n                  normalizedValues[key] = normalizedValue;\n                }\n\n            }\n            oldOnSubmit(normalizedValues, actions);\n        }\n        props.onSubmit = nullSafeOnSubmit;\n    }\n\n    return useFormik(props);\n}","export const education_years = [\n    \"kindergarten_p1\",\n    \"kindergarten_p2\",\n    \"kindergarten_p3\",\n    \"kindergarten_p4\",\n    \"kindergarten_p5\",\n    \"primary_1\",\n    \"primary_2\",\n    \"primary_3\",\n    \"primary_4\",\n    \"primary_5\",\n    \"primary_6\",\n    \"eso_1\",\n    \"eso_2\",\n    \"eso_3\",\n    \"eso_4\",\n    \"baccalaureate_1\",\n    \"baccalaureate_2\",\n    \"FP_lower\",\n    \"FP_higher\",\n    \"undergraduate\",\n    \"master\",\n    \"phd\",\n    \"other\"\n];\n","export const allNeeds = [\n    {\n        name: 'get',\n        description: 'can-read'\n    }, {\n        name: 'patch',\n        description: 'can-edit'\n    }, {\n        name: 'post',\n        description: 'can-create'\n    }, {\n        name: 'delete',\n        description: 'can-delete'\n    }, {\n        name: 'send_email',\n        description: 'can-send-emails'\n    }, {\n        name: 'invite_users',\n        description: 'can-invite-users'\n    }, {\n        name: 'students',\n        description: 'can-operate-with-students'\n    }, {\n        name: 'courses',\n        description: 'can-operate-with-courses'\n    }, {\n        name: 'guardians',\n        description: 'can-operate-with-guardians'\n    }, {\n        name: 'payments',\n        description: 'can-operate-with-payments'\n    }, {\n        name: 'rooms',\n        description: 'can-operate-with-rooms'\n    }, {\n        name: 'schedules',\n        description: 'can-operate-with-schedules'\n    }, {\n        name: 'teachers',\n        description: 'can-operate-with-teachers'\n    }, {\n        name: 'users',\n        description: 'can-operate-with-users'\n    }, {\n        name: 'payments-receipts',\n        description: 'can-operate-with-payment-receipts'\n    }\n];\n","import React, {useEffect} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Checkbox, FormControlLabel} from \"@material-ui/core\";\nimport {allNeeds} from \"../_data/needs\";\nimport Typography from \"@material-ui/core/Typography\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport RestoreIcon from \"@material-ui/icons/Restore\";\n\n\nconst DiscardButton = ({formik, ...props}) => {\n    const {t} = useTranslation();\n\n    return   <IconButton\n                                     onClick={formik.handleReset}\n                                     disabled={!formik.dirty || formik.isSubmitting}\n                         {...props}>\n                            <Tooltip title={t(\"reset\")} aria-label={t(\"reset\")}>\n                                <RestoreIcon/>\n                            </Tooltip>\n                        </IconButton>\n}\n\nexport default DiscardButton;","import {userContext} from \"../_context/user-context\";\nimport React from 'react';\nimport {useSnackbar} from \"notistack\";\nimport {useTranslation} from \"react-i18next\";\nimport {Button} from \"@material-ui/core\";\nimport {CHECK_NEEDS} from \"../config\";\n\n\nexport const NEEDS = {\n        get: \"get\",\n        patch: \"patch\",\n        delete: \"delete\",\n        post: \"post\",\n        send_email: \"send_email\",\n        invite_users: \"invite_users\",\n        students: \"students\",\n        courses: \"courses\",\n        guardians: \"guardians\",\n        payments: \"payments\",\n        rooms: \"rooms\",\n        schedules: \"schedules\",\n        teachers: \"teachers\",\n        users: \"users\",\n        paymentReceipts: \"payments-receipts\"\n    };\n\n\nexport function useNeeds() {\n\n    const userCtx = React.useContext(userContext);\n\n    const hasNeed = (needs) => (!CHECK_NEEDS || needs.every(need => userCtx.needs.includes(need)));\n\n    return [hasNeed, NEEDS];\n}","import React, {useEffect} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Checkbox, FormControlLabel} from \"@material-ui/core\";\nimport {allNeeds} from \"../_data/needs\";\nimport Typography from \"@material-ui/core/Typography\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport {useNeeds} from \"../_helpers/needs\";\n\n\nconst SaveButton = ({formik, ...props}) => {\n    const {t} = useTranslation();\n    const [hasNeeds, NEEDS] = useNeeds();\n    return   hasNeeds([NEEDS.patch]) && <IconButton  type=\"submit\"\n                                    disabled={!formik.dirty || formik.isSubmitting}\n                          {...props}>\n                            <Tooltip title={t(\"save\")} aria-label={t(\"save\")}>\n                                <SaveIcon/>\n                            </Tooltip>\n                        </IconButton>\n}\n\nexport default SaveButton;","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport {MenuItem} from \"@material-ui/core\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport * as yup from 'yup';\nimport DirtyCountrySelect from \"./contry-select.component\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNormik} from \"../_helpers/normik\";\nimport {education_years} from \"../_data/education\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport DiscardButton from \"./formik_discard_button\";\nimport SaveButton from \"./formik_save_button\";\n\nconst useStyles = makeStyles((theme) => ({\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    },\n    actionIcon: {\n        float: 'right'\n    }\n}));\n\nfunction Person(props) {\n    const currentPerson = props.currentPerson;\n    const dataService = props.patchService;\n    const newPerson = props.newPerson;\n    const updateCurrentPerson = props.updateCurrentStudent;\n    const additionalFields = props.additionalFields;\n    const additionalValidation = props.additionalValidation === undefined? {}: props.additionalValidation;\n    const studentId = props.studentId;\n    const onUpdate = props.onUpdate;\n    const loading = currentPerson === null;\n\n    const {t} = useTranslation();\n    const classes = useStyles();\n    const errorHandler = useErrorHandler();\n    let initialValues = loading ? {} : currentPerson;\n\n\n    const formik = useNormik(!newPerson, {\n        initialValues: initialValues,\n        validationSchema: yup.object({...{\n            email: yup.string().email(t(\"invalid_email\")),  // todo\n            name: yup.string().required(t(\"name_required\")),\n            is_studying: yup.boolean().required(t(\"studying_required\")),\n            is_working: yup.boolean().required(t(\"working_required\")),\n            career: yup.string().when('is_working', {\n                                                  is: true,\n                                                  then: yup.string().required(t(\"career_required\"))\n                                                }),\n            education_entity: yup.string().when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(t(\"education_entity_required\"))\n                                                }),\n            education_year: yup.string().when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(t(\"education_year_required\"))\n                                                })\n        }, ...additionalValidation}),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (newPerson) {\n                setStatus();\n                dataService.post({...changedValues})\n                    .then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (new_id) {\n                        updateCurrentPerson(new_id['id']);\n                        if (typeof onUpdate === 'function') onUpdate(changedValues);\n                    }).catch(function (err) {\n                    setStatus(true);\n                    }).finally(() => {\n                    setSubmitting(false);\n                });\n            } else {\n                if (Object.keys(changedValues).length > 0) {\n                setStatus();\n                dataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentPerson(patched_body);\n\n                        if (typeof onUpdate === 'function') onUpdate(changedValues);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n\n\n            } else {\n                setSubmitting(false);\n            }\n            }\n        }\n    });\n\n    function recursiveForm(elements) {\n        if (elements === undefined) return null;\n\n        return <div>\n            <Box my={3}>\n            <Divider />\n            </Box>\n            {\n            elements.map((res, idx) => (\n                <Box key={idx} className={`${classes.line} ${classes.composite}`}>\n                    {res instanceof Array ?\n                        res.map((r, idx2) => (\n                            React.cloneElement(r, {formik: formik, key: idx+\"-\"+idx2})\n                        ))\n                        : React.cloneElement(res, {formik: formik})}\n                </Box>))\n        }\n        </div>;\n    }\n\n\n    return (\n        <Box>\n            {loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\", \"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name=\"surname1\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"surname2\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"email\"\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"address\")}\n                                formik={formik}\n                                style={{flex: 4}}\n                                name=\"address\"\n                            />\n                            <DirtyTextField\n                                label={t(\"city\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"city\"\n                            />\n                            <DirtyTextField\n                                label={t(\"zip\")}\n                                formik={formik}\n                                type=\"number\"\n                                style={{flex: 1}}\n                                name=\"zip\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"dni\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"dni\"\n                            />\n                            <DirtyTextField\n                                label={t(\"phone\")}\n                                type=\"tel\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"phone\"\n                            />\n\n\n\n                        </Box>\n\n\n\n                        <Box className={[classes.line, classes.composite]}>\n\n                            <DirtyCountrySelect\n                                formik={formik}\n                                style={{flex: 1}}\n                                name={\"country_of_origin\"}\n                                label={t(\"country_of_origin\")}\n                            />\n<DirtyTextField\n                                label={t(\"gender\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"gender\"\n                                select>\n                                <MenuItem value=\"m\">{t(\"male\")}</MenuItem>\n                                <MenuItem value=\"f\">{t(\"female\")}</MenuItem>\n                                <MenuItem value=\"nb\">{t(\"nb\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n<Box my={3}>\n            <Divider />\n            </Box>\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"is_studying\")}\n                                style={{flex: 1}}\n                                name=\"is_studying\"\n                                formik={formik}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"education_entity\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"education_entity\"\n                            />\n                            <DirtyTextField\n                                label={t(\"education_year\")}\n                                style={{flex: 2}}\n                                name=\"education_year\"\n                                formik={formik}\n                                select>\n                                {education_years.map((level) => (\n                                    <MenuItem key={level} value={level}>{t(level)}</MenuItem>\n                                ))}\n                            </DirtyTextField>\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n\n\n                            <DirtyTextField\n                                label={t(\"is_working\")}\n                                style={{flex: 1}}\n                                name=\"is_working\"\n                                formik={formik}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"career\")}\n                                style={{flex: 4}}\n                                formik={formik}\n                                name=\"career\"\n                            />\n                        </Box>\n\n                        {recursiveForm(additionalFields)}\n\n                    </form>\n                )\n\n            }\n        </Box>\n    );\n}\n\n\nexport default Person;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('guardians'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('payments'))();\n\n","export const payment_methods = [\n    \"bank-transfer\",\n    \"cash\",\n    \"bank-direct-debit\"\n]","const newPerson = {\n                name: null,\n                surname1: null,\n                surname2: null,\n                email: null,\n                address: null,\n                city: null,\n                zip: null,\n                dni: null,\n                phone: null,\n                gender: null,\n\n                country_of_origin: null,\n                is_studying: null,\n                education_entity: null,\n                education_year: null,\n                is_working: null,\n                career: null\n              };\nexport const emptyGuardian = {...newPerson, relation: null};\nexport const emptyAttendee = {...newPerson,\n    price_term: null,\n    payment_comments: null,\n    birth_date: null,\n    other_comments: null,\n    image_agreement: null,\n    enrolment_status: null,\n    default_payment_method: null\n};\n","import React from \"react\";\n\nconst loadingContext = React.createContext({loading: false,\n  startLoading: () => {},\n  stopLoading: () => {}}); // Create a context object\n\nexport {\n  loadingContext // Export it so it can be used by other Components\n};","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport {MenuItem, TextField} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport StudentsDataService from \"../_services/students.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport * as yup from 'yup';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\"\nimport Person from \"./students.student.person.component\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport GuardiansDataService from \"../_services/guardians.service\";\nimport PaymentsDataService from \"../_services/payments.service\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport {sendEnrollmentEmail} from \"../_services/emailsEnrollment.service\";\nimport ReceiptIcon from \"@material-ui/icons/Receipt\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {sendGrantEmail} from \"../_services/emailsGrants.service\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport {payment_methods} from \"../_data/payment_methods\";\nimport {emptyAttendee, emptyGuardian} from \"../_data/empty_objects\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {loadingContext} from \"../_context/loading-context\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction Attendee({ children, setNewStudent, addStudentId, value, index, newStudent, title, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const [hasNeeds, NEEDS] = useNeeds();\n  const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = React.useState(false);\n  const deleteFullStudent = () => {\n    StudentsDataService\n              .delete(currentStudent['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                PaymentsDataService\n                      .deleteMany(currentStudent['payments'])\n                      .then(...errorHandler({}))  // todo everywhere\n                      .then(function (res) {\n\n                      });\n\n                GuardiansDataService\n                      .deleteMany(currentStudent['guardians'])\n                      .then(...errorHandler({}))  // todo everywhere\n                      .then(function (res) {\n\n                      });\n\n\n                // todo schedules, courses\n\n\n                deleteStudent(currentStudent['id']);\n              });\n  }\n  const loadingCtx = React.useContext(loadingContext);\n  const sendGrantLetter = () => {\n      loadingCtx.startLoading();\n      sendGrantEmail(currentStudent['id'])\n          .then(...errorHandler({snackbarSuccess: true}))\n          .finally(() => {\n              loadingCtx.stopLoading();\n          });\n  }\n  const sendEnrollmentAgreement = () => {\n      loadingCtx.startLoading();\n      sendEnrollmentEmail(currentStudent['id'])\n          .then(...errorHandler({snackbarSuccess: true}))\n          .finally(() => {\n              loadingCtx.stopLoading();\n          });\n  }\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      <Dialog\n        open={openConfirmDeleteDialog}\n        onClose={(e) => {setOpenConfirmDeleteDialog(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{t(\"delete_student_question\")}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">{t(\"student_also_deletes\")}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button onClick={(e) => {\n            deleteFullStudent(currentStudent['id']);\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\" autoFocus>\n            {t(\"delete_student\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n              {loading?\n                  !newStudent && <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n              !newStudent && hasNeeds([NEEDS.guardians, NEEDS.post]) && <Tooltip style={{float: 'right'}} title={t(\"new_guardian\")} aria-label={t(\"new_guardian\")}>\n                <IconButton onClick={(e) => {\n                  addNewGuardian();\n                }}>\n                  <PersonAddIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n\n              {loading && !newStudent ?\n                   <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n                hasNeeds([NEEDS.delete]) && <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                    if (newStudent) {\n                        setNewStudent(false);\n                    } else {\n                        setOpenConfirmDeleteDialog(true);\n                    }\n\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <Person\n                      currentPerson={newStudent? emptyAttendee: currentStudent}\n                      newPerson={newStudent}\n                      updateCurrentStudent={(x) => {\n                        if (!newStudent) return updateCurrentStudent(x);\n                        addStudentId(x);\n                      }}\n                      patchService={patchService}\n                      onUpdate={(changedBody) => {\n                        if (\"status\" in changedBody && changedBody[\"status\"] === \"enrolled\"){\n                          // sendGrantLetter(); todo ask\n                        }\n                      }}\n                      additionalValidation={{\n                        enrolment_status: yup.string().required(t(\"status_required\")),\n                        image_agreement: yup.boolean().required(t(\"image_required\")),\n                        birth_date: yup.date().required(t(\"birthdate_required\"))\n                      }}\n                      additionalFields={\n                        [[<DirtyTextField\n                                label={t(\"price_term\")}\n                                style={{flex: 1}}\n                                name=\"price_term\"\n                                type=\"number\"\n                                InputProps={{endAdornment: <InputAdornment position=\"end\">€</InputAdornment>,}}\n                            />,\n                            <DirtyTextField\n                                label={t(\"default_payment_method\")}\n                                style={{flex: 1}}\n                                name=\"default_payment_method\"\n                                select>\n                                { payment_methods.map(\n                                                    (method) => (\n                                                        <MenuItem key={method} value={method}>{t(method)}</MenuItem>\n                                                    )\n                                                )\n                                                }\n                            </DirtyTextField>],\n                            <DirtyTextField\n                                label={t(\"payment_comments\")}\n                                style={{flex: 1}}\n                                multiline\n                                rowsMax={8}\n                                name=\"payment_comments\"\n                            />,\n                            [<DirtyTextField\n                                label={t(\"birthdate\")}\n                                type=\"date\"\n                                style={{flex: 1}}\n                                name=\"birth_date\"\n                                InputLabelProps={{shrink: true}}/>,\n                            <DirtyTextField\n                              label={t(\"years_in_xamfra\")}\n                              type=\"number\"\n                              style={{flex: 1}}\n                              name=\"years_in_xamfra\"/>],\n                          [\n                              <DirtyTextField\n                                label={t(\"status\")}\n                                style={{flex: 1}}\n                                name=\"enrolment_status\"\n                                select>\n                                {['enrolled', 'early-unenrolled', 'pre-enrolled'].map((s) => (\n                                    <MenuItem key={s} value={s}>{t(s)}</MenuItem>\n                                ))}\n                            </DirtyTextField>,\n                              <DirtyTextField\n                                label={t(\"image_agreement\")}\n                                style={{flex: 1}}\n                                name=\"image_agreement\"\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                          ],\n                        <DirtyTextField\n                                label={t(\"other_comments\")}\n                                style={{flex: 1}}\n                                multiline\n                                rowsMax={8}\n                                name=\"other_comments\"\n                            />]}\n              >\n\n              </Person>\n\n              {!loading && !newStudent && <Box my={3}>\n            <Divider />\n            </Box>}\n\n              <Box className={[classes.line, classes.composite]}>\n                {!loading && !newStudent && hasNeeds([NEEDS.send_email]) &&\n                <Tooltip style={{flex: 1}} title={t(\"send_grant_letter\")} aria-label={t(\"send_grant_letter\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      disabled={loadingCtx.loading}\n                      startIcon={<SendIcon/>}\n                      onClick={(e) => {\n                        sendGrantLetter();\n                      }}\n                  >\n                    {t(\"grant_letter\")}\n                  </Button>\n                </Tooltip>}\n\n                {!loading && !newStudent &&\n                <Tooltip style={{flex: 1}} title={t(\"export_grant_letter\")} aria-label={t(\"export_grant_letter\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      disabled={loadingCtx.loading}\n                      startIcon={<GetAppIcon/>}\n                      onClick={(e) => {\n                          if (loadingCtx.loading) return;\n                          loadingCtx.startLoading();\n                        StudentsDataService\n                            .downloadSubresource(currentStudent[\"id\"], 'grantLetter')\n                            .then(...errorHandler({snackbarSuccess: true}))\n                            .finally(() => {\n                                loadingCtx.stopLoading();\n                            })\n                      }}\n                  >\n                    {t(\"grant_letter\")}\n                  </Button>\n                </Tooltip>}\n              </Box>\n\n              <Box className={[classes.line, classes.composite]}>\n                {!loading && !newStudent && hasNeeds([NEEDS.send_email]) &&\n                <Tooltip style={{flex: 1}} title={t(\"send_enrolment_agreement\")}\n                                                     aria-label={t(\"enrolment_agreement\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<SendIcon/>}\n                      disabled={loadingCtx.loading}\n                      onClick={(e) => {\n                        sendEnrollmentAgreement();\n                      }}\n                  >\n                    {t(\"enrolment_agreement\")}\n                  </Button>\n                </Tooltip>}\n\n                {!loading && !newStudent && <Tooltip style={{flex: 1}} title={t(\"export_enrolment_agreement\")}\n                                                     aria-label={t(\"export_enrolment_agreement\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<GetAppIcon/>}\n                      disabled={loadingCtx.loading}\n                      onClick={(e) => {\n                          if (loadingCtx.loading) return;\n                          loadingCtx.startLoading();\n                        StudentsDataService\n                            .downloadSubresource(currentStudent[\"id\"], 'enrolmentAgreement')\n                            .then(...errorHandler({snackbarSuccess: true}))\n                            .finally(() => {\n                                loadingCtx.stopLoading();\n                            })\n                      }}\n                  >\n                    {t(\"enrolment_agreement\")}\n                  </Button>\n                </Tooltip>}\n              </Box>\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nAttendee.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nexport default Attendee;","import serviceFactory from \"./service-factory\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\n\nexport const sendGrantEmail = (id) => {  // todo abstract\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/emails/v1/grantEmail/${id}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        };\n\n","import serviceFactory from \"./service-factory\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\n\nexport const sendEnrollmentEmail = (id) => {  // todo abstract\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/emails/v1/enrolmentEmail/${id}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        };\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('students', 'guardians'))();\n\n","export const student_guardian_relations = [\n    'father',\n    'mother',\n    'grandfather',\n    'grandmother',\n    'brother',\n    'sister',\n    'uncle',\n    'aunt',\n    'cousin',\n    'legal_guardian',\n    'ss_agent',\n    'other'\n]","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport {MenuItem} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport StudentGuardianDataService from \"../_services/student_guardians.service\"\nimport {student_guardian_relations} from \"../_data/relations\"\nimport Person from \"./students.student.person.component\";\nimport GuardiansDataService from \"../_services/guardians.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport * as yup from \"yup\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {emptyGuardian} from \"../_data/empty_objects\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nfunction Guardian({ value, index, studentId, title, guardianId, deleteGuardianId, addGuardianId, deleteNewGuardian, newGuardian=false, ...other }) {\n  const { t } = useTranslation();\n  const errorHandler = useErrorHandler();\n\n  const [guardian, setGuardian] = useState(null);\n\n  const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = React.useState(false);\n  const [hasNeeds, NEEDS] = useNeeds();\n  useEffect(() => {\n    if (newGuardian) return;\n\n    GuardiansDataService\n            .getOne(guardianId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setGuardian(res[\"data\"]);\n\n                });\n  }, [guardianId])\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n        <Dialog\n        open={openConfirmDeleteDialog}\n        onClose={(e) => {setOpenConfirmDeleteDialog(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{t(\"delete_guardian_question\")}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">{t(\"action_cant_undone\")}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button onClick={(e) => {\n            GuardiansDataService\n                .delete(guardianId)\n                .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n                .then(function (res) {\n                  deleteGuardianId(guardianId);\n                });\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\" autoFocus>\n            {t(\"delete_guardian\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n\n\n              {hasNeeds([NEEDS.delete]) && <IconButton style={{float: 'right'}} onClick={(e) => {\n                if (!newGuardian) return setOpenConfirmDeleteDialog(true);\n                deleteNewGuardian();\n              }}>\n                <Tooltip title={t(\"delete\")} aria-label={t(\"delete\")}>\n                  <DeleteIcon/>\n                </Tooltip>\n              </IconButton>}\n\n\n              <Person currentPerson={newGuardian? emptyGuardian: guardian}\n                      studentId={studentId}\n                      newPerson={newGuardian}\n                      updateCurrentStudent={(x) => {\n                        if (!newGuardian) return setGuardian(x);\n                        StudentGuardianDataService.postWithId(studentId, x)\n                          .then(...errorHandler({snackbarSuccess: true}))\n                          .then(() => {\n                          addGuardianId(x);\n                        });\n                      }}\n                      patchService={GuardiansDataService}\n                      additionalValidation={{\n                        relation: yup.string().required(t(\"relation_required\"))}}\n                      additionalFields={\n                        [[<DirtyTextField\n                                label={t(\"relation\")}\n                                style={{flex: 1}}\n                                name=\"relation\"\n                                select\n                            >\n                          {student_guardian_relations.map((r) => (\n                                   <MenuItem key={r} value={r}>{t(r)}</MenuItem>\n                                ))}\n                                ))}\n\n                        </DirtyTextField>]]}\n              />\n\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nGuardian.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nexport default Guardian;","export const longer_8 = /^.{8,}$/;\nexport const shorter_64 = /^.{0,64}$/;\nexport const has_lowercase = /(?=.*[a-z])/;\nexport const has_uppercase = /(?=.*[A-Z])/;\nexport const has_digit = /(?=.*\\d)/;\nexport const has_special = /(?=.*[-/:-@[-`{-~]{1,})/;\nexport const no_plus = /^((?!\\+).)*$/;\n","import * as yup from \"yup\";\nimport {\n    has_digit,\n    has_lowercase,\n    has_special,\n    has_uppercase,\n    longer_8,\n    no_plus,\n    shorter_64\n} from \"../_data/password_regex\";\n\nexport const safe_password = (t) => (\n    yup.string()\n        .required(t(\"password_required\"))  // todo translate\n        .matches(longer_8, t(\"longer_8\"))\n        .matches(shorter_64, t(\"shorter_64\"))\n        .matches(has_lowercase, t(\"has_lowercase\"))\n        .matches(has_uppercase, t(\"has_uppercase\"))\n        .matches(has_digit, t(\"has_digit\"))\n        .matches(has_special, t(\"has_special\"))\n)\n\nexport const safe_password_repetition = (t) => (\n    yup.string()\n        .required(t(\"password_required\"))\n        .oneOf([yup.ref('password'), null], t(\"passwords_unmatched\"))\n)\n\n\nconst safe_username_email = (t) => (\n    yup.string()\n        .required(t(\"email_required\"))\n        .email(t(\"invalid_email\"))\n        .matches(no_plus, t(\"no_plus\"))\n)\n\nexport const safe_username = safe_username_email;\nexport const safe_email = safe_username_email;\n\nexport const one_of = (t, options) => yup.string().required(t('field_required'))\n                                .test(  // one of the array\n                                  'oneOfRequired',\n                                  `${t(\"one_of\")}: ${options.toString()}`,\n                                  v => options.includes(v)\n                                )","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport AccountBalanceIcon from '@material-ui/icons/AccountBalance';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport SendIcon from '@material-ui/icons/Send';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport clsx from 'clsx';\nimport AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ReceiptIcon from '@material-ui/icons/Receipt';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport EuroIcon from '@material-ui/icons/Euro';\nimport PaymentsDataService from '../_services/payments.service';\nimport {sendReceiptEmail} from '../_services/emailsReceipts.service';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Box from \"@material-ui/core/Box\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {Button, DialogActions, MenuItem} from \"@material-ui/core\";\nimport {useNormik} from \"../_helpers/normik\";\nimport * as yup from \"yup\";\nimport {one_of} from \"../_yup/validators\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport {payment_methods} from \"../_data/payment_methods\"\nimport {useNeeds} from \"../_helpers/needs\";\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    maxWidth: '100%',\n    backgroundColor: theme.palette.type === 'dark'? '#575757': null\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: theme.palette.secondary.main,\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nexport default function PaymentCard({ payment, updatePayment, deletePayment, newPayment=false, addPaymentId, student_id} ) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(newPayment);\n  const errorHandler = useErrorHandler();\n  const [hasNeeds, NEEDS] = useNeeds();\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  const formik = useNormik(!newPayment, {\n        initialValues: payment,\n        validationSchema: yup.object({method: one_of(t, payment_methods),\n                                        quantity: yup.number().required(t(\"import_required\")),\n                                        date: yup.date().required(t(\"date_required\"))}),  // todo\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (Object.keys(changedValues).length > 0){\n                setStatus();\n\n                if (newPayment) {\n                    PaymentsDataService\n                        .post({...changedValues, student_id: student_id})\n                        .then(...errorHandler({snackbarSuccess:true}))\n                        .then(function (res) {\n                            addPaymentId(res['id']);\n                            }).catch(function (err){\n                                setStatus(true);\n                            })\n                        .finally(() => {\n                                setSubmitting(false);\n                        });\n                } else {\n                    PaymentsDataService.patch({\n                      id: payment[\"id\"],    // id\n                      body: changedValues,\n                      initial_values: payment  // todo doesnt normik do this?\n                  }).then(...errorHandler({snackbarSuccess:true}))\n                        .then(function (patched_body) {\n                                formik.resetForm(patched_body);\n                                updatePayment(patched_body['id'], patched_body);\n                            }).catch(function (err){\n                                setStatus(true);\n                    })\n                        .finally(() => {\n                                setSubmitting(false);\n                        });\n\n                }\n\n                    } else {\n                setSubmitting(false);\n            }\n\n        }\n    });\n\n\n  return (\n      <Box my={2}>\n    <Card className={classes.root}>\n      <CardHeader\n        avatar={\n          <Tooltip title={payment[\"method\"] === 'cash'? t('has_paid_cash'):\n                payment[\"method\"] === 'bank-transfer' ? t('tooltip-bank-transfer'):\n                    payment[\"method\"] === 'bank-direct-debit'? t('tooltip-bank-direct-debit'):\n                        t('other-payment-method')\n            }>\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            {payment[\"method\"] === 'cash'? <EuroIcon/>:\n                payment[\"method\"] === 'bank-transfer'? <AccountBalanceWalletIcon/>:\n                    payment[\"method\"] === 'bank-direct-debit'? <AccountBalanceIcon/>:\n                    <MoreHorizIcon/>\n            }\n          </Avatar>\n        </Tooltip>\n\n        }\n        action={\n         hasNeeds([NEEDS.delete]) && <Tooltip title={t(\"delete\")} aria-label={t(\"delete\")}>\n          <IconButton onClick={(e) => {deletePayment(payment['id'])}}>\n            <DeleteIcon />\n          </IconButton>\n        </Tooltip>\n        }\n        title={newPayment? t('new_payment') : `${t(\"has_paid\")} ${payment['quantity']}€`}\n        subheader={payment['date']}\n      />\n\n        {!newPayment && <CardActions disableSpacing>\n            {hasNeeds([NEEDS.paymentReceipts]) &&\n            <Tooltip title={t(\"export_receipt\")} aria-label={t(\"export_receipt\")}>\n          <IconButton aria-label={t(\"export_receipt\")} onClick={(e) => {\n              PaymentsDataService\n                  .downloadSubresource(payment[\"id\"], 'receipt')\n                  .then(...errorHandler({snackbarSuccess:true}))\n                  .then(()=>null)\n          }}>\n            <ReceiptIcon />\n          </IconButton>\n        </Tooltip>}\n            {hasNeeds([NEEDS.paymentReceipts, NEEDS.send_email]) &&\n        <Tooltip title={t(\"send_receipt\")} aria-label={t(\"send_receipt\")}>\n          <IconButton aria-label={t(\"send_receipt\")} onClick={(e) => {\n              sendReceiptEmail(payment[\"id\"])\n                  .then(...errorHandler({snackbarSuccess:true}))\n                  .then(()=>null);\n          }}>\n            <SendIcon />\n          </IconButton>\n        </Tooltip>}\n        <IconButton\n          className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n          })}\n          onClick={handleExpandClick}\n          aria-expanded={expanded}\n          aria-label=\"show more\"\n        >\n          <ExpandMoreIcon />\n        </IconButton>\n      </CardActions>}\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <CardContent>\n          <Box>\n            {payment === null\n                ?\n                (\n\n                    <Box>\n                        {\n                            [\"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0}>\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })\n                        }\n                    </Box>\n                )\n                :\n                (\n                        <form onSubmit={formik.handleSubmit}>\n                                        <DirtyTextField\n                                            label={t(\"id\")}\n                                            name=\"id\"\n                                            disabled\n                                            className={classes.line}\n                                            formik={formik}\n                                            />\n\n                                        <Box className={[classes.line, classes.composite]}>\n                                            <DirtyTextField\n                                                label={t(\"method\")}\n                                                style={{flex: 1}}\n                                                formik={formik}\n                                                name=\"method\"\n                                                select>\n                                                { payment_methods.map(\n                                                    (method) => (\n                                                        <MenuItem key={method} value={method}>{t(method)}</MenuItem>\n                                                    )\n                                                )\n                                                }\n                                            </DirtyTextField>\n                                            <DirtyTextField\n                                                label={t(\"import\")}\n                                                formik={formik}\n                                                type=\"number\"\n                                                style={{flex: 1}}\n                                                name=\"quantity\"\n                                                InputProps={{\n                                                    endAdornment: <InputAdornment position=\"end\">€</InputAdornment>,\n                                                  }}\n                                            />\n                                            <DirtyTextField\n                                                label={t(\"date\")}\n                                                formik={formik}\n                                                type=\"date\"\n                                                style={{flex: 1}}\n                                                name=\"date\"\n                                                InputLabelProps={{shrink: true}}/>\n                                        </Box>\n\n                             <Box className={[classes.line, classes.composite]}>\n                                            <DirtyTextField\n                                                label={t(\"concept\")}\n                                                formik={formik}\n                                                style={{flex: 1}}\n                                                multiline\n                                                rowsMax={8}\n                                                name=\"concept\"\n                                            />\n                                        </Box>\n\n\n                                        <DialogActions>\n                                            <Button\n                                                type=\"button\"\n                                                className=\"outline\"\n                                                onClick={formik.handleReset}\n                                                disabled={!formik.dirty || formik.isSubmitting}\n                                            >\n                                                {t(\"reset\")}\n                                            </Button>\n                                            {hasNeeds([NEEDS.patch]) && <Button type=\"submit\" disabled={!formik.dirty || formik.isSubmitting}>\n                                                {newPayment ? t(\"create\") : t(\"save\")}\n                                            </Button>}\n                                        </DialogActions>\n                                    </form>\n                )\n\n            }\n        </Box>\n        </CardContent>\n      </Collapse>\n    </Card></Box>\n  );\n}\n","import serviceFactory from \"./service-factory\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\n\nexport const sendReceiptEmail = (id) => {  // todo abstract\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/emails/v1/paymentReceipt/${id}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        };\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PropTypes from \"prop-types\";\nimport React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport PaymentsDataService from \"../_services/payments.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport PaymentCard from \"./students.student.payments.payment.component\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport PersonAddIcon from \"@material-ui/icons/PersonAdd\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst getDefaultValues = () => {\n    const date = new Date();\n    const dd = date.getDate();\n    const mm = date.getMonth() + 1; //Month from 0 to 11\n    const yyyy = date.getFullYear();\n    return {'id': null, 'date': `${yyyy}-${mm<=9 ? '0' + mm : mm}-${dd <= 9 ? '0' + dd : dd}`, 'quantity': null, 'concept': null, 'method': null}\n}\nconst useStyles = makeStyles((theme) => ({\n\n  actionIcon: {\n    float: 'right'\n  },\n  newLine: {\n    width: '100%',\n       marginTop: theme.spacing(1),\n        display: \"flex\",\n    flexDirection: \"column\"\n  }\n}));\n\nfunction Payments({ children, value, index, title, paymentIds, deletePaymentFromStudent, addPaymentId, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const loading = paymentIds === null;\n\n  const [payments, setPayments] = useState([]);\n  const [newPaymentCard, setNewPaymentCard] = useState(false);\n\n  useEffect(()=>{\n    setNewPaymentCard(false);\n  }, [payments])\n\n  const updatePayment = (id, body) => {\n    setPayments(payments.map(payment => {\n      if (payment.id !== id) return payment;\n      return body;\n    }))\n  }\n  const [hasNeeds, NEEDS] = useNeeds();\n\n  const deletePayment = (id) => {\n    PaymentsDataService.delete(id)\n        .then(...errorHandler({snackbarSuccess:true}))\n        .then(function (r) {\n             deletePaymentFromStudent(id);\n        });\n  }\n\n  useEffect(() => {\n    if (paymentIds === null) return;\n\n    if (paymentIds.length === 0){\n      setPayments([]);\n    } else {\n      PaymentsDataService\n            .getMany(paymentIds)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setPayments(res.map(res => res[\"data\"]).sort((p1, p2) => p1.date.localeCompare(p2.date)));\n                });\n    }\n  }, [paymentIds])\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>  {// todo simplify everywhere\n        } <Box px={2}>\n\n              {loading?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n              hasNeeds([NEEDS.post]) && <Tooltip className={classes.actionIcon} title={t(\"new_payment\")} aria-label={t(\"new_payment\")}>\n                <IconButton onClick={(e) => { setNewPaymentCard(true); }}>\n                  <AddCircleIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <div className={classes.newLine}>\n\n              {\n                payments && payments.map(payment =>\n                    (<PaymentCard payment={payment} key={payment['id']} updatePayment={updatePayment} deletePayment={deletePayment}/>)\n                )\n              }\n\n              {newPaymentCard &&\n                <PaymentCard payment={getDefaultValues()}\n                             updatePayment={updatePayment}\n                             deletePayment={(_) => {setNewPaymentCard(false)}}\n                            newPayment={true}\n                             student_id={student_id}\n                addPaymentId={addPaymentId}/>\n              }\n\n              {loading &&\n                <Skeleton width=\"100%\" height=\"250px\"/>  // todo we can do better\n              }\n\n              {!loading && payments.length === 0 && !newPaymentCard &&\n                <Typography>{t(\"no_payments\")}</Typography>\n              }\n              </div>\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nPayments.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nexport default Payments;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('students', 'courses'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses'))();\n\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {useTranslation} from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: '2px 4px',\n    display: 'flex',\n    alignItems: 'center',\n    width: '100%',\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1,\n  },\n  iconButton: {\n    padding: 10,\n  }\n}));\n\nexport default function SearchBar({label, searchTitle, onChange, onSearch}) {\n  const classes = useStyles();\n\n  const { t } = useTranslation();\n\n  return (\n    <Paper className={classes.root}>\n      <InputBase\n        className={classes.input}\n        placeholder={t(\"search\")+ \" \" + label}\n        inputProps={{ 'aria-label': 'search ' + label}}\n        value={searchTitle}\n        onChange={onChange}\n        onKeyPress={(e) =>\n        { if(e.key === 'Enter'){\n            onSearch();\n            e.preventDefault();\n        } }}\n\n      />\n      <IconButton\n          type=\"submit\"\n          className={classes.iconButton}\n          aria-label=\"search\"\n            onClick={onSearch}>\n        <SearchIcon/>\n      </IconButton>\n    </Paper>\n  );\n}","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport StudentsCourseDataService from \"../_services/student_courses.service\";\nimport CoursesDataService from \"../_services/courses.service\"\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport {\n    AppBar,\n    Dialog,\n    ListItemSecondaryAction,\n    Slide\n} from \"@material-ui/core\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport SearchBar from \"./searchbar.component\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n        overflow: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1\n    },\n    box: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: '30px'\n    },\n    appBar: {\n    position: 'relative',\n  },\n  newLine: {\n    width: '100%',\n       marginTop: theme.spacing(1),\n        display: \"flex\",\n    flexDirection: \"column\"\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1,\n  }, actionIcon: {\n      float: 'right'\n    }\n}));\n\nclass CloseIcon extends React.Component {\n    render() {\n        return null;\n    }\n}\n\nfunction Courses({ children, history, value, dataService, index, title, courseIds, deleteCourseFromStudent, addCourseId, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const loading = courseIds === null;\n\n  const [courses, setCourses] = useState([]);\n  const [allCourses, setAllCourses] = useState(null);\n  const [newCourse, setNewCourse] = useState(false);\n  const handleClose = () => {\n    setNewCourse(false);\n  };\n\n  useEffect(()=>{\n    setNewCourse(false);\n  }, [courses])\n\n\n   const [searchTerm, setSearchTerm] = useState('');\n   const [page, setPage] = useState(1);\n   const [count, setCount] = useState(0);\n\n   function search() {\n       if (loading || !newCourse) return;\n\n        CoursesDataService\n            .getAll({name: 'name', value: searchTerm}, page, ['name', 'description', 'id'])\n            .then(...errorHandler({}))\n            .then(res => {\n                setAllCourses(res[\"data\"].filter(x => !(courseIds.includes(x['id']))));\n                setCount(res[\"_pagination\"][\"totalPages\"]);\n            });\n    }\n\n    useEffect(search, [page, setAllCourses, loading, newCourse]);\n\n   const handlePageChange = (event, value) => {\n        setPage(value);\n    };\n\n   const [hasNeeds, NEEDS] = useNeeds();\n\n  const deleteStudentCourse = (id) => {\n    dataService\n        .delete(student_id, id)\n        .then(...errorHandler({snackbarSuccess:true}))\n        .then(function (r) {\n             deleteCourseFromStudent(id);\n        });\n  }\n\n  useEffect(() => {\n    if (courseIds === null) return;\n\n    if (courseIds.length === 0){\n      setCourses([]);\n    } else {\n      CoursesDataService\n            .getMany(courseIds)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setCourses(res.map(res => res[\"data\"]));\n                });\n    }\n  }, [courseIds])\nconst onChangeSearchTerm = (e) => {\n        setSearchTerm(e.target.value);\n    };\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>  {// todo simplify everywhere\n        } <Box px={2}>\n\n            <Dialog fullScreen open={newCourse} onClose={handleClose} TransitionComponent={Transition}>\n        <AppBar className={classes.appBar} color=\"secondary\">\n          <Toolbar>\n            <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\n              <CloseIcon />\n            </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n                {t(\"enroll_to_course\")}\n            </Typography>\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\n                {t(\"cancel\")}\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Box className={classes.box} m={3}>\n                <SearchBar\n                    label={t(\"courses\")}\n                    value={searchTerm}\n                    onChange={onChangeSearchTerm}\n                    onSearch={search}\n                />\n\n                <Box my={2}>\n                    <Pagination\n                        className={classes.pagination}\n                        count={count}\n                        page={page}\n                        size=\"small\"\n                        showFirstButton\n                        showLastButton\n                        siblingCount={1}\n                        boundaryCount={1}\n                        color=\"primary\"\n                        onChange={handlePageChange}\n                    />\n                </Box>\n            <List className={classes.list}>\n                {allCourses && allCourses.map((course) => (\n                    <div key={course[\"id\"]}>\n                        <ListItem key={course[\"id\"]} button\n                                  onClick={() => {\n                                      if (window.confirm(t(\"confirm_enroll_to_course\"))){  // todo\n                                        dataService\n                                            .postWithId(student_id, course['id'])\n                                            .then(...errorHandler({snackbarSuccess: true}))\n                                            .then((body) => {\n                                                addCourseId(course['id']);\n                                                handleClose();\n                                            })\n                                      }\n                                  }}>\n\n                            <ListItemText id=\"name\" primary={course['name']} secondary={course['description']}/>\n\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n            </Box>\n\n      </Dialog>\n\n              {loading?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n              hasNeeds([NEEDS.post]) && <Tooltip className={classes.actionIcon} title={t(\"enroll_to_course\")} aria-label={t(\"new_payment\")}>\n                <IconButton onClick={(e) => {\n                    if (allCourses === null) {\n                        search();\n                    }\n                    setNewCourse(true);\n                }}>\n                  <AddCircleIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <div className={classes.newLine}>\n\n                  <List className={classes.list}>\n                {courses && courses.map((course) => (\n                    <div key={course[\"id\"]}>\n                        <ListItem key={course[\"id\"]} button onClick={(e) => {\n                            history.push('/courses?id='+course['id']);\n                        }}>\n                            <ListItemText id=\"name\" primary={course.name} secondary={course.description}/>\n                            { hasNeeds([NEEDS.delete]) && <ListItemSecondaryAction>\n                                <IconButton onClick={(e) => {\n                                    if (window.confirm(t(\"confirm_unenroll_to_course\"))) deleteStudentCourse(course['id'])\n                                }}>\n                                    <DeleteIcon/>\n                                </IconButton>\n                            </ListItemSecondaryAction>}\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n\n\n\n              {loading &&\n                <Skeleton width=\"100%\" height=\"250px\"/>  // todo we can do better\n              }\n\n              {!loading && courses.length === 0 && !newCourse &&\n                <Typography>{t(\"no_courses\")}</Typography>\n              }\n              </div>\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default Courses;\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('schedules'))();\n\n","import Box from \"@material-ui/core/Box\";\nimport React, {useEffect, useState} from \"react\";\nimport SchedulesDataService from \"../_services/schedules.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport styled from \"@emotion/styled\";\nimport {useTheme} from '@material-ui/core/styles';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        margin: theme.spacing(1),\n    },\n    calendar: {\n        margin: theme.spacing(2)\n    }\n\n}));\n\nexport const eventFromSchedule = (theme, schedule) => {\n    return {\n        daysOfWeek: [schedule['day_week']],\n        title: schedule['course']['name'],\n        groupId: [schedule['id']],\n        startTime: schedule['start_time'],\n        endTime: schedule['end_time'],\n        color: schedule[\"is_base\"] ? theme.palette.secondary.main : theme.palette.secondary.light,\n        textColor: schedule[\"is_base\"] ? theme.palette.secondary.contrastText : theme.palette.secondary.contrastText,\n        extendedProps: {\n            schedule: schedule\n        },\n    }\n}\n\nfunction Scheduler({snapDuration = '00:15', scheduleIds, onEventClick, onEventResize, onEventDrop, editable=false, ...other}) {\n    const errorHandler = useErrorHandler();\n    const theme = useTheme();\n    const StyleWrapper = styled.div`\n      .fc-button, .fc-button.fc-button-primary {\n        background: ${theme.palette.primary.main};\n        color: ${theme.palette.primary.contrastText};\n        border-color: ${theme.palette.primary.main};\n        background-image: none;\n    }\n    .fc-button:enabled:hover {\n        background: ${theme.palette.primary.dark};\n        color: ${theme.palette.primary.contrastText};\n        border-color: ${theme.palette.primary.dark};\n        background-image: none;\n    }\n    `\n\n    const [schedules, setSchedules] = useState(null);\n    const loading = scheduleIds === null;\n\n    // todo right click menu to delete\n\n\n    useEffect(() => {\n        if (scheduleIds === null) return;\n\n        if (scheduleIds.length === 0) {\n            setSchedules([]);\n        } else {\n            SchedulesDataService\n                .getMany(scheduleIds)\n                .then(...errorHandler({}))\n                .then(function (res) {\n                    setSchedules(res.map(res => res[\"data\"]).map(schedule => {\n                        return eventFromSchedule(theme, schedule);\n                    }));\n                });\n        }\n    }, [scheduleIds, theme]);\n    const withScheduleInfo = (method, info) => {\n        return method(info,\n            info.event['start'].getDay(),\n            info.event['start'].toLocaleTimeString('en-US', {hour12: false}),\n            info.event['end'].toLocaleTimeString('en-US', {hour12: false}),\n            info.event.extendedProps[\"schedule\"]);\n    }\n\n    return (\n        <Box p={2} style={{height: \"100%\"}}>\n            {loading ? <Skeleton variant=\"rect\" width=\"100%\" height=\"100%\"/>\n                :\n                <StyleWrapper style={{height: \"100%\"}}>\n                    <FullCalendar\n                        plugins={[timeGridPlugin, interactionPlugin]}\n                        initialView=\"timeGridWeek\"\n                        height=\"100%\"\n                        firstDay={1}\n                        editable={editable}\n                        buttonText={{\n                            prev:     '<', // <\n                              next:     '>', // >\n                              prevYear: '<<',  // <<\n                              nextYear: '>>',  // >>\n                              today:    'today',\n                              month:    'month',\n                              week:     'week',\n                              day:      'day'\n                        }}\n                        selectable={true}\n                        selectMirror={true}\n                        dayMaxEvents={true}\n                        weekends={true}\n                        snapDuration={snapDuration}\n                        events={schedules}\n                        eventAdd={function () {\n                        }}\n                        eventChange={function (clickInfo) {\n                            // const schedule = clickInfo.event.extendedProps[\"schedule\"];\n                            // if (schedule[\"is_base\"] === true) return enqueueSnackbar(t(\"cant_remove_schedule\"), {'variant': 'warning'});\n                        }}\n                        eventRemove={function () {\n                        }}\n                        select={function (selectInfo) {\n                            // todo proper prompts\n                            /*let title = prompt('Please enter a new title for your event')\n                            let calendarApi = selectInfo.view.calendar\n\n                            calendarApi.unselect() // clear date selection\n\n                            if (title) {\n                                calendarApi.addEvent({\n                                    id: 24,\n                                    title,\n                                    start: selectInfo.startStr,\n                                    end: selectInfo.endStr,\n                                    allDay: selectInfo.allDay\n                                })\n                            }*/\n                        }}\n                        eventContent={function () {\n                        }} // custom render function\n                        eventClick={onEventClick}\n                        eventTimeFormat={{\n                            hour: '2-digit',\n                            minute: '2-digit',\n                            hour12: false\n                        }}\n                        eventResize={(info) => (withScheduleInfo(onEventResize, info))}\n                        eventDrop={(info) => (withScheduleInfo(onEventDrop, info))}\n                    />\n                </StyleWrapper>}\n        </Box>\n    );\n}\n\nexport default Scheduler;","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport SchedulesDataService from \"../_services/schedules.service\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useSnackbar} from \"notistack\";\nimport Scheduler, {eventFromSchedule} from \"./scheduler.component\";\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n    calendar: {\n      margin: theme.spacing(2)\n    }\n\n}));\n\n\nfunction Schedule({ value, index, title, scheduleIds, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const {enqueueSnackbar, closeSnackbar} = useSnackbar();\n  const errorHandler = useErrorHandler();\nconst theme = useTheme();\n   const eventChanged = (info, day_week, start_time, end_time, schedule) => {\n       const newEvent = info.event;\n       let body = {};\n        body['day_week'] = day_week;\n        body['start_time'] = start_time;\n        body['end_time'] = end_time;\n\n        if (schedule[\"is_base\"]) {\n            body['course_id'] = schedule[\"course_id\"];\n            body['student_id'] = student_id;\n            body['is_base'] = false;\n            SchedulesDataService\n                    .post(body)\n                    .then(...errorHandler({errorOut: true, snackbarSuccess: true}))\n                    .then(function (res) {\n                        let calendarApi = info.view.calendar;\n                        newEvent['is_base'] = true;  // todo why needed\n                        calendarApi.addEvent(eventFromSchedule(theme, res));\n                        info.revert();\n                    }).catch(function(err){\n                        info.revert();\n            });\n\n        } else {\n            SchedulesDataService\n                    .patch({id: schedule['id'],\n                                                body: body,\n                                                initial_values: schedule})\n                    .then(...errorHandler({errorOut: true, snackbarSuccess: true}))\n                    .then(function (res) {\n                        /*setSchedules(schedules.map(payment => {\n                          if (payment.id !== res['id']) return payment;\n                          return res;\n                        }))*/\n                    }).catch(function (err){\n                        info.revert();\n                    });\n        }\n    }\n  return (\n    <div\n      role=\"tabpanel\"\n      className={classes.root}\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n        style={{height: '100%', flex: 1, minHeight: \"70vh\" }}\n\n    >\n        <Scheduler\n            onEventClick={function (clickInfo) {\n                           const schedule = clickInfo.event.extendedProps[\"schedule\"];\n                           if (schedule[\"is_base\"] === true) return enqueueSnackbar(t(\"cant_remove_schedule\"), {'variant': 'warning'});\n                           if (window.confirm(t(\"sure_delete_event\"))) {\n                               SchedulesDataService\n                                   .delete(schedule['id'])\n                                   .then(...errorHandler({snackbarSuccess: true}))\n                                   .then(function (res) {\n                                       clickInfo.event.remove();\n                                   });\n\n                           }\n                       }}\n            onEventDrop={eventChanged}\n            onEventResize={eventChanged}\n            scheduleIds={scheduleIds}\n            editable={true}\n        />\n    </div>\n  );\n}\n\nexport default Schedule;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport Attendee from \"./students.student.attendee.component\";\nimport Guardian from \"./students.student.guardian.component\";\nimport StudentsDataService from \"../_services/students.service\";\nimport Payments from \"./students.student.payments.component\";\nimport Courses from \"./students.student.courses.component\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport Schedule from \"./students.student.schedule.component\";\nimport StudentsCourseDataService from \"../_services/student_courses.service\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`,\n  };\n}\n\n\nexport default function Student({setNewStudent,newStudent,addStudentId, currentStudentId, deleteStudent, ...props}) {\n\n  const loading = currentStudentId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [student, setStudent] = useState(null);  // todo rename to student\n  const [newGuardian, setNewGuardian] = useState(false);\n    const [hasNeeds, NEEDS] = useNeeds();\n\n\n  useEffect(() => {\n    if (loading) return setStudent(null);\n    StudentsDataService\n            .getOne(currentStudentId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setStudent(res[\"data\"]);\n                });\n  }, [currentStudentId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentStudentId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };\n\n\n\n  const guardians = student === null? []: student.guardians;\n    // todo maybe tabs with or only with icons\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"attendee\")} {...a11yProps(0)} />\n\n                    { !newStudent && hasNeeds([NEEDS.schedules]) &&\n                  <Tab label={t(\"schedules\")} {...a11yProps(1)} />}\n                 { !newStudent  && hasNeeds([NEEDS.payments]) &&  <Tab label={t(\"payments\")} {...a11yProps(2)} />}\n                 { !newStudent  && hasNeeds([NEEDS.courses]) &&  <Tab label={t(\"courses\")} {...a11yProps(3)} />}\n\n                  {\n                  (!newStudent && guardians  && hasNeeds([NEEDS.guardians]) ) && guardians.map((contact, index) => (\n                  <Tab key={t(\"contact\") + \" \" + (index+1)} label={t(\"contact\") + \" \" + (index+1)} {...a11yProps(index+4)} />\n                      ))}\n\n\n                  {\n                    (!newStudent && newGuardian) &&\n                        <Tab key={t(\"new_guardian\")} label={t(\"new_guardian\")} {...a11yProps(4+guardians.length)} />\n                  }\n\n\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n            <Attendee value={value}\n                      index={0}\n                      setNewStudent={setNewStudent}\n                      dir={theme.direction}\n                      newStudent={newStudent}\n                      title={t(\"attendee\")}\n                      currentStudent={student}\n                      addStudentId={addStudentId}\n                      patchService={StudentsDataService}\n                      updateCurrentStudent={setStudent}\n                      deleteStudent={deleteStudent}\n                      addNewGuardian={() => {\n                        setNewGuardian(true);\n                        setValue(4+guardians.length);\n                      }}\n            />\n\n              {hasNeeds([NEEDS.schedules]) && <Schedule value={value}\n                         index={1}\n                         className={classes.tab}\n                         dir={theme.direction}\n                         title={t(\"attendee\")}\n                         scheduleIds={student === null ? null : student['schedules']}\n                         student_id={currentStudentId}\n              />}\n              {hasNeeds([NEEDS.payments]) && <Payments value={value}\n                         index={2}\n                         paymentIds={student === null ? null : student.payments}\n                         addPaymentId={(payment_id) => {\n                             setStudent({...student, payments: [...student.payments, payment_id]})\n                         }}\n                         student_id={currentStudentId}\n                         deletePaymentFromStudent={(payment_id) => {\n                             setStudent({\n                                 ...student,\n                                 payments: student.payments.filter((p) => p !== payment_id)\n                             });\n                         }}\n              />}\n\n              {hasNeeds([NEEDS.courses]) && <Courses value={value}\n                        index={3}\n                        dataService={StudentsCourseDataService}\n                        history={props.history}\n                        courseIds={student === null ? null : student['courses']}\n                        addCourseId={(course_id) => {\n                            setStudent({\n                                ...student,\n                                courses: [...student['courses'], course_id]\n                            })\n                        }}\n                        student_id={currentStudentId}\n                        deleteCourseFromStudent={(course_id) => {\n                            setStudent({\n                                ...student,\n                                courses: student['courses'].filter((c) => c !== course_id)\n                            });\n                        }}\n              />\n              }\n\n            {\n              guardians && hasNeeds([NEEDS.guardians]) && guardians.map((guardian, index) => (\n                  <Guardian value={value}\n                            index={index+4}\n                            key={guardian}\n                            dir={theme.direction}\n                            guardianId={guardian}\n                            deleteGuardianId={(id) => {\n                              setStudent({...student, guardians: student['guardians'].filter((gId) => gId !== id)});\n                              setValue(0);\n                            }}\n            />\n                  ))}\n\n                  <Guardian value={value}\n                        index={4+guardians.length}\n                        dir={theme.direction}\n                        newGuardian={true}\n                        deleteNewGuardian={() => {\n                            setNewGuardian(false);\n                            setValue(0);\n                        }}\n                            studentId={currentStudentId}\n                        addGuardianId={(id) => {\n                            setNewGuardian(false);\n                            setStudent({...student, guardians: [...student.guardians, id]});\n                            setValue(4+guardians.length);\n                        }\n                        }\n                        deleteGuardianId={(id) => {\n                            setStudent({...student, guardians: student['guardians'].filter((gId) => gId !== id)});\n                            setValue(0);\n                        }}\n              />\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React from \"react\";\n\nconst themeContext = React.createContext({theme: null, switchTheme: () => {}, label: null}); // Create a context object\n\nexport {\n  themeContext // Export it so it can be used by other Components\n};","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Chip, CircularProgress} from \"@material-ui/core\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {loadingContext} from \"../_context/loading-context\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: '2px 4px',\n    display: 'flex',\n    alignItems: 'center',\n    flexWrap: 'wrap'\n  },\n}));\n\nexport default function ExportSearchChip({searchTermField=\"full_name\", searchTerm=null, page=null, dataService, exportAll=false, getFilters=null}) {\n  const classes = useStyles();\n\n  const {t} = useTranslation();\n  const errorHandler = useErrorHandler();\n  const loadingCtx = React.useContext(loadingContext);\n\n  return (\n      <Tooltip title={t(exportAll ? \"export_all_csv\" : \"export_results_csv\")}\n               aria-label={t(exportAll ? \"export_all_csv\" : \"export_results_csv\")}>\n\n        <Chip variant=\"outlined\"\n              color=\"primary\"\n              size=\"small\"\n              disabled={loadingCtx.loading}\n              avatar={<Avatar>csv</Avatar>}\n              label={t(exportAll ? \"export_all\" : \"export\")}\n              onClick={() => {\n                if (loadingCtx.loading) return;\n\n                loadingCtx.startLoading();\n                dataService\n                    .downloadCsv(searchTermField, searchTerm,\n                        exportAll ? \"*\" : page,\n                        getFilters === null ? {} : getFilters(),\n                        exportAll)\n                    .then(...errorHandler({}))\n                    .finally(() => {\n                      loadingCtx.stopLoading();\n                    })\n              }}/>\n      </Tooltip>\n\n  );\n}","import React, {useEffect, useState} from \"react\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport List from \"@material-ui/core/List\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport SearchBar from './searchbar.component'\nimport Box from \"@material-ui/core/Box\";\nimport {useTranslation} from \"react-i18next\";\nimport {Accordion, AccordionDetails, AccordionSummary, Chip, ListItemSecondaryAction} from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ExportSearchChip from \"./ExportSearchChip.component\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flex: 1,\n        overflow: 'auto',\n        display: \"flex\",\n        flexDirection: \"column\"\n    },\n    list: {\n        overflow: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1,\n        minHeight: '150px'\n    },\n    searchAndFilters: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: theme.spacing(3)\n    },\n    chip: {\n        margin: theme.spacing(2)\n    },\n    avatar: {},\n    selectedAvatar: {\n        backgroundColor: theme.palette.primary.dark\n    },\n    chips: {\n        flexWrap: 'wrap',\n        '& > *': {\n            margin: theme.spacing(0.5),\n        },\n        heading: {\n            fontSize: theme.typography.pxToRem(15),\n            fontWeight: theme.typography.fontWeightRegular,\n        },\n    }\n}));\n\nconst ItemsList = ({setCurrentItemId, chips=[], currentItemId, items, setItems, displayNameField=\"full_name\",\n                       usableFilters=[], defaultSearchBy=\"full_name\", searchByOptions=[\"full_name\"],\n                        dataService, searchBarLabel, exportPage=true, exportItem=true, exportAllPages=true}) => {\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [filters, setFilters] = useState(usableFilters.reduce((map, f) => {\n        map[f.name] = f.initialValue;\n        return map;\n        }, {})\n    );\n    const [searchBy, setSearchBy] = useState(defaultSearchBy);\n\n    const {t} = useTranslation();\n\n    const [page, setPage] = useState(1);\n    const [count, setCount] = useState(0);\n    const errorHandler = useErrorHandler();\n\n    const classes = useStyles();\n\n    const onChangeSearchTerm = (e) => {\n        setSearchTerm(e.target.value);\n    };\n\n    const resetSearchBy = () => {\n        setSearchBy(defaultSearchBy);\n    }\n\n    function getFilters(){\n        return Object.fromEntries(Object.entries(filters).filter(([k,v]) => (v !== null)))\n    }\n\n    function search(page) {\n        dataService\n            .getAll({name: searchBy, value: searchTerm}, page,\n               [...new Set(['id', displayNameField])], getFilters())\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                setItems(res[\"data\"]);\n                setCount(res[\"_pagination\"][\"totalPages\"]);\n            });\n    }\n\n    // we don't want the search to trigger for each searchTerm change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => {\n        if (page === 1) {\n            search(); // no need to change page, since we are at page 1\n        } else {\n            setPage(1);  // will trigger search due tot the effect below\n        }\n    }, [filters]);  // todo\n\n    useEffect(search, [page, searchBy]);\n\n    const handlePageChange = (event, value) => {\n        setPage(value);\n    };\n\n    return (\n        <Box className={classes.root}>\n            <Box className={classes.searchAndFilters}>\n                <SearchBar\n                    label={t(searchBarLabel)}\n                    value={searchTerm}\n                    onChange={onChangeSearchTerm}\n                    onSearch={() => {\n                        if (page === 1){\n                            search();\n                        } else {\n                            setPage(1);  // search will be triggered\n                        }\n\n                    }}\n                />\n\n                <Accordion>\n                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\n                        <Typography className={classes.heading}>{t(\"filters_actions\")}</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                        <Box className={classes.chips}>\n\n                            {exportPage && Array.isArray(items) && items.length > 0 && <ExportSearchChip\n                                searchTerm={searchTerm}\n                                page={page}\n                                searchTermField={searchBy}\n                                dataService={dataService}\n                                getFilters={getFilters}\n                            />}\n                            {exportAllPages && Array.isArray(items) && items.length > 0 &&  <ExportSearchChip\n                                searchTerm={searchTerm}\n                                page={page}\n                                dataService={dataService}\n                                searchTermField={searchBy}\n                                exportAll={true}\n                                getFilters={getFilters}\n                            />}\n\n                            {chips.map((chip) => (\n                                chip\n                            ))}\n\n                            ·\n\n                            {searchByOptions.map(option => (\n                                <Tooltip key={option} title={`${t(\"search_by\")} ${t(option)}`}>\n                                    <Chip size=\"small\"\n                                          color={searchBy === option ? \"primary\" : \"default\"}\n                                          label={`${t(\"search_by\")} ${t(option)}`}\n                                          onClick={(e) => {\n                                              if (searchBy === option) {\n                                                  resetSearchBy();\n                                              } else {\n                                                  setSearchBy(option);\n                                              }\n                                          }}/>\n                                </Tooltip>\n                            ))}\n\n\n\n                            {usableFilters.map(f => (\n                                <React.Fragment>\n                                   · {f['options'].map(option => (\n                                            <Tooltip key={f.name + option.name}\n                                                     title={t(option.tooltip)}\n                                                     aria-label={t(option.tooltip)}>\n                                                <Chip size=\"small\"\n                                                      color={filters[f.name] === option.name ? \"primary\" : \"default\"}\n                                                      label={t(option.label)}\n                                                      onClick={(e) => {\n                                                          setFilters({\n                                                              ...filters,\n                                                              [f.name]: (filters[f.name] === option.name) ? null : option.name\n                                                          })\n                                                      }}/>\n                                            </Tooltip>\n                                        )\n                                    )}\n\n                                    </React.Fragment>))\n                            }\n                        </Box>\n                    </AccordionDetails>\n                </Accordion>\n\n\n                <Box my={2}>\n                    <Pagination\n                        className=\"pagination\"\n                        count={count}\n                        page={page}\n                        size=\"small\"\n                        showFirstButton\n                        showLastButton\n                        siblingCount={1}\n                        boundaryCount={1}\n                        color=\"primary\"\n                        onChange={handlePageChange}\n                    />\n                </Box>\n            </Box>\n            <List className={classes.list}>\n                {items && items.map((item) => (\n                    <div key={item[\"id\"]}>\n                        <ListItem key={item[\"id\"]} button\n                                  onClick={() => {\n                                      setCurrentItemId(item['id']);\n                                  }}>\n                            <ListItemAvatar>\n                                <Avatar\n                                    className={item[\"id\"] === currentItemId ? classes.selectedAvatar : classes.avatar}>{item[displayNameField].charAt(0).toUpperCase()}</Avatar>\n                            </ListItemAvatar>\n                            <ListItemText id=\"name\" primary={item[displayNameField]}/>\n\n                            {exportItem &&\n                            <ListItemSecondaryAction>\n                                <Tooltip title={t(\"export\") + \" .csv\"}>\n                                    <IconButton edge=\"end\" aria-label={t(\"export\")} onClick={(e) => {\n                                        dataService\n                                            .downloadOneCsv(item['id'])\n                                            .then(...errorHandler({}));\n                                    }}>\n                                        <GetAppIcon/>\n                                    </IconButton>\n                                </Tooltip>\n                            </ListItemSecondaryAction>}\n\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n        </Box>\n    );\n};\n\nexport default ItemsList;\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Student from \"./students.student.component\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {Chip, Tooltip} from \"@material-ui/core\";\nimport StudentsDataService from \"../_services/students.service\";\nimport ItemsList from \"./items_list.component\";\nimport ExportSearchChip from \"./ExportSearchChip.component\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport {downloadGodFile} from \"../_services/god.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {loadingContext} from \"../_context/loading-context\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Students({history, ...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [students, setStudents] = useState([]);\n  const [newStudent, setNewStudent] = useState(false);\n  const [currentStudentId, setCurrentStudentId] = useState(null);\n    const handleError = useErrorHandler();\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  const [hasNeeds, NEEDS] = useNeeds();\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentStudentId(id);\n  }, [id]);\n  const loadingCtx = React.useContext(loadingContext);\n\n\n  useEffect(() => {\n      if (currentStudentId !== null) setNewStudent(false);\n  }, [currentStudentId])\n\n  return (\n      <Grid container spacing={3} className={classes.root}>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"students\")}</h1>\n            <ItemsList\n                setCurrentItemId={setCurrentStudentId}\n                currentItemId={currentStudentId}\n                items={students}\n                setItems={setStudents}\n                chips={[\n                    <Tooltip title={t(\"export_contact_sheets\")}\n                           aria-label={t(\"export_contact_sheets\")}>\n                    <Chip variant=\"outlined\"\n                          color=\"primary\"\n                          disabled={loadingCtx.loading}\n                          size=\"small\"\n                          avatar={<Avatar>csv</Avatar>}\n                          label={t(\"export_all_plus\")}\n                          onClick={() => {\n                              if (loadingCtx.loading) return;\n                              loadingCtx.startLoading();\n                            downloadGodFile()\n                                .then(...handleError({}))\n                                .finally(() => {\n                                    loadingCtx.stopLoading();\n                                })\n                          }}/>\n                  </Tooltip>\n                ]}\n                usableFilters={[{\n                    name: 'enrolment_status',\n                    defaultValue: null,\n                    options: [\n                        {\n                            label: \"enrolled\",\n                            tooltip: \"only_enrolled\",\n                            name: 'enrolled'\n                        }, {\n                            label: \"pre-enrolled\",\n                            tooltip: \"only_preenrolled\",\n                            name: 'pre-enrolled'\n                        }, {\n                            label: \"early-unenrolled\",\n                            tooltip: \"only_earlyunenrolled\",\n                            name: 'early-unenrolled'\n                        }\n                    ]\n                },\n                    {\n                      name: 'default_payment_method',\n                        defaultValue: null,\n                        options: [\n                           {label: \"cash\", tooltip: \"only_cash\", name: 'cash'},\n                                {label: \"bank-transfer\", tooltip: \"only_banktransfer\", name: 'bank-transfer'},\n                                {\n                                    label: \"bank-direct-debit\",\n                                    tooltip: \"only_bankdirectdebit\",\n                                    name: 'bank-direct-debit'\n                                }\n                        ]\n                    }]}\n                defaultSearchBy=\"full_name\"\n                searchByOptions={[\"full_name\", \"id\"]}\n                dataService={StudentsDataService}\n                searchBarLabel=\"students\"\n            />\n\n            {hasNeeds([NEEDS.post]) && <Tooltip title={t(\"new_student\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={(e) => {\n                    setCurrentStudentId(null);\n                    setNewStudent(true);\n                }}>\n                    <AddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <Student\n            currentStudentId={currentStudentId}\n            newStudent={newStudent}\n            history={history}\n            setNewStudent={setNewStudent}\n            addStudentId={(id) =>{\n                setCurrentStudentId(id);\n            }}\n            deleteStudent={(studentId) => {\n                if (studentId === currentStudentId) setCurrentStudentId(null);\n\n                setStudents(students.filter((s) => s['id'] !== studentId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const invitationsService = {\n    inviteUser\n};\n\nfunction inviteUser(userEmail, needs) {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/invites/v1/userInvite`,  // todo server url\n            method: 'POST',\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()},\n            data: {\n                userEmail: userEmail,\n                needs: needs\n            }\n        }).then(res => {\n            resolve(true);\n        }).catch(function (res) {\n            reject(res);\n        });\n    });\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('users'))();\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport * as yup from 'yup';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport UsersDataService from \"../_services/users.service\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport {useNeeds} from \"../_helpers/needs\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction UserPerson({ children, addStudentId, value, index, newStudent, title, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = React.useState(false);\n  const deleteFullStudent = () => {\n    UsersDataService\n              .delete(currentStudent['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                deleteStudent(currentStudent['id']);\n              });\n  }\n\n\n  let initialValues = loading ? {} : currentStudent;\n\n\n    const formik = useNormik(true, {\n        initialValues: initialValues,\n        validationSchema: yup.object({\n            email: yup.string().email(t(\"invalid_email\")),  // todo\n            name: yup.string().required(t(\"name_required\")),\n        }),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n                if (Object.keys(changedValues).length > 0) {\n                setStatus();\n\n                UsersDataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentStudent(patched_body);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n\n\n            } else {\n                setSubmitting(false);\n            }\n        }\n    });\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      <Dialog\n        open={openConfirmDeleteDialog}\n        onClose={(e) => {setOpenConfirmDeleteDialog(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{t(\"delete_user_question\")}</DialogTitle>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button onClick={(e) => {\n            deleteFullStudent(currentStudent['id']);\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\" autoFocus>\n            {t(\"delete_user\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n\n              {loading ?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n               hasNeeds([NEEDS.delete]) && <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                  setOpenConfirmDeleteDialog(true);\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              {loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name=\"surname1\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"surname2\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"email\"\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default UserPerson;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('users', 'needs'))();\n\n","import React, {useEffect} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Checkbox, FormControlLabel} from \"@material-ui/core\";\nimport {allNeeds} from \"../_data/needs\";\nimport Typography from \"@material-ui/core/Typography\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\n\nconst useStyles = makeStyles(theme => (createStyles({\n  root: dirty => ({\n         color: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium,\n    \"&.Mui-checked\": {\n      color: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main\n    }\n\n})})));\n\n\nconst DirtyCheckbox = ({name, value, formik, noDirty=false, ...props}) => {\n    const dirty = noDirty === true? false: formik.values[name] !== undefined && formik.initialValues[name] !== undefined && formik.values[name].includes(value) !== formik.initialValues[name].includes(value);\n\n    const classes = useStyles(dirty);\n\n\n    return  <Checkbox\n                      name={name}\n                      className={classes.root}\n                      value={value}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                    error={formik.status  || formik.errors[name] !== undefined}\n                    helperText={formik.touched[name] && formik.errors[name]}\n                      checked={formik.values[name]}\n                     {...props}/>\n}\n\nexport default DirtyCheckbox;","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useTranslation} from \"react-i18next\";\nimport {Checkbox, FormControlLabel} from \"@material-ui/core\";\nimport {allNeeds} from \"../_data/needs\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DirtyCheckbox from \"./dirty_checkbox\";\n\nexport default function NeedsSelection({formik, name=\"needs\", noDirty=false}) {\n  const { t } = useTranslation();\n\n  return <React.Fragment>\n      <Typography>{t(\"permissions\")}</Typography>\n                  {allNeeds.map(need => (\n                    <FormControlLabel\n                        control={\n                            <DirtyCheckbox\n                            checked={formik.values[name]===undefined? false: formik.values[name].includes(need.name)}\n                            name={name}\n                            value={need.name}\n                            formik={formik}\n                            noDirty={noDirty}\n                            />\n                        }\n                        key={need.name}\n                        label={t(need.description)}\n                      />))}\n        </React.Fragment>\n}\n","export const symmetricDifference = (setA, setB) => {\n    let _difference = new Set(setA)\n    for (let elem of setB) {\n        if (_difference.has(elem)) {\n            _difference.delete(elem)\n        } else {\n            _difference.add(elem)\n        }\n    }\n    return _difference\n}","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\"\nimport UsersNeedsDataService from \"../_services/user_needs.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNormik} from \"../_helpers/normik\";\nimport NeedsSelection from \"./needs_selection.component\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport {symmetricDifference} from \"../_helpers/set_operations\";\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction UserPerson({ children, addStudentId, value, index, newStudent, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n\n  let initialValues = loading ? {} : currentStudent;\n\n\n    const formik = useNormik(false, {\n        initialValues: initialValues,\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n               setStatus();\n\n               const a = new Set(values[\"needs\"]);\n               const b = new Set(initialValues[\"needs\"]);\n               const difference = Array.from(symmetricDifference(a, b));\n\n               if (difference.size !== 0){\n                   setSubmitting(true);\n                   const jobs = difference.map(need => {\n                    if (b.has(need)){\n                       // has been removed\n                        return UsersNeedsDataService.delete(currentStudent['id'], need)\n                          .then(...errorHandler({}));\n                   } else {\n                        // has been added\n                        return UsersNeedsDataService.postWithId(currentStudent['id'], need)\n                          .then(...errorHandler({}));\n                    }\n                });\n                   Promise\n                       .all(jobs)\n                       .then(...errorHandler({snackbarSuccess: true}))\n                       .then(() => {\n                           updateCurrentStudent({...currentStudent, needs: values[\"needs\"]});\n                       })\n                       .finally(() => {\n                           setSubmitting(false);\n                       })\n               }\n\n\n\n\n        }\n    }, true);\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n\n              {loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               <Box py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"150px\"/>\n                                    </Box>\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n                                    <Box style={{display: \"inline-block\"}}>\n                        <NeedsSelection\n                formik={formik}\n            /></Box>\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default UserPerson;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport UsersDataService from \"../_services/users.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport UserPerson from \"./users.user.userperson.component\";\nimport UserPermissions from \"./users.user.permissions.component\";\nimport * as PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`,\n  };\n}\n\n\n\nUserPermissions.propTypes = {\n  updateCurrentStudent: PropTypes.func,\n  index: PropTypes.number,\n  value: PropTypes.number,\n  deleteStudent: PropTypes.any,\n  title: PropTypes.any,\n  currentStudent: PropTypes.any,\n  dir: PropTypes.any\n};\nexport default function User(props) {\n  const currentUserId = props.currentStudentId;\n  const deleteUser = props.deleteStudent;\n  const loading = currentUserId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    if (loading) return setUser(null);\n    UsersDataService\n            .getOne(currentUserId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setUser(res[\"data\"]);\n                });\n  }, [currentUserId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentUserId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };\n\n\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"user\")} {...a11yProps(0)} />\n                  <Tab label={t(\"permissions\")} {...a11yProps(1)} />\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n            <UserPerson value={value}\n                      index={0}\n                      dir={theme.direction}\n                      currentStudent={user}\n                      updateCurrentStudent={setUser}\n                      deleteStudent={deleteUser}\n            />\n\n            <UserPermissions value={value}\n                      index={1}\n                      dir={theme.direction}\n                      currentStudent={user}\n                      updateCurrentStudent={setUser}\n                      deleteStudent={deleteUser}\n            />\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Fab from \"@material-ui/core/Fab\";\nimport {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    TextField,\n    Tooltip\n} from \"@material-ui/core\";\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport Button from \"@material-ui/core/Button\";\nimport Box from \"@material-ui/core/Box\";\nimport * as yup from \"yup\";\nimport {useFormik} from \"formik\";\nimport {invitationsService} from \"../_services/userInvites.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport User from \"./users.user.component\";\nimport ItemsList from \"./items_list.component\";\nimport UsersDataService from \"../_services/users.service\";\nimport NeedsSelection from \"./needs_selection.component\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n    root2: {\n    display: 'flex',\n  },\n  formControl: {\n      padding: theme.spacing(2),\n        maxHeight: '50vh',\n      overflow: 'auto',\n      minWidth: '40vw'\n  },\n    dialog: {\n\n    },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\nexport default function Users({history, ...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [users, setUsers] = useState([]);\n  const [currentUserId, setCurrentUserId] = useState(null);\n  const [open, setOpen] = React.useState(false);\n    const [hasNeeds, NEEDS] = useNeeds();\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentUserId(id);\n  }, [id]);\n  const errorHandler = useErrorHandler();\n\n  const formik = useFormik({\n        initialValues: {email: '', needs: []},\n        validationSchema: yup.object({\n            email: yup.string().required(t(\"email_required\")).email(t(\"invalid_email\"))}),\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n            setSubmitting(true);\n            invitationsService\n                .inviteUser(values['email'], values['needs'])\n                .then(...errorHandler({snackbarSuccess: true}))\n                .then(res => {\n                    handleClose();\n                }).catch(_ => {\n                    setStatus(true);\n                }).finally(() => {\n                    setSubmitting(false);\n            })\n        }\n    });\n\n\n  return (\n      <Grid container spacing={3} className={classes.root}>\n          <Dialog  open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">\n            {t(\"invite_user\")}\n        </DialogTitle> <form onSubmit={formik.handleSubmit}>\n        <DialogContent>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"email\"\n            name=\"email\"\n            label={t(\"email\")}\n            type=\"email\"\n            fullWidth\n            value={formik.values['email']}\n            onChange={formik.handleChange}\n            onBlur={formik.handleBlur}\n            error={formik.status  || formik.errors['email'] !== undefined}\n            helperText={formik.touched['email'] && formik.errors['email']}\n          />\n          <Box my={2} className={classes.dialog}>\n\n                  <NeedsSelection\n                      noDirty={true}\n                    formik={formik}\n                  />\n\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n              {t(\"cancel\")}\n          </Button>\n          <Button type=\"submit\" color=\"primary\" disabled={formik.isSubmitting}>\n              {t(\"invite\")}\n          </Button>\n        </DialogActions></form>\n      </Dialog>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"users\")}</h1>\n          <ItemsList\n                setCurrentItemId={setCurrentUserId}\n                currentItemId={currentUserId}\n                items={users}\n                setItems={setUsers}\n                defaultSearchBy=\"full_name\"\n                searchByOptions={[\"full_name\", \"id\"]}\n                dataService={UsersDataService}\n                searchBarLabel=\"users\"\n            />\n            {hasNeeds([NEEDS.invite_users]) && <Tooltip title={t(\"new_user\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={handleClickOpen}>\n                    <PersonAddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <User\n            currentStudentId={currentUserId}\n            history={history}\n            deleteUser={(userId) => {\n                if (userId === currentUserId) setCurrentUserId(null);\n\n                setUsers(users.filter((s) => s['id'] !== userId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport PaymentsDataService from \"../_services/payments.service\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {loadingContext} from \"../_context/loading-context\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n    root2: {\n    display: 'flex',\n  },\n  formControl: {\n      padding: theme.spacing(2),\n        maxHeight: '50vh',\n      overflow: 'auto',\n      minWidth: '40vw'\n  },\n    dialog: {\n\n    },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Payments({history, ...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const errorHandler = useErrorHandler();\n const loadingCtx = React.useContext(loadingContext);\n  return (\n      <div>\n          <h1>{t(\"payments\")}</h1>\n\n      <List className={classes.list}>\n        <ListItem button\n                  onClick={() => {\n                      if (loadingCtx.loading) return;\n                      loadingCtx.startLoading();\n                      PaymentsDataService\n                          .downloadCsv(null, null,'*', null)\n                          .then(...errorHandler({}))\n                          .finally(() => {\n                              loadingCtx.stopLoading();\n                          })\n\n                  }}>\n        <ListItemAvatar>\n            <Avatar className={classes.avatar}>\n                csv\n            </Avatar>\n        </ListItemAvatar>\n        <ListItemText id=\"name\" primary={t(\"export_all\")}/>\n\n    </ListItem>\n    <Divider/>\n    </List></div>\n  );\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('rooms'))();\n\n","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport Scheduler, {eventFromSchedule} from \"./scheduler.component\";\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n    calendar: {\n      margin: theme.spacing(2)\n    }\n\n}));\n\n\nfunction RoomSchedule({ value, history, index, scheduleIds, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  // todo no minHeight ? and also tabpanel component\n  return (\n    <div\n      role=\"tabpanel\"\n      className={classes.root}\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n        style={{height: '100%', flex: 1, minHeight: \"70vh\" }}\n\n    >\n        <Scheduler\n            onEventClick={function (clickInfo) {  // todo receive schedule\n                           const schedule = clickInfo.event.extendedProps[\"schedule\"];\n                           if (schedule[\"is_base\"]){\n                               history.push('/courses?id='+schedule['course_id']);\n                           } else {\n                               history.push('/students?id='+schedule['student_id']);\n                           }\n                       }}\n            scheduleIds={scheduleIds}\n            editable={false}\n        />\n    </div>\n  );\n}\n\nexport default RoomSchedule;","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport RoomsDataService from \"../_services/rooms.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport * as yup from 'yup';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport {useNeeds} from \"../_helpers/needs\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction RoomDetails({ children, addStudentId, setNewRoom, newRoom, value, index, newStudent, title, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = React.useState(false);\n  const deleteFullStudent = () => {\n    RoomsDataService\n              .delete(currentStudent['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                deleteStudent(currentStudent['id']);\n              });\n  }\n\n\n  let initialValues = loading ? {} : currentStudent;\n\n\n    const formik = useNormik(!newRoom, {\n        initialValues: initialValues,\n        validationSchema: yup.object({\n            email: yup.string().email(t(\"invalid_email\")),  // todo\n            name: yup.string().required(t(\"name_required\")),\n        }),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (Object.keys(changedValues).length > 0) {\n                setStatus();\n\n                if (newRoom) {\n                    RoomsDataService.post(changedValues)\n                         .then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (new_id) {\n                        updateCurrentStudent(new_id);\n                        setNewRoom(false);\n                    }).catch(function (err) {\n                    setStatus(true);\n                    }).finally(() => {\n                    setSubmitting(false);\n                });\n                } else {\n                   RoomsDataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentStudent(patched_body);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n                }\n\n\n\n\n            } else {\n                setSubmitting(false);\n            }\n        }\n    });const [hasNeeds, NEEDS] = useNeeds();\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      <Dialog\n        open={openConfirmDeleteDialog}\n        onClose={(e) => {setOpenConfirmDeleteDialog(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{t(\"delete_room_question\")}</DialogTitle>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button onClick={(e) => {\n              deleteFullStudent(currentStudent['id']);\n\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\" autoFocus>\n            {t(\"delete_room\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n\n              {!newRoom && loading ?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              : hasNeeds([NEEDS.delete]) &&\n               <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                    if (newRoom) {\n                        setNewRoom(false);\n                    } else{\n                        setOpenConfirmDeleteDialog(true);\n                    }\n\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              {!newRoom && loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 4}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"capacity\")}\n                                style={{flex: 1}}\n                                name=\"capacity\"\n                                formik={formik}\n                                type=\"number\"\n                            />\n                        </Box>\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default RoomDetails;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport RoomsDataService from \"../_services/rooms.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport RoomSchedule from \"./rooms.room.schedule.component\";\nimport RoomDetails from \"./rooms.room.details.component\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`,\n  };\n}\n\n\nexport default function Room({history, setNewRoom, currentRoomId, deleteRoom, newRoom, addRoomId}) {\n  const loading = currentRoomId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [room, setRoom] = useState(null);\n\n  useEffect(() => {\n    if (loading) return setRoom(null);\n    RoomsDataService\n            .getOne(currentRoomId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setRoom(res[\"data\"]);\n                });\n  }, [currentRoomId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentRoomId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };const [hasNeeds, NEEDS] = useNeeds();\n\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"room\")} {...a11yProps(0)} />\n\n                    { !newRoom && hasNeeds([NEEDS.schedules]) &&\n                  <Tab label={t(\"schedules\")} {...a11yProps(1)} />}\n\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n                   <RoomDetails value={value}\n                      index={0}\n                                newRoom={newRoom}\n                                setNewRoom={setNewRoom}\n                      dir={theme.direction}\n                      currentStudent={room}\n                      updateCurrentStudent={setRoom}\n                      deleteStudent={deleteRoom}\n            />\n\n\n              {hasNeeds([NEEDS.schedules]) && <RoomSchedule value={value}\n                             index={1}\n                             history={history}\n                             className={classes.tab}\n                             dir={theme.direction}\n                             scheduleIds={room === null ? null : room['schedules']}\n                             student_id={currentRoomId}\n              />}\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Student from \"./students.student.component\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {Tooltip} from \"@material-ui/core\";\nimport ItemsList from \"./items_list.component\";\nimport RoomsDataService from \"../_services/rooms.service\";\nimport Room from \"./rooms.room.component\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Rooms({history, ...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [rooms, setRooms] = useState([]);\n  const [newRoom, setNewRoom] = useState(false);\n  const [currentRoomId, setCurrentRoomId] = useState(null);\n\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentRoomId(id);\n  }, [id])\n\n  useEffect(() => {\n      if (currentRoomId !== null) setNewRoom(false);\n  }, [currentRoomId])\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n      <Grid container spacing={3} className={classes.root}>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"rooms\")}</h1>\n          <ItemsList\n            setCurrentItemId={setCurrentRoomId}\n            currentItemId={currentRoomId}\n            items={rooms}\n            setItems={setRooms}\n            defaultSearchBy=\"name\"\n            displayNameField=\"name\"\n            searchByOptions={[\"name\", \"id\"]}\n            dataService={RoomsDataService}\n            searchBarLabel=\"rooms\"\n          />\n            {hasNeeds([NEEDS.post]) && <Tooltip title={t(\"new_room\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={(e) => {\n                    setCurrentRoomId(null);\n                    setNewRoom(true);\n                }}>\n                    <AddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <Room\n            currentRoomId={currentRoomId}\n            newRoom={newRoom}\n            setNewRoom={setNewRoom}\n            history={history}\n            addRoomId={(id) =>{\n                setCurrentRoomId(id);\n            }}\n            deleteRoom={(studentId) => {\n                if (studentId === currentRoomId) setCurrentRoomId(null);\n\n                setRooms(rooms.filter((s) => s['id'] !== studentId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('teachers'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('teachers', 'courses'))();\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport TeachersDataService from \"../_services/teachers.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport * as yup from 'yup';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {useNeeds} from \"../_helpers/needs\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction TeacherDetails({ children, addStudentId, setNewRoom, newRoom, value, index, newStudent, title, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = React.useState(false);\n  const deleteFullStudent = () => {\n    TeachersDataService\n              .delete(currentStudent['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                deleteStudent(currentStudent['id']);\n              });\n  }\n\n\n  let initialValues = loading ? {} : currentStudent;\n\n\n    const formik = useNormik(!newRoom, {\n        initialValues: initialValues,\n        validationSchema: yup.object({\n            email: yup.string().email(t(\"invalid_email\")),  // todo\n            name: yup.string().required(t(\"name_required\")),\n        }),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (Object.keys(changedValues).length > 0) {\n                setStatus();\n\n                if (newRoom) {\n                    TeachersDataService.post(changedValues)\n                         .then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (new_id) {\n                        updateCurrentStudent(new_id);\n                        setNewRoom(false);\n                    }).catch(function (err) {\n                    setStatus(true);\n                    }).finally(() => {\n                    setSubmitting(false);\n                });\n                } else {\n                   TeachersDataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentStudent(patched_body);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n                }\n\n\n\n\n            } else {\n                setSubmitting(false);\n            }\n        }\n    });\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      <Dialog\n        open={openConfirmDeleteDialog}\n        onClose={(e) => {setOpenConfirmDeleteDialog(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{t(\"delete_room_question\")}</DialogTitle>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button onClick={(e) => {\n              deleteFullStudent(currentStudent['id']);\n\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\" autoFocus>\n            {t(\"delete_room\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n\n              {!newRoom && loading ?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n              hasNeeds([NEEDS.delete]) &&  <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                    if (newRoom) {\n                        setNewRoom(false);\n                    } else{\n                        setOpenConfirmDeleteDialog(true);\n                    }\n\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              {!newRoom && loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name=\"surname1\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"surname2\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"email\"\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"address\")}\n                                formik={formik}\n                                style={{flex: 4}}\n                                name=\"address\"\n                            />\n                            <DirtyTextField\n                                label={t(\"city\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"city\"\n                            />\n                            <DirtyTextField\n                                label={t(\"zip\")}\n                                formik={formik}\n                                type=\"number\"\n                                style={{flex: 1}}\n                                name=\"zip\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"dni\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"dni\"\n                            />\n                            <DirtyTextField\n                                label={t(\"phone\")}\n                                type=\"tel\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"phone\"\n                            />\n\n\n\n                        </Box>\n\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default TeacherDetails;","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport Scheduler, {eventFromSchedule} from \"./scheduler.component\";\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n    calendar: {\n      margin: theme.spacing(2)\n    }\n\n}));\n\n\nfunction TeacherSchedule({ value, history, index, scheduleIds, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  return (\n    <div\n      role=\"tabpanel\"\n      className={classes.root}\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n        style={{height: '100%', flex: 1, minHeight: \"70vh\" }}\n\n    >\n        <Scheduler\n            onEventClick={function (clickInfo) {  // todo receive schedule\n                           const schedule = clickInfo.event.extendedProps[\"schedule\"];\n                           if (schedule[\"is_base\"]){\n                               history.push('/courses?id='+schedule['course_id']);\n                           } else {\n                               history.push('/students?id='+schedule['student_id']);\n                           }\n                       }}\n            scheduleIds={scheduleIds}\n            editable={false}\n        />\n    </div>\n  );\n}\n\nexport default TeacherSchedule;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport TeachersDataService from \"../_services/teachers.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport TeachersCoursesDataService from \"../_services/teachers_courses.service\";\nimport TeacherDetails from \"./teachers.teacher.details.component\";\nimport TeacherSchedule from \"./teachers.teacher.schedule.component\";\nimport Courses from \"./students.student.courses.component\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`,\n  };\n}\n\n\nexport default function Teacher({currentTeacherId, history, setNewTeacher, addTeacherId, newTeacher, deleteTeacher}) {\n  const loading = currentTeacherId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [teacher, setTeacher] = useState(null);  // todo rename to student\n\n  useEffect(() => {\n    if (loading) return setTeacher(null);\n    TeachersDataService\n            .getOne(currentTeacherId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setTeacher(res[\"data\"]);\n                });\n  }, [currentTeacherId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentTeacherId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };const [hasNeeds, NEEDS] = useNeeds();\n\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"teacher\")} {...a11yProps(0)} />\n\n                    { !newTeacher && hasNeeds([NEEDS.schedules]) &&\n                  <Tab label={t(\"schedules\")} {...a11yProps(1)} />}\n\n                   { !newTeacher && hasNeeds([NEEDS.courses]) &&\n                  <Tab label={t(\"courses\")} {...a11yProps(2)} />}\n\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n\n              <TeacherDetails\n                    value={value}\n                    index={0}\n                    newRoom={newTeacher}\n                    setNewRoom={setNewTeacher}\n                    dir={theme.direction}\n                    currentStudent={teacher}\n                    updateCurrentStudent={setTeacher}\n                    deleteStudent={deleteTeacher}\n            />\n\n\n              {hasNeeds([NEEDS.schedules]) && <TeacherSchedule value={value}\n                                index={1}\n                                history={history}\n                                className={classes.tab}\n                                dir={theme.direction}\n                                scheduleIds={teacher === null ? null : teacher['schedules']}\n                                student_id={currentTeacherId}\n              />}\n\n              {hasNeeds([NEEDS.courses]) && <Courses value={value}\n                        index={2}\n                        dataService={TeachersCoursesDataService}\n                        history={history}\n                        courseIds={teacher === null ? null : teacher['courses']}\n                        addCourseId={(course_id) => {\n                            setTeacher({\n                                ...teacher,\n                                courses: [...teacher['courses'], course_id]\n                            })\n                        }}\n                        student_id={currentTeacherId}\n                        deleteCourseFromStudent={(course_id) => {\n                            setTeacher({\n                                ...teacher,\n                                courses: teacher['courses'].filter((c) => c !== course_id)\n                            });\n                        }}\n              />}\n\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {Tooltip} from \"@material-ui/core\";\nimport TeachersDataService from \"../_services/teachers.service\";\nimport ItemsList from \"./items_list.component\";\nimport Teacher from \"./teachers.teacher.component\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Teachers({history, ...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [teachers, setTeachers] = useState([]);\n  const [newTeacher, setNewTeacher] = useState(false);\n  const [currentTeacherId, setCurrentTeacherId] = useState(null);\nconst [hasNeeds, NEEDS] = useNeeds();\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentTeacherId(id);\n  }, [id])\n\n  useEffect(() => {\n      if (currentTeacherId !== null) setNewTeacher(false);\n  }, [currentTeacherId])\n\n  return (\n      <Grid container spacing={3} className={classes.root}>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"teachers\")}</h1>\n            <ItemsList\n                setCurrentItemId={setCurrentTeacherId}\n                currentItemId={currentTeacherId}\n                items={teachers}\n                setItems={setTeachers}\n                defaultSearchBy=\"full_name\"\n                searchByOptions={[\"full_name\", \"id\"]}\n                dataService={TeachersDataService}\n                searchBarLabel=\"teachers\"\n            />\n\n            {hasNeeds([NEEDS.post]) && <Tooltip title={t(\"new_teacher\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={(e) => {\n                    setCurrentTeacherId(null);\n                    setNewTeacher(true);\n                }}>\n                    <AddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <Teacher\n            currentTeacherId={currentTeacherId}\n            newTeacher={newTeacher}\n            setNewTeacher={setNewTeacher}\n            history={history}\n            addTeacherId={(id) =>{\n                setCurrentTeacherId(id);\n            }}\n            deleteTeacher={(studentId) => {\n                if (studentId === currentTeacherId) setCurrentTeacherId(null);\n\n                setTeachers(teachers.filter((s) => s['id'] !== studentId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses', 'students'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses', 'teachers'))();\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport CoursesDataService from \"../_services/courses.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport * as yup from 'yup';\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {DialogContent, MenuItem, TextField} from \"@material-ui/core\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport StudentsDataService from \"../_services/students.service\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {useSnackbar} from \"notistack\";\nimport {useFormik} from \"formik\";\nimport {DEFAULT_COURSE_PRICE_TERM} from \"../_data/price_term\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {loadingContext} from \"../_context/loading-context\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n    textField: {\n    marginRight: theme.spacing(1),\n    width: 200,\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    },\n    choose: {\n      marginBottom: theme.spacing(3)\n    }\n}));\n\nfunction CourseDetails({ children, addCourseId, setNewCourse, newCourse, value, index, currentCourse, updateCurrentCourse, patchService, deleteCourse, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentCourse === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = React.useState(false);\n  const deleteFullStudent = () => {\n    CoursesDataService\n              .delete(currentCourse['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                deleteCourse(currentCourse['id']);\n              });\n  }\n\n  const [openDownloadAttendanceList, setOpenDownloadAttendanceList] = React.useState(false);\n\nconst {enqueueSnackbar, closeSnackbar} = useSnackbar();\n\n  let initialValues = loading ? {} : currentCourse;\n  if (newCourse) {\n      initialValues = {\n          price_term: DEFAULT_COURSE_PRICE_TERM,\n          is_published: false\n      }\n  }\n\n    const formik2 = useFormik({\n        initialValues: {},\n        validationSchema: yup.object({\n            startDate: yup.date().required(t(\"required\")),\n             endDate: yup.date().required(t(\"required\")),\n        }),\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n\n\n            setSubmitting(true);\n            setStatus();\n\n             CoursesDataService\n                    .downloadSubresource(currentCourse[\"id\"], 'attendanceList', values)\n                    .then(...errorHandler({snackbarSuccess: true}))\n                    .then(() => {\n                        setOpenDownloadAttendanceList(false);\n                    })\n                 .catch(() => {\n                     setStatus(true);\n                 })\n                 .finally(() => {\n                     setSubmitting(false);\n                 })\n\n\n        }\n    });\n\n    const formik = useNormik(!newCourse, {\n        initialValues: initialValues,\n        validationSchema: yup.object({\n            name: yup.string().required(t(\"name_required\")),\n        }),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (Object.keys(changedValues).length > 0) {\n                setStatus();\n\n                if (newCourse) {\n                    CoursesDataService.post(changedValues)\n                         .then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (new_id) {\n                        updateCurrentCourse(new_id);\n                        setNewCourse(false);\n                    }).catch(function (err) {\n                    setStatus(true);\n                    }).finally(() => {\n                    setSubmitting(false);\n                });\n                } else {\n                   CoursesDataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentCourse(patched_body);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n                }\n\n\n\n\n            } else {\n                setSubmitting(false);\n            }\n        }\n    });\n     const loadingCtx = React.useContext(loadingContext);\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      <Dialog\n        open={openConfirmDeleteDialog}\n        onClose={(e) => {setOpenConfirmDeleteDialog(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{t(\"delete_room_question\")}</DialogTitle>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button onClick={(e) => {\n              deleteFullStudent(currentCourse['id']);\n\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\" autoFocus>\n            {t(\"delete_room\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n         <Dialog\n        open={openDownloadAttendanceList}\n        onClose={(e) => {setOpenDownloadAttendanceList(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      ><form onSubmit={formik2.handleSubmit}>\n        <DialogTitle id=\"alert-dialog-title\">{t(\"download\")}</DialogTitle>\n            <DialogContent>\n                <Typography className={classes.choose}>{t(\"chose_list_dates\")}</Typography>\n\n                <TextField\n                    id=\"date\"\n                    label={t(\"start\")}\n                    type=\"date\"\n                    value={formik2.values[\"startDate\"]}\n                    name={\"startDate\"}\n                    onChange={formik2.handleChange}\n                    onBlur={formik2.handleBlur}\n                    error={formik2.status  || formik2.errors[\"startDate\"] !== undefined}\n                    helperText={formik2.touched[\"startDate\"] && formik2.errors[\"startDate\"]}\n                    className={classes.textField}\n                    InputLabelProps={{\n                      shrink: true,\n                    }}\n                  />\n                  <TextField\n                    id=\"date\"\n                    label={t(\"end\")}\n                    type=\"date\"\n                    value={formik2.values[\"endDate\"]}\n                    name={\"endDate\"}\n                    onChange={formik2.handleChange}\n                    error={formik2.status  || formik2.errors[\"endDate\"] !== undefined}\n                    helperText={formik2.touched[\"endDate\"] && formik2.errors[\"endDate\"]}\n                    onBlur={formik2.handleBlur}\n                    className={classes.textField}\n                    InputLabelProps={{\n                      shrink: true,\n                    }}\n                  />\n            </DialogContent>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenDownloadAttendanceList(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button type=\"submit\" color=\"primary\"   disabled={formik2.isSubmitting} autoFocus>\n            {t(\"download\")}\n          </Button>\n        </DialogActions></form>\n      </Dialog>\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n\n              {!newCourse && loading ?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n               hasNeeds([NEEDS.delete]) && <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                    if (newCourse) {\n                        setNewCourse(false);\n                    } else{\n                        setOpenConfirmDeleteDialog(true);\n                    }\n\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              {!newCourse && loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               {   [\"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })}\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                           <DirtyTextField\n                                label={t(\"description\")}\n                                style={{flex: 1}}\n                                multiline\n                                rowsMax={8}\n                                name=\"description\"\n                                formik={formik}\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"price_term\")}\n                                style={{flex: 1}}\n                                name=\"price_term\"\n                                formik={formik}\n                                type=\"number\"\n                            />\n                            <DirtyTextField\n                                label={t(\"public\")}\n                                style={{flex: 1}}\n                                name=\"is_published\"\n                                formik={formik}\n                                select\n                            >\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n\n                    </form>\n\n\n                )\n\n\n\n            }\n\n             {!loading && !newCourse && <Box my={3}>\n            <Divider />\n            </Box>}\n\n            <Box className={[classes.line, classes.composite]}>\n                {!loading && hasNeeds([NEEDS.students]) &&  !newCourse &&\n                <Tooltip style={{flex: 1}} title={t(\"export_attendance_list\")} aria-label={t(\"send_grant_letter\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      startIcon={<GetAppIcon/>}\n                      onClick={(e) => {\n                        setOpenDownloadAttendanceList(true);\n                      }}\n                  >\n                    {t(\"attendance_list\")}\n                  </Button>\n                </Tooltip>}\n\n                {!loading && hasNeeds([NEEDS.students, NEEDS.guardians]) && !newCourse &&\n                <Tooltip style={{flex: 1}} title={t(\"export_students_contact_sheet\")} aria-label={t(\"export_grant_letter\")}>\n                  <Button\n                      variant=\"contained\"\n                      color=\"default\"\n                      className={classes.button}\n                      disabled={loadingCtx.loading}\n                      startIcon={<GetAppIcon/>}\n                      onClick={(e) => {\n                          loadingCtx.startLoading();\n                        CoursesDataService\n                            .downloadSubresource(currentCourse[\"id\"], 'contactsSheet')\n                            .then(...errorHandler({snackbarSuccess: true}))\n                            .finally(() => {\n                                loadingCtx.stopLoading();\n                            })\n                      }}\n                  >\n                    {t(\"students_contact_sheet\")}\n                  </Button>\n                </Tooltip>}\n              </Box>\n\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default CourseDetails;","export const DEFAULT_COURSE_PRICE_TERM = 60;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses', 'labels'))();\n\n","import React from 'react';\nimport {useTranslation} from \"react-i18next\";\nimport {FormControlLabel} from \"@material-ui/core\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DirtyCheckbox from \"./dirty_checkbox\";\nimport {education_years} from \"../_data/education\";\n\nexport default function LabelsSelection({formik, name=\"labels\", noDirty=false}) {\n  const { t } = useTranslation();\n\n  return <React.Fragment>\n      <Typography>{t(\"labels\")}</Typography>\n                  {education_years.map(label => (\n                    <FormControlLabel\n                        control={\n                            <DirtyCheckbox\n                            checked={formik.values[name]===undefined? false: formik.values[name].includes(label)}\n                            name={name}\n                            value={label}\n                            formik={formik}\n                            noDirty={noDirty}\n                            />\n                        }\n                        key={label}\n                        label={t(label)}\n                      />))}\n\n                      <FormControlLabel\n                        control={\n                            <DirtyCheckbox\n                            checked={formik.values[name]===undefined? false: formik.values[name].includes(\"adult\")}\n                            name={name}\n                            value=\"adult\"\n                            formik={formik}\n                            noDirty={noDirty}\n                            />\n                        }\n                        label={t(\"adult\")}\n                      />\n        </React.Fragment>\n}\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\"\nimport CourseLabelsDataService from \"../_services/course_labels.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveButton from \"./formik_save_button\";\nimport DiscardButton from \"./formik_discard_button\";\nimport LabelsSelection from \"./labels_selection.component\";\nimport {symmetricDifference} from \"../_helpers/set_operations\";\n\nconst useStyles = makeStyles((theme) => ({\n  actionIcon: {\n    float: 'right'\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction CourseLabels({ value, index, currentCourse, updateCurrentCourse, patchService, deleteCourse, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentCourse === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n\n  let initialValues = loading ? {} : currentCourse;\n\n\n    const formik = useNormik(false, {\n        initialValues: initialValues,\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n               setStatus();\n\n               const a = new Set(values[\"labels\"]);\n               const b = new Set(initialValues[\"labels\"]);\n               const difference = Array.from(symmetricDifference(a, b));\n\n               if (difference.size !== 0){\n                   setSubmitting(true);\n                   const jobs = difference.map(need => {\n                    if (b.has(need)){\n                       // has been removed\n                        return CourseLabelsDataService.delete(currentCourse['id'], need)\n                          .then(...errorHandler({}));\n                   } else {\n                        // has been added\n                        return CourseLabelsDataService.postWithId(currentCourse['id'], need)\n                          .then(...errorHandler({}));\n                    }\n                });\n                   Promise\n                       .all(jobs)\n                       .then(...errorHandler({snackbarSuccess: true}))\n                       .then(() => {\n                           updateCurrentCourse({...currentCourse, labels: values[\"labels\"]});\n                       })\n                       .finally(() => {\n                           setSubmitting(false);\n                       })\n               }\n\n\n\n\n        }\n    }, true);\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n\n              {loading?\n                (\n\n                    <Box>\n                         <IconButtonSkeleton className={classes.actionIcon}/>\n                       <IconButtonSkeleton className={classes.actionIcon}/>\n\n\n                            <div style={{clear: 'both'}}>\n                               <Box py={0} >\n                                        <Skeleton variant=\"text\" width={value} height=\"150px\"/>\n                                    </Box>\n                            </div>\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n                        <DiscardButton className={classes.actionIcon}\n                                        formik={formik}/>\n\n\n                        <SaveButton className={classes.actionIcon}\n                                    formik={formik}/>\n\n                                    <Box style={{display: \"inline-block\"}}>\n                        <LabelsSelection\n                formik={formik}\n            /></Box>\n\n                    </form>\n                )\n\n            }\n\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default CourseLabels;","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport SchedulesDataService from \"../_services/schedules.service\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useSnackbar} from \"notistack\";\nimport Scheduler, {eventFromSchedule} from \"./scheduler.component\";\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n    calendar: {\n      margin: theme.spacing(2)\n    }\n\n}));\n\n\nfunction CourseSchedule({ value, index, title, scheduleIds, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const {enqueueSnackbar, closeSnackbar} = useSnackbar();\n  const errorHandler = useErrorHandler();\nconst theme = useTheme();\n\n// todo simpleish list, like listitems (or even that one generalised)\n   const eventChanged = (info, day_week, start_time, end_time, schedule) => {\n       const newEvent = info.event;\n       let body = {};\n        body['day_week'] = day_week;\n        body['start_time'] = start_time;\n        body['end_time'] = end_time;\n\n        if (schedule[\"is_base\"]) {\n            body['course_id'] = schedule[\"course_id\"];\n            body['student_id'] = student_id;\n            body['is_base'] = false;\n            SchedulesDataService\n                    .post(body)\n                    .then(...errorHandler({errorOut: true, snackbarSuccess: true}))\n                    .then(function (res) {\n                        let calendarApi = info.view.calendar;\n                        newEvent['is_base'] = true;  // todo why needed\n                        calendarApi.addEvent(eventFromSchedule(theme, res));\n                        info.revert();\n                    }).catch(function(err){\n                        info.revert();\n            });\n\n        } else {\n            SchedulesDataService\n                    .patch({id: schedule['id'],\n                                                body: body,\n                                                initial_values: schedule})\n                    .then(...errorHandler({errorOut: true, snackbarSuccess: true}))\n                    .then(function (res) {\n                        /*setSchedules(schedules.map(payment => {\n                          if (payment.id !== res['id']) return payment;\n                          return res;\n                        }))*/\n                    }).catch(function (err){\n                        info.revert();\n                    });\n        }\n    }\n  return (\n    <div\n      role=\"tabpanel\"\n      className={classes.root}\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n        style={{height: '100%', flex: 1, minHeight: \"70vh\" }}\n\n    >\n        <Scheduler\n            onEventClick={function (clickInfo) {\n                           const schedule = clickInfo.event.extendedProps[\"schedule\"];\n                           if (schedule[\"is_base\"] === true) return enqueueSnackbar(t(\"cant_remove_schedule\"), {'variant': 'warning'});\n                           if (window.confirm(t(\"sure_delete_event\"))) {\n                               SchedulesDataService\n                                   .delete(schedule['id'])\n                                   .then(...errorHandler({snackbarSuccess: true}))\n                                   .then(function (res) {\n                                       clickInfo.event.remove();\n                                   });\n\n                           }\n                       }}\n            onEventDrop={eventChanged}\n            onEventResize={eventChanged}\n            scheduleIds={scheduleIds}\n            editable={true}\n        />\n    </div>\n  );\n}\n\nexport default CourseSchedule;","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport StudentsDataService from \"../_services/students.service\"\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport {\n    AppBar,\n    Dialog,\n    ListItemSecondaryAction,\n    Slide\n} from \"@material-ui/core\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport SearchBar from \"./searchbar.component\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n        overflow: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1\n    },\n    box: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: '30px'\n    },\n    appBar: {\n    position: 'relative',\n  },\n  newLine: {\n    width: '100%',\n       marginTop: theme.spacing(1),\n        display: \"flex\",\n    flexDirection: \"column\"\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1,\n  }, actionIcon: {\n      float: 'right'\n    }\n}));\n\nclass CloseIcon extends React.Component {\n    render() {\n        return null;\n    }\n}\n\nfunction CourseStudents({ history, value, dataService, index, title, courseIds, deleteCourseFromStudent, addCourseId, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const loading = courseIds === null;\n\n  // todo add teachers/students menus and generalise\nconst [hasNeeds, NEEDS] = useNeeds();\n  const [courses, setCourses] = useState([]);\n  const [allCourses, setAllCourses] = useState(null);\n  const [newCourse, setNewCourse] = useState(false);\n  const handleClose = () => {\n    setNewCourse(false);\n  };\n\n  useEffect(()=>{\n    setNewCourse(false);\n  }, [courses])\n\n\n   const [searchTerm, setSearchTerm] = useState('');\n   const [page, setPage] = useState(1);\n   const [count, setCount] = useState(0);\n\n   function search() {\n       if (loading || !newCourse) return;\n\n        StudentsDataService\n            .getAll({name: 'name', value: searchTerm}, page, ['name', 'description', 'id'])\n            .then(...errorHandler({}))\n            .then(res => {\n                setAllCourses(res[\"data\"].filter(x => !(courseIds.includes(x['id']))));\n                setCount(res[\"_pagination\"][\"totalPages\"]);\n            });\n    }\n\n    useEffect(search, [page, setAllCourses, loading, newCourse]);\n\n   const handlePageChange = (event, value) => {\n        setPage(value);\n    };\n\n  const deleteStudentCourse = (id) => {\n    dataService\n        .delete(student_id, id)\n        .then(...errorHandler({snackbarSuccess:true}))\n        .then(function (r) {\n             deleteCourseFromStudent(id);\n        });\n  }\n\n  useEffect(() => {\n    if (courseIds === null) return;\n\n    if (courseIds.length === 0){\n      setCourses([]);\n    } else {\n      StudentsDataService\n            .getMany(courseIds)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setCourses(res.map(res => res[\"data\"]));\n                });\n    }\n  }, [courseIds])\n    const onChangeSearchTerm = (e) => {\n        setSearchTerm(e.target.value);\n    };\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>  {// todo simplify everywhere\n        } <Box px={2}>\n\n            <Dialog fullScreen open={newCourse} onClose={handleClose} TransitionComponent={Transition}>\n        <AppBar className={classes.appBar} color=\"secondary\">\n          <Toolbar>\n            <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\n              <CloseIcon />\n            </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n                {t(\"enroll_to_course\")}\n            </Typography>\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\n                {t(\"cancel\")}\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Box className={classes.box} m={3}>\n                <SearchBar\n                    label={t(\"courses\")}\n                    value={searchTerm}\n                    onChange={onChangeSearchTerm}\n                    onSearch={search}\n                />\n\n                <Box my={2}>\n                    <Pagination\n                        className={classes.pagination}\n                        count={count}\n                        page={page}\n                        size=\"small\"\n                        showFirstButton\n                        showLastButton\n                        siblingCount={1}\n                        boundaryCount={1}\n                        color=\"primary\"\n                        onChange={handlePageChange}\n                    />\n                </Box>\n            <List className={classes.list}>\n                {allCourses && allCourses.map((course) => (\n                    <div key={course[\"id\"]}>\n                        <ListItem key={course[\"id\"]} button\n                                  onClick={() => {\n                                      if (window.confirm(t(\"confirm_enroll_to_course\"))){  // todo\n                                        dataService\n                                            .postWithId(student_id, course['id'])\n                                            .then(...errorHandler({snackbarSuccess: true}))\n                                            .then((body) => {\n                                                addCourseId(course['id']);\n                                                handleClose();\n                                            })\n                                      }\n                                  }}>\n\n                            <ListItemText id=\"name\" primary={course['name']} secondary={course['description']}/>\n\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n            </Box>\n\n      </Dialog>\n\n              {loading?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n             hasNeeds([NEEDS.post]) && <Tooltip className={classes.actionIcon} title={t(\"add_student\")} aria-label={t(\"new_payment\")}>\n                <IconButton onClick={(e) => {\n                    if (allCourses === null) {\n                        search();\n                    }\n                    setNewCourse(true);\n                }}>\n                  <AddCircleIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <div className={classes.newLine}>\n\n                  <List className={classes.list}>\n                {courses && courses.map((course) => (\n                    <div key={course[\"id\"]}>\n                        <ListItem key={course[\"id\"]} button onClick={(e) => {\n                            history.push('/courses?id='+course['id']);\n                        }}>\n                            <ListItemText id=\"name\" primary={course.name} secondary={course.description}/>\n                            {hasNeeds([NEEDS.delete]) && <ListItemSecondaryAction>\n                                <IconButton onClick={(e) => {\n                                    if (window.confirm(t(\"confirm_unenroll_to_course\"))) deleteStudentCourse(course['id'])\n                                }}>\n                                    <DeleteIcon/>\n                                </IconButton>\n                            </ListItemSecondaryAction>}\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n\n\n\n              {loading &&\n                <Skeleton width=\"100%\" height=\"250px\"/>  // todo we can do better\n              }\n\n              {!loading && courses.length === 0 && !newCourse &&\n                <Typography>{t(\"no_students\")}</Typography>\n              }\n              </div>\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default CourseStudents;\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport TeachersDataService from \"../_services/teachers.service\"\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport {\n    AppBar,\n    Dialog,\n    ListItemSecondaryAction,\n    Slide\n} from \"@material-ui/core\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport SearchBar from \"./searchbar.component\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport {IconButtonSkeleton} from \"../_skeletons/iconButton\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n        overflow: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1\n    },\n    box: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: '30px'\n    },\n    appBar: {\n    position: 'relative',\n  },\n  newLine: {\n    width: '100%',\n       marginTop: theme.spacing(1),\n        display: \"flex\",\n    flexDirection: \"column\"\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1,\n  }, actionIcon: {\n      float: 'right'\n    }\n}));\n\nclass CloseIcon extends React.Component {\n    render() {\n        return null;\n    }\n}\n\nfunction CourseTeachers({ children, history, value, dataService, index, title, courseIds, deleteCourseFromStudent, addCourseId, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const loading = courseIds === null;\nconst [hasNeeds, NEEDS] = useNeeds();\n  const [courses, setCourses] = useState([]);\n  const [allCourses, setAllCourses] = useState(null);\n  const [newCourse, setNewCourse] = useState(false);\n  const handleClose = () => {\n    setNewCourse(false);\n  };\n\n  useEffect(()=>{\n    setNewCourse(false);\n  }, [courses])\n\n\n   const [searchTerm, setSearchTerm] = useState('');\n   const [page, setPage] = useState(1);\n   const [count, setCount] = useState(0);\n\n   function search() {\n       if (loading || !newCourse) return;\n\n        TeachersDataService\n            .getAll({name: 'name', value: searchTerm}, page, ['name', 'description', 'id'])\n            .then(...errorHandler({}))\n            .then(res => {\n                setAllCourses(res[\"data\"].filter(x => !(courseIds.includes(x['id']))));\n                setCount(res[\"_pagination\"][\"totalPages\"]);\n            });\n    }\n\n    useEffect(search, [page, setAllCourses, loading, newCourse]);\n\n   const handlePageChange = (event, value) => {\n        setPage(value);\n    };\n\n  const deleteStudentCourse = (id) => {\n    dataService\n        .delete(student_id, id)\n        .then(...errorHandler({snackbarSuccess:true}))\n        .then(function (r) {\n             deleteCourseFromStudent(id);\n        });\n  }\n\n  useEffect(() => {\n    if (courseIds === null) return;\n\n    if (courseIds.length === 0){\n      setCourses([]);\n    } else {\n      TeachersDataService\n            .getMany(courseIds)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setCourses(res.map(res => res[\"data\"]));\n                });\n    }\n  }, [courseIds])\nconst onChangeSearchTerm = (e) => {\n        setSearchTerm(e.target.value);\n    };\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>  {// todo simplify everywhere\n        } <Box px={2}>\n\n            <Dialog fullScreen open={newCourse} onClose={handleClose} TransitionComponent={Transition}>\n        <AppBar className={classes.appBar} color=\"secondary\">\n          <Toolbar>\n            <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\n              <CloseIcon />\n            </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n                {t(\"enroll_to_course\")}\n            </Typography>\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\n                {t(\"cancel\")}\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Box className={classes.box} m={3}>\n                <SearchBar\n                    label={t(\"courses\")}\n                    value={searchTerm}\n                    onChange={onChangeSearchTerm}\n                    onSearch={search}\n                />\n\n                <Box my={2}>\n                    <Pagination\n                        className={classes.pagination}\n                        count={count}\n                        page={page}\n                        size=\"small\"\n                        showFirstButton\n                        showLastButton\n                        siblingCount={1}\n                        boundaryCount={1}\n                        color=\"primary\"\n                        onChange={handlePageChange}\n                    />\n                </Box>\n            <List className={classes.list}>\n                {allCourses && allCourses.map((course) => (\n                    <div key={course[\"id\"]}>\n                        <ListItem key={course[\"id\"]} button\n                                  onClick={() => {\n                                      if (window.confirm(t(\"confirm_enroll_to_course\"))){  // todo\n                                        dataService\n                                            .postWithId(student_id, course['id'])\n                                            .then(...errorHandler({snackbarSuccess: true}))\n                                            .then((body) => {\n                                                addCourseId(course['id']);\n                                                handleClose();\n                                            })\n                                      }\n                                  }}>\n\n                            <ListItemText id=\"name\" primary={course['name']} secondary={course['description']}/>\n\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n            </Box>\n\n      </Dialog>\n\n              {loading?\n                  <IconButtonSkeleton className={classes.actionIcon}/>\n              :\n             hasNeeds([NEEDS.post]) && <Tooltip className={classes.actionIcon} title={t(\"add_teacher\")} aria-label={t(\"new_payment\")}>\n                <IconButton onClick={(e) => {\n                    if (allCourses === null) {\n                        search();\n                    }\n                    setNewCourse(true);\n                }}>\n                  <AddCircleIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <div className={classes.newLine}>\n\n                  <List className={classes.list}>\n                {courses && courses.map((course) => (\n                    <div key={course[\"id\"]}>\n                        <ListItem key={course[\"id\"]} button onClick={(e) => {\n                            history.push('/courses?id='+course['id']);\n                        }}>\n                            <ListItemText id=\"name\" primary={course.name} secondary={course.description}/>\n                            {hasNeeds([NEEDS.delete]) && <ListItemSecondaryAction>\n                                <IconButton onClick={(e) => {\n                                    if (window.confirm(t(\"confirm_unenroll_to_course\"))) deleteStudentCourse(course['id'])\n                                }}>\n                                    <DeleteIcon/>\n                                </IconButton>\n                            </ListItemSecondaryAction>}\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n\n\n\n              {loading &&\n                <Skeleton width=\"100%\" height=\"250px\"/>  // todo we can do better\n              }\n\n              {!loading && courses.length === 0 && !newCourse &&\n                <Typography>{t(\"no_teachers\")}</Typography>\n              }\n              </div>\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default CourseTeachers;\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport CoursesDataService from \"../_services/courses.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport CourseStudentsDataService from \"../_services/course_students.service\";\nimport CourseTeachersDataService from \"../_services/course_teachers.service\";\nimport CourseDetails from \"./courses.course.details.component\";\nimport CourseLabels from \"./courses.course.labels.component\";\nimport CourseSchedule from \"./courses.course.schedule.component\";\nimport CourseStudents from \"./courses.course.students.component\";\nimport CourseTeachers from \"./courses.course.teachers.component\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst useStyles = makeStyles((theme) => ({\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    display: 'flex',\n      flexDirection: 'column'\n  },\n    content: {\n      overflowX: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n        flex: 1,\n        height: '100%'\n    },\n    tab: {\n      height: '100%'\n    }\n}));\n\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`,\n  };\n}\n\n\nexport default function Course({currentCourseId, history, setNewCourse, addCourseId, newCourse, deleteCourse}) {\n  const loading = currentCourseId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [course, setCourse] = useState(null);  // todo rename to student\nconst [hasNeeds, NEEDS] = useNeeds();\n  useEffect(() => {\n    if (loading) return setCourse(null);\n    CoursesDataService\n            .getOne(currentCourseId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setCourse(res[\"data\"]);\n                });\n  }, [currentCourseId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentCourseId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };\n\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"on\"\n                >\n                  <Tab label={t(\"course\")} {...a11yProps(0)} />\n                   { !newCourse &&\n                  <Tab label={t(\"labels\")} {...a11yProps(1)} />}\n\n                    { !newCourse && hasNeeds([NEEDS.schedules]) &&\n                  <Tab label={t(\"schedules\")} {...a11yProps(2)} />}\n\n                   { !newCourse && hasNeeds([NEEDS.students]) &&\n                  <Tab label={t(\"students\")} {...a11yProps(3)} />}\n\n                   { !newCourse && hasNeeds([NEEDS.teachers]) &&\n                  <Tab label={t(\"teachers\")} {...a11yProps(4)} />}\n\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            containerStyle={{height: '100%'}}\n            className={classes.content}\n            onChangeIndex={handleChangeIndex}\n          >\n\n              <CourseDetails\n                    value={value}\n                    index={0}\n                    newCourse={newCourse}\n                    setNewCourse={setNewCourse}\n                    dir={theme.direction}\n                    currentCourse={course}\n                    updateCurrentCourse={setCourse}\n                    deleteCourse={deleteCourse}\n            />\n\n              <CourseLabels value={value}\n                      index={1}\n                      dir={theme.direction}\n                      currentCourse={course}\n                      updateCurrentCourse={setCourse}\n                      deleteCourse={deleteCourse}\n            />\n\n              {hasNeeds([NEEDS.schedules]) && <CourseSchedule value={value}\n                               index={2}\n                               history={history}\n                               className={classes.tab}\n                               dir={theme.direction}\n                               scheduleIds={course === null ? null : course['schedules']}\n                               student_id={currentCourseId}\n              />}\n\n              {hasNeeds([NEEDS.students]) && <CourseStudents value={value}\n                               index={3}\n                               dataService={CourseStudentsDataService}\n                               history={history}\n                               courseIds={course === null ? null : course['students']}\n                               addCourseId={(student_id) => {\n                                   setCourse({\n                                       ...course,\n                                       students: [...course['students'], student_id]\n                                   })\n                               }}\n                               student_id={currentCourseId}\n                               deleteCourseFromStudent={(student_id) => {\n                                   setCourse({\n                                       ...course,\n                                       students: course['students'].filter((s) => s !== student_id)\n                                   });\n                               }}\n              />}\n\n              {hasNeeds([NEEDS.teachers]) && <CourseTeachers value={value}\n                               index={4}\n                               dataService={CourseTeachersDataService}\n                               history={history}\n                               courseIds={course === null ? null : course['teachers']}\n                               addCourseId={(course_id) => {\n                                   setCourse({\n                                       ...course,\n                                       teachers: [...course['teachers'], course_id]\n                                   })\n                               }}\n                               student_id={currentCourseId}\n                               deleteCourseFromStudent={(course_id) => {\n                                   setCourse({\n                                       ...course,\n                                       teachers: course['teachers'].filter((c) => c !== course_id)\n                                   });\n                               }}\n              />}\n\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport Student from \"./students.student.component\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {Tooltip} from \"@material-ui/core\";\nimport CoursesDataService from \"../_services/courses.service\";\nimport ItemsList from \"./items_list.component\";\nimport Course from \"./courses.course.component\";\nimport {useNeeds} from \"../_helpers/needs\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Courses({history, ...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [courses, setCourses] = useState([]);\n  const [newCourse, setNewCourse] = useState(false);\n  const [currentCourseId, setCurrentCourseId] = useState(null);\n\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentCourseId(id);\n  }, [id])\n\n  useEffect(() => {\n      if (currentCourseId !== null) setNewCourse(false);\n  }, [currentCourseId])\nconst [hasNeeds, NEEDS] = useNeeds();\n  return (\n      <Grid container spacing={3} className={classes.root}>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"courses\")}</h1>\n            <ItemsList\n                setCurrentItemId={setCurrentCourseId}\n                currentItemId={currentCourseId}\n                items={courses}\n                setItems={setCourses}\n                usableFilters={[{\n                    name: 'is_published',\n                    defaultValue: null,\n                    options: [\n                        {\n                            label: \"published\",\n                            tooltip: \"only_published\",\n                            name: true\n                        }, {\n                            label: \"private\",\n                            tooltip: \"only_private\",\n                            name: false\n                        }\n                    ]\n                }]}\n                defaultSearchBy=\"name\"\n                searchByOptions={[\"name\", \"id\"]}\n                dataService={CoursesDataService}\n                searchBarLabel=\"courses\"\n                displayNameField=\"name\"\n            />\n\n\n            {hasNeeds([NEEDS.post]) && <Tooltip title={t(\"new_student\")}>\n                <Fab className={classes.fab} color=\"primary\" onClick={(e) => {\n                    setCurrentCourseId(null);\n                    setNewCourse(true);\n                }}>\n                    <AddIcon/>\n                </Fab>\n            </Tooltip>}\n        </Grid>\n\n        <Grid item xs={8} className={classes.left}>\n          <Course\n            currentCourseId={currentCourseId}\n            newCourse={newCourse}\n            setNewCourse={setNewCourse}\n            history={history}\n            addCourseId={(id) =>{\n                setCurrentCourseId(id);\n            }}\n            deleteCourse={(studentId) => {\n                if (studentId === currentCourseId) setCurrentCourseId(null);\n\n                setCourses(courses.filter((s) => s['id'] !== studentId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import React from \"react\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport ClassIcon from \"@material-ui/icons/Class\";\nimport RoomIcon from \"@material-ui/icons/Room\";\nimport SchoolIcon from \"@material-ui/icons/School\";\nimport AccountBalanceIcon from \"@material-ui/icons/AccountBalance\";\nimport ContactMailIcon from \"@material-ui/icons/ContactMail\";\nimport Students from \"../_components/students.component\";\nimport Users from \"../_components/users.component\";\nimport Payments from \"../_components/payments.component\";\nimport Rooms from \"../_components/rooms.component\";\nimport Teachers from \"../_components/teachers.component\";\nimport Courses from \"../_components/courses.component\";\nimport {NEEDS} from \"../_helpers/needs\";\n\n\nconst Routes = [\n  {\n    path: '/students',\n    component: Students,\n    title: 'students',\n    icon: PersonIcon,\n    needs: [NEEDS.students, NEEDS.get]\n  },\n  {\n    path: '/courses',\n    component: Courses,\n    title: 'courses',\n    icon: ClassIcon,\n    needs: [NEEDS.courses, NEEDS.get]\n  },\n  {\n    path: '/teachers',\n    component: Teachers,\n    title: 'teachers',\n    icon: SchoolIcon,\n    needs: [NEEDS.teachers, NEEDS.get]\n  },\n  {\n    path: '/rooms',\n    component: Rooms,\n    title: 'rooms',\n    icon:  RoomIcon,\n    needs: [NEEDS.rooms, NEEDS.get]\n  },{\n    path: '/payments',\n    component: Payments,\n    title: 'payments',\n    icon: AccountBalanceIcon,\n    needs: [NEEDS.payments, NEEDS.get]\n  },{\n    path: '/users',\n    component: Users,\n    title: 'users',\n    icon: ContactMailIcon,\n    needs: [NEEDS.users, NEEDS.get]\n  }\n];\n\n\nexport default Routes;","import {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\nexport const downloadGodFile = () => {\n    return new Promise(function (resolve, reject) {\n    axios({\n        url: `${BACKEND_URL}/api/${API_VERSION}/files/god`,\n        method: 'POST',\n        responseType: 'blob', // important\n        headers: {\n            ...{\n                'Accept': 'text/csv',\n                'Cache-Control': 'no-cache'\n            }, ...authHeader()\n        }\n    }).then(response => {\n        let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n        if (filename === null) filename = \"export.zip\";\n\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', filename);\n        document.body.appendChild(link);\n        link.click();\n        link.remove();\n        resolve();\n    }).catch(function (err) {\n        reject(err);\n    });\n    });\n}","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const authenticationService = {\n    login,\n    logout,\n    ping\n};\n\nfunction login(username, password) {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/auth/v1/login`,  // todo server url\n            method: 'POST',\n            auth: {\n                username: username,\n                password: password\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(res => {\n            resolve(res[\"data\"][\"needs\"]);\n        }).catch(function (res) {\n            try { if (res[\"response\"][\"status\"] === 401) resolve(false) } catch(err){}\n            reject(res);\n        });\n    });\n}\n\nfunction logout() {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/auth/v1/logout`,\n            method: 'GET',\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(false);\n        }).catch(function (err) {\n            reject(err);\n        });});\n}\n\nfunction ping() {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/auth/v1/ping`,\n            method: 'GET',\n            headers: {'Cache-Control': 'no-cache'}\n        }).then(res => {\n            resolve(res.data[\"needs\"]);\n        }).catch(function (res) {\n            try { if (res[\"response\"][\"status\"] === 401) resolve(false) } catch(err){}\n\n            reject(res);\n        });});\n}","/**\n * returns the selected language, defaults to cat if none is selected\n *\n * @returns string, the selected language\n */\nexport const getCurrentLanguage = () => {\n    return localStorage.getItem(\"i18nextLng\") || \"cat\";\n}\n","import Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useTranslation} from \"react-i18next\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport i18next from \"i18next\";\nimport {getCurrentLanguage} from \"../_translations/utils\";\n\n\n\nexport default function TranslateButton({...props}){\n    const {t} = useTranslation();\n    const selectedLanguage = getCurrentLanguage();\n\n    return  <Tooltip title={selectedLanguage === \"cat\"? t(\"use_eng\"): t(\"use_cat\")} {...props}>\n                <IconButton\n                    color=\"inherit\"\n                    onClick={() => {\n\n                        i18next.changeLanguage(getCurrentLanguage() === \"eng\"? \"cat\": \"eng\").then();\n                    }}\n                    aria-label={selectedLanguage === \"cat\"? t(\"use_eng\"): t(\"use_cat\")}>\n                    <TranslateIcon/>\n                </IconButton>\n\n            </Tooltip>;\n}","import Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useTranslation} from \"react-i18next\";\n\nexport default function ThemeButton({...props}){\n    const themeCtx = React.useContext(themeContext);\n    const {t} = useTranslation();\n\n    return  <Tooltip title={themeCtx.theme? t(\"use_light\"): t(\"use_dark\")}\n                     style={{float: 'right'}} {...props}>\n                <IconButton\n                    color=\"inherit\"\n                    aria-label={themeCtx.theme? t(\"use_light\"): t(\"use_dark\")}\n                    onClick={themeCtx.switchTheme}>\n                    <Brightness4Icon/>\n                </IconButton>\n            </Tooltip>;\n}","import IconButton from \"@material-ui/core/IconButton\";\nimport clsx from \"clsx\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport React, {useContext} from \"react\";\nimport {useTranslation} from \"react-i18next\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport i18next from \"i18next\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport {userContext} from \"../_context/user-context\";\nimport {authenticationService} from \"../_services/auth.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport TranslateButton from \"./translate_button.component\";\nimport ThemeButton from \"./theme_button.component\";\n\nconst languageMap = {\n    eng: { label: \"english\", dir: \"ltr\", active: true },\n    cat: { label: \"català\", dir: \"ltr\", active: false }\n};\n\nconst useStyles = makeStyles(theme => (createStyles({\n    toolbar: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        padding: theme.spacing(0, 1),\n        // necessary for content to be below app bar\n        ...theme.mixins.toolbar,\n    },\n    grow: {\n        flexGrow: 1,\n    },\n})));\n\nexport default function HomeToolbar(props){\n    const changeTheme = props.changeTheme;\n    const classes = useStyles();\n    const errorHandler = useErrorHandler();\n\n    const selected = localStorage.getItem(\"i18nextLng\") || \"eng\";\n    const { t } = useTranslation();\n\n    const title = \"centrífuga4\";\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const isMenuOpen = Boolean(anchorEl);\n    const handleProfileMenuOpen = (event, ) => {\n        setAnchorEl(event.currentTarget);\n    };\n    const handleMenuClose = () => {\n        setAnchorEl(null);\n    };\n\n    const [anchorElLan, setAnchorElLan] = React.useState(null);\n    const isLanguageMenuOpen = Boolean(anchorElLan);\n    const handleLanguageMenuOpen = (event) => {\n        setAnchorElLan(event.currentTarget);\n    };\n    const handleLanguageMenuClose = () => {\n        setAnchorElLan(null);\n    };\n    const changeLanguage = (language) => {\n        i18next.changeLanguage(language).then();\n        handleLanguageMenuClose();\n    }\n    React.useEffect(() => {\n        document.body.dir = languageMap[selected].dir;\n      }, [anchorElLan, selected]);\n\n    const languageMenuId = 'primary-language-select-menu';\n    const languageMenu = (\n        <Menu\n            anchorEl={anchorElLan}\n            anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n            id={languageMenuId}\n            keepMounted\n            transformOrigin={{vertical: 'top', horizontal: 'right'}}\n            open={isLanguageMenuOpen}\n            onClose={handleLanguageMenuClose}>\n            {Object.keys(languageMap)?.map(key => (\n              <MenuItem key={key} onClick={() => changeLanguage(key)}>{languageMap[key].label}</MenuItem>\n            ))}\n        </Menu>\n    );\n\n    const userCtx = useContext(userContext);\n\n\n    const userMenuId = 'primary-search-account-menu';\n    const userMenu = (\n        <Menu\n            anchorEl={anchorEl}\n            anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n            id={userMenuId}\n            keepMounted\n            transformOrigin={{vertical: 'top', horizontal: 'right'}}\n            open={isMenuOpen}\n            onClose={handleMenuClose}>\n\n\n                     <MenuItem\n                         onClick={(event) => {\n                             authenticationService\n                                 .logout()\n                                 .then(...errorHandler({}))\n                                 .then(() => {\n                                     userCtx[\"setUser\"]({logged: false, ping: false});\n                                 });\n                             handleMenuClose(event);\n                         }}>\n                         {t(\"log_out\")}\n                     </MenuItem>\n\n\n        </Menu>\n    );\n\n    return (\n    <Toolbar>\n                    <IconButton\n                        color=\"inherit\"\n                        aria-label={t(\"open_drawer\")}\n                        onClick={props.handleDrawerOpen}\n                        edge=\"start\"\n                        className={clsx(classes.menuButton, {\n                            [classes.hide]: props.open,\n                        })}>\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                      {title}\n                    </Typography>\n                    <div className={classes.grow}/>\n\n                    <TranslateButton/>\n                <ThemeButton />\n\n\n                        <Tooltip title={t(\"my_account\")}>\n                        <IconButton\n                            color=\"inherit\"\n                            onClick={handleProfileMenuOpen}\n                            aria-label={t(\"my_account\")}\n                            aria-controls={userMenuId}\n                            aria-haspopup=\"true\">\n                            <AccountCircleIcon/>\n                        </IconButton>\n                    </Tooltip>\n\n\n        {languageMenu}\n        {userMenu}\n                </Toolbar>\n    )\n};\n","import {makeStyles} from \"@material-ui/core/styles\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport React from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport clsx from \"clsx\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport Routes from \"./routes\";\nimport {BrowserRouter, Link, Redirect, Route, Router} from \"react-router-dom\";\nimport {useTranslation} from \"react-i18next\";\nimport HomeToolbar from \"../_components/toolbar.home.component\";\nimport {createBrowserHistory} from \"history\";\nimport {useNeeds} from \"../_helpers/needs\";\nimport {Backdrop, CircularProgress} from \"@material-ui/core\";\nimport {loadingContext} from '../_context/loading-context';\n\nconst drawerWidth = 240;\nconst useStyles = makeStyles(theme => (createStyles({\n    root: {\n        display: 'flex',\n        height: '100vh'\n    },\n    appBar: {\n        zIndex: theme.zIndex.drawer + 1,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        background: theme.palette.neutral.main,\n        color: theme.palette.neutral.emphasisText.medium,\n    },\n    appBarShift: {\n        marginLeft: drawerWidth,\n        width: `calc(100% - ${drawerWidth}px)`,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    },\n    menuButton: {\n        marginRight: 36,\n    },\n    hide: {\n        display: 'none',\n    },\n    drawer: {\n        width: drawerWidth,\n        flexShrink: 0,\n        whiteSpace: 'nowrap',\n    },\n    drawerOpen: {\n        width: drawerWidth,\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    },\n    drawerClose: {\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        overflowX: 'hidden',\n        width: theme.spacing(7) + 1,\n        [theme.breakpoints.up('sm')]: {\n            width: theme.spacing(9) + 1,\n        },\n    },backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n    toolbar: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        padding: theme.spacing(0, 1),\n        // necessary for content to be below app bar\n        ...theme.mixins.toolbar,\n    },\n    content: {\n        display: 'flex',\n        flexFlow: 'column',\n        height: \"100%\",\n        width: \"100%\",\n        overflow: 'auto'\n    },\n    main: {\n        flex: 1,\n        padding: theme.spacing(3),\n        overflow: 'auto'\n    },\n    icon: {\n      '&': {\n          color: theme.palette.neutral.emphasisText.medium,\n      }\n    },\n    selectedIcon: {\n      '&': {\n          color: theme.palette.primary.main,\n      }\n    },\n    grow: {\n        flexGrow: 1,\n    },\n})));\n\nconst HomePage = (props) => {\n    const theme = useTheme();\n    const classes = useStyles();\n\n    const { t } = useTranslation();\n\n    const [open, setOpen] = React.useState(false);\n    const [currentRoute, setCurrentRoute] = React.useState('/students');\n    const [hasNeeds, NEEDS] = useNeeds();\n\n    const handleDrawerOpen = () => {\n        setOpen(true);\n    };\n    const handleDrawerClose = () => {\n        setOpen(false);\n    };\n\n    const onItemClick = p => {\n        setCurrentRoute(p.path);\n    };\n\n    const history = createBrowserHistory();\n\n    const [loading, setLoading] = React.useState(false);\n      const handleClose = () => {\n        setLoading(false);\n      };\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n<loadingContext.Provider value={{loading: loading, startLoading: () => {setLoading(true)}, stopLoading: () =>{setLoading(false)}}}>\n            <AppBar\n                position=\"fixed\"\n                className={clsx(classes.appBar, {\n                    [classes.appBarShift]: open,\n                })}>\n                <HomeToolbar\n                    changeTheme={props.changeTheme}\n                    handleDrawerOpen={handleDrawerOpen}\n                    handleDrawerClose={handleDrawerClose}\n                    open={open}\n                />\n            </AppBar>\n            <BrowserRouter history={history} basename=\"/app/home\">\n                <Drawer\n                    variant=\"permanent\"\n                    className={clsx(classes.drawer, {\n                        [classes.drawerOpen]: open,\n                        [classes.drawerClose]: !open,\n                    })}\n                    classes={{\n                        paper: clsx({\n                            [classes.drawerOpen]: open,\n                            [classes.drawerClose]: !open,\n                        }),\n                    }}\n                >\n                    <div className={classes.toolbar}>\n                        <IconButton onClick={handleDrawerClose}>\n                            {theme.direction === 'rtl' ? <ChevronRightIcon/> : <ChevronLeftIcon/>}\n                        </IconButton>\n                    </div>\n                    <Divider/>\n                    <List>\n                        {Routes\n                            .filter(route => hasNeeds(route.needs))\n                            .map((prop) =>(\n                                  <ListItem key={prop.title} to={prop.path } button component={Link} onClick={() => onItemClick(prop)}>\n                                    <ListItemIcon className={prop.path === currentRoute? classes.selectedIcon: classes.icon}>\n                                        <Tooltip title={t(prop.title)} aria-label={t(prop.title)}>\n                                            {<prop.icon/>}\n                                        </Tooltip>\n                                    </ListItemIcon>\n                                    <ListItemText primary={t(prop.title)}/>\n                                </ListItem>\n                                ))}\n                    </List>\n                </Drawer>\n\n\n                <div className={classes.content}>\n                    <div className={classes.toolbar}/>\n                    <main className={classes.main}>\n                        {Routes\n                            .filter(route => hasNeeds(route.needs))\n                            .map((prop) => {\n                            return (\n                                <Route key={prop.title} path={prop.path} component={prop.component}/>)\n                        })}\n                    </main>\n                </div>\n            </BrowserRouter>\n\n            <Backdrop className={classes.backdrop} open={loading} onClick={handleClose}>\n            <CircularProgress color=\"inherit\" />\n          </Backdrop>\n</loadingContext.Provider>\n        </div>\n    );\n}\n\nexport default HomePage;","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const passwordResetService = {\n    reset,\n    startReset\n};\n\nfunction reset(username, password, token, recaptcha) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/password-reset/v1/newPassword`,\n            method: 'POST',\n            data: {\n                email: username,\n                password: password,\n                token: token,\n                recaptcha: recaptcha\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(true);\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n\nfunction startReset(username, recaptcha) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/password-reset/v1/passwordReset`,\n            method: 'POST',\n            data: {\n                email: username,\n                recaptcha: recaptcha\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(true);\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n","import { useEffect } from \"react\";\n\nexport const useOnMount = handler => {\n  return useEffect(() => {\n    return handler();\n  }, []);\n};","import React from 'react';\nimport {useFormik} from 'formik';\nimport {authenticationService} from '../_services/auth.service';\nimport {userContext} from \"../_context/user-context\";\nimport * as yup from 'yup';\nimport {TextField} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport Link from \"@material-ui/core/Link\";\nimport {passwordResetService} from \"../_services/password-reset.service\";\nimport {useSnackbar} from \"notistack\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport {safe_username} from \"../_yup/validators\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport {PUBLIC_URL, RECAPTCHA} from \"../config\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport ThemeButton from \"../_components/theme_button.component\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexGrow: 1,\n        height: \"100vh\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    paper: {\n        width: \"50%\",\n        height: \"50%\",\n        minWidth: \"500px\",\n        padding: \"50px\",\n        margin: \"auto\"\n    },\n    reset: {\n        width: \"100%\",\n        textAlign: \"end\",\n        cursor: \"\"\n    }\n}));\n\n\nconst LoginPage = (props) => {\n    const classes = useStyles();\n    const userCtx = React.useContext(userContext);\n    const themeCtx = React.useContext(themeContext);\n\n    const [recaptcha, setRecaptcha] = React.useState(null);\n    const [showRecaptcha, setShowRecaptcha] = React.useState(false);\n    function onChange(value) {\n      setRecaptcha(value);\n    }\n\n    const errorHandler = useErrorHandler();\n\n    const {enqueueSnackbar} = useSnackbar();\n\n    const logged = (needs) => {\n        const setLogged = userCtx[\"setUser\"];\n        const setNeeds = userCtx[\"setNeeds\"];\n        setLogged({logged: true, ping: true});\n        setNeeds(needs);\n        const {from} = props.location.state || {from: {pathname: \"/home/students\"}};\n        props.history.push(from);\n    }\n\n    const {t} = useTranslation();\n    const formik = useFormik({\n        initialValues: {\n            username: '',\n            password: ''\n        },\n        validationSchema: yup.object({\n            username: safe_username(t),\n            password: yup.string().required(t(\"password_required\"))\n        }),\n        enableReinitialize: true,\n        onSubmit: ({username, password}, {setStatus, setSubmitting}) => {\n            setStatus();\n            authenticationService\n                .login(username, password)\n                .then(...errorHandler({}))\n                .then(function (needs) {\n                        logged(needs);\n                    })\n                .catch(() => {\n                    setStatus(true);\n                })\n                .finally(() => {\n                        setSubmitting(false);\n                });\n        }\n    });\n\n    useOnMount(() => {\n        if (userCtx[\"user\"][\"logged\"]) {\n            props.history.push('/home/students');\n            return null;\n        }\n\n        if (userCtx[\"user\"][\"ping\"] !== false){\n             authenticationService\n            .ping()\n            .then(...errorHandler({errorOut: false}))\n            .then((needs) => { logged(needs); });  // ignore failed ping (it is just not logged in)\n        }\n\n    });\n\n    const resetPassword = () => {\n        setShowRecaptcha(true);\n    }\n\n    const resetPassword2 = () => {\n        const username = formik.values[\"username\"];\n        if (username === null || username === '' || username === undefined) {\n            enqueueSnackbar(t(\"username_required_password_reset\"), { variant: \"warning\"});\n        } else {\n            passwordResetService\n                .startReset(username, recaptcha)\n                .then(...errorHandler({}))\n                .then(r => {\n                    setShowRecaptcha(false);\n                    enqueueSnackbar(t(\"started_password_reset\"), { variant: \"success\"});\n                })\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n\n            <Grid container>\n                <Grid xs={2} item/>\n\n                <Grid xs={8} item>\n                    <Grid\n                        container\n                        spacing={0}\n                        align=\"center\"\n                        justify=\"center\"\n                        direction=\"column\"\n                        style={{height: \"100%\"}}\n                    >\n                        <Grid item>\n                            <Box m={2}>\n                                <Paper className={classes.paper}>\n                                    <img src={`${PUBLIC_URL}/logo_centrifuga4_${themeCtx.label}.svg`} alt=\"Logo Centrífuga\" style={{height: \"85px\"}}/>\n\n                                    <form onSubmit={formik.handleSubmit}>\n                                        <TextField\n                                            label={t(\"email\")}\n                                            disabled={formik.isSubmitting}\n                                            helperText={formik.touched[\"username\"] && formik.errors[\"username\"]}\n                                            type=\"email\"\n                                            name=\"username\"\n                                            className={classes.field}\n                                            value={formik.values[\"username\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"password\")}\n                                            name=\"password\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password\"] && formik.errors[\"password\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                type=\"submit\"\n                                                disabled={formik.isSubmitting}\n                                                className={classes.field}>\n                                                {t(\"log_in\")}\n                                            </Button>\n                                        </Box>\n                                    </form>\n\n                                     {showRecaptcha &&\n                                     <div><ReCAPTCHA sitekey={RECAPTCHA}\n                                                 onChange={onChange}\n                                                 theme={themeCtx.theme? \"dark\": \"light\"}\n\n                                                 className={classes.recaptcha}\n                                      />\n                                     <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                onClick={resetPassword2}\n                                                disabled={recaptcha === null}\n                                                className={classes.field}>\n                                                {t(\"reset_password\")}\n                                            </Button>\n                                        </Box>\n                                     </div>}\n\n                                    <Box className={classes.reset}>\n                                        <Typography variant=\"caption\">\n                                            <Link\n                                              component=\"button\"\n                                              variant=\"body2\"\n                                              onClick={resetPassword}\n                                            >\n                                              {t(\"reset_password\")}\n                                            </Link>\n                                        </Typography>\n                                        </Box>\n                                </Paper></Box>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Grid xs={2} item>\n                    <TranslateButton style={{float: 'right'}}/>\n            <ThemeButton style={{float: 'right'}}/>\n                </Grid>\n            </Grid></div>);\n\n}\n\nexport default LoginPage;","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const authenticationService = {\n    signup\n};\n\nfunction signup(username, password, email, name, surname1, surname2, token) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/invites/v1/newUser`,\n            method: 'POST',\n            data: {\n                password: password,\n                email: email,\n                name: name,\n                surname1: surname1,\n                surname2: surname2,\n                token: token\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(true);\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n","import React from 'react';\nimport {useFormik} from 'formik';\nimport * as yup from 'yup';\nimport {TextField} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {authenticationService as signupService} from \"../_services/signup.service\";\nimport {useSnackbar} from \"notistack\";\nimport i18next from \"i18next\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport {safe_password_repetition, safe_email, safe_password, safe_username} from \"../_yup/validators\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport ThemeButton from \"../_components/theme_button.component\";\nimport {PUBLIC_URL} from \"../config\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexGrow: 1,\n        height: \"100vh\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    paper: {\n        width: \"50%\",\n        minWidth: \"500px\",\n        height: \"50%\",\n        padding: \"50px\",\n        margin: \"auto\"\n    }\n}));\n\nconst SignupPage = (props) => {\n    const classes = useStyles();\n    const themeCtx = React.useContext(themeContext);\n    const {enqueueSnackbar} = useSnackbar();\n\n    useOnMount(() => {\n        i18next.changeLanguage(query.get('lan')).then();\n    })\n\n    const {t} = useTranslation();\n    const errorHandler = useErrorHandler();\n    const query = new URLSearchParams(window.location.search);\n    const token = query.get('token')\n    const email = query.get('email')\n    const formik = useFormik({\n        initialValues: {\n            username: email,\n            email: email,\n            password: '',\n            name: '',\n            surname1: '',\n            surname2: '',\n            password2: ''\n        },\n        validationSchema: yup.object({  // todo translate\n            username: safe_username(t),\n            email: safe_email(t),\n            password: safe_password(t),\n            password2: safe_password_repetition(t),\n            name: yup.string().required(t(\"name_required\")),\n            surname1: yup.string().required(t(\"surname1_required\")),\n            surname2: yup.string().required(t(\"surname2_required\"))\n        }),\n        enableReinitialize: true,\n        onSubmit: ({username, email, password, name, surname1, surname2, password2}, {setStatus, setSubmitting}) => {\n            setStatus();\n\n            signupService.signup(username, password, email, name, surname1, surname2, token)\n                .then(...errorHandler({handle401: false, handle400: false}))\n                .then(\n                    function (result) {\n                        enqueueSnackbar(t(\"sign_up_success\"), {variant: \"success\"});\n                        setSubmitting(false);\n                        props.history.push(\"/login\");\n                    },\n                    function (error) {\n                        setSubmitting(false);\n                        setStatus(error);\n\n                        if (error.response.status === 401){\n                            enqueueSnackbar(t(\"invalid_expired_invite\"), { variant: \"warning\"});\n                        } else if (error.response.status === 400) {\n                            enqueueSnackbar(t(\"used_invite\"), { variant: \"warning\"});\n                        }\n                    });\n        }\n    });\n\n    return (\n        <div className={classes.root}>\n            <Grid container>\n                <Grid xs={2} item/>\n\n                <Grid xs={8} item>\n                    <Grid\n                        container\n                        spacing={0}\n                        align=\"center\"\n                        justify=\"center\"\n                        direction=\"column\"\n                        style={{height: \"100%\"}}\n                    >\n                        <Grid item>\n                            <Box m={2}>\n                                <Paper className={classes.paper}>\n                                    <img src={`${PUBLIC_URL}/logo_centrifuga4_${themeCtx.label}.svg`} alt=\"Logo Centrífuga\" style={{height: \"85px\"}}/>\n\n                                     <Box m={2}>\n                                         <Typography>{t(\"been_invited\")}</Typography>\n                                    </Box>\n\n                                    <form onSubmit={formik.handleSubmit}>\n                                        <TextField\n                                            label={t(\"email\")}\n                                            helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                                            type=\"email\"\n                                            name=\"email\"\n                                            className={classes.field}\n                                            value={formik.values[\"email\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                            disabled\n                                        />\n\n\n\n                                        <TextField\n                                            label={t(\"name\")}\n                                            helperText={formik.touched[\"name\"] && formik.errors[\"name\"]}\n                                            name=\"name\"\n                                            className={classes.field}\n                                            value={formik.values[\"name\"]}\n                                            onChange={formik.handleChange}\n                                            disabled={formik.isSubmitting}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"surname1\")}\n                                            helperText={formik.touched[\"surname1\"] && formik.errors[\"surname1\"]}\n                                            name=\"surname1\"\n                                            disabled={formik.isSubmitting}\n                                            className={classes.field}\n                                            value={formik.values[\"surname1\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"surname2\")}\n                                            helperText={formik.touched[\"surname2\"] && formik.errors[\"surname2\"]}\n                                            name=\"surname2\"\n                                            disabled={formik.isSubmitting}\n                                            className={classes.field}\n                                            value={formik.values[\"surname2\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"password\")}\n                                            name=\"password\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password\"] && formik.errors[\"password\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"confirm_password\")}\n                                            name=\"password2\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password2\"] && formik.errors[\"password2\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password2\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                type=\"submit\"\n                                                disabled={formik.isSubmitting}\n                                                className={classes.field}>\n                                                {t(\"sign_up\")}\n                                            </Button>\n                                        </Box>\n                                    </form>\n                                </Paper></Box>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Grid xs={2} item>\n                    <TranslateButton style={{float: 'right'}}/>\n                    <ThemeButton style={{float: 'right'}}/>\n                </Grid>\n            </Grid></div>);\n\n}\n\nexport default SignupPage;","import React from 'react';\nimport {useFormik} from 'formik';\nimport * as yup from 'yup';\nimport {TextField} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useSnackbar} from \"notistack\";\nimport {passwordResetService} from \"../_services/password-reset.service\";\nimport i18next from \"i18next\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport {safe_password, safe_password_repetition, safe_username} from \"../_yup/validators\";\nimport {PUBLIC_URL, RECAPTCHA} from \"../config\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport ThemeButton from \"../_components/theme_button.component\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexGrow: 1,\n        height: \"100vh\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    recaptcha: {\n        margin: theme.spacing(3)\n    },\n    paper: {\n        width: \"50%\",\n        minWidth: \"500px\",\n        height: \"50%\",\n        padding: \"50px\",\n        margin: \"auto\"\n    }\n}));\n\n\nconst ResetPage = (props) => {\n    const classes = useStyles();\n    const themeCtx = React.useContext(themeContext);\n\n    const [recaptcha, setRecaptcha] = React.useState(null);\n    function onChange(value) {\n      setRecaptcha(value);\n    }\n\n    const {enqueueSnackbar} = useSnackbar();\n\n    useOnMount(() => {\n        i18next.changeLanguage(query.get('lan')).then();\n    })\n\n    const {t} = useTranslation();\n    const query = new URLSearchParams(window.location.search);\n    const errorHandler = useErrorHandler();\n    const token = query.get('token')\n    const email = query.get('email')\n    const formik = useFormik({\n        initialValues: {\n            email: email,\n            password: '',\n            password2: ''\n        },\n        validationSchema: yup.object({\n            email: safe_username(t),\n            password: safe_password(t),\n            password2: safe_password_repetition(t)\n        }),\n        enableReinitialize: true,\n        onSubmit: ({email, password, password2}, {setStatus, setSubmitting}) => {\n            setStatus();\n\n            passwordResetService\n                .reset(email, password, token, recaptcha)\n                .then(...errorHandler({handle401: false}))\n                .then(\n                    function (result) {\n                        enqueueSnackbar(t(\"reset_password_success\"), {variant: \"success\"});\n                        setSubmitting(false);\n                        props.history.push(\"/login\");\n                    },\n                    function (error) {\n                        setSubmitting(false);\n                        setStatus(error);\n\n                        if (error.response.status === 401){\n                            enqueueSnackbar(t(\"invalid_expired_reset\"), { variant: \"warning\"});\n                        } // TODO report, same in the signup\n                    });\n        }\n    });\n\n    return (\n        <div className={classes.root}>\n            <Grid container>\n                <Grid xs={2} item/>\n\n                <Grid xs={8} item>\n                    <Grid\n                        container\n                        spacing={0}\n                        align=\"center\"\n                        justify=\"center\"\n                        direction=\"column\"\n                        style={{height: \"100%\"}}>\n                        <Grid item>\n                            <Box m={2}>\n                                <Paper className={classes.paper}>\n                                    <img src={`${PUBLIC_URL}/logo_centrifuga4_${themeCtx.label}.svg`} alt=\"Logo Centrífuga\" style={{height: \"85px\"}}/>\n\n                                     <Box m={2}>\n                                         <Typography>{t(\"new_password\")}</Typography>\n                                    </Box>\n\n                                    <form onSubmit={formik.handleSubmit}>\n                                        <TextField\n                                            label={t(\"email\")}\n                                            helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                                            type=\"email\"\n                                            name=\"email\"\n                                            className={classes.field}\n                                            value={formik.values[\"email\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                            disabled\n                                        />\n                                        <TextField\n                                            label={t(\"password\")}\n                                            name=\"password\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password\"] && formik.errors[\"password\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"confirm_password\")}\n                                            name=\"password2\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password2\"] && formik.errors[\"password2\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password2\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <ReCAPTCHA sitekey={RECAPTCHA}\n                                                 onChange={onChange}\n                                                 theme={themeCtx.theme? \"dark\": \"light\"}\n                                                 className={classes.recaptcha}\n                                      />\n                                        <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                type=\"submit\"\n                                                disabled={formik.isSubmitting || recaptcha==null}\n                                                className={classes.field}>\n                                                {t(\"change_password\")}\n                                            </Button>\n                                        </Box>\n                                    </form>\n                                </Paper>\n                            </Box>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Grid xs={2} item>\n                    <TranslateButton style={{float: 'right'}}/>\n            <ThemeButton style={{float: 'right'}}/>\n                </Grid>\n            </Grid></div>);\n\n}\n\nexport default ResetPage;","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\n\nexport const preEnrolmentService = {\n    getCourses,\n    postPreEnrollment\n};\n\nfunction getCourses() {\n        return new Promise(function (resolve, reject) {\n\n            axios({\n                method: 'get',\n                url: `${BACKEND_URL}/pre-enrolment/v1/courses`,\n                headers: {\n                    ...{\n                        'Content-Type': 'application/json',\n                        'Cache-Control': 'no-cache'\n                    }, ...authHeader()  // todo are auth headers needed for gets?\n                }\n            }).then(function (response) {\n                    resolve(response.data);\n                }).catch(function (err) {\n                    reject(err);\n            });\n        });\n    }\n\n\n    function postPreEnrollment(data, recaptcha) {\n        return new Promise(function (resolve, reject) {\n\n            axios({\n                method: 'post',\n                url: `${BACKEND_URL}/pre-enrolment/v1/pre-enrolment`,\n                data: {\n                    body: data,\n                    recaptcha: recaptcha\n                },\n                headers: {\n                    ...{\n                        'Content-Type': 'application/json',\n                        'Cache-Control': 'no-cache'\n                    }, ...authHeader()\n                }\n            }).then(function (response) {\n                    resolve(response);\n                }).catch(function (err) {\n                    reject(err);\n            });\n        });\n    }\n","import React, {useEffect, useState} from 'react';\nimport * as yup from 'yup';\nimport {\n    Card, CardActions,\n    Checkbox,\n    FormControlLabel,\n    MenuItem,\n    Step,\n    StepLabel,\n    Stepper\n} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useSnackbar} from \"notistack\";\nimport i18next from \"i18next\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport ReCAPTCHA from \"react-google-recaptcha\"\nimport DirtyTextField from \"../_components/dirtytextfield.component\";\nimport Divider from \"@material-ui/core/Divider\";\nimport DirtyCountrySelect from \"../_components/contry-select.component\";\nimport {education_years} from \"../_data/education\";\nimport {emptyAttendee} from \"../_data/empty_objects\";\nimport {useNormik} from \"../_helpers/normik\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport {student_guardian_relations} from \"../_data/relations\";\nimport SearchBar from \"../_components/searchbar.component\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport {PUBLIC_URL, RECAPTCHA} from \"../config\";\nimport ThemeButton from \"../_components/theme_button.component\";\nimport Link from \"@material-ui/core/Link\";\nimport TranslateButton from \"../_components/translate_button.component\";\nimport {preEnrolmentService} from \"../_services/pre-enrolment.service\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: \"100%\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    cards: {\n        '& > *': {\n            margin: theme.spacing(3),\n        },\n    },\n    buttons: {\n        '& > *': {\n            margin: theme.spacing(1),\n        },\n    }, line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    card: {\n    minWidth: 200,\n        width: 'fit-content',\n        maxWidth: 500,\n        display: 'inline-block'\n  },\n    recaptcha: {\n        margin: theme.spacing(4)\n    },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n    list: {\n        maxHeight: '30vh',\n        minHeight: '150px',\n        overflow: 'auto'\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nconst getLocalisedWeekday = (num) => {\n    let d = new Date();\n    const currentDay = d.getDay();\n    const distance = num - currentDay;\n    d.setDate(currentDay + distance);\n    return d.toLocaleString(window.navigator.language, {weekday: 'short'});\n}\n\nconst isUnderage = (birthDateString) => {\n    let today = new Date();\n    let birthDate = new Date(birthDateString);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    let m = today.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--;\n    return age < 18;\n}\nconst PreEnrolmentPage = (props) => {\n    const {t} = useTranslation();\n\n    const can_pay_60 = \"Puc pagar la quota trimestral de 60€/estudiant\";\n     const can_pay_50 =   \"Puc pagar una quota trimestral de 50€/estudiant\";\n     const can_pay_40 =  \"Puc pagar una quota trimestral de 40€/estudiant\";\n\n    const classes = useStyles();\n\n\n    const [recaptcha, setRecaptcha] = React.useState(null);\n    function onChange(value) {\n      setRecaptcha(value);\n    }\n\n\n\n    const {enqueueSnackbar} = useSnackbar();\n    const [skipped, setSkipped] = React.useState(new Set());\n    const [availableCourses, setAvailableCourses] = React.useState([]);\n    const [filteredCourses, setFilteredCourses] = React.useState([]);\n    const [chosenCourses, setChosenCourses] = React.useState([]);\n    const [raw_economic_comments, setRawEconomicComments] = React.useState([]);\n   const isStepSkipped = (step) => {\n    return skipped.has(step);\n  };\n\n    const [activeStep, setActiveStep] = React.useState(0);\n      const steps = [t(\"data_protection\"), t(\"student_info\"), t(\"contact_person_1\"), t(\"contact_person_2\"), t(\"courses\"), t(\"confirmation\")];\n\n    const handleSkip = () => {\n    if (!isStepOptional(activeStep)) {\n      // You probably want to guard against something like this,\n      // it should never occur unless someone's actively trying to break something.\n      throw new Error(\"You can't skip a step that isn't optional.\");\n    }\n\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    setSkipped((prevSkipped) => {\n      const newSkipped = new Set(prevSkipped.values());\n      newSkipped.add(activeStep);\n      return newSkipped;\n    });\n  };\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n\n      const handleReset = () => {\n        setActiveStep(0);\n      };\n\n      useOnMount(() => {\n          i18next.changeLanguage('cat').then();\n         preEnrolmentService.getCourses()\n             .then(...errorHandler({}))\n             .then(courses => {\n                 setAvailableCourses(courses);\n                 setFilteredCourses(courses);\n             })\n      });\n\n\n      const [searchTerm, setSearchTerm] = useState('');\n\n    const errorHandler = useErrorHandler();\n    const required = t(\"required\");\n    const formik = useNormik(false,{\n        initialValues: {...emptyAttendee,\n            __person1__name: '', __person2__name: '',\n__person1__surname1: '',\n            __person1__surname2: '',\n            __person1__email: '', __person1__phone: '', __person1__relation: '',\n            __person1__is_studying: '', __person1__is_working: '', __person1__career: '',\n            __person1__education_entity: '', __person1__education_year: '',\n            __person2__surname1: '',\n            __person2__surname2: '',\n            __person2__email: '', __person2__phone: '', __person2__relation: '',\n            __person2__is_studying: '', __person2__is_working: '', __person2__career: '',\n            __person2__education_entity: '', __person2__education_year: '',\n            image_agreement: false\n\n\n        },\n        validationSchema: yup.object({  // todo translate\n            name: yup.string(required).required(required),\n            surname1: yup.string(required).required(required),\n            surname2: yup.string(required).required(required),\n            email: yup.string(required).email(t(\"invalid_email\")).when('birth_date', (other, schema) => ((other && !isUnderage(other))? schema.required(required): schema)),\n            phone: yup.string().when('birth_date', (other, schema) => ((other && !isUnderage(other))? schema.required(required): schema)),\n            address: yup.string(required).required(required),\n            city: yup.string(required).required(required),\n            zip: yup.number(required).required(required),\n            dni: yup.string(required).matches(/^[0-9]{8}[TRWAGMYFPDXBNJZSQVHLCKE]$/i , \"format de DNI invàlid\"),\n            country_of_origin: yup.string(required).notOneOf(['empty']).test(  // one of the array\n                                  'countryNonEmpty',\n                                  required,\n                                  v =>  v !== undefined\n                                ),\n            gender: yup.string(required).required(required),\n            is_studying: yup.boolean(required).required(required),\n            is_working: yup.boolean(required).required(required),\n            career: yup.string(required).when('is_working', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            education_entity: yup.string(required).when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            education_year: yup.string(required).when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            birth_date: yup.date(required).required(required),\n            years_in_xamfra: yup.number(required).required(required),\n            __person1__name: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => {\n                                      return v !== undefined && v !== \"\" || isStepSkipped(2)\n                                  }\n                                ),\n            __person1__surname1: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>  v !== undefined && v !== \"\"|| isStepSkipped(2)\n                                ),\n            __person1__surname2: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" || isStepSkipped(2)\n                                ),\n            __person1__email: yup.string(required).email(t(\"invalid_email\")).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>v !== undefined && v !== \"\"||  isStepSkipped(2)\n                                ),\n            __person1__phone: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>v !== undefined && v !== \"\" || isStepSkipped(2)\n                                ),\n            __person1__relation: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\"|| isStepSkipped(2)\n                                ),\n            __person1__is_studying: yup.boolean(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" ||  isStepSkipped(2)\n                                ),\n            __person1__is_working: yup.boolean(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\"|| isStepSkipped(2)\n                                ),\n            __person1__career: yup.string(required).when('__person1__is_working', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            __person1__education_entity: yup.string(required).when('__person1__is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            __person1__education_year: yup.string(required).when('__person1__is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            __person2__name: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__surname1: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__surname2: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>  v !== undefined && v !== \"\"|| isStepSkipped(3)\n                                ),\n            __person2__email: yup.string(required).email(t(\"invalid_email\")).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__phone: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>  v !== undefined && v !== \"\"|| isStepSkipped(3)\n                                ),\n            __person2__relation: yup.string(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>v !== undefined && v !== \"\"|| isStepSkipped(3)\n                                ),\n            __person2__is_studying: yup.boolean(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v =>  v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__is_working: yup.boolean(required).test(  // one of the array\n                                  'requiredIfNotSkipped',\n                                  required,\n                                  v => v !== undefined && v !== \"\" || isStepSkipped(3)\n                                ),\n            __person2__career: yup.string(required).when('__person2__is_working', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            __person2__education_entity: yup.string(required).when('__person2__is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            __person2__education_year: yup.string(required).when('__person2__is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(required)\n                                                }),\n            image_agreement: yup.boolean(required)\n        }),\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n            setStatus();\n\n            let body = {};\n\n            body['image_agreement'] = values.image_agreement;\n            body['name'] = values.name;\n            body['surname1'] = values.surname1;\n            body['surname2'] = values.surname2;\n            body['email'] = values.email;\n            body['address'] = values.address;\n            body['city'] = values.city;\n            body['zip'] = values.zip;\n            body['dni'] = values.dni;\n            body['phone'] = values.phone;\n            body['country_of_origin'] = values.country_of_origin;\n            body['gender'] = values.gender;\n            body['is_studying'] = values.is_studying;\n            body['is_working'] = values.is_working;\n            body['education_entity'] = values.education_entity;\n            body['education_year'] = values.education_year;\n            body['career'] = values.career;\n            body['birth_date'] = values.birth_date;\n            body['years_in_xamfra'] = values.years_in_xamfra;\n            body['guardians'] = [];\n            [2,3].map(idx => {\n                if (!isStepSkipped(idx)){\n                    let guardian = {};\n                    const prefix = `__person${idx-1}__`;\n                    guardian['name'] = values[prefix+\"name\"];\n                    guardian['surname1'] = values[prefix+\"surname1\"];\n                    guardian['surname2'] = values[prefix+\"surname2\"];\n                    guardian['email'] = values[prefix+\"email\"];\n                    guardian['phone'] = values[prefix+\"phone\"];\n                    guardian['is_studying'] = values[prefix+\"is_studying\"];\n                    guardian['is_working'] = values[prefix+\"is_working\"];\n                    guardian['education_entity'] = values[prefix+\"education_entity\"];\n                    guardian['education_year'] = values[prefix+\"education_year\"];\n                    guardian['career'] = values[prefix+\"career\"];\n                    guardian['relation'] = values[prefix+\"relation\"];\n\n                    body['guardians'].push(guardian);\n                }\n            })\n            body['payment_comments'] = raw_economic_comments.join('. ');\n            if (raw_economic_comments.includes(can_pay_40)){\n                body['price_term'] = 40;\n            } else if (raw_economic_comments.includes(can_pay_50)){\n                body['price_term'] = 50;\n            } else if (raw_economic_comments.includes(can_pay_60)){\n                body['price_term'] = 60;\n            } else {\n                body['price_term'] = null;\n            }\n            body['other_comments'] = values['other_comments'];\n            body['courses'] = chosenCourses.map(x => x.id);\n\n            setSubmitting(false);\n\n            preEnrolmentService.postPreEnrollment(body, recaptcha)\n                .then(...errorHandler({snackbarSuccess: true}))\n                .then(() => {\n                    setActiveStep(steps.length);\n                })\n        }\n    });\n\n useEffect(() => {\n          let labels = [];\n          if (!isUnderage(formik.values['birth_date']) ){\n              labels.push(\"adult\");\n          }\n          if (formik.values['is_studying']){\n              labels.push(formik.values['education_year']);\n          }\n\n          setFilteredCourses(availableCourses.filter(x => labels.some(l => x['labels'].includes(l))));\n\n      }, [availableCourses, formik.values['education_year'], formik.values['birth_date']]);\n\n\n    const isStepOptional = (step) => {\n    return step === 3 || (step === 2  && formik.values['birth_date'] !== '' && !isUnderage(formik.values['birth_date']));\n  };\n    const fieldsToValidatePerStep = [  // to have coinciding indexes with steps\n        [],\n    ['birth_date', 'name', 'surname1', 'surname2', 'address', 'city', 'zip', 'gender', 'is_studying', 'is_working', 'education_entity', 'education_year', 'career', 'years_in_xamfra', 'country_of_origin', 'phone', 'email'],\n        ['__person1__name', '__person1__surname1', '__person1__surname2', '__person1__email', '__person1__phone', '__person1__phone', '__person1__relation', '__person1__is_studying', '__person1__education_entity', '__person1__education_year', '__person1__is_working', '__person1__career'],\n        ['__person2__name', '__person2__surname1', '__person2__surname2', '__person2__email', '__person2__phone', '__person2__phone', '__person2__relation', '__person2__is_studying', '__person2__education_entity', '__person2__education_year', '__person2__is_working', '__person2__career'],\n    [], ['image_agreement']]\nconst handleNext = () => {\n        formik.setFieldTouched('');\n\n\n            let newSkipped = skipped;\n            if (isStepSkipped(activeStep)) {\n              newSkipped = new Set(newSkipped.values());\n              newSkipped.delete(activeStep);\n            }\n\n            setActiveStep((prevActiveStep) => prevActiveStep + 1);\n            setSkipped(newSkipped);\n\n\n\n      };\n    const themeCtx = React.useContext(themeContext);\n    return (\n        <Box p={5} style={{width: '100%'}}>\n             <TranslateButton style={{float: 'right'}}/>\n                <ThemeButton style={{float: 'right'}}/>\n\n            <Box m={2} style={{textAlign: \"center\"}}>\n        <img src={ `${PUBLIC_URL}/logo_xamfra_${themeCtx.label}.png`} alt=\"Logo Xamfrà\"\n             style={{height: \"85px\"}}/>\n            </Box>\n                <Paper className={`${classes.paper} ${classes.root}`}>\n                   <Box p={2}> <Stepper activeStep={activeStep}>\n                    {steps.map((label, index) => {\n                      const stepProps = {};\n                      const labelProps = {};\n                      if (isStepOptional(index)) {\n                        labelProps.optional = <Typography variant=\"caption\">opcional</Typography>;\n                      }\n                      if (isStepSkipped(index)) {\n                        stepProps.completed = false;\n                      }\n                      return (\n                        <Step key={label} {...stepProps}>\n                          <StepLabel {...labelProps}>{label}</StepLabel>\n                        </Step>\n                      );\n                    })}\n                  </Stepper>\n                    <div>\n        {activeStep === steps.length ? (\n          <div style={{textAlign:\"center\"}}>\n            <Typography>Prematrícula completada amb èxit! | ¡Prematrícula completada con éxito! | Pre-enrolment successful!</Typography>\n          </div>\n        ) : (\n             <form onSubmit={formik.handleSubmit}>\n          <Box m={2}>\n              <div>\n                  {activeStep === 0 &&\n                  <div>\n                      <Typography>\n                          Podeu consultar el quadre horari del curs 20-21 <Link target=\"_blank\" href=\"https://xamfra.net/com-participar-hi/horaris/\">aquí</Link>.\n                      </Typography>\n                      <br/>\n                      <Typography variant={\"caption\"}>\nEnviar aquest formulari implica consentiment per fer ús de les dades per tal de rebre informació durant el període de preinscripció i inici de curs.\n\nLa posterior matrícula presencial al centre implica també l'ús de les dades durant tot el curs 2020-2021.\n\nLa nostra política protecció de dades es basa en que:\n\n1) El Responsable del Tractament de les teves dades personals és de Xamfrà, Centre de Música i Escena del Raval (Fundació l'ARC Música)\n2) Les finalitats del tractament de les dades personals és la de gestionar la teva vinculació amb Xamfrà. La base de dades disposa de noms, telèfons, adreça postal i adreça electrònica.\n3) Les teves dades no seran comunicades a tercers sense previ consentiment.\n4) Pots exercir els drets d'accés, rectificació i oposició segons preveu a la normativa.\n            </Typography>\n\n                  </div>\n                  }\n\n\n\n\n\n                  {activeStep === 1 &&\n                  <div>\n                      <Typography variant=\"h2\">{t(\"student\")}</Typography>\n\n<Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                                noDirty={true}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name=\"surname1\"\n                                formik={formik}\n                                noDirty={true}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"surname2\"\n                                noDirty={true}\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"email\"\n                                noDirty={true}\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"address\")}\n                                formik={formik}\n                                noDirty={true}\n                                style={{flex: 4}}\n                                name=\"address\"\n                            />\n                            <DirtyTextField\n                                label={t(\"city\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                noDirty={true}\n                                name=\"city\"\n                            />\n                            <DirtyTextField\n                                label={t(\"zip\")}\n                                formik={formik}\n                                type=\"number\"\n                                noDirty={true}\n                                style={{flex: 1}}\n                                name=\"zip\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"dni\")}\n                                style={{flex: 1}}\n                                noDirty={true}\n                                formik={formik}\n                                name=\"dni\"\n                            />\n                            <DirtyTextField\n                                label={t(\"phone\")}\n                                type=\"tel\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                noDirty={true}\n                                name=\"phone\"\n                            />\n\n\n\n                        </Box>\n\n\n                      <Box className={[classes.line, classes.composite]}>\n\n                            <DirtyCountrySelect\n                                formik={formik}\n                                style={{flex: 1}}\n                                noDirty={true}\n                                name={\"country_of_origin\"}\n                                label={t(\"country_of_origin\")}\n                            />\n<DirtyTextField\n                                label={t(\"gender\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                noDirty={true}\n                                name=\"gender\"\n                                select>\n                                <MenuItem value=\"m\">{t(\"m\")}</MenuItem>\n                                <MenuItem value=\"f\">{t(\"f\")}</MenuItem>\n                                <MenuItem value=\"nb\">{t(\"nb\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n<Box my={3}>\n            <Divider />\n            </Box>\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"is_studying\")}\n                                style={{flex: 1}}\n                                name=\"is_studying\"\n                                formik={formik}\n                                noDirty={true}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"school_university\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"education_entity\"\n                                noDirty={true}\n                            />\n                            <DirtyTextField\n                                label={t(\"education_year\")}\n                                style={{flex: 2}}\n                                noDirty={true}\n                                name=\"education_year\"\n                                formik={formik}\n                                select>\n                                {education_years.map((level) => (\n                                    <MenuItem key={level} value={level}>{t(level)}</MenuItem>\n                                ))}\n                            </DirtyTextField>\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n\n\n                            <DirtyTextField\n                                label={t(\"is_working\")}\n                                style={{flex: 1}}\n                                name=\"is_working\"\n                                formik={formik}\n                                noDirty={true}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"career\")}\n                                style={{flex: 4}}\n                                formik={formik}\n                                noDirty={true}\n                                name=\"career\"\n                            />\n                        </Box>\n\n                       <Box className={[classes.line, classes.composite]}>\n\n <DirtyTextField\n                                label={t(\"birthdate\")}\n                                type=\"date\"\n                                style={{flex: 1}}\n                                noDirty={true}\n                                formik={formik}\n                                name=\"birth_date\"\n                                InputLabelProps={{shrink: true}}/>\n                            <DirtyTextField\n                              label={t(\"years_in_xamfra\")}\n                              type=\"number\"\n                              noDirty={true}\n                              formik={formik}\n                              style={{flex: 1}}\n                              name=\"years_in_xamfra\"/>\n                        </Box>\n\n\n\n                  </div>\n                  }\n\n\n                  {(activeStep === 2 || activeStep === 3) &&\n                  <div>\n                      <Typography variant=\"h2\">{t(\"contact\") + \" \" + (activeStep - 1)}</Typography>\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep-1) + \"__name\"}\n                                formik={formik}\n                                noDirty={true}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep-1) + \"__surname1\"}\n                                formik={formik}\n                                noDirty={true}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name={\"__person\" + (activeStep-1) + \"__surname2\"}\n                                noDirty={true}\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name={\"__person\" + (activeStep-1) + \"__email\"}\n                                noDirty={true}\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n\n                            <DirtyTextField\n                                label={t(\"phone\")}\n                                type=\"tel\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                noDirty={true}\n                                name={\"__person\" + (activeStep-1) + \"__phone\"}\n                            />\n\n                            <DirtyTextField\n                                label={t(\"relation\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep-1) + \"__relation\"}\n                                select\n                                noDirty={true}\n                                formik={formik}\n                            >\n                          {student_guardian_relations.map((r) => (\n                                   <MenuItem key={r} value={r}>{t(r)}</MenuItem>\n                                ))}\n                                ))}\n\n                        </DirtyTextField>\n\n\n\n                        </Box>\n\n\n<Box my={3}>\n            <Divider />\n            </Box>\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"is_studying\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep - 1) + \"__is_studying\"}\n                                formik={formik}\n                                noDirty={true}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"school_university\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name={\"__person\" + (activeStep-1) + \"__education_entity\"}\n                                noDirty={true}\n                            />\n                            <DirtyTextField\n                                label={t(\"education_year\")}\n                                style={{flex: 2}}\n                                noDirty={true}\n                                name={\"__person\" + (activeStep-1) + \"__education_year\"}\n                                formik={formik}\n                                select>\n                                {education_years.map((level) => (\n                                    <MenuItem key={level} value={level}>{t(level)}</MenuItem>\n                                ))}\n                            </DirtyTextField>\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n\n\n                            <DirtyTextField\n                                label={t(\"is_working\")}\n                                style={{flex: 1}}\n                                name={\"__person\" + (activeStep-1) + \"__is_working\"}\n                                formik={formik}\n                                noDirty={true}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"career\")}\n                                style={{flex: 4}}\n                                formik={formik}\n                                noDirty={true}\n                                name={\"__person\" + (activeStep-1) + \"__career\"}\n                            />\n                        </Box>\n\n\n\n\n                  </div>\n                  }\n\n    {activeStep === 4 &&\n    <div>\n\n        <Box className={classes.cards}>\n            {chosenCourses && chosenCourses.map(course => (\n                <Card className={classes.card} raised={true}>\n                  <CardContent>\n\n                    <Typography variant=\"h5\" component=\"h2\">\n                        {course['name']}\n                    </Typography>\n      <Typography className={classes.pos} color=\"textSecondary\">\n                      {course['description']? course['description']: \"...\"}\n                    </Typography>\n                      {  course['base_schedules'] && course['base_schedules'].map(s => (\n                          <Typography variant=\"body2\" component=\"p\">\n                              {getLocalisedWeekday(s.day_week)}, {s.start_time.slice(0, -3)} - {s.end_time.slice(0, -3)}\n                    </Typography>\n                      ))}\n\n\n\n\n                  </CardContent>\n                  <CardActions>\n                      <IconButton size=\"small\" onClick={() => {setChosenCourses(chosenCourses.filter(c => (c !== course)))}}><DeleteIcon/></IconButton>\n                  </CardActions>\n                </Card>\n            ))}\n        </Box>\n\n     <Box my={3}>\n            <Divider />\n            </Box>\n\n         <Box className={classes.box} m={3}>\n                <SearchBar\n                    label={t(\"courses\")}\n                    value={searchTerm}\n                    onChange={(e) => {\n                        setSearchTerm(e.target.value);\n                    }}\n                    onSearch={() => {}}\n                />\n            <List className={classes.list}>\n                {filteredCourses && filteredCourses.filter(x =>\n                    !chosenCourses.includes(x) &&\n                    (x.name.includes(searchTerm) || (x.description !== null && x.description.includes(searchTerm)))).map((course) => (\n                    <div key={course[\"id\"]}>\n                        <ListItem key={course[\"id\"]} button\n                                  onClick={() => {\n                                        setChosenCourses([...chosenCourses, course]);\n                                  }}>\n\n                            <ListItemText id=\"description\" primary={course['name']} secondary={course['description']}/>\n                            {course[\"base_schedules\"] && course[\"base_schedules\"].map(s => (\n                                <ListItemText id=\"schedule\" key={s['id']} secondary={getLocalisedWeekday(s.day_week) + \", \" + s.start_time.slice(0, -3) + \" - \" + s.end_time.slice(0, -3)}/>\n\n                            ))}\n\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n             {filteredCourses.length === 0 &&\n                <Typography>{t(\"no_courses_found_add_edu\")}</Typography>\n             }\n            </Box>\n    </div>}\n\n  {activeStep === 5 &&\n      <div>\n\n          <Typography>\n                    Xamfrà és un centre que treballa perquè tots els infants i joves puguin fer música, teatre i dansa. Les famílies aporten el que poden per ajudar a fer sostenible el centre. En cap cas, la quota cobreix el cost dels tallers que fan els nens i nenes. Marqueu, si us plau, una o vàries opcions.\n                </Typography>\n          <Typography>\n              IMPORTANT: CAP INFANT O JOVE HA DE DEIXAR DE FER TEATRE, MÚSICA O DANSA A XAMFRÀ PER MOTIUS ECONÒMICS. A QUI NO PUGUI, L'AJUDAREM; I QUI PUGUI AJUDAR: MOLTES GRÀCIES!\n          </Typography>\n\n          {\n              [can_pay_60,\n              can_pay_50,\n              can_pay_40,\n              \"Puc pagar una quota a acordar personalment\",\n              \"No puc pagar la quota trimestral\",\n              \"Puc aportar una segona quota per un altre nen/a (desgravació fiscal)\",\n              \"Puc fer-me teamer (1 €/mes)\",\n              \"Puc fer donatius puntuals (desgravació fiscal)\",\n              \"Puc fer donatius regulars (desgravació fiscal)\",\n              \"Puc ajudar en tasques puntuals\",\n              \"Puc ajudar a la Campanya RISUONA (donació d'instruments)\",\n              \"Puc fer serveis professionals relacionats amb els meus estudis o professió\"].map(option => (\n                  <FormControlLabel\n                        control={\n                            <Checkbox\n                                onChange={(event, checked) => {\n                                    if (checked) {\n                                        raw_economic_comments.push(option);\n                                    } else {\n                                        setRawEconomicComments( raw_economic_comments.filter((x) => x !== option));\n                                    }\n\n                                    }\n                                }\n                            />\n                        }\n                        key={option}\n                        label={option}\n                      />\n              ))\n          }\n\n          <Box my={3}>\n            <Divider />\n            </Box>\n\n          <Box className={[classes.line, classes.composite]}>\n                             <DirtyTextField\n                                label={t(\"other_comments\")}\n                                style={{flex: 1}}\n                                multiline\n                                formik={formik}\n                                rowsMax={8}\n                                noDirty={true}\n                                name=\"other_comments\"\n                            />\n                        </Box>\n\n\n            <Box my={3}>\n            <Divider />\n            </Box>\n          <FormControlLabel\n                        control={\n                            <Checkbox\n                                defaultValue={false}\n                                defaultChecked={false}\n                                checked={formik.values['image_agreement']}\n                                name={'image_agreement'}\n                                value={formik.values['image_agreement']}\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                            />\n                        }\n                        key={'image_agreement'}\n                        label={isUnderage(formik.values['birth_date'])?\n                        \"En cas de matricular-lo, autoritzo l’ús de la imatge de l’estudiant, menor d'edat, per a que pugui aparèixer a materials escrits o multimèdia corresponents a activitats educatives organitzades per Xamfrà.\"\n                        : \"En cas de matricular-me, autoritzo l’ús de la meva imatge per a que pugui aparèixer a materials escrits o multimèdia corresponents a activitats educatives organitzades per Xamfrà.\" }\n                      />\n\n                      <ReCAPTCHA sitekey={RECAPTCHA}\n                                 onChange={onChange}\n                                 theme={themeCtx.theme? \"dark\": \"light\"}\n                                 className={classes.recaptcha}\n                      />\n      </div>\n               }\n\n              </div>\n            <Box m={2} className={classes.buttons}>\n              <Button\n                disabled={activeStep === 0}\n                onClick={handleBack}\n                className={classes.backButton}\n              >\n                  {t(\"back\")}\n              </Button>\n                {isStepOptional(activeStep) && (\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={handleSkip}\n                  className={classes.button}\n                >\n                    {t(\"skip\")}\n                </Button>\n              )}\n\n\n\n\n\n <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  disabled={(activeStep === steps.length - 1) || !fieldsToValidatePerStep[activeStep].every(f => (!formik.errors[f]))}\n                  onClick={handleNext}>\n                { t(\"next\")}\n              </Button>\n\n                {activeStep === steps.length - 1 && <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  type=\"submit\"\n                  disabled={formik.isSubmitting || recaptcha===null || !fieldsToValidatePerStep[activeStep].every(f => (!formik.errors[f]))}>\n                { t(\"finish\")}\n              </Button> }\n\n\n\n            </Box>\n              </Box>\n             </form>\n          )}\n                    </div>\n\n\n                </Box></Paper>\n        </Box>\n\n        );\n\n}\n\nexport default PreEnrolmentPage;","import Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\nimport Box from \"@material-ui/core/Box\";\nimport React from \"react\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useTranslation} from \"react-i18next\";\nimport Typography from \"@material-ui/core/Typography\";\n\nexport default function NotFound({}){\n    const themeCtx = React.useContext(themeContext);\n    const {t} = useTranslation();\n\n    return  <Typography variant=\"h1\">Nope, not found... 👻</Typography>;\n}","import React, {useState} from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {createMuiTheme} from '@material-ui/core/styles';\nimport {ThemeProvider} from '@material-ui/styles';\nimport {darkTheme, lightTheme} from '../theme';\nimport {SnackbarProvider} from 'notistack';\n\nimport PrivateRoute from '../_components/PrivateRoute';\nimport HomePage from '../HomePage/HomePage';\nimport LoginPage from '../LoginPage/LoginPage';\nimport {BrowserRouter, Route, Router, Switch} from 'react-router-dom';\nimport {userContext} from '../_context/user-context';\nimport {themeContext} from '../_context/theme-context';\nimport SignupPage from \"../SignupPage/SignupPage\";\nimport ResetPage from \"../ResetPage/ResetPage\";\nimport PreEnrolmentPage from \"../PreEnrolmentPage/PreEnrolmentPage\";\nimport NotFound from \"../_components/not_found\";\n\nfunction App() {\n    const [theme, setTheme] = useState(localStorage.getItem(\"darkTheme\") === \"true\");\n    const appliedTheme = createMuiTheme(theme ? darkTheme : lightTheme);\n\n\n    const [user, setUser] = useState({logged: false, ping: true});\n    const [needs, _setNeeds] = useState([]);\n    const setNeeds = (needs) => {\n        if (!Array.isArray(needs)) return _setNeeds([]);\n        return _setNeeds(needs);\n    }\n\n    return (\n      <ThemeProvider theme={appliedTheme}>\n        <CssBaseline />\n        <SnackbarProvider maxSnack={3}>\n            <userContext.Provider value={{user: user, setUser: setUser, needs: needs, setNeeds: setNeeds}}>\n                <themeContext.Provider value={{theme: theme, switchTheme: () => {\n                    localStorage.setItem(\"darkTheme\", (!theme).toString());\n                    setTheme(!theme);\n                }, label: theme? \"dark\": \"light\"}}>\n                    <BrowserRouter basename=\"/app\">\n                        <Switch>\n                        <PrivateRoute path={'/home'}  component={HomePage}/>\n                        <Route path={'/login'} component={LoginPage}/>\n                        <Route path={'/signup'} component={SignupPage}/>\n                        <Route path={'/password-reset'} component={ResetPage}/>\n                        <Route path={'/prematricula'} component={PreEnrolmentPage}/>\n                        <Route component={NotFound}/>\n                        </Switch>\n                    </BrowserRouter>\n                </themeContext.Provider>\n            </userContext.Provider>\n        </SnackbarProvider>\n      </ThemeProvider>\n    );\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from 'i18next';\nimport {initReactI18next} from 'react-i18next';\nimport Backend from 'i18next-xhr-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport translationEN from \"./_translations/locales/eng/translation.json\";\nimport translationCAT from \"./_translations/locales/cat/translation.json\";\n\nconst fallbackLng = [\"eng\"];\nconst availableLanguages = [\"eng\", \"cat\"];\n\nconst resources = {\n    eng: {\n        translation: translationEN\n    },\n    cat: {\n        translation: translationCAT\n    }\n};\n\ni18n\n    .use(Backend) // load _translations using http (default                                               public/assets/locals/en/_translations)\n    .use(LanguageDetector) // detect user language\n    .use(initReactI18next) // pass the i18n instance to react-i18next.\n    .init({\n        resources,\n        fallbackLng, // fallback language is english.\n\n        detection: {\n            checkWhitelist: true, // options for language detection\n        },\n\n        debug: false,\n\n        whitelist: availableLanguages,\n\n        interpolation: {\n            escapeValue: false, // no need for react.  it escapes by default\n        },\n    }).then(_ => ({}));\n\nexport default i18n;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App/App';\nimport reportWebVitals from './reportWebVitals';\nimport {Helmet} from 'react-helmet';\nimport \"./i18nextConf\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <Helmet>\n          <title>centrífuga4</title>\n                <base href={`${process.env.PUBLIC_URL}/`}/>\n          <link nonce=\"{{csp_nonce()}}\" rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\" />\n          <link nonce=\"{{csp_nonce()}}\" rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />\n          <meta\n              name=\"viewport\"\n              content=\"minimum-scale=1, initial-scale=1, width=device-width\"/>\n      </Helmet>\n      <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}