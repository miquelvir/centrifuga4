{"version":3,"sources":["theme.js","_helpers/history.js","_context/user-context.js","_components/PrivateRoute.js","_helpers/auth-header.js","config.js","_services/service-factory.js","_services/students.service.js","_components/searchbar.component.js","_components/loadingBackdrop.component.js","_helpers/handle-response.js","_components/students.list.component.js","_components/dirtytextfield.component.js","_data/countries.js","_components/contry-select.component.js","_helpers/normik.js","_data/education.js","_components/students.student.person.component.js","_services/guardians.service.js","_services/payments.service.js","_data/payment_methods.js","_data/empty_objects.js","_components/students.student.attendee.component.js","_services/emailsGrants.service.js","_services/emailsEnrollment.service.js","_services/student_guardians.service.js","_data/relations.js","_components/students.student.guardian.component.js","_data/password_regex.js","_yup/validators.js","_components/students.student.payments.payment.component.js","_services/emailsReceipts.service.js","_components/students.student.payments.component.js","_services/student_courses.service.js","_services/courses.service.js","_components/students.student.courses.component.js","_services/schedules.service.js","_components/students.student.schedule.component.js","_components/students.student.component.js","_components/students.component.js","_services/users.service.js","_components/users.list.component.js","_data/needs.js","_services/userInvites.service.js","_components/users.component.js","HomePage/routes.js","_services/auth.service.js","_components/toolbar.home.component.js","HomePage/HomePage.js","_context/theme-context.js","_services/password-reset.service.js","_helpers/on-mount.js","LoginPage/LoginPage.js","_services/signup.service.js","SignupPage/SignupPage.js","ResetPage/ResetPage.js","App/App.js","reportWebVitals.js","i18nextConf.js","index.js"],"names":["lightTheme","createMuiTheme","palette","type","primary","main","light","dark","contrastText","secondary","neutral","emphasisText","high","medium","low","status","dirty","darkTheme","history","createBrowserHistory","userContext","React","createContext","logged","PrivateRoute","Component","component","rest","userCtx","useContext","render","props","to","pathname","process","state","from","location","authHeader","Cookies","get","API_VERSION","BACKEND_URL","axios","require","serviceFactory","resource","subresource","likeSearchText","page","include","filters","Promise","resolve","reject","myFilters","JSON","stringify","name","value","Object","keys","forEach","key","method","url","params","headers","then","response","data","catch","err","id","ids","all","map","getOne","body","initial_values","entries","subresourcId","res","subresourceid","subresourceId","delete","responseType","filename","split","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","appendChild","click","remove","useStyles","makeStyles","theme","root","padding","display","alignItems","width","input","marginLeft","spacing","flex","iconButton","divider","height","margin","SearchBar","label","searchTitle","onChange","onSearch","classes","t","useTranslation","Paper","className","InputBase","placeholder","inputProps","onKeyDown","e","code","IconButton","aria-label","onClick","backdrop","zIndex","drawer","color","useErrorHandler","useSnackbar","enqueueSnackbar","closeSnackbar","successHandlerFactory","snackbarSuccess","variant","successHandler","failureHandler401","ping","failureHandler403","failureHandler","handle401","handle403","handle400","errorOut","reportUnexpected","handler","autoHideDuration","action","Fragment","src","alt","style","Button","navigator","clipboard","writeText","platform","userAgent","appVersion","vendor","r","alert","failureHandlerUnexpected","request","failureHandlerFactory","overflow","flexDirection","list","minHeight","box","pagination","chip","avatar","selectedAvatar","backgroundColor","chips","flexWrap","heading","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","StudentsList","setCurrentStudentId","currentStudentId","students","setStudents","useState","searchTerm","setSearchTerm","onlyEnrolled","onlyEarlyUnenrolled","onlyPreEnrolled","onlyCash","onlyBankTransfer","onlyDirectDebit","setFilters","setPage","count","setCount","errorHandler","setLoading","getFilters","fs","search","StudentsDataService","getAll","useEffect","Box","target","Accordion","AccordionSummary","expandIcon","Typography","AccordionDetails","Tooltip","title","Chip","size","Avatar","downloadAllCsv","finally","tooltip","x","newFilters","my","Pagination","showFirstButton","showLastButton","siblingCount","boundaryCount","event","List","student","index","ListItem","button","ListItemAvatar","charAt","toUpperCase","ListItemText","full_name","ListItemSecondaryAction","edge","downloadOneCsv","Divider","createStyles","borderBottomColor","DirtyTextField","formik","values","initialValues","formikProps","undefined","handleChange","onBlur","handleBlur","error","errors","helperText","touched","TextField","textareaStyle","multiline","InputLabelProps","shrink","countries","phone","suggested","textField","borderColor","option","marginRight","DirtyCountrySelect","getInitialOption","find","_setOption","inputValue","setInputValue","Autocomplete","options","autoHighlight","getOptionLabel","newValue","newOption","setFieldValue","setOption","onInputChange","newInputValue","renderOption","isoCode","String","fromCodePoint","replace","char","charCodeAt","renderInput","autoComplete","useNormik","onlyChangedValuesOnSubmit","originalInitialValues","nullSafeInitialValues","oldOnSubmit","onSubmit","actions","console","log","normalizedValues","normalizedValue","Array","isArray","useFormik","education_years","fullWidth","sizeSmall","line","marginTop","composite","gap","Person","elements","currentPerson","dataService","patchService","newPerson","updateCurrentPerson","updateCurrentStudent","additionalFields","additionalValidation","onUpdate","studentId","validationSchema","yup","email","required","is_studying","is_working","career","when","is","education_entity","education_year","enableReinitialize","changedValues","setStatus","setSubmitting","post","new_id","length","patch","patched_body","resetForm","Skeleton","float","idx","py","handleSubmit","handleReset","disabled","isSubmitting","select","MenuItem","level","cloneElement","payment_methods","surname1","surname2","address","city","zip","dni","gender","country_of_origin","emptyGuardian","relation","emptyAttendee","price_term","payment_comments","birth_date","other_comments","image_agreement","enrollment_status","default_payment_method","fab","position","bottom","right","Attendee","children","addStudentId","newStudent","currentStudent","deleteStudent","addNewGuardian","other","loading","openConfirmDeleteDialog","setOpenConfirmDeleteDialog","sendGrantLetter","sendEnrollmentAgreement","role","hidden","aria-labelledby","Dialog","open","onClose","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","PaymentsDataService","deleteMany","GuardiansDataService","deleteFullStudent","autoFocus","p","px","changedBody","InputProps","endAdornment","InputAdornment","rowsMax","s","startIcon","downloadSubresource","student_guardian_relations","Guardian","guardianId","deleteGuardianId","addGuardianId","deleteNewGuardian","newGuardian","guardian","setGuardian","StudentGuardianDataService","postWithId","longer_8","shorter_64","has_lowercase","has_uppercase","has_digit","has_special","no_plus","safe_password","matches","safe_password_repetition","oneOf","safe_username_email","safe_username","safe_email","one_of","test","toString","v","includes","maxWidth","media","paddingTop","expand","transform","transition","transitions","create","duration","shortest","expandOpen","PaymentCard","payment","updatePayment","deletePayment","newPayment","addPaymentId","student_id","expanded","setExpanded","quantity","date","Card","CardHeader","subheader","CardActions","disableSpacing","clsx","aria-expanded","Collapse","in","timeout","unmountOnExit","CardContent","getDefaultValues","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","newLine","Payments","paymentIds","deletePaymentFromStudent","payments","setPayments","newPaymentCard","setNewPaymentCard","getMany","sort","p1","p2","localeCompare","_","Transition","forwardRef","ref","Slide","direction","appBar","CloseIcon","Courses","courseIds","deleteCourseFromStudent","addCourseId","courses","setCourses","allCourses","setAllCourses","newCourse","setNewCourse","handleClose","CoursesDataService","filter","fullScreen","TransitionComponent","AppBar","Toolbar","m","course","confirm","StudentsCourseDataService","push","description","deleteStudentCourse","calendar","Schedule","scheduleIds","useTheme","StyleWrapper","styled","div","schedules","setSchedules","eventFromSchedule","schedule","daysOfWeek","groupId","startTime","endTime","textColor","extendedProps","SchedulesDataService","eventChanged","info","newEvent","getDay","toLocaleTimeString","hour12","calendarApi","view","addEvent","revert","plugins","timeGridPlugin","interactionPlugin","initialView","firstDay","editable","selectable","selectMirror","dayMaxEvents","weekends","snapDuration","events","eventAdd","eventChange","clickInfo","eventRemove","selectInfo","prompt","unselect","start","startStr","end","endStr","allDay","eventContent","eventClick","eventTimeFormat","hour","minute","eventResize","eventDrop","flexGrow","fab_placeholder","contentPanel","boxSizing","sizeLong","a11yProps","Student","setStudent","setNewGuardian","setValue","guardians","elevation","square","Tabs","indicatorColor","scrollButtons","Tab","contact","axis","onChangeIndex","dir","payment_id","course_id","c","gId","left","UsersList","setCurrentUserId","currentUserId","users","setUsers","UsersDataService","user","allNeeds","invitationsService","inviteUser","userEmail","needs","root2","formControl","maxHeight","minWidth","dialog","Routes","path","setNewStudent","URLSearchParams","Grid","container","item","xs","Fab","icon","PersonIcon","ClassIcon","SchoolIcon","RoomIcon","AccountBalanceIcon","setOpen","assign","n","need","FormControlLabel","control","Checkbox","checked","deleteUser","userId","ContactMailIcon","SettingsIcon","authenticationService","login","username","password","auth","logout","languageMap","eng","active","cat","toolbar","justifyContent","mixins","grow","HomeToolbar","changeTheme","selected","localStorage","getItem","anchorEl","setAnchorEl","isMenuOpen","Boolean","handleMenuClose","anchorElLan","setAnchorElLan","isLanguageMenuOpen","handleLanguageMenuClose","languageMenuId","languageMenu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","language","i18next","changeLanguage","userMenuId","userMenu","handleDrawerOpen","menuButton","hide","noWrap","currentTarget","aria-controls","aria-haspopup","drawerWidth","easing","sharp","leavingScreen","background","appBarShift","enteringScreen","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","content","flexFlow","selectedIcon","HomePage","currentRoute","setCurrentRoute","handleDrawerClose","CssBaseline","basename","Drawer","paper","prop","Link","ListItemIcon","exact","themeContext","passwordResetService","reset","token","startReset","useOnMount","field","textAlign","cursor","LoginPage","themeCtx","setLogged","success","align","justify","signup","SignupPage","query","password2","signupService","result","ResetPage","App","setTheme","appliedTheme","setUser","ThemeProvider","maxSnack","Provider","setItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","resources","translation","i18n","use","Backend","LanguageDetector","initReactI18next","init","fallbackLng","detection","checkWhitelist","debug","whitelist","interpolation","escapeValue","ReactDOM","StrictMode","Helmet","property","nonce","rel","getElementById"],"mappings":"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","file":"static/js/main.d0802075.chunk.js","sourcesContent":["import {createMuiTheme} from \"@material-ui/core/styles\";\n\nexport const lightTheme = createMuiTheme({\n  palette: {\n    type: 'light',\n    primary: {\n      main: '#e98300',\n      light: '#ffb342',\n      dark: '#b05500',\n      contrastText: '#000000',\n    },\n    secondary: {\n      main: '#934d98',\n      light: '#c57bc9',\n      dark: '#63206a',\n      contrastText: '#ffffff',\n    },\n    neutral: {\n      main: '#ffffff',\n      contrastText: '#000000',\n      emphasisText: {\n        high: '#000000DF',\n        medium: '#00000098',\n        low: '#0000005E',\n      },\n      status: {\n        dirty: '#ffcf3d'\n      }\n    }\n  }\n})\n\nexport const darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    secondary: {\n      main: '#ffcc80',\n      light: '#ffffb0',\n      dark: '#ca9b52',\n      contrastText: '#000000',\n    },\n    primary: {\n      main: '#ce93d8',\n      light: '#ffc4ff',\n      dark: '#9c64a6',\n      contrastText: '#000000',\n    },\n    neutral: {\n      main: '#1f1f1f',\n      contrastText: '#ffffff',\n      emphasisText: {\n        high: '#ffffffDF',\n        medium: '#ffffff98',\n        low: '#ffffff5E',\n      },\n      status: {\n        dirty: '#ffcf3d'\n      }\n    }\n  }\n})\n","import {createBrowserHistory} from 'history';\n\nexport const history = createBrowserHistory({\n});","import React from \"react\";\n\nconst userContext = React.createContext({logged: false}); // Create a context object\n\nexport {\n  userContext // Export it so it can be used by other Components\n};","import {Redirect, Route} from 'react-router-dom';\nimport React from \"react\";\nimport {userContext} from '../_context/user-context';\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n    const userCtx = React.useContext(userContext);\n    return (\n        <Route {...rest} render={props =>\n        {\n          if (!userCtx[\"user\"][\"logged\"]) {\n            // not logged in so redirect to login page with the return url\n            return <Redirect to={{ pathname: `${process.env.PUBLIC_URL}/login`, state: { from: props.location } }} />\n            }\n\n            // authorised so return component\n            return <Component {...props} {...rest}/>\n      }}/>\n    );\n}\n\n\nexport default PrivateRoute;","import Cookies from 'js-cookie';\n\nexport function authHeader() {\n    // return authorization header with jwt token\n    return { 'X-CSRFToken': Cookies.get('X-CSRF-TOKEN')};\n}","export const API_VERSION = process.env.REACT_APP_API_VERSION;\nexport const BACKEND_URL = process.env.REACT_APP_BACKEND_URL;","import {authHeader} from \"../_helpers/auth-header\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\n\nconst axios = require('axios');  // todo default headers\n\nexport default function serviceFactory(resource, subresource=null){  // todo subresource for all methods?\n    return class {\n        resource = resource;\n        subresource = subresource;\n\n        getAll(likeSearchText=null, page = 1, include=null, filters=null) {\n            return new Promise(function (resolve, reject) {\n\n                let myFilters = {\n                        \"page\": page,\n                        \"include\": include === null? null: JSON.stringify(include)\n                    };\n                if (likeSearchText !== null) {\n                    myFilters[`filter.${likeSearchText.name}.like`] = '%' + likeSearchText.value + '%';\n                }\n\n                if (filters !== null) {\n                    Object.keys(filters).forEach((key) => {\n                    myFilters[`filter.${key}.eq`] = filters[key];\n                })\n                }\n\n                axios({\n                    method: 'get',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}`,\n                    params: myFilters,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()  // todo are auth headers needed for gets?\n                    }\n                }).then(function (response) {\n                        resolve(response.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        getOne(id, include=null) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'get',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}`,\n                    params: {\n                        \"include\": include === null? null: JSON.stringify(include)\n                    },\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()  // todo are auth headers needed for gets?\n                    }\n                }).then(function (response) {\n                        resolve(response.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        getMany(ids) {\n            return Promise.all(ids.map(id => (this.getOne(id))));\n        }\n        patch({id, body, initial_values = null}) {\n            if (initial_values !== null) {\n                for (const [key, value] of Object.entries(body)) {\n                  if (key in initial_values && initial_values[key] === value){\n                      delete body[key];  // unchanged value, no need to patch it\n                  }\n                }\n            }\n\n            if (\"id\" in body) {\n                delete body[\"id\"];  // no id is to be sent in the body, since it is sent as url param\n            }\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'patch',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}`,\n                    data: body,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (response) {\n                        resolve(response.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        post(body, subresourcId=null) {\n            if (\"id\" in body) delete body[\"id\"];  // no id is to be sent in the body, since it is sent as url param\n\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}${subresource !== null? `/${subresourcId}/${subresource}`: ''}`,\n                    data: body,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res.data);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        postWithId(id, subresourceid=null) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}${subresourceid === null?\n                    '': `/${subresource}/${subresourceid}`}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        delete(id, subresourceId=null) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'delete',\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}${subresource !== null? `/${subresource}/${subresourceId}`: ''}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (response) {\n                        resolve(response);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        }\n\n        deleteMany(ids) {\n            return Promise.all(ids.map(id => (this.delete(id))));\n        }\n\n        downloadAllCsv(likeSearchText=null, page = 1, filters=null) {\n            return new Promise(function (resolve, reject) {\n                let myFilters = {\n                       \"filter.full_name.like\": likeSearchText === null? null: `%${likeSearchText}%`,\n                        \"page\": page\n                    };\n                if (filters !== null){\n                    Object.keys(filters).forEach((key) => {\n                    myFilters[`filter.${key}.eq`] = filters[key];\n                })\n                }\n\n                axios({\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}`,\n                    method: 'GET',\n                    responseType: 'blob', // important\n                    params: myFilters,\n                    headers: {\n                        ...{\n                            'Accept': 'text/csv',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(response => {\n                    let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                    if (filename === null) filename = \"export.csv\";\n\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', filename);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    resolve();\n                }).catch(function (err) {\n                    reject(err);\n                });\n\n            });\n        }\n\n\n        downloadOneCsv(id) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}`,\n                    method: 'GET',\n                    responseType: 'blob', // important\n                    headers: {\n                        ...{\n                            'Accept': 'text/csv',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(response => {\n                    /*\n                    _download(response){\n                let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                if (filename === null) filename = \"export.csv\";\n\n                const url = window.URL.createObjectURL(new Blob([response.data]));\n                const link = document.createElement('a');\n                link.href = url;\n                link.setAttribute('download', filename);\n                document.body.appendChild(link);\n                link.click();\n                link.remove();\n                resolve();\n        }\n                    **/\n                    let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                    if (filename === null) filename = \"export.csv\";\n\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', filename);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    resolve();\n                }).catch(function (err) {\n                    reject(err);\n                });\n\n            });\n        }\n\n\n        downloadSubresource(id, subresource) {\n            return new Promise(function (resolve, reject) {\n                axios({\n                    url: `${BACKEND_URL}/api/${API_VERSION}/${resource}/${id}/${subresource}`,\n                    method: 'POST',\n                    responseType: 'blob', // important\n                    headers: {\n                        ...{\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(response => {\n                    let filename = response.headers[\"content-disposition\"].split(\"filename=\")[1];\n                    const url = window.URL.createObjectURL(new Blob([response.data]));\n                    const link = document.createElement('a');\n                    link.href = url;\n                    link.setAttribute('download', filename);\n                    document.body.appendChild(link);\n                    link.click();\n                    link.remove();\n                    resolve();\n                }).catch(function (err) {\n                    reject(err);\n                });\n\n            });\n        }\n    }\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('students'))();\n\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {useTranslation} from \"react-i18next\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: '2px 4px',\n    display: 'flex',\n    alignItems: 'center',\n    width: '100%',\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1,\n  },\n  iconButton: {\n    padding: 10,\n  },\n  divider: {\n    height: 28,\n    margin: 4,\n  },\n}));\n\nexport default function SearchBar({label, searchTitle, onChange, onSearch}) {\n  const classes = useStyles();\n\n  const { t } = useTranslation();\n\n  return (\n    <Paper className={classes.root}>\n      <InputBase\n        className={classes.input}\n        placeholder={t(\"search\")+ \" \" + label}\n        inputProps={{ 'aria-label': 'search ' + label}}\n        value={searchTitle}\n        onChange={onChange}\n        onKeyDown={(e) => {\n          if(e.code === 'Enter') onSearch();\n        }}\n      />\n      <IconButton\n          type=\"submit\"\n          className={classes.iconButton}\n          aria-label=\"search\"\n            onClick={onSearch}>\n        <SearchIcon/>\n      </IconButton>\n    </Paper>\n  );\n}","import Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport React from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n}));\n\nexport default function LoadingBackdrop(props) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState((\"loading\" in props && props.loading === true)? true: false);\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n      <Backdrop className={classes.backdrop} open={open} onClick={handleClose}>\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n  );\n}","import {userContext} from \"../_context/user-context\";\nimport React from 'react';\nimport {useSnackbar} from \"notistack\";\nimport {useTranslation} from \"react-i18next\";\nimport {Button} from \"@material-ui/core\";\n\n\nexport function useErrorHandler() {\n\n    const userCtx = React.useContext(userContext);\n    const {enqueueSnackbar, closeSnackbar} = useSnackbar();\n    const {t} = useTranslation();\n\n    const successHandler = (res, snackbarSuccess) => {\n        if (snackbarSuccess) enqueueSnackbar(t(\"success\"), {variant: \"success\"});\n        return Promise.resolve(res);\n    }\n\n    const successHandlerFactory = (snackbarSuccess) => {\n        return (res) => successHandler(res, snackbarSuccess)\n    }\n\n    const failureHandler401 = (res) => {\n        // auto logout if 401 unauthenticated\n        userCtx[\"setUser\"]({logged: false, ping: false});\n\n        enqueueSnackbar(t(\"warning_not_logged_in\"), {variant: \"warning\"});\n\n        return Promise.reject(res);\n    }\n\n    const failureHandler403 = (res) => {\n        // unauthorized\n        enqueueSnackbar(t(\"warning_not_enough_privileges\"), {variant: \"warning\"});\n\n        return Promise.reject(res);\n    }\n\n    const failureHandlerUnexpected = (res, reportUnexpected) => {\n        // an unexpected error happened\n\n        enqueueSnackbar(\"Something went wrong! \",\n            {\n                variant: \"error\",\n                autoHideDuration: 10000,\n                action: key => {\n                    return <React.Fragment>\n                        <img src={true ? \"logo_centrifuga4_dark_error.svg\" : \"logo_centrifuga4_light_error.svg\"}\n                             alt=\"Logo Centrfuga\" style={{height: \"35px\"}}/>\n\n                        {reportUnexpected? <Button onClick={() => {\n                            navigator.clipboard.writeText(\n                                \"TO: vazquezrius.miquel@gmail.com\\n\\n\" +\n                                \"To mark an item, use a cross, like this: [X]\\n\\n\" +\n                                \" TRIAGE\\n\" +\n                                \"[ ] This issue has been reported previously and has NOT been marked as solved\\n\" +\n                                \"[ ] This issue has been reported previously and has been marked as solved\\n\" +\n                                \"[ ] This issue has not been reported previously\\n\" +\n                                \"[ ] I have written the steps to reproduce the issue in the specified section below - required!\\n\\n\" +\n                                \" TYPE OF REQUEST\\n\" +\n                                \"[ ] Feature request\\n\" +\n                                \"[X] Error report\\n\\n\" +\n                                \" STEPS\\n\" +\n                                \"Describe what were you doing when this error happened!\\n\" +\n                                \"\\n    example\\n\" +\n                                \"    1. Searched 'john' in the students section, two students appeared.\\n\" +\n                                \"    2. Clicked the CSV export option.\\n\" +\n                                \"    3. Nothing happened, the the error message appeared.\\n\\n\" +\n                                \"Write your steps for repeating the issue here:\\n1. ...\\n\\n\\n\" +\n                                \" STACK TRACE\\n\" + JSON.stringify(res) + \"\\n\\n\\n\" +\n                                \" RESPONSE\\n\" + JSON.stringify(res.response) + \"\\n\\n\\n\" +\n                                \" DEVICE CONTEXT\\n\" + navigator.platform + \"\\n\" + navigator.userAgent + \"\\n\" +\n                                navigator.appVersion + \"\\n\" + navigator.vendor + \"\\n\")\n                                .then(r => {\n                                    closeSnackbar(key);\n                                    alert(\"Okey, so something got messed up...  Let's fix it!\\n\\n\" +\n                                        \" Open your email client\\n\" +\n                                        \" Ctrl+V\\n\" +\n                                        \" Fill in the details\\n\" +\n                                        \" Send it to the support team!\\n\\n\")\n                                });\n                        }}>\n                            {t(\"Report\")}\n                        </Button>: null}\n                        <Button onClick={() => {\n                            closeSnackbar(key)\n                        }}>\n                            {t(\"Dismiss\")}\n                        </Button>\n\n                    </React.Fragment>\n                }\n            });\n\n        return Promise.reject(res);\n    }\n\n    const failureHandler = (res, handle401, handle403, handle400, errorOut, reportUnexpected) => {\n        // decide which handler is going to handle the error response depending on status code\n        let handler = (res) => failureHandlerUnexpected(res, reportUnexpected);\n        if (res.request.status === 401) {\n            if (handle401) { handler = failureHandler401; }\n            else { return Promise.reject(res) }\n        }\n        if (res.request.status === 403) {\n            if (handle403) { handler = failureHandler403; }\n            else { return Promise.reject(res) }\n        }\n        if (res.request.status === 400) {\n            if (!handle400) { return Promise.reject(res) }\n            // else just use the default handler\n        }\n\n        // use the handler, return a rejected promise if errorOut,\n        // else just execute the handler but don't return a rejected catch\n        // (otherwise there will be either empty rejection handlers or unhandled rejections everywhere)\n        if (errorOut) {\n            return handler(res);\n        } else {\n            handler(res).catch(()=>{});  // ignores the rejection response\n            return null;\n        }\n    }\n\n    const failureHandlerFactory = (handle401, handle403, handle400, errorOut, reportUnexpected) => {\n        return (res) => (failureHandler(res, handle401, handle403, handle400, errorOut, reportUnexpected))\n    }\n\n    return ({\n                handle401 = true,\n                handle403 = true,\n                handle400 = true,\n                errorOut = true,\n                reportUnexpected = true,\n                snackbarSuccess = false\n            }) => {\n        return [successHandlerFactory(snackbarSuccess),\n                failureHandlerFactory(handle401, handle403, handle400, errorOut, reportUnexpected)]\n    };\n}","import React, {useEffect, useState} from \"react\";\nimport StudentsDataService from \"../_services/students.service\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport List from \"@material-ui/core/List\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport SearchBar from './searchbar.component'\nimport Box from \"@material-ui/core/Box\";\nimport {useTranslation} from \"react-i18next\";\nimport {Accordion, AccordionDetails, AccordionSummary, Chip, ListItemSecondaryAction} from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport LoadingBackdrop from \"./loadingBackdrop.component\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flex: 1,\n        overflow: 'auto',\n        display: \"flex\",\n        flexDirection: \"column\"\n    },\n    list: {\n        overflow: \"auto\",\n        // maxHeight: \"60vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1,\n        minHeight: '150px'\n    },\n    box: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: '30px'\n    },\n    chip: {\n        margin: theme.spacing(2)\n    },\n    avatar: {},\n    selectedAvatar: {\n        backgroundColor: theme.palette.primary.dark\n    },\n    chips: {\n        flexWrap: 'wrap',\n    '& > *': {\n      margin: theme.spacing(0.5),\n    },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n    }\n}));\n\nconst StudentsList = (props) => {\n    const setCurrentStudentId = props.setCurrentStudentId;\n    const currentStudentId = props.currentStudentId;\n    const students = props.students;\n    const setStudents = props.setStudents;\n\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [filters, setFilters] = useState({\n        onlyEnrolled: false,\n        onlyEarlyUnenrolled: false,\n        onlyPreEnrolled: false,\n        onlyCash: false,\n        onlyBankTransfer: false,\n        onlyDirectDebit: false\n    });\n\n    const {t} = useTranslation();\n\n    const [page, setPage] = useState(1);\n    const [count, setCount] = useState(0);\n    const errorHandler = useErrorHandler();\n\n    const classes = useStyles();\n\n    const [loading, setLoading] = useState(false);  // todo\n\n    const onChangeSearchTerm = (e) => {\n        setSearchTerm(e.target.value);\n    };\n\n    function getFilters(fs){\n        let myFilters = {};\n\n        if (fs.onlyEnrolled) {\n            myFilters['enrollment_status'] = 'enrolled';\n        } else if (fs.onlyEarlyUnenrolled) {\n            myFilters['enrollment_status'] = 'early-unenrolled';\n        } else if (fs.onlyPreEnrolled) {\n            myFilters['enrollment_status'] = 'pre-enrolled'\n        }\n\n        if (fs.onlyCash) {\n            myFilters['default_payment_method'] = 'cash';\n        } else if (fs.onlyBankTransfer) {\n            myFilters['default_payment_method'] = 'bank-transfer';\n        } else if (fs.onlyDirectDebit) {\n            myFilters['default_payment_method'] = 'bank-direct-debit';\n        }\n\n        return myFilters;\n    }\n\n    function search() {\n\n        StudentsDataService\n            .getAll({name: 'full_name', value: searchTerm}, page, ['id', 'full_name'], getFilters(filters))\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setStudents(res[\"data\"]);\n                    setCount(res[\"_pagination\"][\"totalPages\"]);\n                });\n    }\n\n    useEffect(search, [page, setStudents, filters]);\n\n    const handlePageChange = (event, value) => {\n        setPage(value);\n    };\n\n    function exportCsv() {\n        setLoading(true);  // todo clean this and the loading background\n        StudentsDataService\n            .downloadAllCsv(searchTerm, page, getFilters(filters))\n            .finally(()=>{\n                setLoading(false);\n            });\n    }\n\n    return (\n        <Box className={classes.root}>\n            <Box className={classes.box}>\n                <SearchBar\n                    label={t(\"students\")}\n                    value={searchTerm}\n                    onChange={onChangeSearchTerm}\n                    onSearch={search}\n                />\n\n                    <Accordion>\n        <AccordionSummary\n          expandIcon={<ExpandMoreIcon />}\n        >\n          <Typography className={classes.heading}>{t(\"filters_actions\")}</Typography>\n        </AccordionSummary>\n        <AccordionDetails><Box className={classes.chips}>\n          <Tooltip title={t(\"export_results_csv\")} aria-label={t(\"export_results_csv\")}>\n                        <Chip variant=\"outlined\"\n                              color=\"primary\"\n                              size=\"small\"\n                              avatar={<Avatar>csv</Avatar>}\n                              label={t(\"export\")}\n                              onClick={exportCsv}/>\n                        </Tooltip>\n\n                    { [{label: \"enrolled\", tooltip: \"only_enrolled\", value: 'onlyEnrolled'},\n                        {label: \"pre-enrolled\", tooltip: \"only_preenrolled\", value: 'onlyPreEnrolled'},\n                        {label: \"early-unenrolled\", tooltip: \"only_earlyunenrolled\", value: 'onlyEarlyUnenrolled'},\n                    {label: \"cash\", tooltip: \"only_cash\", value: 'onlyCash'},\n                    {label: \"bank-transfer\", tooltip: \"only_banktransfer\", value: 'onlyBankTransfer'},\n                    {label: \"bank-direct-debit\", tooltip: \"only_bankdirectdebit\", value: 'onlyDirectDebit'}].map(x => (\n                            <Tooltip key={x.label} title={t(x.tooltip)} aria-label={t(x.tooltip)}>\n                                <Chip size=\"small\"\n                                      color={filters[x.value]? \"primary\": \"normal\"}\n                                      label={t(x.label)}\n                                      onClick={(e) => {\n                                          let newFilters = {...filters};\n                                          if (x.value === 'onlyEnrolled' ||\n                                              x.value === 'onlyPreEnrolled' ||\n                                              x.value === 'onlyEarlyUnenrolled'\n                                          ) {\n                                              newFilters['onlyEnrolled'] = false;\n                                              newFilters['onlyPreEnrolled'] = false;\n                                              newFilters['onlyEarlyUnenrolled'] = false;\n                                          }\n\n                                          if (x.value === 'onlyBankTransfer' ||\n                                              x.value === 'onlyCash' ||\n                                              x.value === 'onlyDirectDebit'\n                                          ) {\n                                              newFilters['onlyBankTransfer'] = false;\n                                              newFilters['onlyCash'] = false;\n                                              newFilters['onlyDirectDebit'] = false;\n                                          }\n\n                                          newFilters[x.value] = !filters[x.value];\n                                          setFilters(newFilters);\n                                      }}/>\n                            </Tooltip>\n                    ))}\n\n</Box>\n        </AccordionDetails>\n      </Accordion>\n\n\n\n                <Box my={2}>\n                    <Pagination\n                        className=\"pagination\"\n                        count={count}\n                        page={page}\n                        size=\"small\"\n                        showFirstButton\n                        showLastButton\n                        siblingCount={1}\n                        boundaryCount={1}\n                        color=\"primary\"\n                        onChange={handlePageChange}\n                    />\n                </Box>\n            </Box>\n            <List className={classes.list}>\n                {students && students.map((student, index) => (\n                    <div key={student[\"id\"]}>\n                        <ListItem key={student[\"id\"]} button\n                                  onClick={() => {\n                                      setCurrentStudentId(student['id']);\n                                  }}>\n                            <ListItemAvatar>\n                                <Avatar className={student[\"id\"] === currentStudentId? classes.selectedAvatar: classes.avatar}>{student['full_name'].charAt(0).toUpperCase()}</Avatar>\n                            </ListItemAvatar>\n                            <ListItemText id=\"name\" primary={student.full_name}/>\n\n                                <ListItemSecondaryAction>\n                                    <Tooltip title={t(\"export\") + \" .csv\"}>\n                                    <IconButton edge=\"end\" aria-label={t(\"export\")} onClick={(e) => {\n                                        StudentsDataService\n                                            .downloadOneCsv(student['id'])\n                                            .then(...errorHandler({}));\n                                    }}>\n                                        <GetAppIcon/>\n                                    </IconButton>\n                                        </Tooltip>\n                                </ListItemSecondaryAction>\n\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n        </Box>\n    );\n};\n\nexport default StudentsList;\n","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport {makeStyles} from \"@material-ui/core\";\nimport createStyles from \"@material-ui/styles/createStyles\";\n\n\nconst useStyles = makeStyles(theme => (createStyles({\n  root: dirty => ({\n          '& label.Mui-focused':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},\n          '& .MuiInput-underline:after': {borderBottomColor: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},\n          '& label':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium}\n  })\n})));\n\n\nconst DirtyTextField = (props) => {\n    const name = props.name;\n    const formik = props.formik;\n    const dirty = formik.values[name] !== formik.initialValues[name];\n    const classes = useStyles(dirty);\n    const formikProps = {\n        value: formik.values[name] === undefined? '': formik.values[name],  // todo why is this being called with undefined tho\n        onChange: formik.handleChange,\n        onBlur: formik.handleBlur,\n        error: formik.status  || formik.errors[name] !== undefined,\n        helperText: formik.touched[name] && formik.errors[name]\n    }\n\n    if ('InputLabelProps' in props ){\n        return <TextField className={classes.root} {...props} {...formikProps}/>;\n    } else {\n        return <TextField className={classes.root}\n                          textareaStyle={props.multiline !== null? classes.root:null}\n                          InputLabelProps={{shrink: formik.values[name] !== ''}}\n                          {...props}\n                            {...formikProps}/>;\n    }\n\n}\n\nexport default DirtyTextField;","export const countries = [\n  { code: 'AD', label: 'Andorra', phone: '376' },\n  { code: 'AE', label: 'United Arab Emirates', phone: '971' },\n  { code: 'AF', label: 'Afghanistan', phone: '93' },\n  { code: 'AG', label: 'Antigua and Barbuda', phone: '1-268' },\n  { code: 'AI', label: 'Anguilla', phone: '1-264' },\n  { code: 'AL', label: 'Albania', phone: '355' },\n  { code: 'AM', label: 'Armenia', phone: '374' },\n  { code: 'AO', label: 'Angola', phone: '244' },\n  { code: 'AQ', label: 'Antarctica', phone: '672' },\n  { code: 'AR', label: 'Argentina', phone: '54' },\n  { code: 'AS', label: 'American Samoa', phone: '1-684' },\n  { code: 'AT', label: 'Austria', phone: '43' },\n  { code: 'AU', label: 'Australia', phone: '61', suggested: true },\n  { code: 'AW', label: 'Aruba', phone: '297' },\n  { code: 'AX', label: 'Alland Islands', phone: '358' },\n  { code: 'AZ', label: 'Azerbaijan', phone: '994' },\n  { code: 'BA', label: 'Bosnia and Herzegovina', phone: '387' },\n  { code: 'BB', label: 'Barbados', phone: '1-246' },\n  { code: 'BD', label: 'Bangladesh', phone: '880' },\n  { code: 'BE', label: 'Belgium', phone: '32' },\n  { code: 'BF', label: 'Burkina Faso', phone: '226' },\n  { code: 'BG', label: 'Bulgaria', phone: '359' },\n  { code: 'BH', label: 'Bahrain', phone: '973' },\n  { code: 'BI', label: 'Burundi', phone: '257' },\n  { code: 'BJ', label: 'Benin', phone: '229' },\n  { code: 'BL', label: 'Saint Barthelemy', phone: '590' },\n  { code: 'BM', label: 'Bermuda', phone: '1-441' },\n  { code: 'BN', label: 'Brunei Darussalam', phone: '673' },\n  { code: 'BO', label: 'Bolivia', phone: '591' },\n  { code: 'BR', label: 'Brazil', phone: '55' },\n  { code: 'BS', label: 'Bahamas', phone: '1-242' },\n  { code: 'BT', label: 'Bhutan', phone: '975' },\n  { code: 'BV', label: 'Bouvet Island', phone: '47' },\n  { code: 'BW', label: 'Botswana', phone: '267' },\n  { code: 'BY', label: 'Belarus', phone: '375' },\n  { code: 'BZ', label: 'Belize', phone: '501' },\n  { code: 'CA', label: 'Canada', phone: '1', suggested: true },\n  { code: 'CC', label: 'Cocos (Keeling) Islands', phone: '61' },\n  { code: 'CD', label: 'Congo, Democratic Republic of the', phone: '243' },\n  { code: 'CF', label: 'Central African Republic', phone: '236' },\n  { code: 'CG', label: 'Congo, Republic of the', phone: '242' },\n  { code: 'CH', label: 'Switzerland', phone: '41' },\n  { code: 'CI', label: \"Cote d'Ivoire\", phone: '225' },\n  { code: 'CK', label: 'Cook Islands', phone: '682' },\n  { code: 'CL', label: 'Chile', phone: '56' },\n  { code: 'CM', label: 'Cameroon', phone: '237' },\n  { code: 'CN', label: 'China', phone: '86' },\n  { code: 'CO', label: 'Colombia', phone: '57' },\n  { code: 'CR', label: 'Costa Rica', phone: '506' },\n  { code: 'CU', label: 'Cuba', phone: '53' },\n  { code: 'CV', label: 'Cape Verde', phone: '238' },\n  { code: 'CW', label: 'Curacao', phone: '599' },\n  { code: 'CX', label: 'Christmas Island', phone: '61' },\n  { code: 'CY', label: 'Cyprus', phone: '357' },\n  { code: 'CZ', label: 'Czech Republic', phone: '420' },\n  { code: 'DE', label: 'Germany', phone: '49', suggested: true },\n  { code: 'DJ', label: 'Djibouti', phone: '253' },\n  { code: 'DK', label: 'Denmark', phone: '45' },\n  { code: 'DM', label: 'Dominica', phone: '1-767' },\n  { code: 'DO', label: 'Dominican Republic', phone: '1-809' },\n  { code: 'DZ', label: 'Algeria', phone: '213' },\n  { code: 'EC', label: 'Ecuador', phone: '593' },\n  { code: 'EE', label: 'Estonia', phone: '372' },\n  { code: 'EG', label: 'Egypt', phone: '20' },\n  { code: 'EH', label: 'Western Sahara', phone: '212' },\n  { code: 'ER', label: 'Eritrea', phone: '291' },\n  { code: 'ES', label: 'Spain', phone: '34' },\n  { code: 'ET', label: 'Ethiopia', phone: '251' },\n  { code: 'FI', label: 'Finland', phone: '358' },\n  { code: 'FJ', label: 'Fiji', phone: '679' },\n  { code: 'FK', label: 'Falkland Islands (Malvinas)', phone: '500' },\n  { code: 'FM', label: 'Micronesia, Federated States of', phone: '691' },\n  { code: 'FO', label: 'Faroe Islands', phone: '298' },\n  { code: 'FR', label: 'France', phone: '33', suggested: true },\n  { code: 'GA', label: 'Gabon', phone: '241' },\n  { code: 'GB', label: 'United Kingdom', phone: '44' },\n  { code: 'GD', label: 'Grenada', phone: '1-473' },\n  { code: 'GE', label: 'Georgia', phone: '995' },\n  { code: 'GF', label: 'French Guiana', phone: '594' },\n  { code: 'GG', label: 'Guernsey', phone: '44' },\n  { code: 'GH', label: 'Ghana', phone: '233' },\n  { code: 'GI', label: 'Gibraltar', phone: '350' },\n  { code: 'GL', label: 'Greenland', phone: '299' },\n  { code: 'GM', label: 'Gambia', phone: '220' },\n  { code: 'GN', label: 'Guinea', phone: '224' },\n  { code: 'GP', label: 'Guadeloupe', phone: '590' },\n  { code: 'GQ', label: 'Equatorial Guinea', phone: '240' },\n  { code: 'GR', label: 'Greece', phone: '30' },\n  { code: 'GS', label: 'South Georgia and the South Sandwich Islands', phone: '500' },\n  { code: 'GT', label: 'Guatemala', phone: '502' },\n  { code: 'GU', label: 'Guam', phone: '1-671' },\n  { code: 'GW', label: 'Guinea-Bissau', phone: '245' },\n  { code: 'GY', label: 'Guyana', phone: '592' },\n  { code: 'HK', label: 'Hong Kong', phone: '852' },\n  { code: 'HM', label: 'Heard Island and McDonald Islands', phone: '672' },\n  { code: 'HN', label: 'Honduras', phone: '504' },\n  { code: 'HR', label: 'Croatia', phone: '385' },\n  { code: 'HT', label: 'Haiti', phone: '509' },\n  { code: 'HU', label: 'Hungary', phone: '36' },\n  { code: 'ID', label: 'Indonesia', phone: '62' },\n  { code: 'IE', label: 'Ireland', phone: '353' },\n  { code: 'IL', label: 'Israel', phone: '972' },\n  { code: 'IM', label: 'Isle of Man', phone: '44' },\n  { code: 'IN', label: 'India', phone: '91' },\n  { code: 'IO', label: 'British Indian Ocean Territory', phone: '246' },\n  { code: 'IQ', label: 'Iraq', phone: '964' },\n  { code: 'IR', label: 'Iran, Islamic Republic of', phone: '98' },\n  { code: 'IS', label: 'Iceland', phone: '354' },\n  { code: 'IT', label: 'Italy', phone: '39' },\n  { code: 'JE', label: 'Jersey', phone: '44' },\n  { code: 'JM', label: 'Jamaica', phone: '1-876' },\n  { code: 'JO', label: 'Jordan', phone: '962' },\n  { code: 'JP', label: 'Japan', phone: '81', suggested: true },\n  { code: 'KE', label: 'Kenya', phone: '254' },\n  { code: 'KG', label: 'Kyrgyzstan', phone: '996' },\n  { code: 'KH', label: 'Cambodia', phone: '855' },\n  { code: 'KI', label: 'Kiribati', phone: '686' },\n  { code: 'KM', label: 'Comoros', phone: '269' },\n  { code: 'KN', label: 'Saint Kitts and Nevis', phone: '1-869' },\n  { code: 'KP', label: \"Korea, Democratic People's Republic of\", phone: '850' },\n  { code: 'KR', label: 'Korea, Republic of', phone: '82' },\n  { code: 'KW', label: 'Kuwait', phone: '965' },\n  { code: 'KY', label: 'Cayman Islands', phone: '1-345' },\n  { code: 'KZ', label: 'Kazakhstan', phone: '7' },\n  { code: 'LA', label: \"Lao People's Democratic Republic\", phone: '856' },\n  { code: 'LB', label: 'Lebanon', phone: '961' },\n  { code: 'LC', label: 'Saint Lucia', phone: '1-758' },\n  { code: 'LI', label: 'Liechtenstein', phone: '423' },\n  { code: 'LK', label: 'Sri Lanka', phone: '94' },\n  { code: 'LR', label: 'Liberia', phone: '231' },\n  { code: 'LS', label: 'Lesotho', phone: '266' },\n  { code: 'LT', label: 'Lithuania', phone: '370' },\n  { code: 'LU', label: 'Luxembourg', phone: '352' },\n  { code: 'LV', label: 'Latvia', phone: '371' },\n  { code: 'LY', label: 'Libya', phone: '218' },\n  { code: 'MA', label: 'Morocco', phone: '212' },\n  { code: 'MC', label: 'Monaco', phone: '377' },\n  { code: 'MD', label: 'Moldova, Republic of', phone: '373' },\n  { code: 'ME', label: 'Montenegro', phone: '382' },\n  { code: 'MF', label: 'Saint Martin (French part)', phone: '590' },\n  { code: 'MG', label: 'Madagascar', phone: '261' },\n  { code: 'MH', label: 'Marshall Islands', phone: '692' },\n  { code: 'MK', label: 'Macedonia, the Former Yugoslav Republic of', phone: '389' },\n  { code: 'ML', label: 'Mali', phone: '223' },\n  { code: 'MM', label: 'Myanmar', phone: '95' },\n  { code: 'MN', label: 'Mongolia', phone: '976' },\n  { code: 'MO', label: 'Macao', phone: '853' },\n  { code: 'MP', label: 'Northern Mariana Islands', phone: '1-670' },\n  { code: 'MQ', label: 'Martinique', phone: '596' },\n  { code: 'MR', label: 'Mauritania', phone: '222' },\n  { code: 'MS', label: 'Montserrat', phone: '1-664' },\n  { code: 'MT', label: 'Malta', phone: '356' },\n  { code: 'MU', label: 'Mauritius', phone: '230' },\n  { code: 'MV', label: 'Maldives', phone: '960' },\n  { code: 'MW', label: 'Malawi', phone: '265' },\n  { code: 'MX', label: 'Mexico', phone: '52' },\n  { code: 'MY', label: 'Malaysia', phone: '60' },\n  { code: 'MZ', label: 'Mozambique', phone: '258' },\n  { code: 'NA', label: 'Namibia', phone: '264' },\n  { code: 'NC', label: 'New Caledonia', phone: '687' },\n  { code: 'NE', label: 'Niger', phone: '227' },\n  { code: 'NF', label: 'Norfolk Island', phone: '672' },\n  { code: 'NG', label: 'Nigeria', phone: '234' },\n  { code: 'NI', label: 'Nicaragua', phone: '505' },\n  { code: 'NL', label: 'Netherlands', phone: '31' },\n  { code: 'NO', label: 'Norway', phone: '47' },\n  { code: 'NP', label: 'Nepal', phone: '977' },\n  { code: 'NR', label: 'Nauru', phone: '674' },\n  { code: 'NU', label: 'Niue', phone: '683' },\n  { code: 'NZ', label: 'New Zealand', phone: '64' },\n  { code: 'OM', label: 'Oman', phone: '968' },\n  { code: 'PA', label: 'Panama', phone: '507' },\n  { code: 'PE', label: 'Peru', phone: '51' },\n  { code: 'PF', label: 'French Polynesia', phone: '689' },\n  { code: 'PG', label: 'Papua New Guinea', phone: '675' },\n  { code: 'PH', label: 'Philippines', phone: '63' },\n  { code: 'PK', label: 'Pakistan', phone: '92' },\n  { code: 'PL', label: 'Poland', phone: '48' },\n  { code: 'PM', label: 'Saint Pierre and Miquelon', phone: '508' },\n  { code: 'PN', label: 'Pitcairn', phone: '870' },\n  { code: 'PR', label: 'Puerto Rico', phone: '1' },\n  { code: 'PS', label: 'Palestine, State of', phone: '970' },\n  { code: 'PT', label: 'Portugal', phone: '351' },\n  { code: 'PW', label: 'Palau', phone: '680' },\n  { code: 'PY', label: 'Paraguay', phone: '595' },\n  { code: 'QA', label: 'Qatar', phone: '974' },\n  { code: 'RE', label: 'Reunion', phone: '262' },\n  { code: 'RO', label: 'Romania', phone: '40' },\n  { code: 'RS', label: 'Serbia', phone: '381' },\n  { code: 'RU', label: 'Russian Federation', phone: '7' },\n  { code: 'RW', label: 'Rwanda', phone: '250' },\n  { code: 'SA', label: 'Saudi Arabia', phone: '966' },\n  { code: 'SB', label: 'Solomon Islands', phone: '677' },\n  { code: 'SC', label: 'Seychelles', phone: '248' },\n  { code: 'SD', label: 'Sudan', phone: '249' },\n  { code: 'SE', label: 'Sweden', phone: '46' },\n  { code: 'SG', label: 'Singapore', phone: '65' },\n  { code: 'SH', label: 'Saint Helena', phone: '290' },\n  { code: 'SI', label: 'Slovenia', phone: '386' },\n  { code: 'SJ', label: 'Svalbard and Jan Mayen', phone: '47' },\n  { code: 'SK', label: 'Slovakia', phone: '421' },\n  { code: 'SL', label: 'Sierra Leone', phone: '232' },\n  { code: 'SM', label: 'San Marino', phone: '378' },\n  { code: 'SN', label: 'Senegal', phone: '221' },\n  { code: 'SO', label: 'Somalia', phone: '252' },\n  { code: 'SR', label: 'Suriname', phone: '597' },\n  { code: 'SS', label: 'South Sudan', phone: '211' },\n  { code: 'ST', label: 'Sao Tome and Principe', phone: '239' },\n  { code: 'SV', label: 'El Salvador', phone: '503' },\n  { code: 'SX', label: 'Sint Maarten (Dutch part)', phone: '1-721' },\n  { code: 'SY', label: 'Syrian Arab Republic', phone: '963' },\n  { code: 'SZ', label: 'Swaziland', phone: '268' },\n  { code: 'TC', label: 'Turks and Caicos Islands', phone: '1-649' },\n  { code: 'TD', label: 'Chad', phone: '235' },\n  { code: 'TF', label: 'French Southern Territories', phone: '262' },\n  { code: 'TG', label: 'Togo', phone: '228' },\n  { code: 'TH', label: 'Thailand', phone: '66' },\n  { code: 'TJ', label: 'Tajikistan', phone: '992' },\n  { code: 'TK', label: 'Tokelau', phone: '690' },\n  { code: 'TL', label: 'Timor-Leste', phone: '670' },\n  { code: 'TM', label: 'Turkmenistan', phone: '993' },\n  { code: 'TN', label: 'Tunisia', phone: '216' },\n  { code: 'TO', label: 'Tonga', phone: '676' },\n  { code: 'TR', label: 'Turkey', phone: '90' },\n  { code: 'TT', label: 'Trinidad and Tobago', phone: '1-868' },\n  { code: 'TV', label: 'Tuvalu', phone: '688' },\n  { code: 'TW', label: 'Taiwan, Province of China', phone: '886' },\n  { code: 'TZ', label: 'United Republic of Tanzania', phone: '255' },\n  { code: 'UA', label: 'Ukraine', phone: '380' },\n  { code: 'UG', label: 'Uganda', phone: '256' },\n  { code: 'US', label: 'United States', phone: '1', suggested: true },\n  { code: 'UY', label: 'Uruguay', phone: '598' },\n  { code: 'UZ', label: 'Uzbekistan', phone: '998' },\n  { code: 'VA', label: 'Holy See (Vatican City State)', phone: '379' },\n  { code: 'VC', label: 'Saint Vincent and the Grenadines', phone: '1-784' },\n  { code: 'VE', label: 'Venezuela', phone: '58' },\n  { code: 'VG', label: 'British Virgin Islands', phone: '1-284' },\n  { code: 'VI', label: 'US Virgin Islands', phone: '1-340' },\n  { code: 'VN', label: 'Vietnam', phone: '84' },\n  { code: 'VU', label: 'Vanuatu', phone: '678' },\n  { code: 'WF', label: 'Wallis and Futuna', phone: '681' },\n  { code: 'WS', label: 'Samoa', phone: '685' },\n  { code: 'XK', label: 'Kosovo', phone: '383' },\n  { code: 'YE', label: 'Yemen', phone: '967' },\n  { code: 'YT', label: 'Mayotte', phone: '262' },\n  { code: 'ZA', label: 'South Africa', phone: '27' },\n  { code: 'ZM', label: 'Zambia', phone: '260' },\n  { code: 'ZW', label: 'Zimbabwe', phone: '263' },\n];\n\nexport default countries;","import {makeStyles} from \"@material-ui/core/styles\";\nimport {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport {Autocomplete} from \"@material-ui/lab\";\nimport {countries} from \"../_data/countries\";\nimport TextField from \"@material-ui/core/TextField\";\nimport createStyles from \"@material-ui/styles/createStyles\";\n\n// ISO 3166-1 alpha-2\n//  No support for IE 11\nfunction countryToFlag(isoCode) {\n  return typeof String.fromCodePoint !== 'undefined'\n    ? isoCode\n        .toUpperCase()\n        .replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + 127397))\n    : isoCode;\n}\n\n\nconst useStyles = makeStyles(theme => (createStyles({\n  textField: dirty => ({\n    '& label.Mui-focused':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},  // todo color to theme\n    '& .MuiInput-underline:after': {borderBottomColor: dirty? theme.palette.neutral.status.dirty: theme.palette.primary.main},\n      '& label':  {color: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium},\n      '& fieldset': {borderColor: dirty? theme.palette.neutral.status.dirty: theme.palette.neutral.emphasisText.medium},\n  }\n  ),\n    option: {\n    fontSize: 15,\n    '& > span': {\n      marginRight: 10,\n      fontSize: 18,\n    },\n  },})));\n\nexport default function DirtyCountrySelect({formik, name, label, ...textFieldProps}) {\n  const getInitialOption = (code) => {\n      if (code === undefined) return '';\n      return countries.find(x=>x.code===code);\n  }\n\n  const [option, _setOption] = React.useState(getInitialOption(formik.values[name]));\n\n  React.useEffect(() => {\n    _setOption(getInitialOption(formik.values[name]));\n  }, [formik.values[name]]);\n\n  const setOption = (option) => {\n      const newOption = (option !== null)? option.code: '';\n      formik.setFieldValue(name, newOption);\n      _setOption(newOption);\n  }\n\n  const dirty = formik.values[name] !== formik.initialValues[name];\n  const classes = useStyles(dirty);\n\n  const [inputValue, setInputValue] = React.useState('');\n\n  const { t } = useTranslation();\n\n  return (\n    <Autocomplete  // otodo use\n      style={{ width: 300 }}\n      options={countries}\n      classes={{\n        option: classes.option,\n      }}\n      autoHighlight\n      getOptionLabel={(option) => option.label }\n      value={option}\n        onChange={(event, newValue) => {\n          setOption(newValue);\n        }}\n        inputValue={inputValue}\n        onInputChange={(event, newInputValue) => {\n          setInputValue(newInputValue);\n        }}\n        name={name}\n      onBlur={formik.handleBlur}\n      renderOption={(option) => (\n        <React.Fragment>\n          <span>{countryToFlag(option.code)}</span>\n          {option.label} ({option.code}) +{option.phone}\n        </React.Fragment>\n      )}\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          label={label}\n          className={classes.textField}\n          inputProps={{\n            ...params.inputProps,\n            autoComplete: 'new-password', // disable autocomplete and autofill\n          }}\n        />\n      )}\n    />\n  );\n}","import {useFormik} from \"formik\";\n\n\nexport function useNormik(onlyChangedValuesOnSubmit, props) {\n    let originalInitialValues = {};\n    if (\"initialValues\" in props) {\n        let nullSafeInitialValues = {};\n        originalInitialValues = props.initialValues;\n        for (const [key, value] of Object.entries(originalInitialValues)) {  // todo how to make clean\n          if (value === null) {\n              nullSafeInitialValues[key] = '';\n          } else {\n              nullSafeInitialValues[key] = value;\n          }\n        }\n        props.initialValues = nullSafeInitialValues;\n    }\n\n    if (\"onSubmit\" in props){\n        const oldOnSubmit = props.onSubmit;\n        const nullSafeOnSubmit = (values, actions) => {\n            console.log(\"and the values are\", values);\n            let normalizedValues = {};\n            for (const [key, value] of Object.entries(values)) {  // todo how to make clean\n                const normalizedValue = value === ''? null : value;\n                if (!onlyChangedValuesOnSubmit ||\n                    (onlyChangedValuesOnSubmit && normalizedValue !== originalInitialValues[key] && !Array.isArray(originalInitialValues[key]))){\n                  normalizedValues[key] = normalizedValue;\n                }\n\n            }\n            oldOnSubmit(normalizedValues, actions);\n        }\n        props.onSubmit = nullSafeOnSubmit;\n    }\n\n    return useFormik(props);\n}","export const education_years = [\n    \"kindergarten_p1\",\n    \"kindergarten_p2\",\n    \"kindergarten_p3\",\n    \"kindergarten_p4\",\n    \"kindergarten_p5\",\n    \"primary_1\",\n    \"primary_2\",\n    \"primary_3\",\n    \"primary_4\",\n    \"primary_5\",\n    \"primary_6\",\n    \"eso_1\",\n    \"eso_2\",\n    \"eso_3\",\n    \"eso_4\",\n    \"baccalaureate_1\",\n    \"baccalaureate_2\",\n    \"FP_lower\",\n    \"FP_higher\",\n    \"undergraduate\",\n    \"master\",\n    \"phd\",\n    \"other\"\n];\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport {MenuItem} from \"@material-ui/core\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport * as yup from 'yup';\nimport DirtyCountrySelect from \"./contry-select.component\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useNormik} from \"../_helpers/normik\";\nimport SaveIcon from '@material-ui/icons/Save';\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport RestoreIcon from '@material-ui/icons/Restore';\nimport {education_years} from \"../_data/education\";\nimport Divider from \"@material-ui/core/Divider\";\nimport GetAppIcon from '@material-ui/icons/GetApp';\n\nconst useStyles = makeStyles((theme) => ({\n\n    fullWidth: {\n        width: \"100%\"\n    },\n    sizeSmall: {\n        width: \"25ch\"\n    },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nfunction Person(props) {\n    const currentPerson = props.currentPerson;\n    const dataService = props.patchService;\n    const newPerson = props.newPerson;\n    const updateCurrentPerson = props.updateCurrentStudent;\n    const additionalFields = props.additionalFields;\n    const additionalValidation = props.additionalValidation === undefined? {}: props.additionalValidation;\n    const studentId = props.studentId;\n    const onUpdate = props.onUpdate;\n\n    const {t} = useTranslation();\n    const classes = useStyles();\n    const errorHandler = useErrorHandler();\n    let initialValues = currentPerson === null ? {} : currentPerson;\n\n\n    const formik = useNormik(!newPerson, {\n        initialValues: initialValues,\n        validationSchema: yup.object({...{\n            email: yup.string().email(t(\"invalid_email\")),  // todo\n            name: yup.string().required(t(\"name_required\")),\n            is_studying: yup.boolean().required(t(\"studying_required\")),\n            is_working: yup.boolean().required(t(\"working_required\")),\n            career: yup.string().when('is_working', {\n                                                  is: true,\n                                                  then: yup.string().required(t(\"career_required\"))\n                                                }),\n            education_entity: yup.string().when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(t(\"education_entity_required\"))\n                                                }),\n            education_year: yup.string().when('is_studying', {\n                                                  is: true,\n                                                  then: yup.string().required(t(\"education_year_required\"))\n                                                })\n        }, ...additionalValidation}),\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            if (newPerson) {\n                setStatus();\n                dataService.post({...changedValues})\n                    .then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (new_id) {\n                        updateCurrentPerson(new_id['id']);\n                        if (typeof onUpdate === 'function') onUpdate(changedValues);\n                    }).catch(function (err) {\n                    setStatus(true);\n                    }).finally(() => {\n                    setSubmitting(false);\n                });\n            } else {\n                if (Object.keys(changedValues).length > 0) {\n                setStatus();\n                dataService.patch({\n                    id: initialValues[\"id\"],\n                    body: changedValues,\n                    initial_values: initialValues\n                }).then(...errorHandler({snackbarSuccess: true}))\n                    .then(function (patched_body) {\n                        formik.resetForm(patched_body);\n                        updateCurrentPerson(patched_body);\n\n                        if (typeof onUpdate === 'function') onUpdate(changedValues);\n                    }).catch(function (err) {\n                        setStatus(true);\n                    }).finally(() => {\n                        setSubmitting(false);\n                    });\n\n\n            } else {\n                setSubmitting(false);\n            }\n            }\n        }\n    });\n\n    function recursiveForm(elements) {\n        if (elements === undefined) return null;\n\n        return <div>\n            <Box my={3}>\n            <Divider />\n            </Box>\n            {\n            elements.map(res => (\n                <Box className={[classes.line, classes.composite]}>\n                    {res instanceof Array ?\n                        res.map((r) => (\n                            React.cloneElement(r, {formik: formik})\n                        ))\n                        : React.cloneElement(res, {formik: formik})}\n                </Box>))\n        }\n        </div>;\n    }\n\n\n    return (\n        <Box>\n            {currentPerson === null\n                ?\n                (\n\n                    <Box>\n                        <Skeleton style={{float: 'right'}}><IconButton/></Skeleton>\n                        <Skeleton style={{float: 'right'}}><IconButton/></Skeleton>\n\n                        {\n\n                            [\"100%\", \"100%\", \"100%\", \"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0}>\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })\n                        }\n                    </Box>\n                )\n                :\n                (\n                    <form onSubmit={formik.handleSubmit}>\n\n\n                        <IconButton style={{float: 'right'}}\n                                    onClick={formik.handleReset}\n                                    disabled={!formik.dirty || formik.isSubmitting}>\n                            <Tooltip title={t(\"reset\")} aria-label={t(\"reset\")}>\n                                <RestoreIcon/>\n                            </Tooltip>\n                        </IconButton>\n\n\n                        <IconButton style={{float: 'right'}} type=\"submit\"\n                                    disabled={!newPerson && (!formik.dirty || formik.isSubmitting)}>\n                            <Tooltip title={t(\"save\")} aria-label={t(\"save\")}>\n                                <SaveIcon/>\n                            </Tooltip>\n                        </IconButton>\n\n\n                        <DirtyTextField\n                            label={t(\"id\")}\n                            name=\"id\"\n                            disabled\n                            className={classes.line}\n                            formik={formik}\n                        />\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"name\")}\n                                style={{flex: 1}}\n                                name=\"name\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname1\")}\n                                style={{flex: 1}}\n                                name=\"surname1\"\n                                formik={formik}\n                            />\n                            <DirtyTextField\n                                label={t(\"surname2\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"surname2\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"email\")}\n                                type=\"email\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"email\"\n                                helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                            />\n                        </Box>\n\n                       <Box my={3}>\n            <Divider />\n            </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"address\")}\n                                formik={formik}\n                                style={{flex: 4}}\n                                name=\"address\"\n                            />\n                            <DirtyTextField\n                                label={t(\"city\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"city\"\n                            />\n                            <DirtyTextField\n                                label={t(\"zip\")}\n                                formik={formik}\n                                type=\"number\"\n                                style={{flex: 1}}\n                                name=\"zip\"\n                            />\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"dni\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"dni\"\n                            />\n                            <DirtyTextField\n                                label={t(\"phone\")}\n                                type=\"tel\"\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"phone\"\n                            />\n\n\n\n                        </Box>\n\n\n\n                        <Box className={[classes.line, classes.composite]}>\n\n                            <DirtyCountrySelect\n                                formik={formik}\n                                style={{flex: 1}}\n                                name={\"country_of_origin\"}\n                                label={t(\"country_of_origin\")}\n                            />\n<DirtyTextField\n                                label={t(\"gender\")}\n                                style={{flex: 1}}\n                                formik={formik}\n                                name=\"gender\"\n                                select>\n                                <MenuItem value=\"m\">{t(\"male\")}</MenuItem>\n                                <MenuItem value=\"f\">{t(\"female\")}</MenuItem>\n                                <MenuItem value=\"nb\">{t(\"nb\")}</MenuItem>\n                            </DirtyTextField>\n                        </Box>\n<Box my={3}>\n            <Divider />\n            </Box>\n                        <Box className={[classes.line, classes.composite]}>\n                            <DirtyTextField\n                                label={t(\"is_studying\")}\n                                style={{flex: 1}}\n                                name=\"is_studying\"\n                                formik={formik}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"education_entity\")}\n                                style={{flex: 2}}\n                                formik={formik}\n                                name=\"education_entity\"\n                            />\n                            <DirtyTextField\n                                label={t(\"education_year\")}\n                                style={{flex: 2}}\n                                name=\"education_year\"\n                                formik={formik}\n                                select>\n                                {education_years.map((level) => (\n                                    <MenuItem key={level} value={level}>{t(level)}</MenuItem>\n                                ))}\n                            </DirtyTextField>\n                        </Box>\n\n                        <Box className={[classes.line, classes.composite]}>\n\n\n                            <DirtyTextField\n                                label={t(\"is_working\")}\n                                style={{flex: 1}}\n                                name=\"is_working\"\n                                formik={formik}\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                            <DirtyTextField\n                                label={t(\"career\")}\n                                style={{flex: 4}}\n                                formik={formik}\n                                name=\"career\"\n                            />\n                        </Box>\n\n                        {recursiveForm(additionalFields)}\n\n                    </form>\n                )\n\n            }\n        </Box>\n    );\n}\n\n\nexport default Person;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('guardians'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('payments'))();\n\n","export const payment_methods = [\n    \"bank-transfer\",\n    \"cash\",\n    \"bank-direct-debit\"\n]","const newPerson = {\n                name: null,\n                surname1: null,\n                surname2: null,\n                email: null,\n                address: null,\n                city: null,\n                zip: null,\n                dni: null,\n                phone: null,\n                gender: null,\n\n                country_of_origin: null,\n                is_studying: null,\n                education_entity: null,\n                education_year: null,\n                is_working: null,\n                career: null\n              };\nexport const emptyGuardian = {...newPerson, relation: null};\nexport const emptyAttendee = {...newPerson,\n    price_term: null,\n    payment_comments: null,\n    birth_date: null,\n    other_comments: null,\n    image_agreement: null,\n    enrollment_status: null,\n    default_payment_method: null\n};\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport {MenuItem, TextField} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport StudentsDataService from \"../_services/students.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport * as yup from 'yup';\nimport Person from \"./students.student.person.component\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport GuardiansDataService from \"../_services/guardians.service\";\nimport PaymentsDataService from \"../_services/payments.service\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport {sendEnrollmentEmail} from \"../_services/emailsEnrollment.service\";\nimport ReceiptIcon from \"@material-ui/icons/Receipt\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {sendGrantEmail} from \"../_services/emailsGrants.service\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport {payment_methods} from \"../_data/payment_methods\";\nimport {emptyAttendee, emptyGuardian} from \"../_data/empty_objects\";\n\n\nconst useStyles = makeStyles((theme) => ({\n\n  fullWidth: {\n    width: \"100%\"\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n  sizeSmall: {\n    width: \"25ch\"\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    },\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n}));\n\nfunction Attendee({ children, addStudentId, value, index, newStudent, title, currentStudent, updateCurrentStudent, patchService, deleteStudent, addNewGuardian, ...other }) {\n  const { t } = useTranslation();\n  const loading = currentStudent === null;\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = React.useState(false);\n  const deleteFullStudent = () => {\n    StudentsDataService\n              .delete(currentStudent['id'])\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                PaymentsDataService\n                      .deleteMany(currentStudent['payments'])\n                      .then(...errorHandler({}))  // todo everywhere\n                      .then(function (res) {\n\n                      });\n\n                GuardiansDataService\n                      .deleteMany(currentStudent['guardians'])\n                      .then(...errorHandler({}))  // todo everywhere\n                      .then(function (res) {\n\n                      });\n\n\n                // todo schedules, courses\n\n\n                deleteStudent(currentStudent['id']);\n              });\n  }\n  const sendGrantLetter = () => {\n      sendGrantEmail(currentStudent['id'])\n          .then(...errorHandler({snackbarSuccess: true}));\n  }\n  const sendEnrollmentAgreement = () => {\n      sendEnrollmentEmail(currentStudent['id'])\n          .then(...errorHandler({snackbarSuccess: true}));\n  }\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      <Dialog\n        open={openConfirmDeleteDialog}\n        onClose={(e) => {setOpenConfirmDeleteDialog(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{t(\"delete_student_question\")}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">{t(\"student_also_deletes\")}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button onClick={(e) => {\n            deleteFullStudent(currentStudent['id']);\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\" autoFocus>\n            {t(\"delete_student\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n              {loading?\n                  !newStudent && <Skeleton style={{float: 'right'}}><PersonAddIcon/></Skeleton>\n              :\n              !newStudent && <Tooltip style={{float: 'right'}} title={t(\"new_guardian\")} aria-label={t(\"new_guardian\")}>\n                <IconButton onClick={(e) => {\n                  addNewGuardian();\n                }}>\n                  <PersonAddIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n\n              {loading ?\n                  !newStudent && <Skeleton style={{float: 'right'}}><IconButton/></Skeleton>\n              :\n               !newStudent && <Tooltip style={{float: 'right'}} title={t(\"delete\")} aria-label={t(\"delete\")}>\n                <IconButton onClick={(e) => {\n                  setOpenConfirmDeleteDialog(true);\n                }}>\n                  <DeleteIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <Person\n                      currentPerson={newStudent? emptyAttendee: currentStudent}\n                      newPerson={newStudent}\n                      updateCurrentStudent={(x) => {\n                        if (!newStudent) return updateCurrentStudent(x);\n                        addStudentId(x);\n                      }}\n                      patchService={patchService}\n                      onUpdate={(changedBody) => {\n                        if (\"status\" in changedBody && changedBody[\"status\"] === \"enrolled\"){\n                          // sendGrantLetter(); todo ask\n                        }\n                      }}\n                      additionalValidation={{\n                        enrollment_status: yup.string().required(t(\"status_required\")),\n                        image_agreement: yup.boolean().required(t(\"image_required\")),\n                        birth_date: yup.date().required(t(\"birthdate_required\"))\n                      }}\n                      additionalFields={\n                        [[<DirtyTextField\n                                label={t(\"price_term\")}\n                                style={{flex: 1}}\n                                name=\"price_term\"\n                                type=\"number\"\n                                InputProps={{endAdornment: <InputAdornment position=\"end\"></InputAdornment>,}}\n                            />,\n                            <DirtyTextField\n                                label={t(\"default_payment_method\")}\n                                style={{flex: 1}}\n                                name=\"default_payment_method\"\n                                select>\n                                { payment_methods.map(\n                                                    (method) => (\n                                                        <MenuItem key={method} value={method}>{t(method)}</MenuItem>\n                                                    )\n                                                )\n                                                }\n                            </DirtyTextField>],\n                            <DirtyTextField\n                                label={t(\"payment_comments\")}\n                                style={{flex: 1}}\n                                multiline\n                                rowsMax={8}\n                                name=\"payment_comments\"\n                            />,\n                            [<DirtyTextField\n                                label={t(\"birthdate\")}\n                                type=\"date\"\n                                style={{flex: 1}}\n                                name=\"birth_date\"\n                                InputLabelProps={{shrink: true}}/>,\n                            <DirtyTextField\n                              label={t(\"years_in_xamfra\")}\n                              type=\"number\"\n                              style={{flex: 1}}\n                              name=\"years_in_xamfra\"/>],\n                          [\n                              <DirtyTextField\n                                label={t(\"status\")}\n                                style={{flex: 1}}\n                                name=\"enrollment_status\"\n                                select>\n                                {['enrolled', 'early-unenrolled', 'pre-enrolled'].map((s) => (\n                                    <MenuItem key={s} value={s}>{t(s)}</MenuItem>\n                                ))}\n                            </DirtyTextField>,\n                              <DirtyTextField\n                                label={t(\"image_agreement\")}\n                                style={{flex: 1}}\n                                name=\"image_agreement\"\n                                select>\n                                <MenuItem value={true}>{t(\"yes\")}</MenuItem>\n                                <MenuItem value={false}>{t(\"no\")}</MenuItem>\n                            </DirtyTextField>\n                          ],\n                        <DirtyTextField\n                                label={t(\"other_comments\")}\n                                style={{flex: 1}}\n                                multiline\n                                rowsMax={8}\n                                name=\"other_comments\"\n                            />]}\n              >\n\n              </Person>\n\n              {!newStudent && <Box my={3}>\n            <Divider />\n            </Box>}\n\n              <Box className={[classes.line, classes.composite]}>\n                {loading ?\n                      !newStudent && <Skeleton style={{flex: 1}}><Button/></Skeleton>\n                      :\n                        !newStudent &&   <Tooltip style={{flex: 1}} title={t(\"send_grant_letter\")} aria-label={t(\"send_grant_letter\")}>\n                           <Button\n                          variant=\"contained\"\n                          color=\"default\"\n                          className={classes.button}\n                          startIcon={<SendIcon />}\n                          onClick={(e) => {\n                               sendGrantLetter();\n                            }}\n                        >\n                          {t(\"grant_letter\")}\n                        </Button>\n                </Tooltip>\n                      }\n\n                {loading? !newStudent && <Skeleton style={{float: 'right'}}><Button/></Skeleton>\n                :\n               !newStudent &&  <Tooltip style={{flex: 1}} title={t(\"export_grant_letter\")} aria-label={t(\"export_grant_letter\")}>\n            <Button\n                          variant=\"contained\"\n                          color=\"default\"\n                          className={classes.button}\n                          startIcon={<GetAppIcon />}\n                          onClick={(e) => {\n                               StudentsDataService\n                    .downloadSubresource(currentStudent[\"id\"], 'grantLetter')\n                    .then(...errorHandler({snackbarSuccess:true}))\n                    .then(()=>null)\n                            }}\n                        >\n                          {t(\"grant_letter\")}\n                        </Button>\n          </Tooltip>}\n              </Box>\n\n              <Box className={[classes.line, classes.composite]}>\n                {loading?\n                     !newStudent &&  <Skeleton style={{flex: 1}}><Button/></Skeleton>\n                      :\n                        !newStudent &&   <Tooltip style={{flex: 1}} title={t(\"send_enrollment_agreement\")} aria-label={t(\"enrollment_agreement\")}>\n                           <Button\n                          variant=\"contained\"\n                          color=\"default\"\n                          className={classes.button}\n                          startIcon={<SendIcon />}\n                          onClick={(e) => {\n                               sendEnrollmentAgreement();\n                            }}\n                        >\n                          {t(\"enrollment_agreement\")}\n                        </Button>\n                </Tooltip>\n                      }\n\n                {loading? !newStudent && <Skeleton style={{float: 'right'}}><Button/></Skeleton>\n                :\n              !newStudent &&   <Tooltip style={{flex: 1}} title={t(\"export_enrollment_agreement\")} aria-label={t(\"export_enrollment_agreement\")}>\n            <Button\n                          variant=\"contained\"\n                          color=\"default\"\n                          className={classes.button}\n                          startIcon={<GetAppIcon />}\n                          onClick={(e) => {\n                               StudentsDataService\n                    .downloadSubresource(currentStudent[\"id\"], 'enrollmentAgreement')\n                    .then(...errorHandler({snackbarSuccess:true}))\n                    .then(()=>null)\n                            }}\n                        >\n                          {t(\"enrollment_agreement\")}\n                        </Button>\n          </Tooltip>}\n              </Box>\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nAttendee.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nexport default Attendee;","import serviceFactory from \"./service-factory\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\n\nexport const sendGrantEmail = (id) => {  // todo abstract\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/emails/v1/grantEmail/${id}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        };\n\n","import serviceFactory from \"./service-factory\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\n\nexport const sendEnrollmentEmail = (id) => {  // todo abstract\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/emails/v1/enrollmentEmail/${id}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        };\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('students', 'guardians'))();\n\n","export const student_guardian_relations = [\n    'father',\n    'mother',\n    'grandfather',\n    'grandmother',\n    'brother',\n    'sister',\n    'uncle',\n    'aunt',\n    'cousin',\n    'legal_guardian'\n]","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {MenuItem, TextField} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport Divider from \"@material-ui/core/Divider\";\nimport StudentGuardianDataService from \"../_services/student_guardians.service\"\nimport {student_guardian_relations} from \"../_data/relations\"\nimport Person from \"./students.student.person.component\";\nimport GuardiansDataService from \"../_services/guardians.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport * as yup from \"yup\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport {education_years} from \"../_data/education\";\nimport {emptyGuardian} from \"../_data/empty_objects\";\n\n// here\nconst useStyles = makeStyles((theme) => ({\n\n  fullWidth: {\n    width: \"100%\"\n  },\n  sizeSmall: {\n    width: \"25ch\"\n  },\n  line: {\n    width: \"100%\",\n    marginTop: theme.spacing(1)\n  },\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n  composite: {display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n    gap: theme.spacing(1), width: \"100%\"}\n}));\n\nfunction Guardian({ value, index, studentId, title, guardianId, deleteGuardianId, addGuardianId, deleteNewGuardian, newGuardian=false, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n\n  const [guardian, setGuardian] = useState(null);\n\n  const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = React.useState(false);\n  console.log(guardianId, guardian);\n\n  useEffect(() => {\n    if (newGuardian) return;\n\n    GuardiansDataService\n            .getOne(guardianId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setGuardian(res[\"data\"]);\n\n                });\n  }, [guardianId])\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n        <Dialog\n        open={openConfirmDeleteDialog}\n        onClose={(e) => {setOpenConfirmDeleteDialog(false)}}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{t(\"delete_guardian_question\")}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">{t(\"action_cant_undone\")}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={(e) => {\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\">\n            {t(\"cancel\")}\n          </Button>\n          <Button onClick={(e) => {\n            GuardiansDataService\n              .delete(guardianId)\n              .then(...errorHandler({snackbarSuccess: true}))  // todo everywhere\n              .then(function (res) {\n                      deleteGuardianId(guardianId);\n                  });\n            setOpenConfirmDeleteDialog(false);\n          }} color=\"primary\" autoFocus>\n            {t(\"delete_guardian\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {value === index && (\n        <Box p={3}>\n            <Box px={2}>\n\n\n          <IconButton style={{float: 'right'}}  onClick={(e) => {\n            if (!newGuardian) return setOpenConfirmDeleteDialog(true);\n            deleteNewGuardian();\n          }}>\n            <Tooltip title={t(\"delete\")} aria-label={t(\"delete\")}>\n            <DeleteIcon />\n             </Tooltip>\n          </IconButton>\n\n\n              <Person currentPerson={newGuardian? emptyGuardian: guardian}\n                      studentId={studentId}\n                      newPerson={newGuardian}\n                      updateCurrentStudent={(x) => {\n                        if (!newGuardian) return setGuardian(x);\n                        StudentGuardianDataService.postWithId(studentId, x)\n                          .then(...errorHandler({snackbarSuccess: true}))\n                          .then(() => {\n                          addGuardianId(x);\n                        });\n                      }}\n                      patchService={GuardiansDataService}\n                      additionalValidation={{\n                        relation: yup.string().required(t(\"relation_required\"))}}\n                      additionalFields={\n                        [[<DirtyTextField\n                                label={t(\"relation\")}\n                                style={{flex: 1}}\n                                name=\"relation\"\n                                select\n                            >\n                          {student_guardian_relations.map((r) => (\n                                   <MenuItem key={r} value={r}>{t(r)}</MenuItem>\n                                ))}\n                                ))}\n\n                        </DirtyTextField>]]}\n              />\n\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nGuardian.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nexport default Guardian;","export const longer_8 = /^.{8,}$/;\nexport const shorter_64 = /^.{0,64}$/;\nexport const has_lowercase = /(?=.*[a-z])/;\nexport const has_uppercase = /(?=.*[A-Z])/;\nexport const has_digit = /(?=.*\\d)/;\nexport const has_special = /(?=.*[ -/:-@[-`{-~]{1,})/;\nexport const no_plus = /^((?!\\+).)*$/;\n","import * as yup from \"yup\";\nimport {\n    has_digit,\n    has_lowercase,\n    has_special,\n    has_uppercase,\n    longer_8,\n    no_plus,\n    shorter_64\n} from \"../_data/password_regex\";\n\nexport const safe_password = (t) => (\n    yup.string()\n        .required(t(\"password_required\"))  // todo translate\n        .matches(longer_8, t(\"longer_8\"))\n        .matches(shorter_64, t(\"shorter_64\"))\n        .matches(has_lowercase, t(\"has_lowercase\"))\n        .matches(has_uppercase, t(\"has_uppercase\"))\n        .matches(has_digit, t(\"has_digit\"))\n        .matches(has_special, t(\"has_special\"))\n)\n\nexport const safe_password_repetition = (t) => (\n    yup.string()\n        .required(t(\"password_required\"))\n        .oneOf([yup.ref('password'), null], t(\"passwords_unmatched\"))\n)\n\n\nconst safe_username_email = (t) => (\n    yup.string()\n        .required(t(\"email_required\"))\n        .email(t(\"invalid_email\"))\n        .matches(no_plus, t(\"no_plus\"))\n)\n\nexport const safe_username = safe_username_email;\nexport const safe_email = safe_username_email;\n\nexport const one_of = (t, options) => yup.string().required(t('field_required'))\n                                .test(  // one of the array\n                                  'oneOfRequired',\n                                  `${t(\"one_of\")}: ${options.toString()}`,\n                                  v => options.includes(v)\n                                )","import {useTranslation} from \"react-i18next\";\nimport React from \"react\";\nimport AccountBalanceIcon from '@material-ui/icons/AccountBalance';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport SendIcon from '@material-ui/icons/Send';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport clsx from 'clsx';\nimport AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ReceiptIcon from '@material-ui/icons/Receipt';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport EuroIcon from '@material-ui/icons/Euro';\nimport PaymentsDataService from '../_services/payments.service';\nimport {sendReceiptEmail} from '../_services/emailsReceipts.service';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Box from \"@material-ui/core/Box\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport DirtyTextField from \"./dirtytextfield.component\";\nimport {Button, DialogActions, MenuItem} from \"@material-ui/core\";\nimport {useNormik} from \"../_helpers/normik\";\nimport * as yup from \"yup\";\nimport {one_of} from \"../_yup/validators\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport {payment_methods} from \"../_data/payment_methods\"\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    maxWidth: '100%',\n    backgroundColor: theme.palette.type === 'dark'? '#575757': null\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%', // 16:9\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: theme.palette.secondary.main,\n  },fullWidth: {\n        width: \"100%\"\n    },\n    sizeSmall: {\n        width: \"25ch\"\n    },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    }\n}));\n\nexport default function PaymentCard({ payment, updatePayment, deletePayment, newPayment=false, addPaymentId, student_id} ) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(newPayment);\n  const errorHandler = useErrorHandler();\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  const formik = useNormik(!newPayment, {\n        initialValues: payment,\n        validationSchema: yup.object({method: one_of(t, payment_methods),\n                                        quantity: yup.number().required(t(\"import_required\")),\n                                        date: yup.date().required(t(\"date_required\"))}),  // todo\n        enableReinitialize: true,\n        onSubmit: (changedValues, {setStatus, setSubmitting}) => {\n            console.log(\"submitting\", changedValues);\n            if (Object.keys(changedValues).length > 0){\n                setStatus();\n\n                if (newPayment) {\n                    PaymentsDataService\n                        .post({...changedValues, student_id: student_id})\n                        .then(...errorHandler({snackbarSuccess:true}))\n                        .then(function (res) {\n                            addPaymentId(res['id']);\n                            }).catch(function (err){\n                                setStatus(true);\n                            })\n                        .finally(() => {\n                                setSubmitting(false);\n                        });\n                } else {\n                    PaymentsDataService.patch({\n                      id: payment[\"id\"],    // id\n                      body: changedValues,\n                      initial_values: payment  // todo doesnt normik do this?\n                  }).then(...errorHandler({snackbarSuccess:true}))\n                        .then(function (patched_body) {\n                                formik.resetForm(patched_body);\n                                updatePayment(patched_body['id'], patched_body);\n                            }).catch(function (err){\n                                setStatus(true);\n                    })\n                        .finally(() => {\n                                setSubmitting(false);\n                        });\n\n                }\n\n                    } else {\n                setSubmitting(false);\n            }\n\n        }\n    });\n\n\n  return (\n      <Box my={2}>\n    <Card className={classes.root}>\n      <CardHeader\n        avatar={\n          <Tooltip title={payment[\"method\"] === 'cash'? t('has_paid_cash'):\n                payment[\"method\"] === 'bank-transfer' ? t('tooltip-bank-transfer'):\n                    payment[\"method\"] === 'bank-direct-debit'? t('tooltip-bank-direct-debit'):\n                        t('other-payment-method')\n            }>\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            {payment[\"method\"] === 'cash'? <EuroIcon/>:\n                payment[\"method\"] === 'bank-transfer'? <AccountBalanceWalletIcon/>:\n                    payment[\"method\"] === 'bank-direct-debit'? <AccountBalanceIcon/>:\n                    <MoreHorizIcon/>\n            }\n          </Avatar>\n        </Tooltip>\n\n        }\n        action={\n          <Tooltip title={t(\"delete\")} aria-label={t(\"delete\")}>\n          <IconButton onClick={(e) => {deletePayment(payment['id'])}}>\n            <DeleteIcon />\n          </IconButton>\n        </Tooltip>\n        }\n        title={newPayment? t('new_payment') : `${t(\"has_paid\")} ${payment['quantity']}`}\n        subheader={payment['date']}\n      />\n\n        {!newPayment && <CardActions disableSpacing>\n        <Tooltip title={t(\"export_receipt\")} aria-label={t(\"export_receipt\")}>\n          <IconButton aria-label={t(\"export_receipt\")} onClick={(e) => {\n              PaymentsDataService\n                  .downloadSubresource(payment[\"id\"], 'receipt')\n                  .then(...errorHandler({snackbarSuccess:true}))\n                  .then(()=>null)\n          }}>\n            <ReceiptIcon />\n          </IconButton>\n        </Tooltip>\n        <Tooltip title={t(\"send_receipt\")} aria-label={t(\"send_receipt\")}>\n          <IconButton aria-label={t(\"send_receipt\")} onClick={(e) => {\n              sendReceiptEmail(payment[\"id\"])\n                  .then(...errorHandler({snackbarSuccess:true}))\n                  .then(()=>null);\n          }}>\n            <SendIcon />\n          </IconButton>\n        </Tooltip>\n        <IconButton\n          className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n          })}\n          onClick={handleExpandClick}\n          aria-expanded={expanded}\n          aria-label=\"show more\"\n        >\n          <ExpandMoreIcon />\n        </IconButton>\n      </CardActions>}\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <CardContent>\n          <Box>\n            {payment === null\n                ?\n                (\n\n                    <Box>\n                        {\n                            [\"100%\", \"100%\", \"100%\"].map((value, idx) => {\n                                return (\n                                    <Box key={idx} py={0}>\n                                        <Skeleton variant=\"text\" width={value} height=\"60px\"/>\n                                    </Box>);\n                            })\n                        }\n                    </Box>\n                )\n                :\n                (\n                        <form onSubmit={formik.handleSubmit}>\n                                        <DirtyTextField\n                                            label={t(\"id\")}\n                                            name=\"id\"\n                                            disabled\n                                            className={classes.line}\n                                            formik={formik}\n                                            />\n\n                                        <Box className={[classes.line, classes.composite]}>\n                                            <DirtyTextField\n                                                label={t(\"method\")}\n                                                style={{flex: 1}}\n                                                formik={formik}\n                                                name=\"method\"\n                                                select>\n                                                { payment_methods.map(\n                                                    (method) => (\n                                                        <MenuItem key={method} value={method}>{t(method)}</MenuItem>\n                                                    )\n                                                )\n                                                }\n                                            </DirtyTextField>\n                                            <DirtyTextField\n                                                label={t(\"import\")}\n                                                formik={formik}\n                                                type=\"number\"\n                                                style={{flex: 1}}\n                                                name=\"quantity\"\n                                                InputProps={{\n                                                    endAdornment: <InputAdornment position=\"end\"></InputAdornment>,\n                                                  }}\n                                            />\n                                            <DirtyTextField\n                                                label={t(\"date\")}\n                                                formik={formik}\n                                                type=\"date\"\n                                                style={{flex: 1}}\n                                                name=\"date\"\n                                                InputLabelProps={{shrink: true}}/>\n                                        </Box>\n\n                             <Box className={[classes.line, classes.composite]}>\n                                            <DirtyTextField\n                                                label={t(\"concept\")}\n                                                formik={formik}\n                                                style={{flex: 1}}\n                                                multiline\n                                                rowsMax={8}\n                                                name=\"concept\"\n                                            />\n                                        </Box>\n\n\n                                        <DialogActions>\n                                            <Button\n                                                type=\"button\"\n                                                className=\"outline\"\n                                                onClick={formik.handleReset}\n                                                disabled={!formik.dirty || formik.isSubmitting}\n                                            >\n                                                {t(\"reset\")}\n                                            </Button>\n                                            <Button type=\"submit\" disabled={!formik.dirty || formik.isSubmitting}>\n                                                {newPayment? t(\"create\"): t(\"save\")}\n                                            </Button>\n                                        </DialogActions>\n                                    </form>\n                )\n\n            }\n        </Box>\n        </CardContent>\n      </Collapse>\n    </Card></Box>\n  );\n}\n","import serviceFactory from \"./service-factory\";\nimport {API_VERSION, BACKEND_URL} from \"../config\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport axios from \"axios\";\n\n\nexport const sendReceiptEmail = (id) => {  // todo abstract\n            return new Promise(function (resolve, reject) {\n                axios({\n                    method: 'post',\n                    url: `${BACKEND_URL}/emails/v1/paymentReceipt/${id}`,\n                    headers: {\n                        ...{\n                            'Content-Type': 'application/json',\n                            'Cache-Control': 'no-cache'\n                        }, ...authHeader()\n                    }\n                }).then(function (res) {\n                        resolve(res);\n                    }).catch(function (err) {\n                        reject(err);\n                });\n            });\n        };\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PropTypes from \"prop-types\";\nimport React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport PaymentsDataService from \"../_services/payments.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport PaymentCard from \"./students.student.payments.payment.component\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport PersonAddIcon from \"@material-ui/icons/PersonAdd\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\n\nconst getDefaultValues = () => {\n    const date = new Date();\n    const dd = date.getDate();\n    const mm = date.getMonth() + 1; //Month from 0 to 11\n    const yyyy = date.getFullYear();\n    return {'id': null, 'date': `${yyyy}-${mm<=9 ? '0' + mm : mm}-${dd <= 9 ? '0' + dd : dd}`, 'quantity': null, 'concept': null, 'method': null}\n}\nconst useStyles = makeStyles((theme) => ({\n  root: {\n\n  },\n  newLine: {\n    width: '100%',\n       marginTop: theme.spacing(1),\n        display: \"flex\",\n    flexDirection: \"column\"\n  },\n  fullWidth: {\n    width: \"100%\"\n  },\n  sizeSmall: {\n    width: \"25ch\"\n  },\n  line: {\n    width: \"100%\",\n    marginTop: theme.spacing(1)\n  },\n  composite: {display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n    gap: theme.spacing(1), width: \"100%\"}\n}));\n\nfunction Payments({ children, value, index, title, paymentIds, deletePaymentFromStudent, addPaymentId, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const loading = paymentIds === null;\n\n  const [payments, setPayments] = useState([]);\n  const [newPaymentCard, setNewPaymentCard] = useState(false);\n\n  useEffect(()=>{\n    setNewPaymentCard(false);\n  }, [payments])\n\n  const updatePayment = (id, body) => {\n    setPayments(payments.map(payment => {\n      if (payment.id !== id) return payment;\n      return body;\n    }))\n  }\n\n  const deletePayment = (id) => {\n    PaymentsDataService.delete(id)\n        .then(...errorHandler({snackbarSuccess:true}))\n        .then(function (r) {\n             deletePaymentFromStudent(id);\n        });\n  }\n\n  useEffect(() => {\n    if (paymentIds === null) return;\n\n    if (paymentIds.length === 0){\n      setPayments([]);\n    } else {\n      PaymentsDataService\n            .getMany(paymentIds)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setPayments(res.map(res => res[\"data\"]).sort((p1, p2) => p1.date.localeCompare(p2.date)));\n                });\n    }\n  }, [paymentIds])\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      className={classes.root}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>  {// todo simplify everywhere\n        } <Box px={2}>\n\n              {loading?\n                  <Skeleton style={{float: 'right'}}><AddCircleIcon/></Skeleton>\n              :\n              <Tooltip style={{float: 'right'}} title={t(\"new_payment\")} aria-label={t(\"new_payment\")}>\n                <IconButton onClick={(e) => { setNewPaymentCard(true); }}>\n                  <AddCircleIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <div className={classes.newLine}>\n\n              {\n                payments && payments.map(payment =>\n                    (<PaymentCard payment={payment} key={payment['id']} updatePayment={updatePayment} deletePayment={deletePayment}/>)\n                )\n              }\n\n              {newPaymentCard &&\n                <PaymentCard payment={getDefaultValues()}\n                             updatePayment={updatePayment}\n                             deletePayment={(_) => {setNewPaymentCard(false)}}\n                            newPayment={true}\n                             student_id={student_id}\n                addPaymentId={addPaymentId}/>\n              }\n\n              {loading &&\n                <Skeleton width=\"100%\" height=\"250px\"/>  // todo we can do better\n              }\n\n              {!loading && payments.length === 0 && !newPaymentCard &&\n                <Typography>{t(\"no_payments\")}</Typography>\n              }\n              </div>\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nPayments.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nexport default Payments;","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('students', 'courses'))();\n\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('courses'))();\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport StudentsCourseDataService from \"../_services/student_courses.service\";\nimport CoursesDataService from \"../_services/courses.service\"\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport {\n    AppBar,\n    Dialog,\n    ListItemSecondaryAction,\n    Slide\n} from \"@material-ui/core\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Button from \"@material-ui/core/Button\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport SearchBar from \"./searchbar.component\";\nimport Pagination from \"@material-ui/lab/Pagination\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n\n  },list: {\n        overflow: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1\n    },\n    box: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: '30px'\n    },\n  newLine: {\n    width: '100%',\n       marginTop: theme.spacing(1),\n        display: \"flex\",\n    flexDirection: \"column\"\n  },\n  fullWidth: {\n    width: \"100%\"\n  },\n  sizeSmall: {\n    width: \"25ch\"\n  },\n  line: {\n    width: \"100%\",\n    marginTop: theme.spacing(1)\n  },\n  composite: {display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n    gap: theme.spacing(1), width: \"100%\"}, appBar: {\n    position: 'relative',\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1,\n  },\n}));\n\nclass CloseIcon extends React.Component {\n    render() {\n        return null;\n    }\n}\n\nfunction Courses({ children, history, value, index, title, courseIds, deleteCourseFromStudent, addCourseId, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const errorHandler = useErrorHandler();\n  const loading = courseIds === null;\n\n  const [courses, setCourses] = useState([]);\n  const [allCourses, setAllCourses] = useState(null);\n  const [newCourse, setNewCourse] = useState(false);\n  const handleClose = () => {\n    setNewCourse(false);\n  };\n\n  useEffect(()=>{\n    setNewCourse(false);\n  }, [courses])\n\n\n   const [searchTerm, setSearchTerm] = useState('');\n   const [page, setPage] = useState(1);\n   const [count, setCount] = useState(0);\n\n   function search() {\n       if (loading || !newCourse) return;\n\n        CoursesDataService\n            .getAll({name: 'name', value: searchTerm}, page, ['name', 'description', 'id'])\n            .then(...errorHandler({}))\n            .then(res => {\n                setAllCourses(res[\"data\"].filter(x => !(courseIds.includes(x['id']))));\n                setCount(res[\"_pagination\"][\"totalPages\"]);\n            });\n    }\n\n    useEffect(search, [page, setAllCourses, loading, newCourse]);\n\n   const handlePageChange = (event, value) => {\n        setPage(value);\n    };\n\n  const deleteStudentCourse = (id) => {\n    StudentsCourseDataService\n        .delete(student_id, id)\n        .then(...errorHandler({snackbarSuccess:true}))\n        .then(function (r) {\n             deleteCourseFromStudent(id);\n        });\n  }\n\n  useEffect(() => {\n    if (courseIds === null) return;\n\n    if (courseIds.length === 0){\n      setCourses([]);\n    } else {\n      CoursesDataService\n            .getMany(courseIds)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setCourses(res.map(res => res[\"data\"]));\n                });\n    }\n  }, [courseIds])\nconst onChangeSearchTerm = (e) => {\n        setSearchTerm(e.target.value);\n    };\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      className={classes.root}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>  {// todo simplify everywhere\n        } <Box px={2}>\n\n            <Dialog fullScreen open={newCourse} onClose={handleClose} TransitionComponent={Transition}>\n        <AppBar className={classes.appBar} color=\"secondary\">\n          <Toolbar>\n            <IconButton edge=\"start\" color=\"inherit\" onClick={handleClose} aria-label=\"close\">\n              <CloseIcon />\n            </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n                {t(\"enroll_to_course\")}\n            </Typography>\n            <Button autoFocus color=\"inherit\" onClick={handleClose}>\n                {t(\"cancel\")}\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Box className={classes.box} m={3}>\n                <SearchBar\n                    label={t(\"courses\")}\n                    value={searchTerm}\n                    onChange={onChangeSearchTerm}\n                    onSearch={search}\n                />\n\n                <Box my={2}>\n                    <Pagination\n                        className=\"pagination\"\n                        count={count}\n                        page={page}\n                        size=\"small\"\n                        showFirstButton\n                        showLastButton\n                        siblingCount={1}\n                        boundaryCount={1}\n                        color=\"primary\"\n                        onChange={handlePageChange}\n                    />\n                </Box>\n            <List className={classes.list}>\n                {allCourses && allCourses.map((course) => (\n                    <div key={course[\"id\"]}>\n                        <ListItem key={course[\"id\"]} button\n                                  onClick={() => {\n                                      if (window.confirm(t(\"confirm_enroll_to_course\"))){  // todo\n                                        StudentsCourseDataService\n                                            .postWithId(student_id, course['id'])\n                                            .then(...errorHandler({snackbarSuccess: true}))\n                                            .then((body) => {\n                                                addCourseId(course['id']);\n                                                handleClose();\n                                            })\n                                      }\n                                  }}>\n\n                            <ListItemText id=\"name\" primary={course['name']} secondary={course['description']}/>\n\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n            </Box>\n\n      </Dialog>\n\n              {loading?\n                  <Skeleton style={{float: 'right'}}><AddCircleIcon/></Skeleton>\n              :\n              <Tooltip style={{float: 'right'}} title={t(\"new_payment\")} aria-label={t(\"new_payment\")}>\n                <IconButton onClick={(e) => {\n                    if (allCourses === null) {\n                        search();\n                    }\n                    setNewCourse(true);\n                }}>\n                  <AddCircleIcon />\n                </IconButton>\n              </Tooltip>\n              }\n\n              <div className={classes.newLine}>\n\n                  <List className={classes.list}>\n                {courses && courses.map((course) => (\n                    <div key={course[\"id\"]}>\n                        <ListItem key={course[\"id\"]} button onClick={(e) => {\n                            history.push('/courses?id='+course['id']);\n                        }}>\n                            <ListItemText id=\"name\" primary={course.name} secondary={course.description}/>\n                            <ListItemSecondaryAction>\n                                <IconButton onClick={(e) => {\n                                    if (window.confirm(t(\"confirm_unenroll_to_course\"))) deleteStudentCourse(course['id'])\n                                }}>\n                                  <DeleteIcon />\n                                </IconButton>\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n\n\n\n              {loading &&\n                <Skeleton width=\"100%\" height=\"250px\"/>  // todo we can do better\n              }\n\n              {!loading && courses.length === 0 && !newCourse &&\n                <Typography>{t(\"no_courses\")}</Typography>\n              }\n              </div>\n            </Box>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nexport default Courses;\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('schedules'))();\n\n","import {useTranslation} from \"react-i18next\";\nimport Box from \"@material-ui/core/Box\";\nimport React, {useEffect, useState} from \"react\";\nimport SchedulesDataService from \"../_services/schedules.service\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport styled from \"@emotion/styled\";\nimport { useTheme } from '@material-ui/core/styles';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport {useSnackbar} from \"notistack\";\nconst useStyles = makeStyles((theme) => ({\n  fullWidth: {\n    width: \"100%\"\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n  sizeSmall: {\n    width: \"25ch\"\n  },\n    line: {\n        width: \"100%\",\n        marginTop: theme.spacing(1)\n    },\n    composite: {\n        display: \"flex\", flexDirection: \"row\", flex: 1, flexWrap: \"wrap\",\n        gap: theme.spacing(1), width: \"100%\"\n    },\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n    calendar: {\n      margin: theme.spacing(2)\n    }\n\n}));\n\n\nfunction Schedule({ value, index, title, scheduleIds, student_id, ...other }) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const {enqueueSnackbar, closeSnackbar} = useSnackbar();\n  const errorHandler = useErrorHandler();\n    const theme = useTheme();\n   const StyleWrapper = styled.div`\n      .fc-button, .fc-button.fc-button-primary {\n        background: ${theme.palette.primary.main};\n        color: ${theme.palette.primary.contrastText};\n        border-color: ${theme.palette.primary.main};\n        background-image: none;\n    }\n    .fc-button:enabled:hover {\n        background: ${theme.palette.primary.dark};\n        color: ${theme.palette.primary.contrastText};\n        border-color: ${theme.palette.primary.dark};\n        background-image: none;\n    }\n    `\n\n    const [schedules, setSchedules] = useState(null);\n   const loading = scheduleIds === null;\n\n   const eventFromSchedule = (schedule) => {\n       return {\n            daysOfWeek: [schedule['day_week']],\n            title: schedule['course']['name'],\n            groupId: [schedule['id']],\n            startTime: schedule['start_time'],\n            endTime: schedule['end_time'],\n            color: schedule[\"is_base\"]? theme.palette.secondary.main: theme.palette.secondary.light,\n            textColor: schedule[\"is_base\"]? theme.palette.secondary.contrastText: theme.palette.secondary.contrastText,\n            extendedProps: {\n                schedule: schedule\n            },\n        }\n   }\n\n   useEffect(() => {\n    if (scheduleIds === null) return;\n\n    if (scheduleIds.length === 0){\n      setSchedules([]);\n    } else {\n      SchedulesDataService\n            .getMany(scheduleIds)\n            .then(...errorHandler({}))\n            .then(function (res) {\n                    setSchedules(res.map(res => res[\"data\"]).map(schedule => {\n                        return eventFromSchedule(schedule);\n                    }));\n                });\n    }\n  }, [scheduleIds, theme]);\n\n   const eventChanged = (info) => {\n       const schedule = info.event.extendedProps[\"schedule\"];\n       const newEvent = info.event;\n       let body = {};\n        body['day_week'] = newEvent['start'].getDay();\n        body['start_time'] = newEvent['start'].toLocaleTimeString('en-US', { hour12: false });\n        body['end_time'] = newEvent['end'].toLocaleTimeString('en-US', { hour12: false });\n\n        if (schedule[\"is_base\"] === true) {\n            body['course_id'] = schedule['course_id'];\n            body['student_id'] = student_id;\n            body['is_base'] = false;\n            SchedulesDataService\n                    .post(body)\n                    .then(...errorHandler({errorOut: true, snackbarSuccess: true}))\n                    .then(function (res) {\n                        let calendarApi = info.view.calendar;\n                        newEvent['is_base'] = true;\n                        calendarApi.addEvent(eventFromSchedule(res));\n                        info.revert();\n                    }).catch(function(err){\n                        info.revert();\n            });\n\n        } else {\n            SchedulesDataService\n                    .patch({id: schedule['id'],\n                                                body: body,\n                                                initial_values: schedule})\n                    .then(...errorHandler({errorOut: true, snackbarSuccess: true}))\n                    .then(function (res) {\n                        /*setSchedules(schedules.map(payment => {\n                          if (payment.id !== res['id']) return payment;\n                          return res;\n                        }))*/\n                    }).catch(function (err){\n                        info.revert();\n                    });\n        }\n    }\n  return (\n    <div\n      role=\"tabpanel\"\n      className={classes.root}\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n        style={{height: '100%', flex: 1, minHeight: \"70vh\" }}\n\n    >{// todo fix height\n           }\n           <Box p={2} style={{height: \"100%\"}}>\n                <StyleWrapper  style={{height: \"100%\"}}>\n                      <FullCalendar\n                        plugins={[ timeGridPlugin, interactionPlugin ]}\n                        initialView=\"timeGridWeek\"\n                        height=\"100%\"\n                        firstDay={1}\n                        editable={true}\n                          selectable={true}\n                          selectMirror={true}\n                          dayMaxEvents={true}\n                          weekends={true}\n\n                            snapDuration={'00:15'}\n                        events={schedules}\n                        eventAdd={function(){}}\n                        eventChange={function(clickInfo){\n                            // const schedule = clickInfo.event.extendedProps[\"schedule\"];\n                            // if (schedule[\"is_base\"] === true) return enqueueSnackbar(t(\"cant_remove_schedule\"), {'variant': 'warning'});\n                        }}\n                        eventRemove={function(){}}\n                        select={function(selectInfo){\n                            let title = prompt('Please enter a new title for your event')\n                            let calendarApi = selectInfo.view.calendar\n\n                            calendarApi.unselect() // clear date selection\n\n                            if (title) {\n                              calendarApi.addEvent({\n                                id: 24,\n                                title,\n                                start: selectInfo.startStr,\n                                end: selectInfo.endStr,\n                                allDay: selectInfo.allDay\n                              })\n                            }\n                        }}\n                        eventContent={function(){}} // custom render function\n                        eventClick={function(clickInfo){\n                            const schedule = clickInfo.event.extendedProps[\"schedule\"];\n                            if (schedule[\"is_base\"] === true) return enqueueSnackbar(t(\"cant_remove_schedule\"), {'variant': 'warning'});\n                           if (window.confirm(t(\"sure_delete_event\"))) {\n                               SchedulesDataService\n                                    .delete(schedule['id'])\n                                    .then(...errorHandler({snackbarSuccess: true}))\n                                    .then(function (res) {\n                                        clickInfo.event.remove();\n                                    });\n\n                        }}}\n                        eventTimeFormat={{\n                            hour: '2-digit',\n                            minute: '2-digit',\n                            hour12: false\n                        }}\n                        eventResize={eventChanged}\n                        eventDrop={eventChanged}\n                      />\n                </StyleWrapper>\n               </Box>\n    </div>\n  );\n}\n\nexport default Schedule;","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTranslation} from \"react-i18next\";\nimport SwipeableViews from 'react-swipeable-views';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport Attendee from \"./students.student.attendee.component\";\nimport Guardian from \"./students.student.guardian.component\";\nimport StudentsDataService from \"../_services/students.service\";\nimport GuardiansDataService from \"../_services/guardians.service\";\nimport Payments from \"./students.student.payments.component\";\nimport Courses from \"./students.student.courses.component\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Fab from \"@material-ui/core/Fab\";\nimport Zoom from \"@material-ui/core/Zoom\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Schedule from \"./students.student.schedule.component\";\nimport * as PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n\n  },\n    fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n    backgroundColor: theme.palette.primary.main\n  }, fab_placeholder: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2)\n  },\n  contentPanel: {\n    //flex: 1,\n      position: 'relative', // todo proper scrollbar AND fab\n    overflow: \"auto\",\n    boxSizing: \"border-box\",\n      height: '100%', // todo proper,\n    minHeight: 200,\n\n  },\n  fullWidth: {\n    width: \"100%\"\n  },\n  sizeSmall: {\n    margin: theme.spacing(1),\n    width: \"25ch\"\n  },\n  sizeLong: {\n    margin: theme.spacing(1),\n    width: \"100%\"\n  }\n}));\n\n\n\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`,\n  };\n}\n\n\nexport default function Student(props) {\n  const currentStudentId = props.currentStudentId;\n  const deleteStudent = props.deleteStudent;\n  const newStudent = props.newStudent;\n  const addStudentId = props.addStudentId;\n  const loading = currentStudentId === null;\n\n  const errorHandler = useErrorHandler();\n\n  const [student, setStudent] = useState(null);  // todo rename to student\n  const [newGuardian, setNewGuardian] = useState(false);\n\n\n\n  useEffect(() => {\n    if (loading) return setStudent(null);\n    StudentsDataService\n            .getOne(currentStudentId)\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setStudent(res[\"data\"]);\n                });\n  }, [currentStudentId])\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n   useEffect(()=>{\n    setValue(0);\n  }, [currentStudentId])\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };\n\n\n\n  const guardians = student === null? []: student.guardians;\n    // todo maybe tabs with or only with icons\n  return (\n    <Paper elevation={3} square className={classes.contentPanel}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                  value={value}\n                  onChange={handleChange}\n                  indicatorColor=\"primary\"\n                  textColor=\"primary\"\n                  variant=\"scrollable\"\n                  scrollButtons=\"auto\"\n                  aria-label=\"full width tabs example\"\n                >\n                  <Tab label={t(\"attendee\")} {...a11yProps(0)} />\n\n                    { !newStudent &&\n                  <Tab label={t(\"schedule\")} {...a11yProps(1)} />}\n                 { !newStudent && <Tab label={t(\"payments\")} {...a11yProps(2)} />}\n                 { !newStudent && <Tab label={t(\"courses\")} {...a11yProps(3)} />}\n\n                  {\n                  (!newStudent && guardians) && guardians.map((contact, index) => (\n                  <Tab key={t(\"contact\") + \" \" + (index+1)} label={t(\"contact\") + \" \" + (index+1)} {...a11yProps(index+4)} />\n                      ))}\n\n\n                  {\n                    (!newStudent && newGuardian) &&\n                        <Tab key={t(\"new_guardian\")} label={t(\"new_guardian\")} {...a11yProps(4+guardians.length)} />\n                  }\n\n\n                </Tabs>\n              </AppBar>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={value}\n            onChangeIndex={handleChangeIndex}\n          >\n            <Attendee value={value}\n                      index={0}\n                      dir={theme.direction}\n                      newStudent={newStudent}\n                      title={t(\"attendee\")}\n                      currentStudent={student}\n                      addStudentId={addStudentId}\n                      patchService={StudentsDataService}\n                      updateCurrentStudent={setStudent}\n                      deleteStudent={deleteStudent}\n                      addNewGuardian={() => {\n                        setNewGuardian(true);\n                        setValue(4+guardians.length);\n                      }}\n            />\n\n            <Schedule value={value}\n                      index={1}\n                      dir={theme.direction}\n                      title={t(\"attendee\")}\n                      scheduleIds={student === null? null: student['schedules']}\n                      student_id={currentStudentId}\n            />\n            <Payments value={value}\n                      index={2}\n                      paymentIds={student === null? null: student.payments}\n                      addPaymentId={(payment_id) => {\n                        setStudent({...student, payments: [...student.payments, payment_id]})\n                      }}\n                      student_id={currentStudentId}\n                      deletePaymentFromStudent={(payment_id) => {\n                        setStudent({...student,\n                            payments: student.payments.filter((p) => p !== payment_id)});\n                      }}\n            />\n\n            <Courses value={value}\n                      index={3}\n                     history={props.history}\n                      courseIds={student === null? null: student['courses']}\n                      addCourseId={(course_id) => {\n                        setStudent({...student,\n                            courses: [...student['courses'], course_id]})\n                      }}\n                      student_id={currentStudentId}\n                      deleteCourseFromStudent={(course_id) => {\n                        setStudent({...student,\n                            courses: student['courses'].filter((c) => c !== course_id)});\n                      }}\n            />\n\n\n            {\n              guardians && guardians.map((guardian, index) => (\n                  <Guardian value={value}\n                            index={index+4}\n                            key={guardian}\n                            dir={theme.direction}\n                            guardianId={guardian}\n                            deleteGuardianId={(id) => {\n                              setStudent({...student, guardians: student['guardians'].filter((gId) => gId !== id)});\n                              setValue(0);\n                            }}\n            />\n                  ))}\n\n                  <Guardian value={value}\n                        index={4+guardians.length}\n                        dir={theme.direction}\n                        newGuardian={true}\n                        deleteNewGuardian={() => {\n                            setNewGuardian(false);\n                            setValue(0);\n                        }}\n                            studentId={currentStudentId}\n                        addGuardianId={(id) => {\n                            setNewGuardian(false);\n                            setStudent({...student, guardians: [...student.guardians, id]});\n                            setValue(4+guardians.length);\n                        }\n                        }\n                        deleteGuardianId={(id) => {\n                            setStudent({...student, guardians: student['guardians'].filter((gId) => gId !== id)});\n                            setValue(0);\n                        }}\n              />\n\n          </SwipeableViews>\n\n    </Paper>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport StudentsList from \"./students.list.component\";\nimport Student from \"./students.student.component\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {Tooltip} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Students({history, ...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [students, setStudents] = useState([]);\n  const [newStudent, setNewStudent] = useState(false);\n  const [currentStudentId, setCurrentStudentId] = useState(null);\n\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentStudentId(id);\n  }, [id])\n\n  useEffect(() => {\n      if (currentStudentId !== null) setNewStudent(false);\n  }, [currentStudentId])\n\n  return (\n      <Grid container spacing={3} className={classes.root}>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"students\")}</h1>\n          <StudentsList\n            setCurrentStudentId={setCurrentStudentId}\n            currentStudentId={currentStudentId}\n            students={students}\n            setStudents={setStudents}\n\n          />\n          <Tooltip title={t(\"new_student\")}>\n              <Fab className={classes.fab} color=\"primary\" onClick={(e) => {\n                  setCurrentStudentId(null);\n                 setNewStudent(true);\n              }}>\n                <AddIcon />\n              </Fab>\n          </Tooltip>\n        </Grid>\n\n        <Grid item xs={8} className={classes.right}>\n          <Student\n            currentStudentId={currentStudentId}\n            newStudent={newStudent}\n            history={history}\n            addStudentId={(id) =>{\n                setCurrentStudentId(id);\n            }}\n            deleteStudent={(studentId) => {\n                if (studentId === currentStudentId) setCurrentStudentId(null);\n\n                setStudents(students.filter((s) => s['id'] !== studentId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import serviceFactory from \"./service-factory\";\n\n\nexport default new (serviceFactory('users'))();\n\n","import React, {useEffect, useState} from \"react\";\nimport UsersDataService from \"../_services/users.service\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport List from \"@material-ui/core/List\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport SearchBar from './searchbar.component'\nimport Box from \"@material-ui/core/Box\";\nimport {useTranslation} from \"react-i18next\";\nimport {Accordion, AccordionDetails, AccordionSummary, Chip, ListItemSecondaryAction} from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport LoadingBackdrop from \"./loadingBackdrop.component\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flex: 1,\n        overflow: 'auto',\n        display: \"flex\",\n        flexDirection: \"column\"\n    },\n    list: {\n        overflow: \"auto\",\n        // maxHeight: \"60vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flex: 1,\n        minHeight: '150px'\n    },\n    box: {\n        display: \"flex\",\n        flexDirection: \"column\",\n    },\n    pagination: {\n        margin: '30px'\n    },\n    chip: {\n        margin: theme.spacing(2)\n    },\n    avatar: {},\n    selectedAvatar: {\n        backgroundColor: theme.palette.primary.dark\n    },\n    chips: {\n        flexWrap: 'wrap',\n    '& > *': {\n      margin: theme.spacing(0.5),\n    },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n    }\n}));\n\nconst UsersList = (props) => {\n    const setCurrentUserId = props.setCurrentUserId;\n    const currentUserId = props.currentUserId;\n    const users = props.users;\n    const setUsers = props.setUsers;\n\n    const [searchTerm, setSearchTerm] = useState(\"\");\n\n    const {t} = useTranslation();\n\n    const [page, setPage] = useState(1);\n    const [count, setCount] = useState(0);\n    const errorHandler = useErrorHandler();\n\n    const classes = useStyles();\n\n    const onChangeSearchTerm = (e) => {\n        setSearchTerm(e.target.value);\n    };\n\n    function search() {\n\n        UsersDataService\n            .getAll({name: 'full_name', value: searchTerm}, page, ['id', 'full_name'])\n            .then(...errorHandler({}))  // todo everywhere\n            .then(function (res) {\n                    setUsers(res[\"data\"]);\n                    setCount(res[\"_pagination\"][\"totalPages\"]);\n                });\n    }\n\n    useEffect(search, [page, setUsers]);\n\n    const handlePageChange = (event, value) => {\n        setPage(value);\n    };\n\n    return (\n        <Box className={classes.root}>\n            <Box className={classes.box}>\n                <SearchBar\n                    label={t(\"students\")}\n                    value={searchTerm}\n                    onChange={onChangeSearchTerm}\n                    onSearch={search}\n                />\n\n                <Box my={2}>\n                    <Pagination\n                        className=\"pagination\"\n                        count={count}\n                        page={page}\n                        size=\"small\"\n                        showFirstButton\n                        showLastButton\n                        siblingCount={1}\n                        boundaryCount={1}\n                        color=\"primary\"\n                        onChange={handlePageChange}\n                    />\n                </Box>\n            </Box>\n            <List className={classes.list}>\n                {users && users.map((user) => (\n                    <div key={user[\"id\"]}>\n                        <ListItem key={user[\"id\"]} button\n                                  onClick={() => {\n                                      setCurrentUserId(user['id']);\n                                  }}>\n                            <ListItemAvatar>\n                                <Avatar className={user[\"id\"] === currentUserId? classes.selectedAvatar: classes.avatar}>\n                                    {user['full_name'].charAt(0).toUpperCase()}\n                                </Avatar>\n                            </ListItemAvatar>\n                            <ListItemText id=\"name\" primary={user['full_name']}/>\n\n                                <ListItemSecondaryAction>\n                                    <Tooltip title={t(\"export\") + \" .csv\"}>\n                                    <IconButton edge=\"end\" aria-label={t(\"export\")} onClick={(e) => {\n                                        UsersDataService\n                                            .downloadOneCsv(user['id'])\n                                            .then(...errorHandler({}));\n                                    }}>\n                                        <GetAppIcon/>\n                                    </IconButton>\n                                        </Tooltip>\n                                </ListItemSecondaryAction>\n\n                        </ListItem>\n                        <Divider/>\n                    </div>\n                ))}\n            </List>\n        </Box>\n    );\n};\n\nexport default UsersList;\n","export const allNeeds = [\n    {\n        name: 'get',\n        description: 'can-read'\n    }, {\n        name: 'patch',\n        description: 'can-edit'\n    }, {\n        name: 'post',\n        description: 'can-create'\n    }, {\n        name: 'delete',\n        description: 'can-delete'\n    }, {\n        name: 'send_email',\n        description: 'can-send-emails'\n    }, {\n        name: 'invite_users',\n        description: 'can-invite-users'\n    }, {\n        name: 'students',\n        description: 'can-operate-with-students'\n    }, {\n        name: 'courses',\n        description: 'can-operate-with-courses'\n    }, {\n        name: 'guardians',\n        description: 'can-operate-with-guardians'\n    }, {\n        name: 'payments',\n        description: 'can-operate-with-payments'\n    }, {\n        name: 'rooms',\n        description: 'can-operate-with-rooms'\n    }, {\n        name: 'schedules',\n        description: 'can-operate-with-schedules'\n    }, {\n        name: 'teachers',\n        description: 'can-operate-with-teachers'\n    }, {\n        name: 'users',\n        description: 'can-operate-with-users'\n    }, {\n        name: 'payments-receipts',\n        description: 'can-operate-with-payment-receipts'\n    }\n];\n","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const invitationsService = {\n    inviteUser\n};\n\nfunction inviteUser(userEmail, needs) {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/invites/v1/userInvite`,  // todo server url\n            method: 'POST',\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()},\n            data: {\n                userEmail: userEmail,\n                needs: needs\n            }\n        }).then(res => {\n            resolve(true);\n        }).catch(function (res) {\n            reject(res);\n        });\n    });\n}\n","import React, {useEffect, useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport {useTranslation} from \"react-i18next\";\nimport StudentsList from \"./students.list.component\";\nimport Student from \"./students.student.component\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {\n    Checkbox,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    FormControl, FormControlLabel, FormGroup, FormHelperText,\n    FormLabel,\n    TextField,\n    Tooltip\n} from \"@material-ui/core\";\nimport UsersList from \"./users.list.component\";\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport Button from \"@material-ui/core/Button\";\nimport Box from \"@material-ui/core/Box\";\nimport {allNeeds} from \"../_data/needs\";\nimport {useNormik} from \"../_helpers/normik\";\nimport * as yup from \"yup\";\nimport {useFormik} from \"formik\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {invitationsService} from \"../_services/userInvites.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n    root2: {\n    display: 'flex',\n  },\n  formControl: {\n      padding: theme.spacing(2),\n        maxHeight: '50vh',\n      overflow: 'auto',\n      minWidth: '40vw'\n  },\n    dialog: {\n\n    },\n  left: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n      position: 'relative',\n\n  },fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  }\n}));\n\n\nexport default function Users({history, ...other}) {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const [users, setUsers] = useState([]);\n  const [currentUserId, setCurrentUserId] = useState(null);\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id');\n  useEffect(() => {\n      if (id !== null && id !== undefined) setCurrentUserId(id);\n  }, [id]);\n  const errorHandler = useErrorHandler();\n\n  const formik = useFormik({\n        initialValues: {...Object.assign({}, ...allNeeds.map((x) => ({[x.name]: true}))),\n                        email: ''},\n        validationSchema: yup.object({\n            email: yup.string().required(t(\"email_required\")).email(t(\"invalid_email\"))}),\n        enableReinitialize: true,\n        onSubmit: (values, {setStatus, setSubmitting}) => {\n            setSubmitting(true);\n            invitationsService\n                .inviteUser(values['email'], allNeeds.map(n => (n.name)).filter(name => values[name]))\n                .then(...errorHandler({snackbarSuccess: true}))\n                .then(res => {\n                    handleClose();\n                }).catch(_ => {\n                    setStatus(true);\n                }).finally(() => {\n                    setSubmitting(false);\n            })\n        }\n    });\n\n  return (\n      <Grid container spacing={3} className={classes.root}>\n          <Dialog  open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">\n            {t(\"invite_user\")}\n        </DialogTitle> <form onSubmit={formik.handleSubmit}>\n        <DialogContent>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"email\"\n            name=\"email\"\n            label={t(\"email\")}\n            type=\"email\"\n            fullWidth\n            value={formik.values['email']}\n            onChange={formik.handleChange}\n            onBlur={formik.handleBlur}\n            error={formik.status  || formik.errors['email'] !== undefined}\n            helperText={formik.touched['email'] && formik.errors['email']}\n          />\n          <Box my={2} className={classes.dialog}>\n\n                  <Typography>{t(\"permissions\")}</Typography>\n                  {allNeeds.map(need => (\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                            checked={formik.values[need.name]}\n                            name={need.name}\n                            value={formik.values[need.name]}\n                            onChange={formik.handleChange}\n                            onBlur={formik.handleBlur}\n                            />\n                        }\n                        key={need.name}\n                        label={t(need.description)}\n                      />))}\n\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n              {t(\"cancel\")}\n          </Button>\n          <Button type=\"submit\" color=\"primary\" disabled={formik.isSubmitting}>\n              {t(\"invite\")}\n          </Button>\n        </DialogActions></form>\n      </Dialog>\n        <Grid item xs={4} className={classes.left}>\n          <h1>{t(\"users\")}</h1>\n          <UsersList\n            setCurrentUserId={setCurrentUserId}\n            currentUserId={currentUserId}\n            users={users}\n            setUsers={setUsers}\n\n          />\n          <Tooltip title={t(\"new_user\")}>\n              <Fab className={classes.fab} color=\"primary\" onClick={handleClickOpen}>\n                <PersonAddIcon />\n              </Fab>\n          </Tooltip>\n        </Grid>\n\n        <Grid item xs={8} className={classes.right}>\n          <Student\n            currentStudentId={currentUserId}\n            history={history}\n            deleteUser={(userId) => {\n                if (userId === currentUserId) setCurrentUserId(null);\n\n                setUsers(users.filter((s) => s['id'] !== userId));\n            }}\n          />\n        </Grid>\n      </Grid>\n  );\n}\n","import React from \"react\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport ClassIcon from \"@material-ui/icons/Class\";\nimport RoomIcon from \"@material-ui/icons/Room\";\nimport SchoolIcon from \"@material-ui/icons/School\";\nimport AccountBalanceIcon from \"@material-ui/icons/AccountBalance\";\nimport ContactMailIcon from \"@material-ui/icons/ContactMail\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport Students from \"../_components/students.component\";\nimport Users from \"../_components/users.component\";\nimport {useTranslation} from \"react-i18next\";\n\n\nconst Courses = () => {\n  const { t } = useTranslation();\n  const query = new URLSearchParams(window.location.search);\n  const id = query.get('id')\n  return (\n      <div>\n        <h1>{t(\"courses\")}</h1>\n      <h2>{id}</h2>\n      </div>\n\n  );\n};\n\nconst Teachers = () => {\n  const { t } = useTranslation();\n\n  return (\n    <h1>{t(\"teachers\")}</h1>\n  );\n};\n\nconst Payments = () => {\n  const { t } = useTranslation();\n\n  return (\n    <h1>{t(\"payments\")}</h1>\n  );\n};\n\nconst Rooms = () => {\n  const { t } = useTranslation();\n\n  return (\n    <h1>{t(\"rooms\")}</h1>\n  );\n};\n\nconst Settings = () => {\n  const { t } = useTranslation();\n\n  return (\n    <h1>{t(\"settings\")}</h1>\n  );\n};\n\nconst Routes = [\n  {\n    path: '/',\n    component: Students,\n    title: 'students',\n    icon: PersonIcon\n  },\n  {\n    path: '/courses',\n    component: Courses,\n    title: 'courses',\n    icon: ClassIcon\n  },\n  {\n    path: '/teachers',\n    component: Teachers,\n    title: 'teachers',\n    icon: SchoolIcon\n  },\n  {\n    path: '/locations',\n    component: Rooms,\n    title: 'locations',\n    icon:  RoomIcon\n  },{\n    path: '/payments',\n    component: Payments,\n    title: 'payments',\n    icon: AccountBalanceIcon\n  },{\n    path: '/users',\n    component: Users,\n    title: 'users',\n    icon: ContactMailIcon\n  },{\n    path: '/settings',\n    component: Settings,\n    title: 'settings',\n    icon: SettingsIcon\n  },\n];\n\n\nexport default Routes;","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const authenticationService = {\n    login,\n    logout,\n    ping\n};\n\nfunction login(username, password) {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/auth/v1/login`,  // todo server url\n            method: 'POST',\n            auth: {\n                username: username,\n                password: password\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(res => {\n            resolve(true);\n        }).catch(function (res) {\n            try { if (res[\"response\"][\"status\"] === 401) resolve(false) } catch(err){}\n            reject(res);\n        });\n    });\n}\n\nfunction logout() {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/auth/v1/logout`,\n            method: 'GET',\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(false);\n        }).catch(function (err) {\n            reject(err);\n        });});\n}\n\nfunction ping() {\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/auth/v1/ping`,\n            method: 'GET',\n            headers: {'Cache-Control': 'no-cache'}\n        }).then(res => {\n            resolve(true);\n        }).catch(function (res) {\n            try { if (res[\"response\"][\"status\"] === 401) resolve(false) } catch(err){}\n\n            reject(res);\n        });});\n}","import IconButton from \"@material-ui/core/IconButton\";\nimport clsx from \"clsx\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport CloudDownloadIcon from \"@material-ui/icons/CloudDownload\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport React, {useContext} from \"react\";\nimport {useTranslation} from \"react-i18next\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport i18next from \"i18next\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport {userContext} from \"../_context/user-context\";\nimport {authenticationService} from \"../_services/auth.service\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\n\nconst languageMap = {\n    eng: { label: \"english\", dir: \"ltr\", active: true },\n    cat: { label: \"catal\", dir: \"ltr\", active: false }\n};\n\nconst useStyles = makeStyles(theme => (createStyles({\n    toolbar: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        padding: theme.spacing(0, 1),\n        // necessary for content to be below app bar\n        ...theme.mixins.toolbar,\n    },\n    grow: {\n        flexGrow: 1,\n    },\n})));\n\nexport default function HomeToolbar(props){\n    const changeTheme = props.changeTheme;\n    const classes = useStyles();\n    const errorHandler = useErrorHandler();\n\n    const selected = localStorage.getItem(\"i18nextLng\") || \"eng\";\n    const { t } = useTranslation();\n\n    const title = \"centrfuga4\";\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const isMenuOpen = Boolean(anchorEl);\n    const handleProfileMenuOpen = (event, ) => {\n        setAnchorEl(event.currentTarget);\n    };\n    const handleMenuClose = () => {\n        setAnchorEl(null);\n    };\n\n    const [anchorElLan, setAnchorElLan] = React.useState(null);\n    const isLanguageMenuOpen = Boolean(anchorElLan);\n    const handleLanguageMenuOpen = (event) => {\n        setAnchorElLan(event.currentTarget);\n    };\n    const handleLanguageMenuClose = () => {\n        setAnchorElLan(null);\n    };\n    const changeLanguage = (language) => {\n        i18next.changeLanguage(language).then();\n        handleLanguageMenuClose();\n    }\n    React.useEffect(() => {\n        document.body.dir = languageMap[selected].dir;\n      }, [anchorElLan, selected]);\n\n    const languageMenuId = 'primary-language-select-menu';\n    const languageMenu = (\n        <Menu\n            anchorEl={anchorElLan}\n            anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n            id={languageMenuId}\n            keepMounted\n            transformOrigin={{vertical: 'top', horizontal: 'right'}}\n            open={isLanguageMenuOpen}\n            onClose={handleLanguageMenuClose}>\n            {Object.keys(languageMap)?.map(key => (\n              <MenuItem key={key} onClick={() => changeLanguage(key)}>{languageMap[key].label}</MenuItem>\n            ))}\n        </Menu>\n    );\n\n    const userCtx = useContext(userContext);\n\n\n    const userMenuId = 'primary-search-account-menu';\n    const userMenu = (\n        <Menu\n            anchorEl={anchorEl}\n            anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n            id={userMenuId}\n            keepMounted\n            transformOrigin={{vertical: 'top', horizontal: 'right'}}\n            open={isMenuOpen}\n            onClose={handleMenuClose}>\n\n\n                     <MenuItem\n                         onClick={(event) => {\n                             authenticationService\n                                 .logout()\n                                 .then(...errorHandler({}))\n                                 .then(() => {\n                                     userCtx[\"setUser\"]({logged: false, ping: false});\n                                 });\n                             handleMenuClose(event);\n                         }}>\n                         {t(\"log_out\")}\n                     </MenuItem>\n\n\n        </Menu>\n    );\n\n    return (\n    <Toolbar>\n                    <IconButton\n                        color=\"inherit\"\n                        aria-label={t(\"open_drawer\")}\n                        onClick={props.handleDrawerOpen}\n                        edge=\"start\"\n                        className={clsx(classes.menuButton, {\n                            [classes.hide]: props.open,\n                        })}>\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                      {title}\n                    </Typography>\n                    <div className={classes.grow}/>\n\n                    <Tooltip title={t(\"download_backup\")}>\n                        <IconButton\n                            color=\"inherit\"\n                            aria-label={t(\"download_backup\")}\n                            onClick={() => changeTheme()}>\n                            <CloudDownloadIcon/>\n                        </IconButton>\n                    </Tooltip>\n\n                    <Tooltip title={t(\"change_language\")}>\n                        <IconButton\n                            color=\"inherit\"\n                            onClick={handleLanguageMenuOpen}\n                            aria-label={t(\"change_language\")}\n                            aria-controls={languageMenuId}\n                            aria-haspopup=\"true\">\n                            <TranslateIcon/>\n                        </IconButton>\n                    </Tooltip>\n\n                    <Tooltip title={t(\"dark_light_theme\")}>\n                        <IconButton\n                            color=\"inherit\"\n                            aria-label={t(\"dark_light_theme\")}\n                            onClick={changeTheme}>\n                            <Brightness4Icon/>\n                        </IconButton>\n                    </Tooltip>\n\n\n                        <Tooltip title={t(\"my_account\")}>\n                        <IconButton\n                            color=\"inherit\"\n                            onClick={handleProfileMenuOpen}\n                            aria-label={t(\"my_account\")}\n                            aria-controls={userMenuId}\n                            aria-haspopup=\"true\">\n                            <AccountCircleIcon/>\n                        </IconButton>\n                    </Tooltip>\n\n\n        {languageMenu}\n        {userMenu}\n                </Toolbar>\n    )\n};\n","import {makeStyles} from \"@material-ui/core/styles\";\nimport createStyles from \"@material-ui/styles/createStyles\";\nimport React from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport clsx from \"clsx\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport Routes from \"./routes\";\nimport {BrowserRouter, Link, Route} from \"react-router-dom\";\nimport {useTranslation} from \"react-i18next\";\nimport HomeToolbar from \"../_components/toolbar.home.component\";\nimport {history} from \"../_helpers/history\";\n\nconst drawerWidth = 240;\nconst useStyles = makeStyles(theme => (createStyles({\n    root: {\n        display: 'flex',\n        height: '100vh'\n    },\n    appBar: {\n        zIndex: theme.zIndex.drawer + 1,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        background: theme.palette.neutral.main,\n        color: theme.palette.neutral.emphasisText.medium,\n    },\n    appBarShift: {\n        marginLeft: drawerWidth,\n        width: `calc(100% - ${drawerWidth}px)`,\n        transition: theme.transitions.create(['width', 'margin'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    },\n    menuButton: {\n        marginRight: 36,\n    },\n    hide: {\n        display: 'none',\n    },\n    drawer: {\n        width: drawerWidth,\n        flexShrink: 0,\n        whiteSpace: 'nowrap',\n    },\n    drawerOpen: {\n        width: drawerWidth,\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    },\n    drawerClose: {\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        overflowX: 'hidden',\n        width: theme.spacing(7) + 1,\n        [theme.breakpoints.up('sm')]: {\n            width: theme.spacing(9) + 1,\n        },\n    },\n    toolbar: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        padding: theme.spacing(0, 1),\n        // necessary for content to be below app bar\n        ...theme.mixins.toolbar,\n    },\n    content: {\n        display: 'flex',\n        flexFlow: 'column',\n        height: \"100%\",\n        width: \"100%\",\n    },\n    main: {\n        flex: 1,\n        padding: theme.spacing(3),\n        overflow: 'auto'\n    },\n    icon: {\n      '&': {\n          color: theme.palette.neutral.emphasisText.medium,\n      }\n    },\n    selectedIcon: {\n      '&': {\n          color: theme.palette.primary.main,\n      }\n    },\n    grow: {\n        flexGrow: 1,\n    },\n})));\n\nconst HomePage = (props) => {\n    const theme = useTheme();\n    const classes = useStyles();\n\n    const { t } = useTranslation();\n\n    const [open, setOpen] = React.useState(false);\n    const [currentRoute, setCurrentRoute] = React.useState('/');\n\n    const handleDrawerOpen = () => {\n        setOpen(true);\n    };\n    const handleDrawerClose = () => {\n        setOpen(false);\n    };\n\n    const onItemClick = p => {\n        setCurrentRoute(p.path);\n    };\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n            <AppBar\n                position=\"fixed\"\n                className={clsx(classes.appBar, {\n                    [classes.appBarShift]: open,\n                })}>\n                <HomeToolbar\n                    changeTheme={props.changeTheme}\n                    handleDrawerOpen={handleDrawerOpen}\n                    handleDrawerClose={handleDrawerClose}\n                    open={open}\n                />\n            </AppBar>\n            <BrowserRouter history={history} basename={`${process.env.PUBLIC_URL}/`}>\n                <Drawer\n                    variant=\"permanent\"\n                    className={clsx(classes.drawer, {\n                        [classes.drawerOpen]: open,\n                        [classes.drawerClose]: !open,\n                    })}\n                    classes={{\n                        paper: clsx({\n                            [classes.drawerOpen]: open,\n                            [classes.drawerClose]: !open,\n                        }),\n                    }}\n                >\n                    <div className={classes.toolbar}>\n                        <IconButton onClick={handleDrawerClose}>\n                            {theme.direction === 'rtl' ? <ChevronRightIcon/> : <ChevronLeftIcon/>}\n                        </IconButton>\n                    </div>\n                    <Divider/>\n                    <List>\n                        {Routes.map((prop) =>(\n                                  <ListItem  key={prop.title} button to={prop.path} component={Link} onClick={() => onItemClick(prop)}>\n                                    <ListItemIcon className={prop.path === currentRoute? classes.selectedIcon: classes.icon}>\n                                        <Tooltip title={t(prop.title)} aria-label={t(prop.title)}>\n                                            {<prop.icon/>}\n                                        </Tooltip>\n                                    </ListItemIcon>\n                                    <ListItemText primary={t(prop.title)}/>\n                                </ListItem>\n                                ))}\n                    </List>\n                </Drawer>\n                <div className={classes.content}>\n                    <div className={classes.toolbar}/>\n                    <main className={classes.main}>\n                        {Routes.map((prop) => {\n                            return (\n                                <Route key={prop.title} exact path={prop.path} component={prop.component}/>)\n                        })}\n                    </main>\n                </div>\n            </BrowserRouter>\n        </div>\n    );\n}\n\nexport default HomePage;","import React from \"react\";\n\nconst themeContext = React.createContext({dark: true}); // Create a context object\n\nexport {\n  themeContext // Export it so it can be used by other Components\n};","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\n\nexport const passwordResetService = {\n    reset,\n    startReset\n};\n\nfunction reset(username, password, token) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: 'https://127.0.0.1:4999/password-reset/v1/newPassword',\n            method: 'POST',\n            data: {\n                username: username,\n                password: password,\n                token: token\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(true);\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n\nfunction startReset(username) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: 'https://127.0.0.1:4999/password-reset/v1/passwordReset',\n            method: 'POST',\n            data: {\n                username: username\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(true);\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n","import { useEffect } from \"react\";\n\nexport const useOnMount = handler => {\n  return useEffect(() => {\n    return handler();\n  }, []);\n};","import React from 'react';\nimport {useFormik} from 'formik';\nimport {authenticationService} from '../_services/auth.service';\nimport {userContext} from \"../_context/user-context\";\nimport * as yup from 'yup';\nimport {TextField} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport Link from \"@material-ui/core/Link\";\nimport {passwordResetService} from \"../_services/password-reset.service\";\nimport {useSnackbar} from \"notistack\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport {safe_username} from \"../_yup/validators\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexGrow: 1,\n        height: \"100vh\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    paper: {\n        width: \"50%\",\n        height: \"50%\",\n        minWidth: \"500px\",\n        padding: \"50px\",\n        margin: \"auto\"\n    },\n    reset: {\n        width: \"100%\",\n        textAlign: \"end\",\n        cursor: \"\"\n    }\n}));\n\n\nconst LoginPage = (props) => {\n    const classes = useStyles();\n    const userCtx = React.useContext(userContext);\n    const themeCtx = React.useContext(themeContext);\n\n    const errorHandler = useErrorHandler();\n\n    const {enqueueSnackbar} = useSnackbar();\n\n    const logged = () => {\n        const setLogged = userCtx[\"setUser\"];\n        setLogged({logged: true, ping: true});\n        const {from} = props.location.state || {from: {pathname: \"/\"}};\n        props.history.push(from);\n    }\n\n    const {t} = useTranslation();\n    const formik = useFormik({\n        initialValues: {\n            username: '',\n            password: ''\n        },\n        validationSchema: yup.object({\n            username: safe_username(t),\n            password: yup.string().required(t(\"password_required\"))\n        }),\n        enableReinitialize: true,\n        onSubmit: ({username, password}, {setStatus, setSubmitting}) => {\n            setStatus();\n            authenticationService\n                .login(username, password)\n                .then(...errorHandler({}))\n                .then(function (success) {\n                        if (success) {\n                            logged();\n                        } else {\n                            setStatus(true);\n                        }\n                    })\n                .finally(() => {\n                        setSubmitting(false);\n                });\n        }\n    });\n\n    useOnMount(() => {\n        if (userCtx[\"user\"][\"logged\"]) {\n            props.history.push('/');\n            return null;\n        }\n\n        if (userCtx[\"user\"][\"ping\"] !== false){\n             authenticationService\n            .ping()\n            .then(...errorHandler({errorOut: false}))\n            .then((success) => { if (success) logged(); });  // ignore failed ping (it is just not logged in)\n        }\n\n    });\n\n    const resetPassword = () => {\n        const username = formik.values[\"username\"];\n        if (username === null || username === '' || username === undefined) {\n            enqueueSnackbar(t(\"username_required_password_reset\"), { variant: \"warning\"});\n        } else {\n            passwordResetService\n                .startReset(username)\n                .then(...errorHandler({errorOut: false}))\n                .then(r => {\n                enqueueSnackbar(t(\"started_password_reset\"), { variant: \"success\"});\n            })\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n            <Grid container>\n                <Grid xs={2} item/>\n\n                <Grid xs={8} item>\n                    <Grid\n                        container\n                        spacing={0}\n                        align=\"center\"\n                        justify=\"center\"\n                        direction=\"column\"\n                        style={{height: \"100%\"}}\n                    >\n                        <Grid item>\n                            <Box m={2}>\n                                <Paper className={classes.paper}>\n                                    <img src={themeCtx.theme? \"logo_centrifuga4_dark.svg\": \"logo_centrifuga4_light.svg\"} alt=\"Logo Centrfuga\" style={{height: \"85px\"}}/>\n\n                                    <form onSubmit={formik.handleSubmit}>\n                                        <TextField\n                                            label={t(\"email\")}\n                                            disabled={formik.isSubmitting}\n                                            helperText={formik.touched[\"username\"] && formik.errors[\"username\"]}\n                                            type=\"email\"\n                                            name=\"username\"\n                                            className={classes.field}\n                                            value={formik.values[\"username\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"password\")}\n                                            name=\"password\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password\"] && formik.errors[\"password\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                type=\"submit\"\n                                                disabled={formik.isSubmitting}\n                                                className={classes.field}>\n                                                {t(\"log_in\")}\n                                            </Button>\n                                        </Box>\n                                    </form>\n\n                                    <Box className={classes.reset}>\n                                        <Typography variant=\"caption\">\n                                            <Link\n                                              component=\"button\"\n                                              variant=\"body2\"\n                                              onClick={resetPassword}\n                                            >\n                                              {t(\"reset_password\")}\n                                            </Link>\n                                        </Typography>\n                                        </Box>\n                                </Paper></Box>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Grid xs={2} item/>\n            </Grid></div>);\n\n}\n\nexport default LoginPage;","import axios from \"axios\";\nimport {authHeader} from \"../_helpers/auth-header\";\nimport {BACKEND_URL} from \"../config\";\n\nexport const authenticationService = {\n    signup\n};\n\nfunction signup(username, password, email, name, surname1, surname2, token) {\n\n    return new Promise(function(resolve, reject) {\n        axios({url: `${BACKEND_URL}/invites/v1/newUser`,\n            method: 'POST',\n            data: {\n                username: username,\n                password: password,\n                email: email,\n                name: name,\n                surname1: surname1,\n                surname2: surname2,\n                token: token\n            },\n            headers: {...{'Cache-Control': 'no-cache'}, ...authHeader()}\n        }).then(response => {\n            resolve(true);\n        }).catch(function (err) {\n            reject(err);\n        });\n    });\n}\n","import React from 'react';\nimport {useFormik} from 'formik';\nimport * as yup from 'yup';\nimport {TextField} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {authenticationService as signupService} from \"../_services/signup.service\";\nimport {useSnackbar} from \"notistack\";\nimport i18next from \"i18next\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport {safe_password_repetition, safe_email, safe_password, safe_username} from \"../_yup/validators\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexGrow: 1,\n        height: \"100vh\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    paper: {\n        width: \"50%\",\n        minWidth: \"500px\",\n        height: \"50%\",\n        padding: \"50px\",\n        margin: \"auto\"\n    }\n}));\n\nconst SignupPage = (props) => {\n    const classes = useStyles();\n    const themeCtx = React.useContext(themeContext);\n    const {enqueueSnackbar} = useSnackbar();\n\n    useOnMount(() => {\n        i18next.changeLanguage(query.get('lan')).then();\n    })\n\n    const {t} = useTranslation();\n    const errorHandler = useErrorHandler();\n    const query = new URLSearchParams(window.location.search);\n    const token = query.get('token')\n    const email = query.get('email')\n    const formik = useFormik({\n        initialValues: {\n            username: email,\n            email: email,\n            password: '',\n            name: '',\n            surname1: '',\n            surname2: '',\n            password2: ''\n        },\n        validationSchema: yup.object({  // todo translate\n            username: safe_username(t),\n            email: safe_email(t),\n            password: safe_password(t),\n            password2: safe_password_repetition(t),\n            name: yup.string().required(t(\"name_required\")),\n            surname1: yup.string().required(t(\"surname1_required\")),\n            surname2: yup.string().required(t(\"surname2_required\"))\n        }),\n        enableReinitialize: true,\n        onSubmit: ({username, email, password, name, surname1, surname2, password2}, {setStatus, setSubmitting}) => {\n            setStatus();\n\n            signupService.signup(username, password, email, name, surname1, surname2, token)\n                .then(...errorHandler({handle401: false, handle400: false}))\n                .then(\n                    function (result) {\n                        enqueueSnackbar(t(\"sign_up_success\"), {variant: \"success\"});\n                        setSubmitting(false);\n                        props.history.push(\"/login\");\n                    },\n                    function (error) {\n                        console.log(\">>><<<\", error.response, error.request);\n                        setSubmitting(false);\n                        setStatus(error);\n\n                        if (error.response.status === 401){\n                            enqueueSnackbar(t(\"invalid_expired_invite\"), { variant: \"warning\"});\n                        } else if (error.response.status === 400) {\n                            enqueueSnackbar(t(\"used_invite\"), { variant: \"warning\"});\n                        }\n                    });\n        }\n    });\n\n    return (\n        <div className={classes.root}>\n            <Grid container>\n                <Grid xs={2} item/>\n\n                <Grid xs={8} item>\n                    <Grid\n                        container\n                        spacing={0}\n                        align=\"center\"\n                        justify=\"center\"\n                        direction=\"column\"\n                        style={{height: \"100%\"}}\n                    >\n                        <Grid item>\n                            <Box m={2}>\n                                <Paper className={classes.paper}>\n                                    <img src={themeCtx.theme? \"logo_centrifuga4_dark.svg\": \"logo_centrifuga4_light.svg\"} alt=\"Logo Centrfuga\" style={{height: \"85px\"}}/>\n\n                                     <Box m={2}>\n                                         <Typography>{t(\"been_invited\")}</Typography>\n                                    </Box>\n\n                                    <form onSubmit={formik.handleSubmit}>\n                                        <TextField\n                                            label={t(\"username\")}\n                                            helperText={formik.touched[\"username\"] && formik.errors[\"username\"]}\n                                            type=\"email\"\n                                            name=\"username\"\n                                            className={classes.field}\n                                            value={formik.values[\"username\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                            disabled\n                                        />\n                                        <TextField\n                                            label={t(\"email\")}\n                                            helperText={formik.touched[\"email\"] && formik.errors[\"email\"]}\n                                            type=\"email\"\n                                            name=\"email\"\n                                            className={classes.field}\n                                            value={formik.values[\"email\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                            disabled\n                                        />\n\n\n\n                                        <TextField\n                                            label={t(\"name\")}\n                                            helperText={formik.touched[\"name\"] && formik.errors[\"name\"]}\n                                            name=\"name\"\n                                            className={classes.field}\n                                            value={formik.values[\"name\"]}\n                                            onChange={formik.handleChange}\n                                            disabled={formik.isSubmitting}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"surname1\")}\n                                            helperText={formik.touched[\"surname1\"] && formik.errors[\"surname1\"]}\n                                            name=\"surname1\"\n                                            disabled={formik.isSubmitting}\n                                            className={classes.field}\n                                            value={formik.values[\"surname1\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"surname2\")}\n                                            helperText={formik.touched[\"surname2\"] && formik.errors[\"surname2\"]}\n                                            name=\"surname2\"\n                                            disabled={formik.isSubmitting}\n                                            className={classes.field}\n                                            value={formik.values[\"surname2\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"password\")}\n                                            name=\"password\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password\"] && formik.errors[\"password\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"confirm_password\")}\n                                            name=\"password2\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password2\"] && formik.errors[\"password2\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password2\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                type=\"submit\"\n                                                disabled={formik.isSubmitting}\n                                                className={classes.field}>\n                                                {t(\"sign_up\")}\n                                            </Button>\n                                        </Box>\n                                    </form>\n                                </Paper></Box>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Grid xs={2} item/>\n            </Grid></div>);\n\n}\n\nexport default SignupPage;","import React from 'react';\nimport {useFormik} from 'formik';\nimport * as yup from 'yup';\nimport {TextField} from \"@material-ui/core\";\nimport {useTranslation} from \"react-i18next\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {themeContext} from \"../_context/theme-context\";\nimport {useSnackbar} from \"notistack\";\nimport {passwordResetService} from \"../_services/password-reset.service\";\nimport i18next from \"i18next\";\nimport {useErrorHandler} from \"../_helpers/handle-response\";\nimport {useOnMount} from \"../_helpers/on-mount\";\nimport {safe_password, safe_password_repetition, safe_username} from \"../_yup/validators\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexGrow: 1,\n        height: \"100vh\"\n    },\n    field: {\n        width: \"100%\",\n        margin: \"5px\"\n    },\n    paper: {\n        width: \"50%\",\n        minWidth: \"500px\",\n        height: \"50%\",\n        padding: \"50px\",\n        margin: \"auto\"\n    }\n}));\n\n\nconst ResetPage = (props) => {\n    const classes = useStyles();\n    const themeCtx = React.useContext(themeContext);\n\n    const {enqueueSnackbar} = useSnackbar();\n\n    useOnMount(() => {\n        i18next.changeLanguage(query.get('lan')).then();\n    })\n\n    const {t} = useTranslation();\n    const query = new URLSearchParams(window.location.search);\n    const errorHandler = useErrorHandler();\n    const token = query.get('token')\n    const username = query.get('username')\n    const formik = useFormik({\n        initialValues: {\n            username: username,\n            password: '',\n            password2: ''\n        },\n        validationSchema: yup.object({\n            username: safe_username(t),\n            password: safe_password(t),\n            password2: safe_password_repetition(t)\n        }),\n        enableReinitialize: true,\n        onSubmit: ({username, password, password2}, {setStatus, setSubmitting}) => {\n            setStatus();\n\n            passwordResetService\n                .reset(username, password, token)\n                .then(...errorHandler({handle401: false}))\n                .then(\n                    function (result) {\n                        enqueueSnackbar(t(\"reset_password_success\"), {variant: \"success\"});\n                        setSubmitting(false);\n                        props.history.push(\"/login\");\n                    },\n                    function (error) {\n                        setSubmitting(false);\n                        setStatus(error);\n\n                        if (error.response.status === 401){\n                            enqueueSnackbar(t(\"invalid_expired_reset\"), { variant: \"warning\"});\n                        } // TODO report, same in the signup\n                    });\n        }\n    });\n\n    return (\n        <div className={classes.root}>\n            <Grid container>\n                <Grid xs={2} item/>\n\n                <Grid xs={8} item>\n                    <Grid\n                        container\n                        spacing={0}\n                        align=\"center\"\n                        justify=\"center\"\n                        direction=\"column\"\n                        style={{height: \"100%\"}}>\n                        <Grid item>\n                            <Box m={2}>\n                                <Paper className={classes.paper}>\n                                    <img src={themeCtx.theme? \"logo_centrifuga4_dark.svg\": \"logo_centrifuga4_light.svg\"} alt=\"Logo Centrfuga\" style={{height: \"85px\"}}/>\n\n                                     <Box m={2}>\n                                         <Typography>{t(\"new_password\")}</Typography>\n                                    </Box>\n\n                                    <form onSubmit={formik.handleSubmit}>\n                                        <TextField\n                                            label={t(\"username\")}\n                                            helperText={formik.touched[\"username\"] && formik.errors[\"username\"]}\n                                            type=\"email\"\n                                            name=\"username\"\n                                            className={classes.field}\n                                            value={formik.values[\"username\"]}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                            disabled\n                                        />\n                                        <TextField\n                                            label={t(\"password\")}\n                                            name=\"password\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password\"] && formik.errors[\"password\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <TextField\n                                            label={t(\"confirm_password\")}\n                                            name=\"password2\"\n                                            type=\"password\"\n                                            helperText={formik.touched[\"password2\"] && formik.errors[\"password2\"]}\n                                            className={classes.field}\n                                            value={formik.values[\"password2\"]}\n                                            disabled={formik.isSubmitting}\n                                            onChange={formik.handleChange}\n                                            onBlur={formik.handleBlur}\n                                            error={formik.status}\n                                        />\n                                        <Box my={3}>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                type=\"submit\"\n                                                disabled={formik.isSubmitting}\n                                                className={classes.field}>\n                                                {t(\"change_password\")}\n                                            </Button>\n                                        </Box>\n                                    </form>\n                                </Paper>\n                            </Box>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Grid xs={2} item/>\n            </Grid></div>);\n\n}\n\nexport default ResetPage;","import React, {useState} from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {createMuiTheme} from '@material-ui/core/styles';\nimport {ThemeProvider} from '@material-ui/styles';\nimport {darkTheme, lightTheme} from '../theme';\nimport {SnackbarProvider} from 'notistack';\n\nimport {history} from '../_helpers/history';\nimport PrivateRoute from '../_components/PrivateRoute';\nimport HomePage from '../HomePage/HomePage';\nimport LoginPage from '../LoginPage/LoginPage';\nimport {Route, Router} from 'react-router-dom';\nimport {userContext} from '../_context/user-context';\nimport {themeContext} from '../_context/theme-context';\nimport SignupPage from \"../SignupPage/SignupPage\";\nimport ResetPage from \"../ResetPage/ResetPage\";\n\nfunction App() {\n    const [theme, setTheme] = useState(localStorage.getItem(\"darkTheme\") === \"true\");\n    const appliedTheme = createMuiTheme(theme ? darkTheme : lightTheme);\n    const changeTheme = () => {\n        localStorage.setItem(\"darkTheme\", (!theme).toString());\n        setTheme(!theme);\n    }\n\n    const [user, setUser] = useState({logged: false, ping: true});\n\n\n    return (\n      <ThemeProvider theme={appliedTheme}>\n        <CssBaseline />\n        <SnackbarProvider maxSnack={3}>\n            <userContext.Provider value={{user: user, setUser: setUser}}>\n                <themeContext.Provider value={{theme: theme}}>\n                    <Router history={history} basename={`${process.env.PUBLIC_URL}`}>\n                        <PrivateRoute exact path={'/'}  component={HomePage} changeTheme={changeTheme}/>\n                        <Route path={'/login'} component={LoginPage}/>\n                        <Route path={'/signup'} component={SignupPage}/>\n                        <Route path={'/password-reset'} component={ResetPage}/>\n                    </Router>\n                </themeContext.Provider>\n            </userContext.Provider>\n        </SnackbarProvider>\n      </ThemeProvider>\n    );\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from 'i18next';\nimport {initReactI18next} from 'react-i18next';\nimport Backend from 'i18next-xhr-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport translationEN from \"./_translations/locales/eng/translation.json\";\nimport translationCAT from \"./_translations/locales/cat/translation.json\";\n\nconst fallbackLng = [\"eng\"];\nconst availableLanguages = [\"eng\", \"cat\"];\n\nconst resources = {\n    eng: {\n        translation: translationEN\n    },\n    cat: {\n        translation: translationCAT\n    }\n};\n\ni18n\n    .use(Backend) // load _translations using http (default                                               public/assets/locals/en/_translations)\n    .use(LanguageDetector) // detect user language\n    .use(initReactI18next) // pass the i18n instance to react-i18next.\n    .init({\n        resources,\n        fallbackLng, // fallback language is english.\n\n        detection: {\n            checkWhitelist: true, // options for language detection\n        },\n\n        debug: false,\n\n        whitelist: availableLanguages,\n\n        interpolation: {\n            escapeValue: false, // no need for react.  it escapes by default\n        },\n    }).then(_ => ({}));\n\nexport default i18n;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App/App';\nimport reportWebVitals from './reportWebVitals';\nimport {Helmet} from 'react-helmet';\nimport \"./i18nextConf\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <Helmet>\n          <title>centrfuga4</title>\n          <meta property=\"csp-nonce\" content=\"{{ csp_nonce() }}\"/>\n          <style\n                  id=\"jss-server-side\"\n                  nonce=\"{{ csp_nonce() }}\"\n                />\n                <base href={`${process.env.PUBLIC_URL}/`}/>\n          <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\" />\n          <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />\n          <meta\n              name=\"viewport\"\n              content=\"minimum-scale=1, initial-scale=1, width=device-width\"/>\n          <meta property=\"csp-nonce\" content=\"{{ csp_nonce() }}\"/>\n      </Helmet>\n      <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}