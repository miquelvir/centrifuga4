(this["webpackJsonpcentrifuga4-frontend"]=this["webpackJsonpcentrifuga4-frontend"]||[]).push([[0],{282:function(e){e.exports=JSON.parse('{"log_out":"log out","log_in":"log in","download_backup":"download backup","change_language":"change language","dark_light_theme":"dark/light theme","my_account":"my account","open_drawer":"open drawer","students":"students","courses":"courses","teachers":"teachers","capacity":"capacity","locations":"locations","chose_list_dates":"choose the first and last date for which you want the lists to be created","user":"user","teacher":"teacher","payments":"payments","users":"users","settings":"settings","search":"search","name":"name","surname1":"first surname","surname2":"second surname","email":"email","phone":"phone","address":"address","city":"city","zip":"zip","dni":"dni","gender":"gender","birth date":"birth date","country_of_origin":"country of origin of the family","been_invited":"you have been invited to join centr\xedfuga4 \ud83d\udcef","confirm_password":"confirm password","password":"password","username":"username","invalid_expired_invite":"Your invitation has expired or is invalid! \ud83d\udc82","invalid_expired_reset":"Your reset link has expired or is invalid! \ud83d\udc82","used_invite":"Your invitation can\'t be used twice or for a user that already exists! \ud83d\udc82","reset_password":"reset password","username_required_password_reset":"Fill in the email field to ask for a password reset!","started_password_reset":"Process started. If the username is correct, you will receive an email to finish the password change!","export":"export","export_results_csv":"export this page as .csv","email_required":"email is required","invalid_email":"enter a valid email","password_required":"password is required","warning_not_logged_in":"you are not logged in! \ud83d\udc82","warning_not_enough_privileges":"you don\'t have enough privileges to continue! \ud83d\udc82","password_constraints":"must be longer than 8 characters; including: 1 uppercase, 1 lowercase, 1 number and 1 special character","passwords_unmatched":"passwords don\'t match","new_password":"choose your new password \ud83d\udd11","reset_password_success":"password change successful","sign_up_success":"sign up successful","sign_up":"sign up","change_password":"change password","name_required":"name is required","surname1_required":"first surname is required","surname2_required":"second surname is required","longer_8":"must be longer than 8 characters","shorter_64":"must be smaller than 64 characters","has_lowecase":"must have at least 1 lowercase character","has_uppercase":"must have at least 1 uppercase character","has_digit":"must have at least 1 digit (0-9)","has_special":"must have at least 1 special character (e.g. %)","no_plus":"can\'t contain \'+\'","reset":"reset","save":"save","birthdate":"birthdate","attendee":"student","contact":"guardian","price_term":"price per term","success":"done","send_receipt":"send confirmation email to student","export_receipt":"export receipt as pdf","no_payments":"there are no payments","delete":"delete","has_paid_cash":"has paid with cash","tooltip-bank-transfer":"has paid through a bank transfer","other-payment-method":"has paid though and unknown method","has_paid":"has paid","nb":"non binary / not represented by any of the above","m":"male","f":"female","bank-transfer":"bank transfer","bank-direct-debit":"direct debit","tooltip-bank-direct-debit":"has paid through direct debit","cash":"cash","method":"method","import":"amount","import_required":"amount is required","date":"date","concept":"concept","new_payment":"new payment","create":"create","field_required":"this field is required","date_required":"date is required","new_guardian":"new guardian","action_cant_undone":"this action can not be undone","delete_guardian_question":"do you want to delete this guardian?","cancel":"cancel","delete_guardian":"delete this guardian","delete_student":"delete this student","delete_student_question":"do you want to delete this student?","delete_room":"delete location","delete_room_question":"do you want to delete this location?","delete_user":"delete user","new_room":"new location","new_teacher":"new teacher","delete_user_question":"do you want to delete this user?","student_also_deletes":"this action can not be undone; it will also delete the associated guardians, payments and schedules","default_payment_method":"payment method","payment_comments":"comments (payment)","other_comments":"comments","years_in_xamfra":"years in Xamfr\xe0","is_studying":"studies","is_working":"works","yes":"yes","no":"no","is_early_unenrolled":"unenrolled","is_enrolled":"enrolled","is_early_unenrolled_required":"unenrolled is required","is_enrolled_required":"enrolled is required","education_entity":"entity","education_year":"year","kindergarten_p1":"p1","kindergarten_p2":"p2","kindergarten_p3":"p3","kindergarten_p4":"p4","kindergarten_p5":"p5","primary_1":"primary, 1st","primary_2":"primary, 2nd","primary_3":"primary, 3rd","primary_4":"primary, 4th","primary_5":"primary, 5th","primary_6":"primary, 6th","eso_1":"ESO, 1st","eso_2":"ESO, 2nd","eso_3":"ESO, 3rd","eso_4":"ESO, 4th","baccalaureate_1":"baccalaureate, 1st","baccalaureate_2":"baccalaureate, 2nd","FP_lower":"lower FP","FP_higher":"higher FP","undergraduate":"undergraduate","master":"master","phd":"PhD","career":"career","working_required":"works is required","studying_required":"studies is required","career_required":"career is required","education_entity_required":"entity is required","education_year_required":"year is required","enrolled_unenrolled":"can\'t be enrolled and unenrolled","relation":"relation","relation_required":"relation is required","father":"father","mother":"mother","grandfather":"grandfather","grandmother":"grandmother","brother":"brother","sister":"sister","uncle":"uncle","aunt":"aunt","cousin":"cousin","legal_guardian":"legal guardian","status":"enrolment status","enrolled":"enrolled","early-unenrolled":"early unenrolled","pre-enrolled":"pre-enrolled","other":"other","grant_letter":"grant letter","enrolment_agreement":"enrolment agreement","send_grant_letter":"send grant letter","export_grant_letter":"download grant letter","send_enrolment_agreement":"send enrolment agreement","export_enrolment_agreement":"download enrolment agreement","status_required":"status is required","image_required":"image use is required","image_agreement":"use of image","cant_remove_schedule":"schedules of a whole course can\'t be removed","continue":"continue","cancelled":"cancelled","sure_delete_event":"Are you sure? This will delete this schedule from the student.","new_student":"new student","birthdate_required":"birth date is required","no_courses":"there are no courses","published":"published","only_published":"show only published courses","labels":"labels","course":"course","adult":"adult","add_teacher":"add teacher","add_student":"add student","download":"download","god_file":"god file","export_contact_sheets":"export all students with their guardians","export_all_plus":"export all+","attendance_list":"attendance list","export_attendance_list":"download attendance list","students_contact_sheet":"students contact sheet","export_students_contact_sheet":"download students contact sheet","no_students":"no students in this course","no_teachers":"no teachers in this course","description":"description","public":"public","private":"private","only_private":"show only private courses","only_enrolled":"show only enrolled students","only_preenrolled":"show only pre-enrolled students","only_earlyunenrolled":"show only early unenrolled students","only_cash":"show only students with cash as the default payment method","only_banktransfer":"show only students with bank transfer as the default payment method","only_bankdirectdebit":"show only students with direct debit as the default payment method","filters_actions":"filters & actions","enroll_to_course":"enroll to course","confirm_enroll_to_course":"Are you sure you want to enroll this student to the selected course?","confirm_unenroll_to_course":"Are you sure you want to unenroll this student to the selected course?","search_courses":"search courses","new_user":"invite user","invite":"invite","invite_user":"\ud83d\udcef invite user","permissions":"permissions","can-read":"can read","can-edit":"can edit","can-create":"can create","can-delete":"can delete","can-send-emails":"can send emails","can-invite-users":"can invite users","can-operate-with-students":"can operate with students","can-operate-with-courses":"can operate with courses","can-operate-with-guardians":"can operate with guardians","can-operate-with-payments":"can operate with payments","can-operate-with-rooms":"can operate with rooms","can-operate-with-schedules":"can operate with schedules","can-operate-with-teachers":"can operate with teachers","can-operate-with-users":"can operate with users","school_university":"school or university","next":"next","back":"back","skip":"skip","schedules":"schedules","finish":"send","here":"here","can-operate-with-payment-receipts":"can operate with payment receipts","data_protection":"data protection","student_info":"student information","contact_person_1":"contact person (1)","contact_person_2":"contact person (2)","confirmation":"confirmation","ss_agent":"social service worker","no_courses_found_add_edu":"we can\'t find any courses for you; go back and add your education level! If you already did that, contact us (xamfra.net/contacte)!","student":"student","search_by_id":"search by id","search_by":"search by","export_all":"export all","export_all_csv":"export all pages as .csv","full_name":"full name","room":"room","use_eng":"see in english","use_cat":"see in catalan","use_dark":"use dark theme","use_light":"use light theme"}')},283:function(e){e.exports=JSON.parse('{"log_out":"tancar la sessi\xf3","log_in":"iniciar sessi\xf3","download_backup":"descarregar c\xf2pia","change_language":"cambiar idioma","dark_light_theme":"tema clar/fosc","my_account":"el meu compte","open_drawer":"obrir men\xfa","students":"estudiants","courses":"classes","teachers":"professors","rooms":"espais","payments":"pagaments","capacity":"aforament","delete_room":"eliminar la sala","delete_room_question":"vols eliminar aquesta sala?","users":"usuaris","new_room":"nou espai","new_teacher":"nou professor","settings":"configuraci\xf3","locations":"espais","chose_list_dates":"escull el primer i l\'\xfaltim dia pels quals vulguis crear les llistes","user":"usuari","teacher":"professor","room":"espai","search":"cercar","name":"nom","surname1":"primer cognom","surname2":"segon cognom","email":"correu","phone":"tel\xe8fon","address":"adre\xe7a","city":"ciutat","zip":"codi postal","dni":"dni","gender":"g\xe8nere","adult":"adult","no_students":"no hi ha estudiants en aquest curs","no_teachers":"no hi ha professors en aquest curs","birth date":"data de naixement","country_of_origin":"estat d\'origen de la fam\xedlia","been_invited":"t\'han convidat a unir-te a la centr\xedfuga4 \ud83d\udcef","confirm_password":"confirma la contrasenya","password":"contrasenya","username":"nom d\'usuari","download":"descarregar","god_file":"fitxer mare","add_teacher":"afegir professor","export_contact_sheets":"exportar tots els estudiants amb els contactes","export_all_plus":"exportar tots+","add_student":"afegir estudiant","attendance_list":"llista d\'assist\xe8ncia","export_attendance_list":"descarregar llista d\'assist\xe8ncia","students_contact_sheet":"contactes dels estudiants","export_students_contact_sheet":"descarregar contactes dels estudiants","invalid_expired_invite":"La invitaci\xf3 ha caducat o no \xe9s v\xe0lida! \ud83d\udc82","invalid_expired_reset":"L\'enlla\xe7 pel canvi de contrasenya ha caducat o no \xe9s v\xe0lid! \ud83d\udc82","used_invite":"La invitaci\xf3 no es pot usar m\xe9s de dues vegades o per un usuari que ja existeix! \ud83d\udc82","reset_password":"restaurar contrasenya","username_required_password_reset":"Omple el camp del correu per restaurar la contrasenya!","started_password_reset":"El proc\xe9s ha comen\xe7at. Si l\'usuari \xe9s correcte, rebr\xe0s un correu per acabar el canvi de contrasenya!","export":"exportar","export_results_csv":"exportar aquesta p\xe0gina com a .csv","email_required":"cal un correu","invalid_email":"introdu\xefu un correu v\xe0lid","password_required":"cal una contrasenya","warning_not_logged_in":"la sessi\xf3 no est\xe0 iniciada! \ud83d\udc82","warning_not_enough_privileges":"no tens els privilegis necessaris per seguir! \ud83d\udc82","password_constraints":"ha de ser de m\xe9s de 8 car\xe0cters; incloent: 1 maj\xfascula, 1 min\xfascula, 1 n\xfamero i 1 car\xe0cter especial","passwords_unmatched":"les contrasenyes no coincideixen","new_password":"escull la nova contrasenya \ud83d\udd10","reset_password_success":"canvi de contrasenya correcte","sign_up_success":"creaci\xf3 del nou compte correcta","sign_up":"iniciar sessi\xf3","change_password":"change password","name_required":"cal el nom","surname1_required":"cal el primer cognom","surname2_required":"cal el segon congom","longer_8":"ha de tenir m\xe9s de 8 car\xe0cters","shorter_64":"ha de tenir menys de 64 car\xe0cters","has_lowecase":"ha de tenir 1 min\xfascula com a m\xednim","has_uppercase":"ha de tenir 1 maj\xfascula com a m\xednim","has_digit":"ha de tenir 1 d\xedgit com a m\xednim (0-9)","has_special":"ha de tenir 1 car\xe0cter especial (p.ex. %) com a m\xednim","no_plus":"no pot contenir \'+\'","reset":"descartar","save":"guardar","birthdate":"data de naixement","attendee":"estudiant","contact":"contacte","price_term":"preu per trimestre","success":"fet","send_receipt":"enviar correu de confirmaci\xf3 a l\'estudiant","export_receipt":"exportar rebut com a pdf","no_payments":"no hi ha cap pagament","delete":"eliminar","has_paid_cash":"ha pagat en efectiu","tooltip-bank-transfer":"ha pagat mitjan\xe7ant una transfer\xe8ncia","other-payment-method":"ha pagat amb un m\xe8tode no reconegut","has_paid":"ha pagat","nb":"no binari / no representat per cap dels anteriors","m":"mascul\xed","f":"femen\xed","bank-transfer":"transfer\xe8ncia banc\xe0ria","bank-direct-debit":"domiciliaci\xf3 banc\xe0ria","tooltip-bank-direct-debit":"ha pagat mitjan\xe7ant domiciliaci\xf3 banc\xe0ria","cash":"efectiu","method":"m\xe8tode","import":"import","import_required":"cal l\'import","date":"data","concept":"concepte","new_payment":"nou pagament","create":"crear","field_required":"cal omplir el camp","date_required":"cal la data","new_guardian":"nou contacte","action_cant_undone":"aquesta acci\xf3 no es pot desfer","delete_guardian_question":"vols eliminar aquest contacte?","cancel":"cancelar","delete_guardian":"eliminar el contacte","delete_student":"eliminar l\'estudiant","delete_student_question":"vols eliminar aquest estudiant?","delete_user":"eliminar l\'usuari","delete_user_question":"vols eliminar aquest usuari?","student_also_deletes":"aquesta acci\xf3 no es pot desfer; tamb\xe9 s\'eliminaran els contactes associats, pagaments i horaris","default_payment_method":"m\xe8tode de pagament","payment_comments":"comentaris (pagament)","other_comments":"comentaris","years_in_xamfra":"anys a Xamfr\xe0","is_studying":"estudia","is_working":"treballa","yes":"s\xed","no":"no","is_early_unenrolled":"desmatriculat","is_enrolled":"matriculat","is_early_unenrolled_required":"cal el camp desmatriculat","is_enrolled_required":"cal el camp matriculat","education_entity":"organitzaci\xf3","education_year":"curs","kindergarten_p1":"p1","kindergarten_p2":"p2","kindergarten_p3":"p3","kindergarten_p4":"p4","kindergarten_p5":"p5","primary_1":"1r de prim\xe0ria","primary_2":"2n de prim\xe0ria","primary_3":"3r de prim\xe0ria","primary_4":"4t de prim\xe0ria","primary_5":"5\xe8 de prim\xe0ria","primary_6":"6\xe8 de prim\xe0ria","eso_1":"1r d\'ESO","eso_2":"2n d\'ESO","eso_3":"3r d\'ESO","eso_4":"4t d\'ESO","baccalaureate_1":"1r de batxillerat","baccalaureate_2":"2n de batxillerat","FP_lower":"FP grau mig","FP_higher":"FP grau superior","undergraduate":"grau","master":"m\xe0ster","phd":"doctorat","career":"professi\xf3","working_required":"cal el camp treballa","studying_required":"cal el camp estudia","career_required":"cal la professi\xf3","education_entity_required":"cal l\'entitat","education_year_required":"cal el curs","enrolled_unenrolled":"no pot estar matriculat i desmatriculat","relation":"relaci\xf3","relation_required":"cal la relaci\xf3","father":"pare","mother":"mare","grandfather":"avi","grandmother":"\xe0via","brother":"germ\xe0","sister":"germana","uncle":"oncle","aunt":"tieta","cousin":"cos\xed/ina","legal_guardian":"tutor legal","status":"estat de la matr\xedcula","enrolled":"matriculat/ada","early-unenrolled":"desmatriculat/ada","pre-enrolled":"prematriculat/ada","other":"altres","grant_letter":"carta de beca","send_grant_letter":"enviar carta de beca","export_grant_letter":"descarregar carta de beca","enrolment_agreement":"full de matr\xedcula","send_enrolment_agreement":"enviar full de matr\xedcula","export_enrolment_agreement":"descarregar full de matr\xedcula","status_required":"cal l\'estat de matr\xedcula","image_required":"cal l\'\xfas d\'imatge","image_agreement":"\xfas d\'imatge","cant_remove_schedule":"no es poden eliminar horaris comuns d\'un taller","continue":"seguir","cancelled":"cancelat","sure_delete_event":"Segur? Si segueixes eliminar\xe0s l\'esdeveniment de l\'estudiant.","new_student":"nou estudiant","birthdate_required":"cal la data de naixement","no_courses":"no hi ha cap classe","published":"publicats","labels":"etiquetes","course":"classe","description":"descripci\xf3","public":"p\xfablic","only_published":"mostrar nom\xe9s cursos publicats","private":"privats","only_private":"mostrar nom\xe9s cursos privats","only_enrolled":"mostrar nom\xe9s estudiants matriculats","only_preenrolled":"mostrar nom\xe9s estudiants prematriculats","only_earlyunenrolled":"mostrar nom\xe9s estudiants desmatriculats","only_cash":"mostrar nom\xe9s alumnes amb efectiu com a m\xe8tode de pagament per defecte","only_banktransfer":"mostrar nom\xe9s alumnes amb transfer\xe8ncia banc\xe0ria com a m\xe8tode de pagament per defecte","only_bankdirectdebit":"mostrar nom\xe9s alumnes amb domiciliaci\xf3 banc\xe0ria com a m\xe8tode de pagament per defecte","filters_actions":"filtres i accions","enroll_to_course":"matricular al curs","confirm_enroll_to_course":"Segur que vols matricular l\'estudiant seleccionat a aquest curs?","confirm_unenroll_to_course":"Segur que vols desmatricular l\'estudiant seleccionat a aquest curs?","search_courses":"cercar cursos","new_user":"convidar un usuari nou","invite":"convidar","invite_user":"\ud83d\udcef convidar usuari","permissions":"permisos","can-read":"pot llegir","can-edit":"pot editar","can-create":"pot crear","can-delete":"pot eliminar","can-send-emails":"pot enviar correus","can-invite-users":"pot convidar usuaris","can-operate-with-students":"pot operar amb estudiants","can-operate-with-courses":"pot operar amb cursos","can-operate-with-guardians":"pot operar amb contactes","can-operate-with-payments":"pot operar amb pagaments","can-operate-with-rooms":"pot operar amb ubicacions","can-operate-with-schedules":"pot operar amb horaris","can-operate-with-teachers":"pot operar amb professors","can-operate-with-users":"pot operar amb usuaris","school_university":"escola o universitat","next":"seg\xfcent","back":"anterior","skip":"ometre","schedules":"horaris","finish":"enviar","can-operate-with-payment-receipts":"pot operar amb rebuts de pagament","data_protection":"protecci\xf3 de dades","student_info":"informaci\xf3 de l\'estudiant","contact_person_1":"persona de contacte (1)","contact_person_2":"persona de contacte (2)","confirmation":"confirmaci\xf3","ss_agent":"referent (serveis socials)","no_courses_found_add_edu":"no podem trobar-te cap curs; torna enrere i afegeix el teu nivell d\'educaci\xf3! Si ja ho has fet, contacta\'ns (xamfra.net/contacte)!","student":"estudiant","search_by_id":"cercar amb id","search_by":"cercar per","export_all":"exportar tots","export_all_csv":"exportar totes les p\xe0gines com a .csv","full_name":"nom complet","use_eng":"veure en angl\xe8s","use_cat":"veure en catal\xe0","use_dark":"usar tema fosc","use_light":"usar tema clar"}')},318:function(e,t,a){},489:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),i=a.n(r),c=a(21),s=a.n(c),o=(a(318),a(8)),l=a(558),d=a(284),u=a(550),b=Object(d.a)({palette:{type:"light",primary:{main:"#e98300",light:"#ffb342",dark:"#b05500",contrastText:"#000000"},secondary:{main:"#934d98",light:"#c57bc9",dark:"#63206a",contrastText:"#ffffff"},neutral:{main:"#ffffff",contrastText:"#000000",emphasisText:{high:"#000000DF",medium:"#00000098",low:"#0000005E"},status:{dirty:"#ffcf3d"}}}}),h=Object(d.a)({palette:{type:"dark",secondary:{main:"#ffcc80",light:"#ffffb0",dark:"#ca9b52",contrastText:"#000000"},primary:{main:"#ce93d8",light:"#ffc4ff",dark:"#9c64a6",contrastText:"#000000"},neutral:{main:"#1f1f1f",contrastText:"#ffffff",emphasisText:{high:"#ffffffDF",medium:"#ffffff98",low:"#ffffff5E"},status:{dirty:"#ffcf3d"}}}}),p=a(46),j=a(4),m=a(14),f=a(38),O=i.a.createContext({user:null,setUser:function(){},needs:[],setNeeds:function(){}});var x=function(e){var t=e.component,a=Object(m.a)(e,["component"]),r=i.a.useContext(O);return Object(n.jsx)(f.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return r.user.logged?Object(n.jsx)(t,Object(j.a)(Object(j.a)({},e),a)):Object(n.jsx)(f.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},_=a(59),g=a(528),y=a(525),v=a(546),w=a(5),S=a(494),k=a(559),C=a(274),N=a.n(C),I=a(275),q=a.n(I),T=a(534),P=a(530),E=a(498),D=a(560),R=a(532),B=a(548),A=a(57),L=a.n(A),F=a(265),M=a.n(F),G=a(266),z=a.n(G),U=a(268),V=a.n(U),W=a(267),H=a.n(W),K=a(175),X=a.n(K),Y=a(269),J=a.n(Y),Z=a(10),Q=a(555),$=a(576),ee=a(179),te=a(77),ae=a.n(te),ne=a(565),re=a(551),ie=a(574),ce=a(101),se=a.n(ce),oe=a(535),le=a(23),de=a(24),ue=a(248),be=a.n(ue);function he(){return{"X-CSRFToken":be.a.get("X-CSRF-TOKEN")}}var pe="v1",je="https://centrifuga4.herokuapp.com",me="6Lc3WzYaAAAAAAaoAoHHFyJvXE6lYqdgX4eOXzP4",fe="https://centrifuga4.herokuapp.com",Oe="true"===Object({NODE_ENV:"production",PUBLIC_URL:"https://centrifuga4.herokuapp.com",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RECAPTCHA:"6Lc3WzYaAAAAAAaoAoHHFyJvXE6lYqdgX4eOXzP4",REACT_APP_API_VERSION:"v1",REACT_APP_BACKEND_URL:"https://centrifuga4.herokuapp.com"}).REACT_CHECK_NEEDS,xe=a(31);function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){function a(){Object(le.a)(this,a),this.resource=e,this.subresource=t}return Object(de.a)(a,[{key:"getAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(i,c){var s={page:a,include:null===n?null:JSON.stringify(n)};null!==t&&(s["filter.".concat(t.name,".like")]="%"+t.value+"%"),null!==r&&Object.keys(r).forEach((function(e){s["filter.".concat(e,".eq")]=r[e]})),xe({method:"get",url:"".concat(je,"/api/").concat(pe,"/").concat(e),params:s,headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(e){i(e.data)})).catch((function(e){c(e)}))}))}},{key:"getOne",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,r){xe({method:"get",url:"".concat(je,"/api/").concat(pe,"/").concat(e,"/").concat(t),params:{include:null===a?null:JSON.stringify(a)},headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(e){n(e.data)})).catch((function(e){r(e)}))}))}},{key:"getMany",value:function(e){var t=this;return Promise.all(e.map((function(e){return t.getOne(e)})))}},{key:"patch",value:function(t){var a=t.id,n=t.body,r=t.initial_values,i=void 0===r?null:r;if(null!==i)for(var c=0,s=Object.entries(n);c<s.length;c++){var l=Object(o.a)(s[c],2),d=l[0],u=l[1];d in i&&i[d]===u&&delete n[d]}return"id"in n&&delete n.id,new Promise((function(t,r){xe({method:"patch",url:"".concat(je,"/api/").concat(pe,"/").concat(e,"/").concat(a),data:n,headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(e){t(e.data)})).catch((function(e){r(e)}))}))}},{key:"post",value:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"id"in a&&delete a.id,new Promise((function(r,i){xe({method:"post",url:"".concat(je,"/api/").concat(pe,"/").concat(e).concat(null!==t?"/".concat(n,"/").concat(t):""),data:a,headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(e){r(e.data)})).catch((function(e){i(e)}))}))}},{key:"postWithId",value:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,i){xe({method:"post",url:"".concat(je,"/api/").concat(pe,"/").concat(e,"/").concat(a).concat(null===n?"":"/".concat(t,"/").concat(n)),headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(e){r(e)})).catch((function(e){i(e)}))}))}},{key:"delete",value:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,i){xe({method:"delete",url:"".concat(je,"/api/").concat(pe,"/").concat(e,"/").concat(a).concat(null!==t?"/".concat(t,"/").concat(n):""),headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(e){r(e)})).catch((function(e){i(e)}))}))}},{key:"deleteMany",value:function(e){var t=this;return Promise.all(e.map((function(e){return t.delete(e)})))}},{key:"downloadCsv",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(i,c){var s={page:n};null!==t&&(s["filter.".concat(t,".like")]="%".concat(a,"%")),null!==r&&Object.keys(r).forEach((function(e){s["filter.".concat(e,".eq")]=r[e]})),xe({url:"".concat(je,"/api/").concat(pe,"/").concat(e),method:"GET",responseType:"blob",params:s,headers:Object(j.a)(Object(j.a)({},{Accept:"text/csv","Cache-Control":"no-cache"}),he())}).then((function(e){var t=e.headers["content-disposition"].split("filename=")[1];null===t&&(t="export.csv");var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",t),document.body.appendChild(n),n.click(),n.remove(),i()})).catch((function(e){c(e)}))}))}},{key:"downloadOneCsv",value:function(t){return new Promise((function(a,n){xe({url:"".concat(je,"/api/").concat(pe,"/").concat(e,"/").concat(t),method:"GET",responseType:"blob",headers:Object(j.a)(Object(j.a)({},{Accept:"text/csv","Cache-Control":"no-cache"}),he())}).then((function(e){var t=e.headers["content-disposition"].split("filename=")[1];null===t&&(t="export.csv");var n=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove(),a()})).catch((function(e){n(e)}))}))}},{key:"downloadSubresource",value:function(t,a,n){return new Promise((function(r,i){xe({url:"".concat(je,"/api/").concat(pe,"/").concat(e,"/").concat(t,"/").concat(a),method:"POST",params:n,responseType:"blob",headers:Object(j.a)(Object(j.a)({},{"Cache-Control":"no-cache"}),he())}).then((function(e){var t=e.headers["content-disposition"].split("filename=")[1],a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",t),document.body.appendChild(n),n.click(),n.remove(),r()})).catch((function(e){i(e)}))}))}}]),a}()}var ge=new(_e("students")),ye=a(11),ve=a(529),we=function(e){var t=Object.assign({},e);return Object(n.jsx)(ve.a,Object(j.a)(Object(j.a)({},t),{},{variant:"circle",children:Object(n.jsx)(S.a,{children:Object(n.jsx)(se.a,{})})}))},Se=a(564),ke=Object(g.a)((function(e){return Object(y.a)({root:function(t){return{"& label.Mui-focused":{color:t?e.palette.neutral.status.dirty:e.palette.primary.main},"& .MuiInput-underline:after":{borderBottomColor:t?e.palette.neutral.status.dirty:e.palette.primary.main},"& label":{color:t?e.palette.neutral.status.dirty:e.palette.neutral.emphasisText.medium}}}})})),Ce=function(e){var t=e.name,a=e.formik,r=!0!==e.noDirty&&a.values[t]!==a.initialValues[t],i=ke(r),c={value:void 0===a.values[t]?"":a.values[t],onChange:a.handleChange,onBlur:a.handleBlur,error:a.status||void 0!==a.errors[t],helperText:a.touched[t]&&a.errors[t]};return Object(n.jsx)(Se.a,Object(j.a)(Object(j.a)({className:i.root,InputLabelProps:{shrink:""!==a.values[t]}},c),e))},Ne=a(567),Ie=[{code:"",label:"empty",phone:"-"},{code:"AD",label:"Andorra",phone:"376"},{code:"AE",label:"United Arab Emirates",phone:"971"},{code:"AF",label:"Afghanistan",phone:"93"},{code:"AG",label:"Antigua and Barbuda",phone:"1-268"},{code:"AI",label:"Anguilla",phone:"1-264"},{code:"AL",label:"Albania",phone:"355"},{code:"AM",label:"Armenia",phone:"374"},{code:"AO",label:"Angola",phone:"244"},{code:"AQ",label:"Antarctica",phone:"672"},{code:"AR",label:"Argentina",phone:"54"},{code:"AS",label:"American Samoa",phone:"1-684"},{code:"AT",label:"Austria",phone:"43"},{code:"AU",label:"Australia",phone:"61",suggested:!0},{code:"AW",label:"Aruba",phone:"297"},{code:"AX",label:"Alland Islands",phone:"358"},{code:"AZ",label:"Azerbaijan",phone:"994"},{code:"BA",label:"Bosnia and Herzegovina",phone:"387"},{code:"BB",label:"Barbados",phone:"1-246"},{code:"BD",label:"Bangladesh",phone:"880"},{code:"BE",label:"Belgium",phone:"32"},{code:"BF",label:"Burkina Faso",phone:"226"},{code:"BG",label:"Bulgaria",phone:"359"},{code:"BH",label:"Bahrain",phone:"973"},{code:"BI",label:"Burundi",phone:"257"},{code:"BJ",label:"Benin",phone:"229"},{code:"BL",label:"Saint Barthelemy",phone:"590"},{code:"BM",label:"Bermuda",phone:"1-441"},{code:"BN",label:"Brunei Darussalam",phone:"673"},{code:"BO",label:"Bolivia",phone:"591"},{code:"BR",label:"Brazil",phone:"55"},{code:"BS",label:"Bahamas",phone:"1-242"},{code:"BT",label:"Bhutan",phone:"975"},{code:"BV",label:"Bouvet Island",phone:"47"},{code:"BW",label:"Botswana",phone:"267"},{code:"BY",label:"Belarus",phone:"375"},{code:"BZ",label:"Belize",phone:"501"},{code:"CA",label:"Canada",phone:"1",suggested:!0},{code:"CC",label:"Cocos (Keeling) Islands",phone:"61"},{code:"CD",label:"Congo, Democratic Republic of the",phone:"243"},{code:"CF",label:"Central African Republic",phone:"236"},{code:"CG",label:"Congo, Republic of the",phone:"242"},{code:"CH",label:"Switzerland",phone:"41"},{code:"CI",label:"Cote d'Ivoire",phone:"225"},{code:"CK",label:"Cook Islands",phone:"682"},{code:"CL",label:"Chile",phone:"56"},{code:"CM",label:"Cameroon",phone:"237"},{code:"CN",label:"China",phone:"86"},{code:"CO",label:"Colombia",phone:"57"},{code:"CR",label:"Costa Rica",phone:"506"},{code:"CU",label:"Cuba",phone:"53"},{code:"CV",label:"Cape Verde",phone:"238"},{code:"CW",label:"Curacao",phone:"599"},{code:"CX",label:"Christmas Island",phone:"61"},{code:"CY",label:"Cyprus",phone:"357"},{code:"CZ",label:"Czech Republic",phone:"420"},{code:"DE",label:"Germany",phone:"49",suggested:!0},{code:"DJ",label:"Djibouti",phone:"253"},{code:"DK",label:"Denmark",phone:"45"},{code:"DM",label:"Dominica",phone:"1-767"},{code:"DO",label:"Dominican Republic",phone:"1-809"},{code:"DZ",label:"Algeria",phone:"213"},{code:"EC",label:"Ecuador",phone:"593"},{code:"EE",label:"Estonia",phone:"372"},{code:"EG",label:"Egypt",phone:"20"},{code:"EH",label:"Western Sahara",phone:"212"},{code:"ER",label:"Eritrea",phone:"291"},{code:"ES",label:"Spain",phone:"34"},{code:"ET",label:"Ethiopia",phone:"251"},{code:"FI",label:"Finland",phone:"358"},{code:"FJ",label:"Fiji",phone:"679"},{code:"FK",label:"Falkland Islands (Malvinas)",phone:"500"},{code:"FM",label:"Micronesia, Federated States of",phone:"691"},{code:"FO",label:"Faroe Islands",phone:"298"},{code:"FR",label:"France",phone:"33",suggested:!0},{code:"GA",label:"Gabon",phone:"241"},{code:"GB",label:"United Kingdom",phone:"44"},{code:"GD",label:"Grenada",phone:"1-473"},{code:"GE",label:"Georgia",phone:"995"},{code:"GF",label:"French Guiana",phone:"594"},{code:"GG",label:"Guernsey",phone:"44"},{code:"GH",label:"Ghana",phone:"233"},{code:"GI",label:"Gibraltar",phone:"350"},{code:"GL",label:"Greenland",phone:"299"},{code:"GM",label:"Gambia",phone:"220"},{code:"GN",label:"Guinea",phone:"224"},{code:"GP",label:"Guadeloupe",phone:"590"},{code:"GQ",label:"Equatorial Guinea",phone:"240"},{code:"GR",label:"Greece",phone:"30"},{code:"GS",label:"South Georgia and the South Sandwich Islands",phone:"500"},{code:"GT",label:"Guatemala",phone:"502"},{code:"GU",label:"Guam",phone:"1-671"},{code:"GW",label:"Guinea-Bissau",phone:"245"},{code:"GY",label:"Guyana",phone:"592"},{code:"HK",label:"Hong Kong",phone:"852"},{code:"HM",label:"Heard Island and McDonald Islands",phone:"672"},{code:"HN",label:"Honduras",phone:"504"},{code:"HR",label:"Croatia",phone:"385"},{code:"HT",label:"Haiti",phone:"509"},{code:"HU",label:"Hungary",phone:"36"},{code:"ID",label:"Indonesia",phone:"62"},{code:"IE",label:"Ireland",phone:"353"},{code:"IL",label:"Israel",phone:"972"},{code:"IM",label:"Isle of Man",phone:"44"},{code:"IN",label:"India",phone:"91"},{code:"IO",label:"British Indian Ocean Territory",phone:"246"},{code:"IQ",label:"Iraq",phone:"964"},{code:"IR",label:"Iran, Islamic Republic of",phone:"98"},{code:"IS",label:"Iceland",phone:"354"},{code:"IT",label:"Italy",phone:"39"},{code:"JE",label:"Jersey",phone:"44"},{code:"JM",label:"Jamaica",phone:"1-876"},{code:"JO",label:"Jordan",phone:"962"},{code:"JP",label:"Japan",phone:"81",suggested:!0},{code:"KE",label:"Kenya",phone:"254"},{code:"KG",label:"Kyrgyzstan",phone:"996"},{code:"KH",label:"Cambodia",phone:"855"},{code:"KI",label:"Kiribati",phone:"686"},{code:"KM",label:"Comoros",phone:"269"},{code:"KN",label:"Saint Kitts and Nevis",phone:"1-869"},{code:"KP",label:"Korea, Democratic People's Republic of",phone:"850"},{code:"KR",label:"Korea, Republic of",phone:"82"},{code:"KW",label:"Kuwait",phone:"965"},{code:"KY",label:"Cayman Islands",phone:"1-345"},{code:"KZ",label:"Kazakhstan",phone:"7"},{code:"LA",label:"Lao People's Democratic Republic",phone:"856"},{code:"LB",label:"Lebanon",phone:"961"},{code:"LC",label:"Saint Lucia",phone:"1-758"},{code:"LI",label:"Liechtenstein",phone:"423"},{code:"LK",label:"Sri Lanka",phone:"94"},{code:"LR",label:"Liberia",phone:"231"},{code:"LS",label:"Lesotho",phone:"266"},{code:"LT",label:"Lithuania",phone:"370"},{code:"LU",label:"Luxembourg",phone:"352"},{code:"LV",label:"Latvia",phone:"371"},{code:"LY",label:"Libya",phone:"218"},{code:"MA",label:"Morocco",phone:"212"},{code:"MC",label:"Monaco",phone:"377"},{code:"MD",label:"Moldova, Republic of",phone:"373"},{code:"ME",label:"Montenegro",phone:"382"},{code:"MF",label:"Saint Martin (French part)",phone:"590"},{code:"MG",label:"Madagascar",phone:"261"},{code:"MH",label:"Marshall Islands",phone:"692"},{code:"MK",label:"Macedonia, the Former Yugoslav Republic of",phone:"389"},{code:"ML",label:"Mali",phone:"223"},{code:"MM",label:"Myanmar",phone:"95"},{code:"MN",label:"Mongolia",phone:"976"},{code:"MO",label:"Macao",phone:"853"},{code:"MP",label:"Northern Mariana Islands",phone:"1-670"},{code:"MQ",label:"Martinique",phone:"596"},{code:"MR",label:"Mauritania",phone:"222"},{code:"MS",label:"Montserrat",phone:"1-664"},{code:"MT",label:"Malta",phone:"356"},{code:"MU",label:"Mauritius",phone:"230"},{code:"MV",label:"Maldives",phone:"960"},{code:"MW",label:"Malawi",phone:"265"},{code:"MX",label:"Mexico",phone:"52"},{code:"MY",label:"Malaysia",phone:"60"},{code:"MZ",label:"Mozambique",phone:"258"},{code:"NA",label:"Namibia",phone:"264"},{code:"NC",label:"New Caledonia",phone:"687"},{code:"NE",label:"Niger",phone:"227"},{code:"NF",label:"Norfolk Island",phone:"672"},{code:"NG",label:"Nigeria",phone:"234"},{code:"NI",label:"Nicaragua",phone:"505"},{code:"NL",label:"Netherlands",phone:"31"},{code:"NO",label:"Norway",phone:"47"},{code:"NP",label:"Nepal",phone:"977"},{code:"NR",label:"Nauru",phone:"674"},{code:"NU",label:"Niue",phone:"683"},{code:"NZ",label:"New Zealand",phone:"64"},{code:"OM",label:"Oman",phone:"968"},{code:"PA",label:"Panama",phone:"507"},{code:"PE",label:"Peru",phone:"51"},{code:"PF",label:"French Polynesia",phone:"689"},{code:"PG",label:"Papua New Guinea",phone:"675"},{code:"PH",label:"Philippines",phone:"63"},{code:"PK",label:"Pakistan",phone:"92"},{code:"PL",label:"Poland",phone:"48"},{code:"PM",label:"Saint Pierre and Miquelon",phone:"508"},{code:"PN",label:"Pitcairn",phone:"870"},{code:"PR",label:"Puerto Rico",phone:"1"},{code:"PS",label:"Palestine, State of",phone:"970"},{code:"PT",label:"Portugal",phone:"351"},{code:"PW",label:"Palau",phone:"680"},{code:"PY",label:"Paraguay",phone:"595"},{code:"QA",label:"Qatar",phone:"974"},{code:"RE",label:"Reunion",phone:"262"},{code:"RO",label:"Romania",phone:"40"},{code:"RS",label:"Serbia",phone:"381"},{code:"RU",label:"Russian Federation",phone:"7"},{code:"RW",label:"Rwanda",phone:"250"},{code:"SA",label:"Saudi Arabia",phone:"966"},{code:"SB",label:"Solomon Islands",phone:"677"},{code:"SC",label:"Seychelles",phone:"248"},{code:"SD",label:"Sudan",phone:"249"},{code:"SE",label:"Sweden",phone:"46"},{code:"SG",label:"Singapore",phone:"65"},{code:"SH",label:"Saint Helena",phone:"290"},{code:"SI",label:"Slovenia",phone:"386"},{code:"SJ",label:"Svalbard and Jan Mayen",phone:"47"},{code:"SK",label:"Slovakia",phone:"421"},{code:"SL",label:"Sierra Leone",phone:"232"},{code:"SM",label:"San Marino",phone:"378"},{code:"SN",label:"Senegal",phone:"221"},{code:"SO",label:"Somalia",phone:"252"},{code:"SR",label:"Suriname",phone:"597"},{code:"SS",label:"South Sudan",phone:"211"},{code:"ST",label:"Sao Tome and Principe",phone:"239"},{code:"SV",label:"El Salvador",phone:"503"},{code:"SX",label:"Sint Maarten (Dutch part)",phone:"1-721"},{code:"SY",label:"Syrian Arab Republic",phone:"963"},{code:"SZ",label:"Swaziland",phone:"268"},{code:"TC",label:"Turks and Caicos Islands",phone:"1-649"},{code:"TD",label:"Chad",phone:"235"},{code:"TF",label:"French Southern Territories",phone:"262"},{code:"TG",label:"Togo",phone:"228"},{code:"TH",label:"Thailand",phone:"66"},{code:"TJ",label:"Tajikistan",phone:"992"},{code:"TK",label:"Tokelau",phone:"690"},{code:"TL",label:"Timor-Leste",phone:"670"},{code:"TM",label:"Turkmenistan",phone:"993"},{code:"TN",label:"Tunisia",phone:"216"},{code:"TO",label:"Tonga",phone:"676"},{code:"TR",label:"Turkey",phone:"90"},{code:"TT",label:"Trinidad and Tobago",phone:"1-868"},{code:"TV",label:"Tuvalu",phone:"688"},{code:"TW",label:"Taiwan, Province of China",phone:"886"},{code:"TZ",label:"United Republic of Tanzania",phone:"255"},{code:"UA",label:"Ukraine",phone:"380"},{code:"UG",label:"Uganda",phone:"256"},{code:"US",label:"United States",phone:"1",suggested:!0},{code:"UY",label:"Uruguay",phone:"598"},{code:"UZ",label:"Uzbekistan",phone:"998"},{code:"VA",label:"Holy See (Vatican City State)",phone:"379"},{code:"VC",label:"Saint Vincent and the Grenadines",phone:"1-784"},{code:"VE",label:"Venezuela",phone:"58"},{code:"VG",label:"British Virgin Islands",phone:"1-284"},{code:"VI",label:"US Virgin Islands",phone:"1-340"},{code:"VN",label:"Vietnam",phone:"84"},{code:"VU",label:"Vanuatu",phone:"678"},{code:"WF",label:"Wallis and Futuna",phone:"681"},{code:"WS",label:"Samoa",phone:"685"},{code:"XK",label:"Kosovo",phone:"383"},{code:"YE",label:"Yemen",phone:"967"},{code:"YT",label:"Mayotte",phone:"262"},{code:"ZA",label:"South Africa",phone:"27"},{code:"ZM",label:"Zambia",phone:"260"},{code:"ZW",label:"Zimbabwe",phone:"263"}];var qe=Object(g.a)((function(e){return Object(y.a)({textField:function(t){return{"& label.Mui-focused":{color:t?e.palette.neutral.status.dirty:e.palette.primary.main},"& .MuiInput-underline:after":{borderBottomColor:t?e.palette.neutral.status.dirty:e.palette.primary.main},"& label":{color:t?e.palette.neutral.status.dirty:e.palette.neutral.emphasisText.medium},"& fieldset":{borderColor:t?e.palette.neutral.status.dirty:e.palette.neutral.emphasisText.medium}}},option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}})}));function Te(e){var t=e.formik,a=e.noDirty,r=e.name,c=e.label,s=(Object(m.a)(e,["formik","noDirty","name","label"]),function(e){return void 0===e?Ie.find((function(e){return""===e.code})):Ie.find((function(t){return t.code===e}))}),l=i.a.useState(s(t.values[r])),d=Object(o.a)(l,2),u=d[0],b=d[1];i.a.useEffect((function(){b(s(t.values[r]))}),[t.values,r]);var h=!0!==a&&t.values[r]!==t.initialValues[r],p=qe(h),f=i.a.useState(""),O=Object(o.a)(f,2),x=O[0],_=O[1];Object($.a)().t;return Object(n.jsx)(Ne.a,{style:{width:300},options:Ie,classes:{option:p.option},autoHighlight:!0,getOptionLabel:function(e){return e.label},getOptionSelected:function(e){return e.code===u.code},value:u,onChange:function(e,a){!function(e){var a=null!==e?e.code:"";t.setFieldValue(r,a),b(e)}(a)},inputValue:x,onInputChange:function(e,t){_(t)},name:r,onBlur:t.handleBlur,renderOption:function(e){return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("span",{children:(t=e.code,"undefined"!==typeof String.fromCodePoint?t.toUpperCase().replace(/./g,(function(e){return String.fromCodePoint(e.charCodeAt(0)+127397)})):t)}),e.label," (",e.code,") +",e.phone]},e.code);var t},renderInput:function(e){return Object(n.jsx)(Se.a,Object(j.a)(Object(j.a)({},e),{},{label:c,noDirty:a,className:p.textField,inputProps:Object(j.a)(Object(j.a)({},e.inputProps),{},{autoComplete:"new-password"}),error:t.status||void 0!==t.errors[r],helperText:t.touched[r]&&t.errors[r]}))}})}var Pe=a(531);function Ee(){var e=i.a.useContext(O),t=Object(p.b)(),a=t.enqueueSnackbar,r=t.closeSnackbar,c=Object($.a)().t,s=function(e){return function(t){return function(e,t){return t&&a(c("success"),{variant:"success"}),Promise.resolve(e)}(t,e)}},o=function(t){return e.setUser({logged:!1,ping:!1}),a(c("warning_not_logged_in"),{variant:"warning"}),Promise.reject(t)},l=function(e){return a(c("warning_not_enough_privileges"),{variant:"warning"}),Promise.reject(e)},d=function(e,t,s,d,u,b){var h=function(e){return function(e,t){return a("Something went wrong! \ud83d\ude23",{variant:"error",autoHideDuration:1e4,action:function(a){return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)("img",{src:"logo_centrifuga4_dark_error.svg",alt:"Logo Centr\xedfuga",style:{height:"35px"}}),t?Object(n.jsx)(Pe.a,{onClick:function(){navigator.clipboard.writeText("TO: vazquezrius.miquel@gmail.com\n\nTo mark an item, use a cross, like this: [X]\n\n\ud83d\udece\ufe0f TRIAGE\n[ ] This issue has been reported previously and has NOT been marked as solved\n[ ] This issue has been reported previously and has been marked as solved\n[ ] This issue has not been reported previously\n[ ] I have written the steps to reproduce the issue in the specified section below - \u26a0\ufe0frequired!\n\n\ud83d\ude4b TYPE OF REQUEST\n[ ] Feature request\n[X] Error report\n\n\ud83d\udccb STEPS\nDescribe what were you doing when this error happened!\n\n    example\n    1. Searched 'john' in the students section, two students appeared.\n    2. Clicked the CSV export option.\n    3. Nothing happened, the the error message appeared.\n\nWrite your steps for repeating the issue here:\n1. ...\n\n\n\ud83d\udcda STACK TRACE\n"+JSON.stringify(e)+"\n\n\n\ud83c\udf29\ufe0f RESPONSE\n"+JSON.stringify(e.response)+"\n\n\n\u2699\ufe0f DEVICE CONTEXT\n"+navigator.platform+"\n"+navigator.userAgent+"\n"+navigator.appVersion+"\n"+navigator.vendor+"\n").then((function(e){r(a),alert("Okey, so something got messed up... \ud83d\ude23 Let's fix it!\n\n\ud83d\udce4 Open your email client\n\ud83d\udccb Ctrl+V\n\u270f\ufe0f Fill in the details\n\ud83d\udce8 Send it to the support team!\n\n")}))},children:c("Report")}):null,Object(n.jsx)(Pe.a,{onClick:function(){r(a)},children:c("Dismiss")})]})}}),Promise.reject(e)}(e,b)};if(401===e.request.status){if(!t)return Promise.reject(e);h=o}if(403===e.request.status){if(!s)return Promise.reject(e);h=l}return 400!==e.request.status||d?u?h(e):(h(e).catch((function(){})),null):Promise.reject(e)},u=function(e,t,a,n,r){return function(i){return d(i,e,t,a,n,r)}};return function(e){var t=e.handle401,a=void 0===t||t,n=e.handle403,r=void 0===n||n,i=e.handle400,c=void 0===i||i,o=e.errorOut,l=void 0===o||o,d=e.reportUnexpected,b=void 0===d||d,h=e.snackbarSuccess;return[s(void 0!==h&&h),u(a,r,c,l,b)]}}var De=a(71);function Re(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={};if("initialValues"in t){var r={};n=t.initialValues;for(var i=0,c=Object.entries(n);i<c.length;i++){var s=Object(o.a)(c[i],2),l=s[0],d=s[1];r[l]=null===d?"":d}t.initialValues=r}if("onSubmit"in t){var u=t.onSubmit,b=function(t,r){for(var i={},c=0,s=Object.entries(t);c<s.length;c++){var l=Object(o.a)(s[c],2),d=l[0],b=l[1],h=""===b?null:b;e&&(!e||h===n[d]||!a&&Array.isArray(n[d]))||(i[d]=h)}u(i,r)};t.onSubmit=b}return Object(De.a)(t)}var Be=["kindergarten_p1","kindergarten_p2","kindergarten_p3","kindergarten_p4","kindergarten_p5","primary_1","primary_2","primary_3","primary_4","primary_5","primary_6","eso_1","eso_2","eso_3","eso_4","baccalaureate_1","baccalaureate_2","FP_lower","FP_higher","undergraduate","master","phd","other"],Ae=[{name:"get",description:"can-read"},{name:"patch",description:"can-edit"},{name:"post",description:"can-create"},{name:"delete",description:"can-delete"},{name:"send_email",description:"can-send-emails"},{name:"invite_users",description:"can-invite-users"},{name:"students",description:"can-operate-with-students"},{name:"courses",description:"can-operate-with-courses"},{name:"guardians",description:"can-operate-with-guardians"},{name:"payments",description:"can-operate-with-payments"},{name:"rooms",description:"can-operate-with-rooms"},{name:"schedules",description:"can-operate-with-schedules"},{name:"teachers",description:"can-operate-with-teachers"},{name:"users",description:"can-operate-with-users"},{name:"payments-receipts",description:"can-operate-with-payment-receipts"}],Le=a(258),Fe=a.n(Le),Me=function(e){var t=e.formik,a=Object(m.a)(e,["formik"]),r=Object($.a)().t;return Object(n.jsx)(S.a,Object(j.a)(Object(j.a)({onClick:t.handleReset,disabled:!t.dirty||t.isSubmitting},a),{},{children:Object(n.jsx)(R.a,{title:r("reset"),"aria-label":r("reset"),children:Object(n.jsx)(Fe.a,{})})}))},Ge=a(197),ze=a.n(Ge),Ue={get:"get",patch:"patch",delete:"delete",post:"post",send_email:"send_email",invite_users:"invite_users",students:"students",courses:"courses",guardians:"guardians",payments:"payments",rooms:"rooms",schedules:"schedules",teachers:"teachers",users:"users",paymentReceipts:"payments-receipts"};function Ve(){var e=i.a.useContext(O);return[function(t){return!Oe||t.every((function(t){return e.needs.includes(t)}))},Ue]}var We=function(e){var t=e.formik,a=Object(m.a)(e,["formik"]),r=Object($.a)().t,i=Ve(),c=Object(o.a)(i,2);return(0,c[0])([c[1].patch])&&Object(n.jsx)(S.a,Object(j.a)(Object(j.a)({type:"submit",disabled:!t.dirty||t.isSubmitting},a),{},{children:Object(n.jsx)(R.a,{title:r("save"),"aria-label":r("save"),children:Object(n.jsx)(ze.a,{})})}))},He=/^.{8,}$/,Ke=/^.{0,64}$/,Xe=/(?=.*[a-z])/,Ye=/(?=.*[A-Z])/,Je=/(?=.*\d)/,Ze=/(?=.*[-/:-@[-`{-~]{1,})/,Qe=/^((?!\+).)*$/,$e=function(e){return ye.f().required(e("password_required")).matches(He,e("longer_8")).matches(Ke,e("shorter_64")).matches(Xe,e("has_lowercase")).matches(Ye,e("has_uppercase")).matches(Je,e("has_digit")).matches(Ze,e("has_special"))},et=function(e){return ye.f().required(e("password_required")).oneOf([ye.e("password"),null],e("passwords_unmatched"))},tt=function(e){return ye.f().required(e("email_required")).email(e("invalid_email")).matches(Qe,e("no_plus"))},at=tt,nt=tt,rt=function(e,t){return ye.f().required(e("field_required")).test("oneOfRequired","".concat(e("one_of"),": ").concat(t.toString()),(function(e){return t.includes(e)}))},it=Object(g.a)((function(e){return{line:{width:"100%",marginTop:e.spacing(1)},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"},actionIcon:{float:"right"}}}));var ct=function(e){var t,a=e.currentPerson,r=e.patchService,c=e.newPerson,s=e.updateCurrentStudent,o=e.additionalFields,l=void 0===e.additionalValidation?{}:e.additionalValidation,d=(e.studentId,e.onUpdate),u=null===a,b=Object($.a)().t,h=it(),p=Ee(),m=u?{}:a,f=Re(!c,{initialValues:m,validationSchema:ye.d(Object(j.a)(Object(j.a)({},{email:nt(b),name:ye.f().required(b("name_required")),is_studying:ye.a().required(b("studying_required")),is_working:ye.a().required(b("working_required")),career:ye.f().when("is_working",{is:!0,then:ye.f().required(b("career_required"))}),education_entity:ye.f().when("is_studying",{is:!0,then:ye.f().required(b("education_entity_required"))}),education_year:ye.f().when("is_studying",{is:!0,then:ye.f().required(b("education_year_required"))})}),l)),enableReinitialize:!0,onSubmit:function(e,t){var a,n,i=t.setStatus,o=t.setSubmitting;c?(i(),(a=r.post(Object(j.a)({},e))).then.apply(a,Object(Z.a)(p({snackbarSuccess:!0}))).then((function(t){s(t.id),"function"===typeof d&&d(e)})).catch((function(e){i(!0)})).finally((function(){o(!1)}))):Object.keys(e).length>0?(i(),(n=r.patch({id:m.id,body:e,initial_values:m})).then.apply(n,Object(Z.a)(p({snackbarSuccess:!0}))).then((function(t){f.resetForm(t),s(t),"function"===typeof d&&d(e)})).catch((function(e){i(!0)})).finally((function(){o(!1)}))):o(!1)}});return Object(n.jsx)(ie.a,{children:u?Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(we,{className:h.actionIcon}),Object(n.jsx)(we,{className:h.actionIcon}),Object(n.jsx)("div",{style:{clear:"both"},children:["100%","100%","100%","100%","100%","100%"].map((function(e,t){return Object(n.jsx)(ie.a,{py:0,children:Object(n.jsx)(ve.a,{variant:"text",width:e,height:"60px"})},t)}))})]}):Object(n.jsxs)("form",{onSubmit:f.handleSubmit,children:[Object(n.jsx)(Me,{className:h.actionIcon,formik:f}),Object(n.jsx)(We,{className:h.actionIcon,formik:f}),Object(n.jsx)(Ce,{label:b("id"),name:"id",disabled:!0,className:h.line,formik:f}),Object(n.jsxs)(ie.a,{className:[h.line,h.composite],children:[Object(n.jsx)(Ce,{label:b("name"),style:{flex:1},name:"name",formik:f}),Object(n.jsx)(Ce,{label:b("surname1"),style:{flex:1},name:"surname1",formik:f}),Object(n.jsx)(Ce,{label:b("surname2"),style:{flex:1},formik:f,name:"surname2"})]}),Object(n.jsx)(ie.a,{className:[h.line,h.composite],children:Object(n.jsx)(Ce,{label:b("email"),type:"email",style:{flex:1},formik:f,name:"email",helperText:f.touched.email&&f.errors.email})}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:[h.line,h.composite],children:[Object(n.jsx)(Ce,{label:b("address"),formik:f,style:{flex:4},name:"address"}),Object(n.jsx)(Ce,{label:b("city"),style:{flex:2},formik:f,name:"city"}),Object(n.jsx)(Ce,{label:b("zip"),formik:f,type:"number",style:{flex:1},name:"zip"})]}),Object(n.jsxs)(ie.a,{className:[h.line,h.composite],children:[Object(n.jsx)(Ce,{label:b("dni"),style:{flex:1},formik:f,name:"dni"}),Object(n.jsx)(Ce,{label:b("phone"),type:"tel",style:{flex:1},formik:f,name:"phone"})]}),Object(n.jsxs)(ie.a,{className:[h.line,h.composite],children:[Object(n.jsx)(Te,{formik:f,style:{flex:1},name:"country_of_origin",label:b("country_of_origin")}),Object(n.jsxs)(Ce,{label:b("gender"),style:{flex:1},formik:f,name:"gender",select:!0,children:[Object(n.jsx)(oe.a,{value:"m",children:b("male")}),Object(n.jsx)(oe.a,{value:"f",children:b("female")}),Object(n.jsx)(oe.a,{value:"nb",children:b("nb")})]})]}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:[h.line,h.composite],children:[Object(n.jsxs)(Ce,{label:b("is_studying"),style:{flex:1},name:"is_studying",formik:f,select:!0,children:[Object(n.jsx)(oe.a,{value:!0,children:b("yes")}),Object(n.jsx)(oe.a,{value:!1,children:b("no")})]}),Object(n.jsx)(Ce,{label:b("education_entity"),style:{flex:2},formik:f,name:"education_entity"}),Object(n.jsx)(Ce,{label:b("education_year"),style:{flex:2},name:"education_year",formik:f,select:!0,children:Be.map((function(e){return Object(n.jsx)(oe.a,{value:e,children:b(e)},e)}))})]}),Object(n.jsxs)(ie.a,{className:[h.line,h.composite],children:[Object(n.jsxs)(Ce,{label:b("is_working"),style:{flex:1},name:"is_working",formik:f,select:!0,children:[Object(n.jsx)(oe.a,{value:!0,children:b("yes")}),Object(n.jsx)(oe.a,{value:!1,children:b("no")})]}),Object(n.jsx)(Ce,{label:b("career"),style:{flex:4},formik:f,name:"career"})]}),(t=o,void 0===t?null:Object(n.jsxs)("div",{children:[Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),t.map((function(e,t){return Object(n.jsx)(ie.a,{className:"".concat(h.line," ").concat(h.composite),children:e instanceof Array?e.map((function(e,a){return i.a.cloneElement(e,{formik:f,key:t+"-"+a})})):i.a.cloneElement(e,{formik:f})},t)}))]}))]})})},st=a(541),ot=a(537),lt=a(538),dt=a(539),ut=a(540),bt=new(_e("guardians")),ht=new(_e("payments")),pt=a(536),jt=a(33),mt=a.n(jt),ft=a(113),Ot=a.n(ft),xt=a(31),_t=a.n(xt),gt=a(97),yt=a.n(gt),vt=["bank-transfer","cash","bank-direct-debit"],wt={name:null,surname1:null,surname2:null,email:null,address:null,city:null,zip:null,dni:null,phone:null,gender:null,country_of_origin:null,is_studying:null,education_entity:null,education_year:null,is_working:null,career:null},St=Object(j.a)(Object(j.a)({},wt),{},{relation:null}),kt=Object(j.a)(Object(j.a)({},wt),{},{price_term:null,payment_comments:null,birth_date:null,other_comments:null,image_agreement:null,enrolment_status:null,default_payment_method:null}),Ct=i.a.createContext({loading:!1,startLoading:function(){},stopLoading:function(){}}),Nt=Object(g.a)((function(e){return{actionIcon:{float:"right"},button:{margin:e.spacing(1)},line:{width:"100%",marginTop:e.spacing(1)},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"}}}));var It=function(e){e.children;var t=e.setNewStudent,a=e.addStudentId,r=e.value,c=e.index,s=e.newStudent,l=(e.title,e.currentStudent),d=e.updateCurrentStudent,u=e.patchService,b=e.deleteStudent,h=e.addNewGuardian,p=Object(m.a)(e,["children","setNewStudent","addStudentId","value","index","newStudent","title","currentStudent","updateCurrentStudent","patchService","deleteStudent","addNewGuardian"]),f=Object($.a)().t,O=null===l,x=Nt(),_=Ee(),g=Ve(),y=Object(o.a)(g,2),v=y[0],w=y[1],k=i.a.useState(!1),C=Object(o.a)(k,2),N=C[0],I=C[1],q=i.a.useContext(Ct),P=function(){var e,t;q.startLoading(),(t=l.id,e=new Promise((function(e,a){_t()({method:"post",url:"".concat(je,"/emails/v1/grantEmail/").concat(t),headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then.apply(e,Object(Z.a)(_({snackbarSuccess:!0}))).finally((function(){q.stopLoading()}))},E=function(){var e,t;q.startLoading(),(t=l.id,e=new Promise((function(e,a){_t()({method:"post",url:"".concat(je,"/emails/v1/enrolmentEmail/").concat(t),headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then.apply(e,Object(Z.a)(_({snackbarSuccess:!0}))).finally((function(){q.stopLoading()}))};return Object(n.jsxs)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:r!==c,id:"full-width-tabpanel-".concat(c),"aria-labelledby":"full-width-tab-".concat(c)},p),{},{children:[Object(n.jsxs)(pt.a,{open:N,onClose:function(e){I(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(ot.a,{id:"alert-dialog-title",children:f("delete_student_question")}),Object(n.jsx)(lt.a,{children:Object(n.jsx)(dt.a,{id:"alert-dialog-description",children:f("student_also_deletes")})}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(Pe.a,{onClick:function(e){I(!1)},color:"primary",children:f("cancel")}),Object(n.jsx)(Pe.a,{onClick:function(e){!function(){var e;(e=ge.delete(l.id)).then.apply(e,Object(Z.a)(_({snackbarSuccess:!0}))).then((function(e){var t,a;(t=ht.deleteMany(l.payments)).then.apply(t,Object(Z.a)(_({}))).then((function(e){})),(a=bt.deleteMany(l.guardians)).then.apply(a,Object(Z.a)(_({}))).then((function(e){})),b(l.id)}))}(l.id),I(!1)},color:"primary",autoFocus:!0,children:f("delete_student")})]})]}),r===c&&Object(n.jsx)(ie.a,{p:3,children:Object(n.jsxs)(ie.a,{px:2,children:[O?!s&&Object(n.jsx)(we,{className:x.actionIcon}):!s&&v([w.guardians,w.post])&&Object(n.jsx)(R.a,{style:{float:"right"},title:f("new_guardian"),"aria-label":f("new_guardian"),children:Object(n.jsx)(S.a,{onClick:function(e){h()},children:Object(n.jsx)(se.a,{})})}),O&&!s?Object(n.jsx)(we,{className:x.actionIcon}):v([w.delete])&&Object(n.jsx)(R.a,{style:{float:"right"},title:f("delete"),"aria-label":f("delete"),children:Object(n.jsx)(S.a,{onClick:function(e){s?t(!1):I(!0)},children:Object(n.jsx)(mt.a,{})})}),Object(n.jsx)(ct,{currentPerson:s?kt:l,newPerson:s,updateCurrentStudent:function(e){if(!s)return d(e);a(e)},patchService:u,onUpdate:function(e){"status"in e&&e.status},additionalValidation:{enrolment_status:ye.f().required(f("status_required")),image_agreement:ye.a().required(f("image_required")),birth_date:ye.b().required(f("birthdate_required"))},additionalFields:[[Object(n.jsx)(Ce,{label:f("price_term"),style:{flex:1},name:"price_term",type:"number",InputProps:{endAdornment:Object(n.jsx)(st.a,{position:"end",children:"\u20ac"})}}),Object(n.jsx)(Ce,{label:f("default_payment_method"),style:{flex:1},name:"default_payment_method",select:!0,children:vt.map((function(e){return Object(n.jsx)(oe.a,{value:e,children:f(e)},e)}))})],Object(n.jsx)(Ce,{label:f("payment_comments"),style:{flex:1},multiline:!0,rowsMax:8,name:"payment_comments"}),[Object(n.jsx)(Ce,{label:f("birthdate"),type:"date",style:{flex:1},name:"birth_date",InputLabelProps:{shrink:!0}}),Object(n.jsx)(Ce,{label:f("years_in_xamfra"),type:"number",style:{flex:1},name:"years_in_xamfra"})],[Object(n.jsx)(Ce,{label:f("status"),style:{flex:1},name:"enrolment_status",select:!0,children:["enrolled","early-unenrolled","pre-enrolled"].map((function(e){return Object(n.jsx)(oe.a,{value:e,children:f(e)},e)}))}),Object(n.jsxs)(Ce,{label:f("image_agreement"),style:{flex:1},name:"image_agreement",select:!0,children:[Object(n.jsx)(oe.a,{value:!0,children:f("yes")}),Object(n.jsx)(oe.a,{value:!1,children:f("no")})]})],Object(n.jsx)(Ce,{label:f("other_comments"),style:{flex:1},multiline:!0,rowsMax:8,name:"other_comments"})]}),!O&&!s&&Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:[x.line,x.composite],children:[!O&&!s&&v([w.send_email])&&Object(n.jsx)(R.a,{style:{flex:1},title:f("send_grant_letter"),"aria-label":f("send_grant_letter"),children:Object(n.jsx)(Pe.a,{variant:"contained",color:"default",className:x.button,disabled:q.loading,startIcon:Object(n.jsx)(Ot.a,{}),onClick:function(e){P()},children:f("grant_letter")})}),!O&&!s&&Object(n.jsx)(R.a,{style:{flex:1},title:f("export_grant_letter"),"aria-label":f("export_grant_letter"),children:Object(n.jsx)(Pe.a,{variant:"contained",color:"default",className:x.button,disabled:q.loading,startIcon:Object(n.jsx)(yt.a,{}),onClick:function(e){var t;q.loading||(q.startLoading(),(t=ge.downloadSubresource(l.id,"grantLetter")).then.apply(t,Object(Z.a)(_({snackbarSuccess:!0}))).finally((function(){q.stopLoading()})))},children:f("grant_letter")})})]}),Object(n.jsxs)(ie.a,{className:[x.line,x.composite],children:[!O&&!s&&v([w.send_email])&&Object(n.jsx)(R.a,{style:{flex:1},title:f("send_enrolment_agreement"),"aria-label":f("enrolment_agreement"),children:Object(n.jsx)(Pe.a,{variant:"contained",color:"default",className:x.button,startIcon:Object(n.jsx)(Ot.a,{}),disabled:q.loading,onClick:function(e){E()},children:f("enrolment_agreement")})}),!O&&!s&&Object(n.jsx)(R.a,{style:{flex:1},title:f("export_enrolment_agreement"),"aria-label":f("export_enrolment_agreement"),children:Object(n.jsx)(Pe.a,{variant:"contained",color:"default",className:x.button,startIcon:Object(n.jsx)(yt.a,{}),disabled:q.loading,onClick:function(e){var t;q.loading||(q.startLoading(),(t=ge.downloadSubresource(l.id,"enrolmentAgreement")).then.apply(t,Object(Z.a)(_({snackbarSuccess:!0}))).finally((function(){q.stopLoading()})))},children:f("enrolment_agreement")})})]})]})})]}))},qt=new(_e("students","guardians")),Tt=["father","mother","grandfather","grandmother","brother","sister","uncle","aunt","cousin","legal_guardian","ss_agent","other"];var Pt=function(e){var t=e.value,a=e.index,c=e.studentId,s=(e.title,e.guardianId),l=e.deleteGuardianId,d=e.addGuardianId,u=e.deleteNewGuardian,b=e.newGuardian,h=void 0!==b&&b,p=Object(m.a)(e,["value","index","studentId","title","guardianId","deleteGuardianId","addGuardianId","deleteNewGuardian","newGuardian"]),f=Object($.a)().t,O=Ee(),x=Object(r.useState)(null),_=Object(o.a)(x,2),g=_[0],y=_[1],v=i.a.useState(!1),w=Object(o.a)(v,2),k=w[0],C=w[1],N=Ve(),I=Object(o.a)(N,2),q=I[0],T=I[1];return Object(r.useEffect)((function(){var e;h||(e=bt.getOne(s)).then.apply(e,Object(Z.a)(O({}))).then((function(e){y(e.data)}))}),[s]),Object(n.jsxs)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:t!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},p),{},{children:[Object(n.jsxs)(pt.a,{open:k,onClose:function(e){C(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(ot.a,{id:"alert-dialog-title",children:f("delete_guardian_question")}),Object(n.jsx)(lt.a,{children:Object(n.jsx)(dt.a,{id:"alert-dialog-description",children:f("action_cant_undone")})}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(Pe.a,{onClick:function(e){C(!1)},color:"primary",children:f("cancel")}),Object(n.jsx)(Pe.a,{onClick:function(e){var t;(t=bt.delete(s)).then.apply(t,Object(Z.a)(O({snackbarSuccess:!0}))).then((function(e){l(s)})),C(!1)},color:"primary",autoFocus:!0,children:f("delete_guardian")})]})]}),t===a&&Object(n.jsx)(ie.a,{p:3,children:Object(n.jsxs)(ie.a,{px:2,children:[q([T.delete])&&Object(n.jsx)(S.a,{style:{float:"right"},onClick:function(e){if(!h)return C(!0);u()},children:Object(n.jsx)(R.a,{title:f("delete"),"aria-label":f("delete"),children:Object(n.jsx)(mt.a,{})})}),Object(n.jsx)(ct,{currentPerson:h?St:g,studentId:c,newPerson:h,updateCurrentStudent:function(e){var t;if(!h)return y(e);(t=qt.postWithId(c,e)).then.apply(t,Object(Z.a)(O({snackbarSuccess:!0}))).then((function(){d(e)}))},patchService:bt,additionalValidation:{relation:ye.f().required(f("relation_required"))},additionalFields:[[Object(n.jsxs)(Ce,{label:f("relation"),style:{flex:1},name:"relation",select:!0,children:[Tt.map((function(e){return Object(n.jsx)(oe.a,{value:e,children:f(e)},e)})),"))}"]})]]})]})})]}))},Et=a(69),Dt=a(261),Rt=a.n(Dt),Bt=a(260),At=a.n(Bt),Lt=a(198),Ft=a.n(Lt),Mt=a(542),Gt=a(543),zt=a(545),Ut=a(544),Vt=a(527),Wt=a(570),Ht=a(259),Kt=a.n(Ht),Xt=a(176),Yt=a.n(Xt),Jt=Object(g.a)((function(e){return{root:{maxWidth:"100%",backgroundColor:"dark"===e.palette.type?"#575757":null},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:e.palette.secondary.main},line:{width:"100%",marginTop:e.spacing(1)},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"}}}));function Zt(e){var t=e.payment,a=e.updatePayment,r=e.deletePayment,c=e.newPayment,s=void 0!==c&&c,l=e.addPaymentId,d=e.student_id,u=Object($.a)().t,b=Jt(),h=i.a.useState(s),p=Object(o.a)(h,2),m=p[0],f=p[1],O=Ee(),x=Ve(),g=Object(o.a)(x,2),y=g[0],v=g[1],k=i.a.useContext(Ct),C=Re(!s,{initialValues:t,validationSchema:ye.d({method:rt(u,vt),quantity:ye.c().required(u("import_required")),date:ye.b().required(u("date_required"))}),enableReinitialize:!0,onSubmit:function(e,n){var r,i,c=n.setStatus,o=n.setSubmitting;Object.keys(e).length>0?(c(),s?(r=ht.post(Object(j.a)(Object(j.a)({},e),{},{student_id:d}))).then.apply(r,Object(Z.a)(O({snackbarSuccess:!0}))).then((function(e){l(e.id)})).catch((function(e){c(!0)})).finally((function(){o(!1)})):(i=ht.patch({id:t.id,body:e,initial_values:t})).then.apply(i,Object(Z.a)(O({snackbarSuccess:!0}))).then((function(e){C.resetForm(e),a(e.id,e)})).catch((function(e){c(!0)})).finally((function(){o(!1)}))):o(!1)}});return Object(n.jsx)(ie.a,{my:2,children:Object(n.jsxs)(Mt.a,{className:b.root,children:[Object(n.jsx)(Gt.a,{avatar:Object(n.jsx)(R.a,{title:"cash"===t.method?u("has_paid_cash"):"bank-transfer"===t.method?u("tooltip-bank-transfer"):"bank-direct-debit"===t.method?u("tooltip-bank-direct-debit"):u("other-payment-method"),children:Object(n.jsx)(Wt.a,{"aria-label":"recipe",className:b.avatar,children:"cash"===t.method?Object(n.jsx)(Kt.a,{}):"bank-transfer"===t.method?Object(n.jsx)(At.a,{}):"bank-direct-debit"===t.method?Object(n.jsx)(X.a,{}):Object(n.jsx)(Rt.a,{})})}),action:y([v.delete])&&Object(n.jsx)(R.a,{title:u("delete"),"aria-label":u("delete"),children:Object(n.jsx)(S.a,{onClick:function(e){r(t.id)},children:Object(n.jsx)(mt.a,{})})}),title:s?u("new_payment"):"".concat(u("has_paid")," ").concat(t.quantity,"\u20ac"),subheader:t.date}),!s&&Object(n.jsxs)(Ut.a,{disableSpacing:!0,children:[y([v.paymentReceipts])&&Object(n.jsx)(R.a,{title:u("export_receipt"),"aria-label":u("export_receipt"),children:Object(n.jsx)(S.a,{disabled:k.loading,"aria-label":u("export_receipt"),onClick:function(e){var a;k.startLoading(),(a=ht.downloadSubresource(t.id,"receipt")).then.apply(a,Object(Z.a)(O({snackbarSuccess:!0}))).finally((function(){k.stopLoading()}))},children:Object(n.jsx)(Ft.a,{})})}),y([v.paymentReceipts,v.send_email])&&Object(n.jsx)(R.a,{title:u("send_receipt"),"aria-label":u("send_receipt"),children:Object(n.jsx)(S.a,{disabled:k.loading,"aria-label":u("send_receipt"),onClick:function(e){var a,n;k.startLoading(),(n=t.id,a=new Promise((function(e,t){_t()({method:"post",url:"".concat(je,"/emails/v1/paymentReceipt/").concat(n),headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(t){e(t)})).catch((function(e){t(e)}))}))).then.apply(a,Object(Z.a)(O({snackbarSuccess:!0}))).finally((function(){k.stopLoading()}))},children:Object(n.jsx)(Ot.a,{})})}),Object(n.jsx)(S.a,{className:Object(w.a)(b.expand,Object(_.a)({},b.expandOpen,m)),onClick:function(){f(!m)},"aria-expanded":m,"aria-label":"show more",children:Object(n.jsx)(Yt.a,{})})]}),Object(n.jsx)(Vt.a,{in:m,timeout:"auto",unmountOnExit:!0,children:Object(n.jsx)(zt.a,{children:Object(n.jsx)(ie.a,{children:null===t?Object(n.jsx)(ie.a,{children:["100%","100%","100%"].map((function(e,t){return Object(n.jsx)(ie.a,{py:0,children:Object(n.jsx)(ve.a,{variant:"text",width:e,height:"60px"})},t)}))}):Object(n.jsxs)("form",{onSubmit:C.handleSubmit,children:[Object(n.jsx)(Ce,{label:u("id"),name:"id",disabled:!0,className:b.line,formik:C}),Object(n.jsxs)(ie.a,{className:[b.line,b.composite],children:[Object(n.jsx)(Ce,{label:u("method"),style:{flex:1},formik:C,name:"method",select:!0,children:vt.map((function(e){return Object(n.jsx)(oe.a,{value:e,children:u(e)},e)}))}),Object(n.jsx)(Ce,{label:u("import"),formik:C,type:"number",style:{flex:1},name:"quantity",InputProps:{endAdornment:Object(n.jsx)(st.a,{position:"end",children:"\u20ac"})}}),Object(n.jsx)(Ce,{label:u("date"),formik:C,type:"date",style:{flex:1},name:"date",InputLabelProps:{shrink:!0}})]}),Object(n.jsx)(ie.a,{className:[b.line,b.composite],children:Object(n.jsx)(Ce,{label:u("concept"),formik:C,style:{flex:1},multiline:!0,rowsMax:8,name:"concept"})}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(Pe.a,{type:"button",className:"outline",onClick:C.handleReset,disabled:!C.dirty||C.isSubmitting,children:u("reset")}),y([v.patch])&&Object(n.jsx)(Pe.a,{type:"submit",disabled:!C.dirty||C.isSubmitting,children:u(s?"create":"save")})]})]})})})})]})})}var Qt=a(95),$t=a.n(Qt),ea=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear();return{id:null,date:"".concat(n,"-").concat(a<=9?"0"+a:a,"-").concat(t<=9?"0"+t:t),quantity:null,concept:null,method:null}},ta=Object(g.a)((function(e){return{actionIcon:{float:"right"},newLine:{width:"100%",marginTop:e.spacing(1),display:"flex",flexDirection:"column"}}}));var aa=function(e){e.children;var t=e.value,a=e.index,i=(e.title,e.paymentIds),c=e.deletePaymentFromStudent,s=e.addPaymentId,l=e.student_id,d=Object(m.a)(e,["children","value","index","title","paymentIds","deletePaymentFromStudent","addPaymentId","student_id"]),u=Object($.a)().t,b=ta(),h=Ee(),p=null===i,f=Object(r.useState)([]),O=Object(o.a)(f,2),x=O[0],_=O[1],g=Object(r.useState)(!1),y=Object(o.a)(g,2),v=y[0],w=y[1];Object(r.useEffect)((function(){w(!1)}),[x]);var k=function(e,t){_(x.map((function(a){return a.id!==e?a:t})))},C=Ve(),N=Object(o.a)(C,2),I=N[0],q=N[1],T=function(e){var t;(t=ht.delete(e)).then.apply(t,Object(Z.a)(h({snackbarSuccess:!0}))).then((function(t){c(e)}))};return Object(r.useEffect)((function(){var e;null!==i&&(0===i.length?_([]):(e=ht.getMany(i)).then.apply(e,Object(Z.a)(h({}))).then((function(e){_(e.map((function(e){return e.data})).sort((function(e,t){return e.date.localeCompare(t.date)})))})))}),[i]),Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:t!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},d),{},{children:t===a&&Object(n.jsxs)(ie.a,{p:3,children:["  "," ",Object(n.jsxs)(ie.a,{px:2,children:[p?Object(n.jsx)(we,{className:b.actionIcon}):I([q.post])&&Object(n.jsx)(R.a,{className:b.actionIcon,title:u("new_payment"),"aria-label":u("new_payment"),children:Object(n.jsx)(S.a,{onClick:function(e){w(!0)},children:Object(n.jsx)($t.a,{})})}),Object(n.jsxs)("div",{className:b.newLine,children:[x&&x.map((function(e){return Object(n.jsx)(Zt,{payment:e,updatePayment:k,deletePayment:T},e.id)})),v&&Object(n.jsx)(Zt,{payment:ea(),updatePayment:k,deletePayment:function(e){w(!1)},newPayment:!0,student_id:l,addPaymentId:s}),p&&Object(n.jsx)(ve.a,{width:"100%",height:"250px"}),!p&&0===x.length&&!v&&Object(n.jsx)(Et.a,{children:u("no_payments")})]})]})]})}))},na=a(40),ra=a(42),ia=new(_e("students","courses")),ca=new(_e("courses")),sa=a(490),oa=a(549),la=a(547),da=a(575),ua=a(262),ba=a.n(ua),ha=Object(g.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10}}}));function pa(e){var t=e.label,a=e.searchTitle,r=e.onChange,i=e.onSearch,c=ha(),s=Object($.a)().t;return Object(n.jsxs)(ee.a,{className:c.root,children:[Object(n.jsx)(da.a,{className:c.input,placeholder:s("search")+" "+t,inputProps:{"aria-label":"search "+t},value:a,onChange:r,onKeyPress:function(e){"Enter"===e.key&&(i(),e.preventDefault())}}),Object(n.jsx)(S.a,{type:"submit",className:c.iconButton,"aria-label":"search",onClick:i,children:Object(n.jsx)(ba.a,{})})]})}var ja=a(566),ma=i.a.forwardRef((function(e,t){return Object(n.jsx)(sa.a,Object(j.a)({direction:"up",ref:t},e))})),fa=Object(g.a)((function(e){return{list:{overflow:"auto",display:"flex",flexDirection:"column",flex:1},box:{display:"flex",flexDirection:"column"},pagination:{margin:"30px"},appBar:{position:"relative"},newLine:{width:"100%",marginTop:e.spacing(1),display:"flex",flexDirection:"column"},title:{marginLeft:e.spacing(2),flex:1},actionIcon:{float:"right"}}})),Oa=function(e){Object(na.a)(a,e);var t=Object(ra.a)(a);function a(){return Object(le.a)(this,a),t.apply(this,arguments)}return Object(de.a)(a,[{key:"render",value:function(){return null}}]),a}(i.a.Component);var xa=function(e){e.children;var t=e.history,a=e.value,i=e.dataService,c=e.index,s=(e.title,e.courseIds),l=e.deleteCourseFromStudent,d=e.addCourseId,u=e.student_id,b=Object(m.a)(e,["children","history","value","dataService","index","title","courseIds","deleteCourseFromStudent","addCourseId","student_id"]),h=Object($.a)().t,p=fa(),f=Ee(),O=null===s,x=Object(r.useState)([]),_=Object(o.a)(x,2),g=_[0],y=_[1],w=Object(r.useState)(null),k=Object(o.a)(w,2),C=k[0],N=k[1],I=Object(r.useState)(!1),q=Object(o.a)(I,2),D=q[0],A=q[1],L=function(){A(!1)};Object(r.useEffect)((function(){A(!1)}),[g]);var F=Object(r.useState)(""),M=Object(o.a)(F,2),G=M[0],z=M[1],U=Object(r.useState)(1),V=Object(o.a)(U,2),W=V[0],H=V[1],K=Object(r.useState)(0),X=Object(o.a)(K,2),Y=X[0],J=X[1];function Q(){var e;!O&&D&&(e=ca.getAll({name:"name",value:G},W,["name","description","id"])).then.apply(e,Object(Z.a)(f({}))).then((function(e){N(e.data.filter((function(e){return!s.includes(e.id)}))),J(e._pagination.totalPages)}))}Object(r.useEffect)(Q,[W,N,O,D]);var ee=Ve(),te=Object(o.a)(ee,2),ae=te[0],ne=te[1];return Object(r.useEffect)((function(){var e;null!==s&&(0===s.length?y([]):(e=ca.getMany(s)).then.apply(e,Object(Z.a)(f({}))).then((function(e){y(e.map((function(e){return e.data})))})))}),[s]),Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:a!==c,id:"full-width-tabpanel-".concat(c),"aria-labelledby":"full-width-tab-".concat(c)},b),{},{children:a===c&&Object(n.jsxs)(ie.a,{p:3,children:["  "," ",Object(n.jsxs)(ie.a,{px:2,children:[Object(n.jsxs)(pt.a,{fullScreen:!0,open:D,onClose:L,TransitionComponent:ma,children:[Object(n.jsx)(v.a,{className:p.appBar,color:"secondary",children:Object(n.jsxs)(la.a,{children:[Object(n.jsx)(S.a,{edge:"start",color:"inherit",onClick:L,"aria-label":"close",children:Object(n.jsx)(Oa,{})}),Object(n.jsx)(Et.a,{variant:"h6",className:p.title,children:h("enroll_to_course")}),Object(n.jsx)(Pe.a,{autoFocus:!0,color:"inherit",onClick:L,children:h("cancel")})]})}),Object(n.jsxs)(ie.a,{className:p.box,m:3,children:[Object(n.jsx)(pa,{label:h("courses"),value:G,onChange:function(e){z(e.target.value)},onSearch:Q}),Object(n.jsx)(ie.a,{my:2,children:Object(n.jsx)(ja.a,{className:p.pagination,count:Y,page:W,size:"small",showFirstButton:!0,showLastButton:!0,siblingCount:1,boundaryCount:1,color:"primary",onChange:function(e,t){H(t)}})}),Object(n.jsx)(P.a,{className:p.list,children:C&&C.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(E.a,{button:!0,onClick:function(){var t;window.confirm(h("confirm_enroll_to_course"))&&(t=i.postWithId(u,e.id)).then.apply(t,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(t){d(e.id),L()}))},children:Object(n.jsx)(B.a,{id:"name",primary:e.name,secondary:e.description})},e.id),Object(n.jsx)(T.a,{})]},e.id)}))})]})]}),O?Object(n.jsx)(we,{className:p.actionIcon}):ae([ne.post])&&Object(n.jsx)(R.a,{className:p.actionIcon,title:h("enroll_to_course"),"aria-label":h("new_payment"),children:Object(n.jsx)(S.a,{onClick:function(e){null===C&&Q(),A(!0)},children:Object(n.jsx)($t.a,{})})}),Object(n.jsxs)("div",{className:p.newLine,children:[Object(n.jsx)(P.a,{className:p.list,children:g&&g.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsxs)(E.a,{button:!0,onClick:function(a){t.push("/courses?id="+e.id)},children:[Object(n.jsx)(B.a,{id:"name",primary:e.name,secondary:e.description}),ae([ne.delete])&&Object(n.jsx)(oa.a,{children:Object(n.jsx)(S.a,{onClick:function(t){window.confirm(h("confirm_unenroll_to_course"))&&function(e){var t;(t=i.delete(u,e)).then.apply(t,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(t){l(e)}))}(e.id)},children:Object(n.jsx)(mt.a,{})})})]},e.id),Object(n.jsx)(T.a,{})]},e.id)}))}),O&&Object(n.jsx)(ve.a,{width:"100%",height:"250px"}),!O&&0===g.length&&!D&&Object(n.jsx)(Et.a,{children:h("no_courses")})]})]})]})}))},_a=new(_e("schedules")),ga=a(49),ya=a(263),va=a(287),wa=a(286),Sa=a(285),ka=a(289);function Ca(){var e=Object(ya.a)(["\n      .fc-button, .fc-button.fc-button-primary {\n        background: ",";\n        color: ",";\n        border-color: ",";\n        background-image: none;\n    }\n    .fc-button:enabled:hover {\n        background: ",";\n        color: ",";\n        border-color: ",";\n        background-image: none;\n    }\n    "]);return Ca=function(){return e},e}Object(g.a)((function(e){return{button:{margin:e.spacing(1)},calendar:{margin:e.spacing(2)}}}));var Na=function(e,t){return{daysOfWeek:[t.day_week],title:t.course.name,groupId:[t.id],startTime:t.start_time,endTime:t.end_time,color:t.is_base?e.palette.secondary.main:e.palette.secondary.light,textColor:(t.is_base,e.palette.secondary.contrastText),extendedProps:{schedule:t}}};var Ia=function(e){var t=e.snapDuration,a=void 0===t?"00:15":t,i=e.scheduleIds,c=e.onEventClick,s=e.onEventResize,l=e.onEventDrop,d=e.editable,u=void 0!==d&&d,b=(Object(m.a)(e,["snapDuration","scheduleIds","onEventClick","onEventResize","onEventDrop","editable"]),Ee()),h=Object(ga.a)(),p=Sa.a.div(Ca(),h.palette.primary.main,h.palette.primary.contrastText,h.palette.primary.main,h.palette.primary.dark,h.palette.primary.contrastText,h.palette.primary.dark),j=Object(r.useState)(null),f=Object(o.a)(j,2),O=f[0],x=f[1],_=null===i;Object(r.useEffect)((function(){var e;null!==i&&(0===i.length?x([]):(e=_a.getMany(i)).then.apply(e,Object(Z.a)(b({}))).then((function(e){x(e.map((function(e){return e.data})).map((function(e){return Na(h,e)})))})))}),[i,h]);var g=function(e,t){return e(t,t.event.start.getDay(),t.event.start.toLocaleTimeString("en-US",{hour12:!1}),t.event.end.toLocaleTimeString("en-US",{hour12:!1}),t.event.extendedProps.schedule)};return Object(n.jsx)(ie.a,{p:2,style:{height:"100%"},children:_?Object(n.jsx)(ve.a,{variant:"rect",width:"100%",height:"100%"}):Object(n.jsx)(p,{style:{height:"100%"},children:Object(n.jsx)(va.a,{plugins:[wa.a,ka.a],initialView:"timeGridWeek",height:"100%",firstDay:1,editable:u,buttonText:{prev:"<",next:">",prevYear:"<<",nextYear:">>",today:"today",month:"month",week:"week",day:"day"},selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,snapDuration:a,events:O,eventAdd:function(){},eventChange:function(e){},eventRemove:function(){},select:function(e){},eventContent:function(){},eventClick:c,eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},eventResize:function(e){return g(s,e)},eventDrop:function(e){return g(l,e)}})})})},qa=Object(g.a)((function(e){return{button:{margin:e.spacing(1)},calendar:{margin:e.spacing(2)}}}));var Ta=function(e){var t=e.value,a=e.index,r=(e.title,e.scheduleIds),i=e.student_id,c=Object(m.a)(e,["value","index","title","scheduleIds","student_id"]),s=Object($.a)().t,o=qa(),l=Object(p.b)(),d=l.enqueueSnackbar,u=(l.closeSnackbar,Ee()),b=Object(ga.a)(),h=function(e,t,a,n,r){var c,s,o=e.event,l={};(l.day_week=t,l.start_time=a,l.end_time=n,r.is_base)?(l.course_id=r.course_id,l.student_id=i,l.is_base=!1,(c=_a.post(l)).then.apply(c,Object(Z.a)(u({errorOut:!0,snackbarSuccess:!0}))).then((function(t){var a=e.view.calendar;o.is_base=!0,a.addEvent(Na(b,t)),e.revert()})).catch((function(t){e.revert()}))):(s=_a.patch({id:r.id,body:l,initial_values:r})).then.apply(s,Object(Z.a)(u({errorOut:!0,snackbarSuccess:!0}))).then((function(e){})).catch((function(t){e.revert()}))};return Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",className:o.root,hidden:t!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},c),{},{style:{height:"100%",flex:1,minHeight:"70vh"},children:Object(n.jsx)(Ia,{onEventClick:function(e){var t,a=e.event.extendedProps.schedule;if(!0===a.is_base)return d(s("cant_remove_schedule"),{variant:"warning"});window.confirm(s("sure_delete_event"))&&(t=_a.delete(a.id)).then.apply(t,Object(Z.a)(u({snackbarSuccess:!0}))).then((function(t){e.event.remove()}))},onEventDrop:h,onEventResize:h,scheduleIds:r,editable:!0})}))},Pa=Object(g.a)((function(e){return{contentPanel:{position:"relative",overflow:"auto",boxSizing:"border-box",height:"100%",display:"flex",flexDirection:"column"},content:{overflowX:"hidden",display:"flex",flexDirection:"column",overflowY:"auto",flex:1,height:"100%"},tab:{height:"100%"}}}));function Ea(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}function Da(e){var t=e.setNewStudent,a=e.newStudent,c=e.addStudentId,s=e.currentStudentId,l=e.deleteStudent,d=Object(m.a)(e,["setNewStudent","newStudent","addStudentId","currentStudentId","deleteStudent"]),u=null===s,b=Ee(),h=Object(r.useState)(null),p=Object(o.a)(h,2),f=p[0],O=p[1],x=Object(r.useState)(!1),_=Object(o.a)(x,2),g=_[0],y=_[1],w=Ve(),S=Object(o.a)(w,2),k=S[0],C=S[1];Object(r.useEffect)((function(){var e;if(u)return O(null);(e=ge.getOne(s)).then.apply(e,Object(Z.a)(b({}))).then((function(e){O(e.data)}))}),[s]);var N=Pa(),I=L()(),q=Object($.a)().t,T=i.a.useState(0),P=Object(o.a)(T,2),E=P[0],D=P[1];Object(r.useEffect)((function(){D(0)}),[s]);var R=null===f?[]:f.guardians;return Object(n.jsxs)(ee.a,{elevation:3,square:!0,className:N.contentPanel,children:[Object(n.jsx)(v.a,{position:"static",color:"default",children:Object(n.jsxs)(ne.a,{value:E,onChange:function(e,t){D(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"on",children:[Object(n.jsx)(re.a,Object(j.a)({label:q("attendee")},Ea(0))),!a&&k([C.schedules])&&Object(n.jsx)(re.a,Object(j.a)({label:q("schedules")},Ea(1))),!a&&k([C.payments])&&Object(n.jsx)(re.a,Object(j.a)({label:q("payments")},Ea(2))),!a&&k([C.courses])&&Object(n.jsx)(re.a,Object(j.a)({label:q("courses")},Ea(3))),!a&&R&&k([C.guardians])&&R.map((function(e,t){return Object(n.jsx)(re.a,Object(j.a)({label:q("contact")+" "+(t+1)},Ea(t+4)),q("contact")+" "+(t+1))})),!a&&g&&Object(n.jsx)(re.a,Object(j.a)({label:q("new_guardian")},Ea(4+R.length)),q("new_guardian"))]})}),Object(n.jsxs)(ae.a,{axis:"rtl"===I.direction?"x-reverse":"x",index:E,containerStyle:{height:"100%"},className:N.content,onChangeIndex:function(e){D(e)},children:[Object(n.jsx)(It,{value:E,index:0,setNewStudent:t,dir:I.direction,newStudent:a,title:q("attendee"),currentStudent:f,addStudentId:c,patchService:ge,updateCurrentStudent:O,deleteStudent:l,addNewGuardian:function(){y(!0),D(4+R.length)}}),k([C.schedules])&&Object(n.jsx)(Ta,{value:E,index:1,className:N.tab,dir:I.direction,title:q("attendee"),scheduleIds:null===f?null:f.schedules,student_id:s}),k([C.payments])&&Object(n.jsx)(aa,{value:E,index:2,paymentIds:null===f?null:f.payments,addPaymentId:function(e){O(Object(j.a)(Object(j.a)({},f),{},{payments:[].concat(Object(Z.a)(f.payments),[e])}))},student_id:s,deletePaymentFromStudent:function(e){O(Object(j.a)(Object(j.a)({},f),{},{payments:f.payments.filter((function(t){return t!==e}))}))}}),k([C.courses])&&Object(n.jsx)(xa,{value:E,index:3,dataService:ia,history:d.history,courseIds:null===f?null:f.courses,addCourseId:function(e){O(Object(j.a)(Object(j.a)({},f),{},{courses:[].concat(Object(Z.a)(f.courses),[e])}))},student_id:s,deleteCourseFromStudent:function(e){O(Object(j.a)(Object(j.a)({},f),{},{courses:f.courses.filter((function(t){return t!==e}))}))}}),R&&k([C.guardians])&&R.map((function(e,t){return Object(n.jsx)(Pt,{value:E,index:t+4,dir:I.direction,guardianId:e,deleteGuardianId:function(e){O(Object(j.a)(Object(j.a)({},f),{},{guardians:f.guardians.filter((function(t){return t!==e}))})),D(0)}},e)})),Object(n.jsx)(Pt,{value:E,index:4+R.length,dir:I.direction,newGuardian:!0,deleteNewGuardian:function(){y(!1),D(0)},studentId:s,addGuardianId:function(e){y(!1),O(Object(j.a)(Object(j.a)({},f),{},{guardians:[].concat(Object(Z.a)(f.guardians),[e])})),D(4+R.length)},deleteGuardianId:function(e){O(Object(j.a)(Object(j.a)({},f),{},{guardians:f.guardians.filter((function(t){return t!==e}))})),D(0)}})]})]})}var Ra=a(556),Ba=a(96),Aa=a.n(Ba),La=a(572),Fa=a(554),Ma=a(264),Ga=a.n(Ma),za=a(573),Ua=a(552),Va=a(553),Wa=i.a.createContext({theme:null,switchTheme:function(){},label:null}),Ha=Object(g.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",flexWrap:"wrap"}}}));function Ka(e){var t=e.searchTermField,a=void 0===t?"full_name":t,r=e.searchTerm,c=void 0===r?null:r,s=e.page,o=void 0===s?null:s,l=e.dataService,d=e.exportAll,u=void 0!==d&&d,b=e.getFilters,h=void 0===b?null:b,p=(Ha(),Object($.a)().t),j=Ee(),m=i.a.useContext(Ct);return Object(n.jsx)(R.a,{title:p(u?"export_all_csv":"export_results_csv"),"aria-label":p(u?"export_all_csv":"export_results_csv"),children:Object(n.jsx)(La.a,{variant:"outlined",color:"primary",size:"small",disabled:m.loading,avatar:Object(n.jsx)(Wt.a,{children:"csv"}),label:p(u?"export_all":"export"),onClick:function(){var e;m.loading||(m.startLoading(),(e=l.downloadCsv(a,c,u?"*":o,null===h?{}:h(),u)).then.apply(e,Object(Z.a)(j({}))).finally((function(){m.stopLoading()})))}})})}var Xa=Ga()((function(e){return{root:{flex:1,overflow:"auto",display:"flex",flexDirection:"column"},list:{overflow:"auto",display:"flex",flexDirection:"column",flex:1,minHeight:"150px"},searchAndFilters:{display:"flex",flexDirection:"column"},pagination:{margin:e.spacing(3)},chip:{margin:e.spacing(2)},avatar:{},selectedAvatar:{backgroundColor:e.palette.primary.dark},chips:{flexWrap:"wrap","& > *":{margin:e.spacing(.5)},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}}})),Ya=function(e){var t=e.setCurrentItemId,a=e.chips,c=void 0===a?[]:a,s=e.currentItemId,l=e.items,d=e.setItems,u=e.displayNameField,b=void 0===u?"full_name":u,h=e.usableFilters,p=void 0===h?[]:h,m=e.defaultSearchBy,f=void 0===m?"full_name":m,O=e.searchByOptions,x=void 0===O?["full_name"]:O,g=e.dataService,y=e.searchBarLabel,v=e.exportPage,w=void 0===v||v,k=e.exportItem,C=void 0===k||k,N=e.exportAllPages,I=void 0===N||N,q=Object(r.useState)(""),D=Object(o.a)(q,2),A=D[0],L=D[1],F=Object(r.useState)(p.reduce((function(e,t){return e[t.name]=t.initialValue,e}),{})),M=Object(o.a)(F,2),G=M[0],z=M[1],U=Object(r.useState)(f),V=Object(o.a)(U,2),W=V[0],H=V[1],K=Object($.a)().t,X=Object(r.useState)(1),Y=Object(o.a)(X,2),J=Y[0],Q=Y[1],ee=Object(r.useState)(0),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],re=Ee(),ce=Xa();function se(){return Object.fromEntries(Object.entries(G).filter((function(e){var t=Object(o.a)(e,2);t[0];return null!==t[1]})))}function oe(){var e;(e=g.getAll({name:W,value:A},J,Object(Z.a)(new Set(["id",b])),se())).then.apply(e,Object(Z.a)(re({}))).then((function(e){d(e.data),ne(e._pagination.totalPages)}))}Object(r.useEffect)((function(){1===J?oe():Q(1)}),[G]),Object(r.useEffect)(oe,[J,W]);return Object(n.jsxs)(ie.a,{className:ce.root,children:[Object(n.jsxs)(ie.a,{className:ce.searchAndFilters,children:[Object(n.jsx)(pa,{label:K(y),value:A,onChange:function(e){L(e.target.value)},onSearch:function(){1===J?oe():Q(1)}}),Object(n.jsxs)(za.a,{children:[Object(n.jsx)(Ua.a,{expandIcon:Object(n.jsx)(Yt.a,{}),children:Object(n.jsx)(Et.a,{className:ce.heading,children:K("filters_actions")})}),Object(n.jsx)(Va.a,{children:Object(n.jsxs)(ie.a,{className:ce.chips,children:[w&&Array.isArray(l)&&l.length>0&&Object(n.jsx)(Ka,{searchTerm:A,page:J,searchTermField:W,dataService:g,getFilters:se}),I&&Array.isArray(l)&&l.length>0&&Object(n.jsx)(Ka,{searchTerm:A,page:J,dataService:g,searchTermField:W,exportAll:!0,getFilters:se}),c.map((function(e){return e})),"\xb7",x.map((function(e){return Object(n.jsx)(R.a,{title:"".concat(K("search_by")," ").concat(K(e)),children:Object(n.jsx)(La.a,{size:"small",color:W===e?"primary":"default",label:"".concat(K("search_by")," ").concat(K(e)),onClick:function(t){H(W===e?f:e)}})},e)})),p.map((function(e){return Object(n.jsxs)(i.a.Fragment,{children:["\xb7 ",e.options.map((function(t){return Object(n.jsx)(R.a,{title:K(t.tooltip),"aria-label":K(t.tooltip),children:Object(n.jsx)(La.a,{size:"small",color:G[e.name]===t.name?"primary":"default",label:K(t.label),onClick:function(a){z(Object(j.a)(Object(j.a)({},G),{},Object(_.a)({},e.name,G[e.name]===t.name?null:t.name)))}})},e.name+t.name)}))]})}))]})})]}),Object(n.jsx)(ie.a,{my:2,children:Object(n.jsx)(ja.a,{className:"pagination",count:ae,page:J,size:"small",showFirstButton:!0,showLastButton:!0,siblingCount:1,boundaryCount:1,color:"primary",onChange:function(e,t){Q(t)}})})]}),Object(n.jsx)(P.a,{className:ce.list,children:l&&l.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsxs)(E.a,{button:!0,onClick:function(){console.log(e.id),t(e.id)},children:[Object(n.jsx)(Fa.a,{children:Object(n.jsx)(Wt.a,{className:e.id===s?ce.selectedAvatar:ce.avatar,children:e[b].charAt(0).toUpperCase()})}),Object(n.jsx)(B.a,{id:"name",primary:e[b]}),C&&Object(n.jsx)(oa.a,{children:Object(n.jsx)(R.a,{title:K("export")+" .csv",children:Object(n.jsx)(S.a,{edge:"end","aria-label":K("export"),onClick:function(t){var a;(a=g.downloadOneCsv(e.id)).then.apply(a,Object(Z.a)(re({})))},children:Object(n.jsx)(yt.a,{})})})})]},e.id),Object(n.jsx)(T.a,{})]},e.id)}))})]})},Ja=Object(g.a)((function(e){return{root:{height:"100%"},left:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));var Za={inviteUser:function(e,t){return new Promise((function(a,n){_t()({url:"".concat(je,"/invites/v1/userInvite"),method:"POST",headers:Object(j.a)(Object(j.a)({},{"Cache-Control":"no-cache"}),he()),data:{userEmail:e,needs:t}}).then((function(e){a(!0)})).catch((function(e){n(e)}))}))}};var Qa=new(_e("users")),$a=Object(g.a)((function(e){return{actionIcon:{float:"right"},button:{margin:e.spacing(1)},line:{width:"100%",marginTop:e.spacing(1)},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"}}}));var en=function(e){e.children,e.addStudentId;var t=e.value,a=e.index,r=(e.newStudent,e.title,e.currentStudent),c=e.updateCurrentStudent,s=(e.patchService,e.deleteStudent),l=(e.addNewGuardian,Object(m.a)(e,["children","addStudentId","value","index","newStudent","title","currentStudent","updateCurrentStudent","patchService","deleteStudent","addNewGuardian"])),d=Object($.a)().t,u=null===r,b=$a(),h=Ee(),p=i.a.useState(!1),f=Object(o.a)(p,2),O=f[0],x=f[1],_=u?{}:r,g=Re(!0,{initialValues:_,validationSchema:ye.d({email:nt,name:ye.f().required(d("name_required"))}),enableReinitialize:!0,onSubmit:function(e,t){var a,n=t.setStatus,r=t.setSubmitting;Object.keys(e).length>0?(n(),(a=Qa.patch({id:_.id,body:e,initial_values:_})).then.apply(a,Object(Z.a)(h({snackbarSuccess:!0}))).then((function(e){g.resetForm(e),c(e)})).catch((function(e){n(!0)})).finally((function(){r(!1)}))):r(!1)}}),y=Ve(),v=Object(o.a)(y,2),w=v[0],k=v[1];return Object(n.jsxs)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:t!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},l),{},{children:[Object(n.jsxs)(pt.a,{open:O,onClose:function(e){x(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(ot.a,{id:"alert-dialog-title",children:d("delete_user_question")}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(Pe.a,{onClick:function(e){x(!1)},color:"primary",children:d("cancel")}),Object(n.jsx)(Pe.a,{onClick:function(e){!function(){var e;(e=Qa.delete(r.id)).then.apply(e,Object(Z.a)(h({snackbarSuccess:!0}))).then((function(e){s(r.id)}))}(r.id),x(!1)},color:"primary",autoFocus:!0,children:d("delete_user")})]})]}),t===a&&Object(n.jsx)(ie.a,{p:3,children:Object(n.jsxs)(ie.a,{px:2,children:[u?Object(n.jsx)(we,{className:b.actionIcon}):w([k.delete])&&Object(n.jsx)(R.a,{style:{float:"right"},title:d("delete"),"aria-label":d("delete"),children:Object(n.jsx)(S.a,{onClick:function(e){x(!0)},children:Object(n.jsx)(mt.a,{})})}),u?Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(we,{className:b.actionIcon}),Object(n.jsx)(we,{className:b.actionIcon}),Object(n.jsx)("div",{style:{clear:"both"},children:["100%","100%","100%"].map((function(e,t){return Object(n.jsx)(ie.a,{py:0,children:Object(n.jsx)(ve.a,{variant:"text",width:e,height:"60px"})},t)}))})]}):Object(n.jsxs)("form",{onSubmit:g.handleSubmit,children:[Object(n.jsx)(Me,{className:b.actionIcon,formik:g}),Object(n.jsx)(We,{className:b.actionIcon,formik:g}),Object(n.jsx)(Ce,{label:d("id"),name:"id",disabled:!0,className:b.line,formik:g}),Object(n.jsxs)(ie.a,{className:[b.line,b.composite],children:[Object(n.jsx)(Ce,{label:d("name"),style:{flex:1},name:"name",formik:g}),Object(n.jsx)(Ce,{label:d("surname1"),style:{flex:1},name:"surname1",formik:g}),Object(n.jsx)(Ce,{label:d("surname2"),style:{flex:1},formik:g,name:"surname2"})]}),Object(n.jsx)(ie.a,{className:[b.line,b.composite],children:Object(n.jsx)(Ce,{label:d("email"),type:"email",style:{flex:1},formik:g,name:"email",helperText:g.touched.email&&g.errors.email})})]})]})})]}))},tn=new(_e("users","needs")),an=a(557),nn=a(568),rn=Object(g.a)((function(e){return Object(y.a)({root:function(t){return{color:t?e.palette.neutral.status.dirty:e.palette.neutral.emphasisText.medium,"&.Mui-checked":{color:t?e.palette.neutral.status.dirty:e.palette.primary.main}}}})})),cn=function(e){var t=e.name,a=e.value,r=e.formik,i=e.noDirty,c=void 0!==i&&i,s=Object(m.a)(e,["name","value","formik","noDirty"]),o=!0!==c&&(void 0!==r.values[t]&&void 0!==r.initialValues[t]&&r.values[t].includes(a)!==r.initialValues[t].includes(a)),l=rn(o);return Object(n.jsx)(nn.a,Object(j.a)({name:t,className:l.root,value:a,onChange:r.handleChange,onBlur:r.handleBlur,error:r.status||void 0!==r.errors[t],helperText:r.touched[t]&&r.errors[t],checked:r.values[t]},s))};function sn(e){var t=e.formik,a=e.name,r=void 0===a?"needs":a,c=e.noDirty,s=void 0!==c&&c,o=Object($.a)().t;return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(Et.a,{children:o("permissions")}),Ae.map((function(e){return Object(n.jsx)(an.a,{control:Object(n.jsx)(cn,{checked:void 0!==t.values[r]&&t.values[r].includes(e.name),name:r,value:e.name,formik:t,noDirty:s}),label:o(e.description)},e.name)}))]})}var on=a(84),ln=function(e,t){var a,n=new Set(e),r=Object(on.a)(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;n.has(i)?n.delete(i):n.add(i)}}catch(c){r.e(c)}finally{r.f()}return n},dn=Object(g.a)((function(e){return{actionIcon:{float:"right"},button:{margin:e.spacing(1)},line:{width:"100%",marginTop:e.spacing(1)},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"}}}));var un=function(e){e.children,e.addStudentId;var t=e.value,a=e.index,r=(e.newStudent,e.currentStudent),i=e.updateCurrentStudent,c=(e.patchService,e.deleteStudent,e.addNewGuardian,Object(m.a)(e,["children","addStudentId","value","index","newStudent","currentStudent","updateCurrentStudent","patchService","deleteStudent","addNewGuardian"])),s=(Object($.a)().t,null===r),o=dn(),l=Ee(),d=s?{}:r,u=Re(!1,{initialValues:d,enableReinitialize:!0,onSubmit:function(e,t){var a=t.setStatus,n=t.setSubmitting;a();var c=new Set(e.needs),s=new Set(d.needs),o=Array.from(ln(c,s));if(0!==o.size){var u;n(!0);var b=o.map((function(e){var t,a;return s.has(e)?(t=tn.delete(r.id,e)).then.apply(t,Object(Z.a)(l({}))):(a=tn.postWithId(r.id,e)).then.apply(a,Object(Z.a)(l({})))}));(u=Promise.all(b)).then.apply(u,Object(Z.a)(l({snackbarSuccess:!0}))).then((function(){i(Object(j.a)(Object(j.a)({},r),{},{needs:e.needs}))})).finally((function(){n(!1)}))}}},!0);return Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:t!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},c),{},{children:t===a&&Object(n.jsx)(ie.a,{p:3,children:Object(n.jsx)(ie.a,{px:2,children:s?Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(we,{className:o.actionIcon}),Object(n.jsx)(we,{className:o.actionIcon}),Object(n.jsx)("div",{style:{clear:"both"},children:Object(n.jsx)(ie.a,{py:0,children:Object(n.jsx)(ve.a,{variant:"text",width:t,height:"150px"})})})]}):Object(n.jsxs)("form",{onSubmit:u.handleSubmit,children:[Object(n.jsx)(Me,{className:o.actionIcon,formik:u}),Object(n.jsx)(We,{className:o.actionIcon,formik:u}),Object(n.jsx)(ie.a,{style:{display:"inline-block"},children:Object(n.jsx)(sn,{formik:u})})]})})})}))},bn=a(7),hn=Object(g.a)((function(e){return{contentPanel:{position:"relative",overflow:"auto",boxSizing:"border-box",height:"100%",display:"flex",flexDirection:"column"},content:{overflowX:"hidden",display:"flex",flexDirection:"column",overflowY:"auto",flex:1,height:"100%"},tab:{height:"100%"}}}));function pn(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}function jn(e){var t=e.currentStudentId,a=e.deleteStudent,c=null===t,s=Ee(),l=Object(r.useState)(null),d=Object(o.a)(l,2),u=d[0],b=d[1];Object(r.useEffect)((function(){var e;if(c)return b(null);(e=Qa.getOne(t)).then.apply(e,Object(Z.a)(s({}))).then((function(e){b(e.data)}))}),[t]);var h=hn(),p=L()(),m=Object($.a)().t,f=i.a.useState(0),O=Object(o.a)(f,2),x=O[0],_=O[1];Object(r.useEffect)((function(){_(0)}),[t]);return Object(n.jsxs)(ee.a,{elevation:3,square:!0,className:h.contentPanel,children:[Object(n.jsx)(v.a,{position:"static",color:"default",children:Object(n.jsxs)(ne.a,{value:x,onChange:function(e,t){_(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"on",children:[Object(n.jsx)(re.a,Object(j.a)({label:m("user")},pn(0))),Object(n.jsx)(re.a,Object(j.a)({label:m("permissions")},pn(1)))]})}),Object(n.jsxs)(ae.a,{axis:"rtl"===p.direction?"x-reverse":"x",index:x,containerStyle:{height:"100%"},className:h.content,onChangeIndex:function(e){_(e)},children:[Object(n.jsx)(en,{value:x,index:0,dir:p.direction,currentStudent:u,updateCurrentStudent:b,deleteStudent:a}),Object(n.jsx)(un,{value:x,index:1,dir:p.direction,currentStudent:u,updateCurrentStudent:b,deleteStudent:a})]})]})}un.propTypes={updateCurrentStudent:bn.func,index:bn.number,value:bn.number,deleteStudent:bn.any,title:bn.any,currentStudent:bn.any,dir:bn.any};var mn=Object(g.a)((function(e){return{root:{height:"100%"},root2:{display:"flex"},formControl:{padding:e.spacing(2),maxHeight:"50vh",overflow:"auto",minWidth:"40vw"},dialog:{},left:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));var fn=Object(g.a)((function(e){return{root:{height:"100%"},root2:{display:"flex"},formControl:{padding:e.spacing(2),maxHeight:"50vh",overflow:"auto",minWidth:"40vw"},dialog:{},left:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));var On=new(_e("rooms")),xn=Object(g.a)((function(e){return{button:{margin:e.spacing(1)},calendar:{margin:e.spacing(2)}}}));var _n=function(e){var t=e.value,a=e.history,r=e.index,i=e.scheduleIds,c=Object(m.a)(e,["value","history","index","scheduleIds"]),s=(Object($.a)().t,xn());return Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",className:s.root,hidden:t!==r,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},c),{},{style:{height:"100%",flex:1,minHeight:"70vh"},children:Object(n.jsx)(Ia,{onEventClick:function(e){var t=e.event.extendedProps.schedule;t.is_base?a.push("/courses?id="+t.course_id):a.push("/students?id="+t.student_id)},scheduleIds:i,editable:!1})}))},gn=Object(g.a)((function(e){return{actionIcon:{float:"right"},button:{margin:e.spacing(1)},line:{width:"100%",marginTop:e.spacing(1)},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"}}}));var yn=function(e){e.children,e.addStudentId;var t=e.setNewRoom,a=e.newRoom,r=e.value,c=e.index,s=(e.newStudent,e.title,e.currentStudent),l=e.updateCurrentStudent,d=(e.patchService,e.deleteStudent),u=(e.addNewGuardian,Object(m.a)(e,["children","addStudentId","setNewRoom","newRoom","value","index","newStudent","title","currentStudent","updateCurrentStudent","patchService","deleteStudent","addNewGuardian"])),b=Object($.a)().t,h=null===s,p=gn(),f=Ee(),O=i.a.useState(!1),x=Object(o.a)(O,2),_=x[0],g=x[1],y=h?{}:s,v=Re(!a,{initialValues:y,validationSchema:ye.d({email:nt(b),name:ye.f().required(b("name_required"))}),enableReinitialize:!0,onSubmit:function(e,n){var r,i,c=n.setStatus,s=n.setSubmitting;Object.keys(e).length>0?(c(),a?(r=On.post(e)).then.apply(r,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(e){l(e),t(!1)})).catch((function(e){c(!0)})).finally((function(){s(!1)})):(i=On.patch({id:y.id,body:e,initial_values:y})).then.apply(i,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(e){v.resetForm(e),l(e)})).catch((function(e){c(!0)})).finally((function(){s(!1)}))):s(!1)}}),w=Ve(),k=Object(o.a)(w,2),C=k[0],N=k[1];return Object(n.jsxs)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:r!==c,id:"full-width-tabpanel-".concat(c),"aria-labelledby":"full-width-tab-".concat(c)},u),{},{children:[Object(n.jsxs)(pt.a,{open:_,onClose:function(e){g(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(ot.a,{id:"alert-dialog-title",children:b("delete_room_question")}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(Pe.a,{onClick:function(e){g(!1)},color:"primary",children:b("cancel")}),Object(n.jsx)(Pe.a,{onClick:function(e){!function(){var e;(e=On.delete(s.id)).then.apply(e,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(e){d(s.id)}))}(s.id),g(!1)},color:"primary",autoFocus:!0,children:b("delete_room")})]})]}),r===c&&Object(n.jsx)(ie.a,{p:3,children:Object(n.jsxs)(ie.a,{px:2,children:[!a&&h?Object(n.jsx)(we,{className:p.actionIcon}):C([N.delete])&&Object(n.jsx)(R.a,{style:{float:"right"},title:b("delete"),"aria-label":b("delete"),children:Object(n.jsx)(S.a,{onClick:function(e){a?t(!1):g(!0)},children:Object(n.jsx)(mt.a,{})})}),!a&&h?Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(we,{className:p.actionIcon}),Object(n.jsx)(we,{className:p.actionIcon}),Object(n.jsx)("div",{style:{clear:"both"},children:["100%","100%","100%"].map((function(e,t){return Object(n.jsx)(ie.a,{py:0,children:Object(n.jsx)(ve.a,{variant:"text",width:e,height:"60px"})},t)}))})]}):Object(n.jsxs)("form",{onSubmit:v.handleSubmit,children:[Object(n.jsx)(Me,{className:p.actionIcon,formik:v}),Object(n.jsx)(We,{className:p.actionIcon,formik:v}),Object(n.jsx)(Ce,{label:b("id"),name:"id",disabled:!0,className:p.line,formik:v}),Object(n.jsxs)(ie.a,{className:[p.line,p.composite],children:[Object(n.jsx)(Ce,{label:b("name"),style:{flex:4},name:"name",formik:v}),Object(n.jsx)(Ce,{label:b("capacity"),style:{flex:1},name:"capacity",formik:v,type:"number"})]})]})]})})]}))},vn=Object(g.a)((function(e){return{contentPanel:{position:"relative",overflow:"auto",boxSizing:"border-box",height:"100%",display:"flex",flexDirection:"column"},content:{overflowX:"hidden",display:"flex",flexDirection:"column",overflowY:"auto",flex:1,height:"100%"},tab:{height:"100%"}}}));function wn(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}function Sn(e){var t=e.history,a=e.setNewRoom,c=e.currentRoomId,s=e.deleteRoom,l=e.newRoom,d=(e.addRoomId,null===c),u=Ee(),b=Object(r.useState)(null),h=Object(o.a)(b,2),p=h[0],m=h[1];Object(r.useEffect)((function(){var e;if(d)return m(null);(e=On.getOne(c)).then.apply(e,Object(Z.a)(u({}))).then((function(e){m(e.data)}))}),[c]);var f=vn(),O=L()(),x=Object($.a)().t,_=i.a.useState(0),g=Object(o.a)(_,2),y=g[0],w=g[1];Object(r.useEffect)((function(){w(0)}),[c]);var S=Ve(),k=Object(o.a)(S,2),C=k[0],N=k[1];return Object(n.jsxs)(ee.a,{elevation:3,square:!0,className:f.contentPanel,children:[Object(n.jsx)(v.a,{position:"static",color:"default",children:Object(n.jsxs)(ne.a,{value:y,onChange:function(e,t){w(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"on",children:[Object(n.jsx)(re.a,Object(j.a)({label:x("room")},wn(0))),!l&&C([N.schedules])&&Object(n.jsx)(re.a,Object(j.a)({label:x("schedules")},wn(1)))]})}),Object(n.jsxs)(ae.a,{axis:"rtl"===O.direction?"x-reverse":"x",index:y,containerStyle:{height:"100%"},className:f.content,onChangeIndex:function(e){w(e)},children:[Object(n.jsx)(yn,{value:y,index:0,newRoom:l,setNewRoom:a,dir:O.direction,currentStudent:p,updateCurrentStudent:m,deleteStudent:s}),C([N.schedules])&&Object(n.jsx)(_n,{value:y,index:1,history:t,className:f.tab,dir:O.direction,scheduleIds:null===p?null:p.schedules,student_id:c})]})]})}var kn=Object(g.a)((function(e){return{root:{height:"100%"},left:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));var Cn=new(_e("teachers")),Nn=new(_e("teachers","courses")),In=Object(g.a)((function(e){return{actionIcon:{float:"right"},button:{margin:e.spacing(1)},line:{width:"100%",marginTop:e.spacing(1)},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"}}}));var qn=function(e){e.children,e.addStudentId;var t=e.setNewRoom,a=e.newRoom,r=e.value,c=e.index,s=(e.newStudent,e.title,e.currentStudent),l=e.updateCurrentStudent,d=(e.patchService,e.deleteStudent),u=(e.addNewGuardian,Object(m.a)(e,["children","addStudentId","setNewRoom","newRoom","value","index","newStudent","title","currentStudent","updateCurrentStudent","patchService","deleteStudent","addNewGuardian"])),b=Object($.a)().t,h=null===s,p=In(),f=Ee(),O=i.a.useState(!1),x=Object(o.a)(O,2),_=x[0],g=x[1],y=h?{}:s,v=Re(!a,{initialValues:y,validationSchema:ye.d({email:nt(b),name:ye.f().required(b("name_required"))}),enableReinitialize:!0,onSubmit:function(e,n){var r,i,c=n.setStatus,s=n.setSubmitting;Object.keys(e).length>0?(c(),a?(r=Cn.post(e)).then.apply(r,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(e){l(e),t(!1)})).catch((function(e){c(!0)})).finally((function(){s(!1)})):(i=Cn.patch({id:y.id,body:e,initial_values:y})).then.apply(i,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(e){v.resetForm(e),l(e)})).catch((function(e){c(!0)})).finally((function(){s(!1)}))):s(!1)}}),w=Ve(),k=Object(o.a)(w,2),C=k[0],N=k[1];return Object(n.jsxs)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:r!==c,id:"full-width-tabpanel-".concat(c),"aria-labelledby":"full-width-tab-".concat(c)},u),{},{children:[Object(n.jsxs)(pt.a,{open:_,onClose:function(e){g(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(ot.a,{id:"alert-dialog-title",children:b("delete_room_question")}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(Pe.a,{onClick:function(e){g(!1)},color:"primary",children:b("cancel")}),Object(n.jsx)(Pe.a,{onClick:function(e){!function(){var e;(e=Cn.delete(s.id)).then.apply(e,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(e){d(s.id)}))}(s.id),g(!1)},color:"primary",autoFocus:!0,children:b("delete_room")})]})]}),r===c&&Object(n.jsx)(ie.a,{p:3,children:Object(n.jsxs)(ie.a,{px:2,children:[!a&&h?Object(n.jsx)(we,{className:p.actionIcon}):C([N.delete])&&Object(n.jsx)(R.a,{style:{float:"right"},title:b("delete"),"aria-label":b("delete"),children:Object(n.jsx)(S.a,{onClick:function(e){a?t(!1):g(!0)},children:Object(n.jsx)(mt.a,{})})}),!a&&h?Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(we,{className:p.actionIcon}),Object(n.jsx)(we,{className:p.actionIcon}),Object(n.jsx)("div",{style:{clear:"both"},children:["100%","100%","100%"].map((function(e,t){return Object(n.jsx)(ie.a,{py:0,children:Object(n.jsx)(ve.a,{variant:"text",width:e,height:"60px"})},t)}))})]}):Object(n.jsxs)("form",{onSubmit:v.handleSubmit,children:[Object(n.jsx)(Me,{className:p.actionIcon,formik:v}),Object(n.jsx)(We,{className:p.actionIcon,formik:v}),Object(n.jsx)(Ce,{label:b("id"),name:"id",disabled:!0,className:p.line,formik:v}),Object(n.jsxs)(ie.a,{className:[p.line,p.composite],children:[Object(n.jsx)(Ce,{label:b("name"),style:{flex:1},name:"name",formik:v}),Object(n.jsx)(Ce,{label:b("surname1"),style:{flex:1},name:"surname1",formik:v}),Object(n.jsx)(Ce,{label:b("surname2"),style:{flex:1},formik:v,name:"surname2"})]}),Object(n.jsx)(ie.a,{className:[p.line,p.composite],children:Object(n.jsx)(Ce,{label:b("email"),type:"email",style:{flex:1},formik:v,name:"email",helperText:v.touched.email&&v.errors.email})}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:[p.line,p.composite],children:[Object(n.jsx)(Ce,{label:b("address"),formik:v,style:{flex:4},name:"address"}),Object(n.jsx)(Ce,{label:b("city"),style:{flex:2},formik:v,name:"city"}),Object(n.jsx)(Ce,{label:b("zip"),formik:v,type:"number",style:{flex:1},name:"zip"})]}),Object(n.jsxs)(ie.a,{className:[p.line,p.composite],children:[Object(n.jsx)(Ce,{label:b("dni"),style:{flex:1},formik:v,name:"dni"}),Object(n.jsx)(Ce,{label:b("phone"),type:"tel",style:{flex:1},formik:v,name:"phone"})]})]})]})})]}))},Tn=Object(g.a)((function(e){return{button:{margin:e.spacing(1)},calendar:{margin:e.spacing(2)}}}));var Pn=function(e){var t=e.value,a=e.history,r=e.index,i=e.scheduleIds,c=Object(m.a)(e,["value","history","index","scheduleIds"]),s=(Object($.a)().t,Tn());return Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",className:s.root,hidden:t!==r,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},c),{},{style:{height:"100%",flex:1,minHeight:"70vh"},children:Object(n.jsx)(Ia,{onEventClick:function(e){var t=e.event.extendedProps.schedule;t.is_base?a.push("/courses?id="+t.course_id):a.push("/students?id="+t.student_id)},scheduleIds:i,editable:!1})}))},En=Object(g.a)((function(e){return{contentPanel:{position:"relative",overflow:"auto",boxSizing:"border-box",height:"100%",display:"flex",flexDirection:"column"},content:{overflowX:"hidden",display:"flex",flexDirection:"column",overflowY:"auto",flex:1,height:"100%"},tab:{height:"100%"}}}));function Dn(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}function Rn(e){var t=e.currentTeacherId,a=e.history,c=e.setNewTeacher,s=(e.addTeacherId,e.newTeacher),l=e.deleteTeacher,d=null===t,u=Ee(),b=Object(r.useState)(null),h=Object(o.a)(b,2),p=h[0],m=h[1];Object(r.useEffect)((function(){var e;if(d)return m(null);(e=Cn.getOne(t)).then.apply(e,Object(Z.a)(u({}))).then((function(e){m(e.data)}))}),[t]);var f=En(),O=L()(),x=Object($.a)().t,_=i.a.useState(0),g=Object(o.a)(_,2),y=g[0],w=g[1];Object(r.useEffect)((function(){w(0)}),[t]);var S=Ve(),k=Object(o.a)(S,2),C=k[0],N=k[1];return Object(n.jsxs)(ee.a,{elevation:3,square:!0,className:f.contentPanel,children:[Object(n.jsx)(v.a,{position:"static",color:"default",children:Object(n.jsxs)(ne.a,{value:y,onChange:function(e,t){w(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"on",children:[Object(n.jsx)(re.a,Object(j.a)({label:x("teacher")},Dn(0))),!s&&C([N.schedules])&&Object(n.jsx)(re.a,Object(j.a)({label:x("schedules")},Dn(1))),!s&&C([N.courses])&&Object(n.jsx)(re.a,Object(j.a)({label:x("courses")},Dn(2)))]})}),Object(n.jsxs)(ae.a,{axis:"rtl"===O.direction?"x-reverse":"x",index:y,containerStyle:{height:"100%"},className:f.content,onChangeIndex:function(e){w(e)},children:[Object(n.jsx)(qn,{value:y,index:0,newRoom:s,setNewRoom:c,dir:O.direction,currentStudent:p,updateCurrentStudent:m,deleteStudent:l}),C([N.schedules])&&Object(n.jsx)(Pn,{value:y,index:1,history:a,className:f.tab,dir:O.direction,scheduleIds:null===p?null:p.schedules,student_id:t}),C([N.courses])&&Object(n.jsx)(xa,{value:y,index:2,dataService:Nn,history:a,courseIds:null===p?null:p.courses,addCourseId:function(e){m(Object(j.a)(Object(j.a)({},p),{},{courses:[].concat(Object(Z.a)(p.courses),[e])}))},student_id:t,deleteCourseFromStudent:function(e){m(Object(j.a)(Object(j.a)({},p),{},{courses:p.courses.filter((function(t){return t!==e}))}))}})]})]})}var Bn=Object(g.a)((function(e){return{root:{height:"100%"},left:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));var An=new(_e("courses","students")),Ln=new(_e("courses","teachers")),Fn=Object(g.a)((function(e){return{actionIcon:{float:"right"},textField:{marginRight:e.spacing(1),width:200},button:{margin:e.spacing(1)},line:{width:"100%",marginTop:e.spacing(1)},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"},choose:{marginBottom:e.spacing(3)}}}));var Mn=function(e){e.children,e.addCourseId;var t=e.setNewCourse,a=e.newCourse,r=e.value,c=e.index,s=e.currentCourse,l=e.updateCurrentCourse,d=(e.patchService,e.deleteCourse),u=Object(m.a)(e,["children","addCourseId","setNewCourse","newCourse","value","index","currentCourse","updateCurrentCourse","patchService","deleteCourse"]),b=Object($.a)().t,h=null===s,f=Fn(),O=Ee(),x=i.a.useState(!1),_=Object(o.a)(x,2),g=_[0],y=_[1],v=i.a.useState(!1),w=Object(o.a)(v,2),k=w[0],C=w[1],N=Object(p.b)(),I=(N.enqueueSnackbar,N.closeSnackbar,h?{}:s);a&&(I={price_term:60,is_published:!1});var q=Object(De.a)({initialValues:{},validationSchema:ye.d({startDate:ye.b().required(b("required")),endDate:ye.b().required(b("required"))}),enableReinitialize:!0,onSubmit:function(e,t){var a,n=t.setStatus,r=t.setSubmitting;r(!0),n(),(a=ca.downloadSubresource(s.id,"attendanceList",e)).then.apply(a,Object(Z.a)(O({snackbarSuccess:!0}))).then((function(){C(!1)})).catch((function(){n(!0)})).finally((function(){r(!1)}))}}),P=Re(!a,{initialValues:I,validationSchema:ye.d({name:ye.f().required(b("name_required"))}),enableReinitialize:!0,onSubmit:function(e,n){var r,i,c=n.setStatus,s=n.setSubmitting;Object.keys(e).length>0?(c(),a?(r=ca.post(e)).then.apply(r,Object(Z.a)(O({snackbarSuccess:!0}))).then((function(e){l(e),t(!1)})).catch((function(e){c(!0)})).finally((function(){s(!1)})):(i=ca.patch({id:I.id,body:e,initial_values:I})).then.apply(i,Object(Z.a)(O({snackbarSuccess:!0}))).then((function(e){P.resetForm(e),l(e)})).catch((function(e){c(!0)})).finally((function(){s(!1)}))):s(!1)}}),E=i.a.useContext(Ct),D=Ve(),B=Object(o.a)(D,2),A=B[0],L=B[1];return Object(n.jsxs)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:r!==c,id:"full-width-tabpanel-".concat(c),"aria-labelledby":"full-width-tab-".concat(c)},u),{},{children:[Object(n.jsxs)(pt.a,{open:g,onClose:function(e){y(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(ot.a,{id:"alert-dialog-title",children:b("delete_room_question")}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(Pe.a,{onClick:function(e){y(!1)},color:"primary",children:b("cancel")}),Object(n.jsx)(Pe.a,{onClick:function(e){!function(){var e;(e=ca.delete(s.id)).then.apply(e,Object(Z.a)(O({snackbarSuccess:!0}))).then((function(e){d(s.id)}))}(s.id),y(!1)},color:"primary",autoFocus:!0,children:b("delete_room")})]})]}),Object(n.jsx)(pt.a,{open:k,onClose:function(e){C(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:Object(n.jsxs)("form",{onSubmit:q.handleSubmit,children:[Object(n.jsx)(ot.a,{id:"alert-dialog-title",children:b("download")}),Object(n.jsxs)(lt.a,{children:[Object(n.jsx)(Et.a,{className:f.choose,children:b("chose_list_dates")}),Object(n.jsx)(Se.a,{id:"date",label:b("start"),type:"date",value:q.values.startDate,name:"startDate",onChange:q.handleChange,onBlur:q.handleBlur,error:q.status||void 0!==q.errors.startDate,helperText:q.touched.startDate&&q.errors.startDate,className:f.textField,InputLabelProps:{shrink:!0}}),Object(n.jsx)(Se.a,{id:"date",label:b("end"),type:"date",value:q.values.endDate,name:"endDate",onChange:q.handleChange,error:q.status||void 0!==q.errors.endDate,helperText:q.touched.endDate&&q.errors.endDate,onBlur:q.handleBlur,className:f.textField,InputLabelProps:{shrink:!0}})]}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(Pe.a,{onClick:function(e){C(!1)},color:"primary",children:b("cancel")}),Object(n.jsx)(Pe.a,{type:"submit",color:"primary",disabled:q.isSubmitting,autoFocus:!0,children:b("download")})]})]})}),r===c&&Object(n.jsx)(ie.a,{p:3,children:Object(n.jsxs)(ie.a,{px:2,children:[!a&&h?Object(n.jsx)(we,{className:f.actionIcon}):A([L.delete])&&Object(n.jsx)(R.a,{style:{float:"right"},title:b("delete"),"aria-label":b("delete"),children:Object(n.jsx)(S.a,{onClick:function(e){a?t(!1):y(!0)},children:Object(n.jsx)(mt.a,{})})}),!a&&h?Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(we,{className:f.actionIcon}),Object(n.jsx)(we,{className:f.actionIcon}),Object(n.jsx)("div",{style:{clear:"both"},children:["100%","100%","100%"].map((function(e,t){return Object(n.jsx)(ie.a,{py:0,children:Object(n.jsx)(ve.a,{variant:"text",width:e,height:"60px"})},t)}))})]}):Object(n.jsxs)("form",{onSubmit:P.handleSubmit,children:[Object(n.jsx)(Me,{className:f.actionIcon,formik:P}),Object(n.jsx)(We,{className:f.actionIcon,formik:P}),Object(n.jsx)(Ce,{label:b("id"),name:"id",disabled:!0,className:f.line,formik:P}),Object(n.jsx)(ie.a,{className:[f.line,f.composite],children:Object(n.jsx)(Ce,{label:b("name"),style:{flex:1},name:"name",formik:P})}),Object(n.jsx)(ie.a,{className:[f.line,f.composite],children:Object(n.jsx)(Ce,{label:b("description"),style:{flex:1},multiline:!0,rowsMax:8,name:"description",formik:P})}),Object(n.jsxs)(ie.a,{className:[f.line,f.composite],children:[Object(n.jsx)(Ce,{label:b("price_term"),style:{flex:1},name:"price_term",formik:P,type:"number"}),Object(n.jsxs)(Ce,{label:b("public"),style:{flex:1},name:"is_published",formik:P,select:!0,children:[Object(n.jsx)(oe.a,{value:!0,children:b("yes")}),Object(n.jsx)(oe.a,{value:!1,children:b("no")})]})]})]}),!h&&!a&&Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:[f.line,f.composite],children:[!h&&A([L.students])&&!a&&Object(n.jsx)(R.a,{style:{flex:1},title:b("export_attendance_list"),"aria-label":b("send_grant_letter"),children:Object(n.jsx)(Pe.a,{variant:"contained",color:"default",className:f.button,startIcon:Object(n.jsx)(yt.a,{}),onClick:function(e){C(!0)},children:b("attendance_list")})}),!h&&A([L.students,L.guardians])&&!a&&Object(n.jsx)(R.a,{style:{flex:1},title:b("export_students_contact_sheet"),"aria-label":b("export_grant_letter"),children:Object(n.jsx)(Pe.a,{variant:"contained",color:"default",className:f.button,disabled:E.loading,startIcon:Object(n.jsx)(yt.a,{}),onClick:function(e){var t;E.startLoading(),(t=ca.downloadSubresource(s.id,"contactsSheet")).then.apply(t,Object(Z.a)(O({snackbarSuccess:!0}))).finally((function(){E.stopLoading()}))},children:b("students_contact_sheet")})})]})]})})]}))},Gn=new(_e("courses","labels"));function zn(e){var t=e.formik,a=e.name,r=void 0===a?"labels":a,c=e.noDirty,s=void 0!==c&&c,o=Object($.a)().t;return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(Et.a,{children:o("labels")}),Be.map((function(e){return Object(n.jsx)(an.a,{control:Object(n.jsx)(cn,{checked:void 0!==t.values[r]&&t.values[r].includes(e),name:r,value:e,formik:t,noDirty:s}),label:o(e)},e)})),Object(n.jsx)(an.a,{control:Object(n.jsx)(cn,{checked:void 0!==t.values[r]&&t.values[r].includes("adult"),name:r,value:"adult",formik:t,noDirty:s}),label:o("adult")})]})}var Un=Object(g.a)((function(e){return{actionIcon:{float:"right"},button:{margin:e.spacing(1)},line:{width:"100%",marginTop:e.spacing(1)},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"}}}));var Vn=function(e){var t=e.value,a=e.index,r=e.currentCourse,i=e.updateCurrentCourse,c=(e.patchService,e.deleteCourse,Object(m.a)(e,["value","index","currentCourse","updateCurrentCourse","patchService","deleteCourse"])),s=(Object($.a)().t,null===r),o=Un(),l=Ee(),d=s?{}:r,u=Re(!1,{initialValues:d,enableReinitialize:!0,onSubmit:function(e,t){var a=t.setStatus,n=t.setSubmitting;a();var c=new Set(e.labels),s=new Set(d.labels),o=Array.from(ln(c,s));if(0!==o.size){var u;n(!0);var b=o.map((function(e){var t,a;return s.has(e)?(t=Gn.delete(r.id,e)).then.apply(t,Object(Z.a)(l({}))):(a=Gn.postWithId(r.id,e)).then.apply(a,Object(Z.a)(l({})))}));(u=Promise.all(b)).then.apply(u,Object(Z.a)(l({snackbarSuccess:!0}))).then((function(){i(Object(j.a)(Object(j.a)({},r),{},{labels:e.labels}))})).finally((function(){n(!1)}))}}},!0);return Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:t!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},c),{},{children:t===a&&Object(n.jsx)(ie.a,{p:3,children:Object(n.jsx)(ie.a,{px:2,children:s?Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(we,{className:o.actionIcon}),Object(n.jsx)(we,{className:o.actionIcon}),Object(n.jsx)("div",{style:{clear:"both"},children:Object(n.jsx)(ie.a,{py:0,children:Object(n.jsx)(ve.a,{variant:"text",width:t,height:"150px"})})})]}):Object(n.jsxs)("form",{onSubmit:u.handleSubmit,children:[Object(n.jsx)(Me,{className:o.actionIcon,formik:u}),Object(n.jsx)(We,{className:o.actionIcon,formik:u}),Object(n.jsx)(ie.a,{style:{display:"inline-block"},children:Object(n.jsx)(zn,{formik:u})})]})})})}))},Wn=Object(g.a)((function(e){return{button:{margin:e.spacing(1)},calendar:{margin:e.spacing(2)}}}));var Hn=function(e){var t=e.value,a=e.index,r=(e.title,e.scheduleIds),i=e.student_id,c=Object(m.a)(e,["value","index","title","scheduleIds","student_id"]),s=Object($.a)().t,o=Wn(),l=Object(p.b)(),d=l.enqueueSnackbar,u=(l.closeSnackbar,Ee()),b=Object(ga.a)(),h=function(e,t,a,n,r){var c,s,o=e.event,l={};(l.day_week=t,l.start_time=a,l.end_time=n,r.is_base)?(l.course_id=r.course_id,l.student_id=i,l.is_base=!1,(c=_a.post(l)).then.apply(c,Object(Z.a)(u({errorOut:!0,snackbarSuccess:!0}))).then((function(t){var a=e.view.calendar;o.is_base=!0,a.addEvent(Na(b,t)),e.revert()})).catch((function(t){e.revert()}))):(s=_a.patch({id:r.id,body:l,initial_values:r})).then.apply(s,Object(Z.a)(u({errorOut:!0,snackbarSuccess:!0}))).then((function(e){})).catch((function(t){e.revert()}))};return Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",className:o.root,hidden:t!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},c),{},{style:{height:"100%",flex:1,minHeight:"70vh"},children:Object(n.jsx)(Ia,{onEventClick:function(e){var t,a=e.event.extendedProps.schedule;if(!0===a.is_base)return d(s("cant_remove_schedule"),{variant:"warning"});window.confirm(s("sure_delete_event"))&&(t=_a.delete(a.id)).then.apply(t,Object(Z.a)(u({snackbarSuccess:!0}))).then((function(t){e.event.remove()}))},onEventDrop:h,onEventResize:h,scheduleIds:r,editable:!0})}))},Kn=i.a.forwardRef((function(e,t){return Object(n.jsx)(sa.a,Object(j.a)({direction:"up",ref:t},e))})),Xn=Object(g.a)((function(e){return{list:{overflow:"auto",display:"flex",flexDirection:"column",flex:1},box:{display:"flex",flexDirection:"column"},pagination:{margin:"30px"},appBar:{position:"relative"},newLine:{width:"100%",marginTop:e.spacing(1),display:"flex",flexDirection:"column"},title:{marginLeft:e.spacing(2),flex:1},actionIcon:{float:"right"}}})),Yn=function(e){Object(na.a)(a,e);var t=Object(ra.a)(a);function a(){return Object(le.a)(this,a),t.apply(this,arguments)}return Object(de.a)(a,[{key:"render",value:function(){return null}}]),a}(i.a.Component);var Jn=function(e){var t=e.history,a=e.value,i=e.dataService,c=e.index,s=(e.title,e.courseIds),l=e.deleteCourseFromStudent,d=e.addCourseId,u=e.student_id,b=Object(m.a)(e,["history","value","dataService","index","title","courseIds","deleteCourseFromStudent","addCourseId","student_id"]),h=Object($.a)().t,p=Xn(),f=Ee(),O=null===s,x=Ve(),_=Object(o.a)(x,2),g=_[0],y=_[1],w=Object(r.useState)([]),k=Object(o.a)(w,2),C=k[0],N=k[1],I=Object(r.useState)(null),q=Object(o.a)(I,2),D=q[0],A=q[1],L=Object(r.useState)(!1),F=Object(o.a)(L,2),M=F[0],G=F[1],z=function(){G(!1)};Object(r.useEffect)((function(){G(!1)}),[C]);var U=Object(r.useState)(""),V=Object(o.a)(U,2),W=V[0],H=V[1],K=Object(r.useState)(1),X=Object(o.a)(K,2),Y=X[0],J=X[1],Q=Object(r.useState)(0),ee=Object(o.a)(Q,2),te=ee[0],ae=ee[1];function ne(){var e;!O&&M&&(e=ge.getAll({name:"name",value:W},Y,["name","description","id"])).then.apply(e,Object(Z.a)(f({}))).then((function(e){A(e.data.filter((function(e){return!s.includes(e.id)}))),ae(e._pagination.totalPages)}))}return Object(r.useEffect)(ne,[Y,A,O,M]),Object(r.useEffect)((function(){var e;null!==s&&(0===s.length?N([]):(e=ge.getMany(s)).then.apply(e,Object(Z.a)(f({}))).then((function(e){N(e.map((function(e){return e.data})))})))}),[s]),Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:a!==c,id:"full-width-tabpanel-".concat(c),"aria-labelledby":"full-width-tab-".concat(c)},b),{},{children:a===c&&Object(n.jsxs)(ie.a,{p:3,children:["  "," ",Object(n.jsxs)(ie.a,{px:2,children:[Object(n.jsxs)(pt.a,{fullScreen:!0,open:M,onClose:z,TransitionComponent:Kn,children:[Object(n.jsx)(v.a,{className:p.appBar,color:"secondary",children:Object(n.jsxs)(la.a,{children:[Object(n.jsx)(S.a,{edge:"start",color:"inherit",onClick:z,"aria-label":"close",children:Object(n.jsx)(Yn,{})}),Object(n.jsx)(Et.a,{variant:"h6",className:p.title,children:h("enroll_to_course")}),Object(n.jsx)(Pe.a,{autoFocus:!0,color:"inherit",onClick:z,children:h("cancel")})]})}),Object(n.jsxs)(ie.a,{className:p.box,m:3,children:[Object(n.jsx)(pa,{label:h("courses"),value:W,onChange:function(e){H(e.target.value)},onSearch:ne}),Object(n.jsx)(ie.a,{my:2,children:Object(n.jsx)(ja.a,{className:p.pagination,count:te,page:Y,size:"small",showFirstButton:!0,showLastButton:!0,siblingCount:1,boundaryCount:1,color:"primary",onChange:function(e,t){J(t)}})}),Object(n.jsx)(P.a,{className:p.list,children:D&&D.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(E.a,{button:!0,onClick:function(){var t;window.confirm(h("confirm_enroll_to_course"))&&(t=i.postWithId(u,e.id)).then.apply(t,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(t){d(e.id),z()}))},children:Object(n.jsx)(B.a,{id:"name",primary:e.name,secondary:e.description})},e.id),Object(n.jsx)(T.a,{})]},e.id)}))})]})]}),O?Object(n.jsx)(we,{className:p.actionIcon}):g([y.post])&&Object(n.jsx)(R.a,{className:p.actionIcon,title:h("add_student"),"aria-label":h("new_payment"),children:Object(n.jsx)(S.a,{onClick:function(e){null===D&&ne(),G(!0)},children:Object(n.jsx)($t.a,{})})}),Object(n.jsxs)("div",{className:p.newLine,children:[Object(n.jsx)(P.a,{className:p.list,children:C&&C.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsxs)(E.a,{button:!0,onClick:function(a){t.push("/courses?id="+e.id)},children:[Object(n.jsx)(B.a,{id:"name",primary:e.name,secondary:e.description}),g([y.delete])&&Object(n.jsx)(oa.a,{children:Object(n.jsx)(S.a,{onClick:function(t){window.confirm(h("confirm_unenroll_to_course"))&&function(e){var t;(t=i.delete(u,e)).then.apply(t,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(t){l(e)}))}(e.id)},children:Object(n.jsx)(mt.a,{})})})]},e.id),Object(n.jsx)(T.a,{})]},e.id)}))}),O&&Object(n.jsx)(ve.a,{width:"100%",height:"250px"}),!O&&0===C.length&&!M&&Object(n.jsx)(Et.a,{children:h("no_students")})]})]})]})}))},Zn=i.a.forwardRef((function(e,t){return Object(n.jsx)(sa.a,Object(j.a)({direction:"up",ref:t},e))})),Qn=Object(g.a)((function(e){return{list:{overflow:"auto",display:"flex",flexDirection:"column",flex:1},box:{display:"flex",flexDirection:"column"},pagination:{margin:"30px"},appBar:{position:"relative"},newLine:{width:"100%",marginTop:e.spacing(1),display:"flex",flexDirection:"column"},title:{marginLeft:e.spacing(2),flex:1},actionIcon:{float:"right"}}})),$n=function(e){Object(na.a)(a,e);var t=Object(ra.a)(a);function a(){return Object(le.a)(this,a),t.apply(this,arguments)}return Object(de.a)(a,[{key:"render",value:function(){return null}}]),a}(i.a.Component);var er=function(e){e.children;var t=e.history,a=e.value,i=e.dataService,c=e.index,s=(e.title,e.courseIds),l=e.deleteCourseFromStudent,d=e.addCourseId,u=e.student_id,b=Object(m.a)(e,["children","history","value","dataService","index","title","courseIds","deleteCourseFromStudent","addCourseId","student_id"]),h=Object($.a)().t,p=Qn(),f=Ee(),O=null===s,x=Ve(),_=Object(o.a)(x,2),g=_[0],y=_[1],w=Object(r.useState)([]),k=Object(o.a)(w,2),C=k[0],N=k[1],I=Object(r.useState)(null),q=Object(o.a)(I,2),D=q[0],A=q[1],L=Object(r.useState)(!1),F=Object(o.a)(L,2),M=F[0],G=F[1],z=function(){G(!1)};Object(r.useEffect)((function(){G(!1)}),[C]);var U=Object(r.useState)(""),V=Object(o.a)(U,2),W=V[0],H=V[1],K=Object(r.useState)(1),X=Object(o.a)(K,2),Y=X[0],J=X[1],Q=Object(r.useState)(0),ee=Object(o.a)(Q,2),te=ee[0],ae=ee[1];function ne(){var e;!O&&M&&(e=Cn.getAll({name:"name",value:W},Y,["name","description","id"])).then.apply(e,Object(Z.a)(f({}))).then((function(e){A(e.data.filter((function(e){return!s.includes(e.id)}))),ae(e._pagination.totalPages)}))}return Object(r.useEffect)(ne,[Y,A,O,M]),Object(r.useEffect)((function(){var e;null!==s&&(0===s.length?N([]):(e=Cn.getMany(s)).then.apply(e,Object(Z.a)(f({}))).then((function(e){N(e.map((function(e){return e.data})))})))}),[s]),Object(n.jsx)("div",Object(j.a)(Object(j.a)({role:"tabpanel",hidden:a!==c,id:"full-width-tabpanel-".concat(c),"aria-labelledby":"full-width-tab-".concat(c)},b),{},{children:a===c&&Object(n.jsxs)(ie.a,{p:3,children:["  "," ",Object(n.jsxs)(ie.a,{px:2,children:[Object(n.jsxs)(pt.a,{fullScreen:!0,open:M,onClose:z,TransitionComponent:Zn,children:[Object(n.jsx)(v.a,{className:p.appBar,color:"secondary",children:Object(n.jsxs)(la.a,{children:[Object(n.jsx)(S.a,{edge:"start",color:"inherit",onClick:z,"aria-label":"close",children:Object(n.jsx)($n,{})}),Object(n.jsx)(Et.a,{variant:"h6",className:p.title,children:h("enroll_to_course")}),Object(n.jsx)(Pe.a,{autoFocus:!0,color:"inherit",onClick:z,children:h("cancel")})]})}),Object(n.jsxs)(ie.a,{className:p.box,m:3,children:[Object(n.jsx)(pa,{label:h("courses"),value:W,onChange:function(e){H(e.target.value)},onSearch:ne}),Object(n.jsx)(ie.a,{my:2,children:Object(n.jsx)(ja.a,{className:p.pagination,count:te,page:Y,size:"small",showFirstButton:!0,showLastButton:!0,siblingCount:1,boundaryCount:1,color:"primary",onChange:function(e,t){J(t)}})}),Object(n.jsx)(P.a,{className:p.list,children:D&&D.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(E.a,{button:!0,onClick:function(){var t;window.confirm(h("confirm_enroll_to_course"))&&(t=i.postWithId(u,e.id)).then.apply(t,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(t){d(e.id),z()}))},children:Object(n.jsx)(B.a,{id:"name",primary:e.name,secondary:e.description})},e.id),Object(n.jsx)(T.a,{})]},e.id)}))})]})]}),O?Object(n.jsx)(we,{className:p.actionIcon}):g([y.post])&&Object(n.jsx)(R.a,{className:p.actionIcon,title:h("add_teacher"),"aria-label":h("new_payment"),children:Object(n.jsx)(S.a,{onClick:function(e){null===D&&ne(),G(!0)},children:Object(n.jsx)($t.a,{})})}),Object(n.jsxs)("div",{className:p.newLine,children:[Object(n.jsx)(P.a,{className:p.list,children:C&&C.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsxs)(E.a,{button:!0,onClick:function(a){t.push("/courses?id="+e.id)},children:[Object(n.jsx)(B.a,{id:"name",primary:e.name,secondary:e.description}),g([y.delete])&&Object(n.jsx)(oa.a,{children:Object(n.jsx)(S.a,{onClick:function(t){window.confirm(h("confirm_unenroll_to_course"))&&function(e){var t;(t=i.delete(u,e)).then.apply(t,Object(Z.a)(f({snackbarSuccess:!0}))).then((function(t){l(e)}))}(e.id)},children:Object(n.jsx)(mt.a,{})})})]},e.id),Object(n.jsx)(T.a,{})]},e.id)}))}),O&&Object(n.jsx)(ve.a,{width:"100%",height:"250px"}),!O&&0===C.length&&!M&&Object(n.jsx)(Et.a,{children:h("no_teachers")})]})]})]})}))},tr=Object(g.a)((function(e){return{contentPanel:{position:"relative",overflow:"auto",boxSizing:"border-box",height:"100%",display:"flex",flexDirection:"column"},content:{overflowX:"hidden",display:"flex",flexDirection:"column",overflowY:"auto",flex:1,height:"100%"},tab:{height:"100%"}}}));function ar(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}function nr(e){var t=e.currentCourseId,a=e.history,c=e.setNewCourse,s=(e.addCourseId,e.newCourse),l=e.deleteCourse,d=null===t,u=Ee(),b=Object(r.useState)(null),h=Object(o.a)(b,2),p=h[0],m=h[1],f=Ve(),O=Object(o.a)(f,2),x=O[0],_=O[1];Object(r.useEffect)((function(){var e;if(d)return m(null);(e=ca.getOne(t)).then.apply(e,Object(Z.a)(u({}))).then((function(e){m(e.data)}))}),[t]);var g=tr(),y=L()(),w=Object($.a)().t,S=i.a.useState(0),k=Object(o.a)(S,2),C=k[0],N=k[1];Object(r.useEffect)((function(){N(0)}),[t]);return Object(n.jsxs)(ee.a,{elevation:3,square:!0,className:g.contentPanel,children:[Object(n.jsx)(v.a,{position:"static",color:"default",children:Object(n.jsxs)(ne.a,{value:C,onChange:function(e,t){N(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"on",children:[Object(n.jsx)(re.a,Object(j.a)({label:w("course")},ar(0))),!s&&Object(n.jsx)(re.a,Object(j.a)({label:w("labels")},ar(1))),!s&&x([_.schedules])&&Object(n.jsx)(re.a,Object(j.a)({label:w("schedules")},ar(2))),!s&&x([_.students])&&Object(n.jsx)(re.a,Object(j.a)({label:w("students")},ar(3))),!s&&x([_.teachers])&&Object(n.jsx)(re.a,Object(j.a)({label:w("teachers")},ar(4)))]})}),Object(n.jsxs)(ae.a,{axis:"rtl"===y.direction?"x-reverse":"x",index:C,containerStyle:{height:"100%"},className:g.content,onChangeIndex:function(e){N(e)},children:[Object(n.jsx)(Mn,{value:C,index:0,newCourse:s,setNewCourse:c,dir:y.direction,currentCourse:p,updateCurrentCourse:m,deleteCourse:l}),Object(n.jsx)(Vn,{value:C,index:1,dir:y.direction,currentCourse:p,updateCurrentCourse:m,deleteCourse:l}),x([_.schedules])&&Object(n.jsx)(Hn,{value:C,index:2,history:a,className:g.tab,dir:y.direction,scheduleIds:null===p?null:p.schedules,student_id:t}),x([_.students])&&Object(n.jsx)(Jn,{value:C,index:3,dataService:An,history:a,courseIds:null===p?null:p.students,addCourseId:function(e){m(Object(j.a)(Object(j.a)({},p),{},{students:[].concat(Object(Z.a)(p.students),[e])}))},student_id:t,deleteCourseFromStudent:function(e){m(Object(j.a)(Object(j.a)({},p),{},{students:p.students.filter((function(t){return t!==e}))}))}}),x([_.teachers])&&Object(n.jsx)(er,{value:C,index:4,dataService:Ln,history:a,courseIds:null===p?null:p.teachers,addCourseId:function(e){m(Object(j.a)(Object(j.a)({},p),{},{teachers:[].concat(Object(Z.a)(p.teachers),[e])}))},student_id:t,deleteCourseFromStudent:function(e){m(Object(j.a)(Object(j.a)({},p),{},{teachers:p.teachers.filter((function(t){return t!==e}))}))}})]})]})}var rr=Object(g.a)((function(e){return{root:{height:"100%"},left:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));var ir=[{path:"/students",component:function(e){var t=e.history,a=(Object(m.a)(e,["history"]),Ja()),c=Object($.a)().t,s=Object(r.useState)([]),l=Object(o.a)(s,2),d=l[0],u=l[1],b=Object(r.useState)(!1),h=Object(o.a)(b,2),p=h[0],f=h[1],O=Object(r.useState)(null),x=Object(o.a)(O,2),_=x[0],g=x[1],y=Ee(),v=new URLSearchParams(window.location.search).get("id"),w=Ve(),S=Object(o.a)(w,2),k=S[0],C=S[1];Object(r.useEffect)((function(){null!==v&&void 0!==v&&g(v)}),[v]);var N=i.a.useContext(Ct);return Object(r.useEffect)((function(){null!==_&&f(!1)}),[_]),Object(n.jsxs)(Q.a,{container:!0,spacing:3,className:a.root,children:[Object(n.jsxs)(Q.a,{item:!0,xs:4,className:a.left,children:[Object(n.jsx)("h1",{children:c("students")}),Object(n.jsx)(Ya,{setCurrentItemId:g,currentItemId:_,items:d,setItems:u,chips:[Object(n.jsx)(R.a,{title:c("export_contact_sheets"),"aria-label":c("export_contact_sheets"),children:Object(n.jsx)(La.a,{variant:"outlined",color:"primary",disabled:N.loading,size:"small",avatar:Object(n.jsx)(Wt.a,{children:"csv"}),label:c("export_all_plus"),onClick:function(){var e;N.loading||(N.startLoading(),(e=new Promise((function(e,t){_t()({url:"".concat(je,"/api/").concat(pe,"/files/god"),method:"POST",responseType:"blob",headers:Object(j.a)(Object(j.a)({},{Accept:"text/csv","Cache-Control":"no-cache"}),he())}).then((function(t){var a=t.headers["content-disposition"].split("filename=")[1];null===a&&(a="export.zip");var n=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",a),document.body.appendChild(r),r.click(),r.remove(),e()})).catch((function(e){t(e)}))}))).then.apply(e,Object(Z.a)(y({}))).finally((function(){N.stopLoading()})))}})})],usableFilters:[{name:"enrolment_status",defaultValue:null,options:[{label:"enrolled",tooltip:"only_enrolled",name:"enrolled"},{label:"pre-enrolled",tooltip:"only_preenrolled",name:"pre-enrolled"},{label:"early-unenrolled",tooltip:"only_earlyunenrolled",name:"early-unenrolled"}]},{name:"default_payment_method",defaultValue:null,options:[{label:"cash",tooltip:"only_cash",name:"cash"},{label:"bank-transfer",tooltip:"only_banktransfer",name:"bank-transfer"},{label:"bank-direct-debit",tooltip:"only_bankdirectdebit",name:"bank-direct-debit"}]}],defaultSearchBy:"full_name",searchByOptions:["full_name","id"],dataService:ge,searchBarLabel:"students"}),k([C.post])&&Object(n.jsx)(R.a,{title:c("new_student"),children:Object(n.jsx)(Ra.a,{className:a.fab,color:"primary",onClick:function(e){g(null),f(!0)},children:Object(n.jsx)(Aa.a,{})})})]}),Object(n.jsx)(Q.a,{item:!0,xs:8,className:a.left,children:Object(n.jsx)(Da,{currentStudentId:_,newStudent:p,history:t,setNewStudent:f,addStudentId:function(e){g(e)},deleteStudent:function(e){e===_&&g(null),u(d.filter((function(t){return t.id!==e})))}})})]})},title:"students",icon:M.a,needs:[Ue.students,Ue.get]},{path:"/courses",component:function(e){var t=e.history,a=(Object(m.a)(e,["history"]),rr()),i=Object($.a)().t,c=Object(r.useState)([]),s=Object(o.a)(c,2),l=s[0],d=s[1],u=Object(r.useState)(!1),b=Object(o.a)(u,2),h=b[0],p=b[1],j=Object(r.useState)(null),f=Object(o.a)(j,2),O=f[0],x=f[1],_=new URLSearchParams(window.location.search).get("id");Object(r.useEffect)((function(){null!==_&&void 0!==_&&x(_)}),[_]),Object(r.useEffect)((function(){null!==O&&p(!1)}),[O]);var g=Ve(),y=Object(o.a)(g,2),v=y[0],w=y[1];return Object(n.jsxs)(Q.a,{container:!0,spacing:3,className:a.root,children:[Object(n.jsxs)(Q.a,{item:!0,xs:4,className:a.left,children:[Object(n.jsx)("h1",{children:i("courses")}),Object(n.jsx)(Ya,{setCurrentItemId:x,currentItemId:O,items:l,setItems:d,usableFilters:[{name:"is_published",defaultValue:null,options:[{label:"published",tooltip:"only_published",name:!0},{label:"private",tooltip:"only_private",name:!1}]}],defaultSearchBy:"name",searchByOptions:["name","id"],dataService:ca,searchBarLabel:"courses",displayNameField:"name"}),v([w.post])&&Object(n.jsx)(R.a,{title:i("new_student"),children:Object(n.jsx)(Ra.a,{className:a.fab,color:"primary",onClick:function(e){x(null),p(!0)},children:Object(n.jsx)(Aa.a,{})})})]}),Object(n.jsx)(Q.a,{item:!0,xs:8,className:a.left,children:Object(n.jsx)(nr,{currentCourseId:O,newCourse:h,setNewCourse:p,history:t,addCourseId:function(e){x(e)},deleteCourse:function(e){e===O&&x(null),d(l.filter((function(t){return t.id!==e})))}})})]})},title:"courses",icon:z.a,needs:[Ue.courses,Ue.get]},{path:"/teachers",component:function(e){var t=e.history,a=(Object(m.a)(e,["history"]),Bn()),i=Object($.a)().t,c=Object(r.useState)([]),s=Object(o.a)(c,2),l=s[0],d=s[1],u=Object(r.useState)(!1),b=Object(o.a)(u,2),h=b[0],p=b[1],j=Object(r.useState)(null),f=Object(o.a)(j,2),O=f[0],x=f[1],_=Ve(),g=Object(o.a)(_,2),y=g[0],v=g[1],w=new URLSearchParams(window.location.search).get("id");return Object(r.useEffect)((function(){null!==w&&void 0!==w&&x(w)}),[w]),Object(r.useEffect)((function(){null!==O&&p(!1)}),[O]),Object(n.jsxs)(Q.a,{container:!0,spacing:3,className:a.root,children:[Object(n.jsxs)(Q.a,{item:!0,xs:4,className:a.left,children:[Object(n.jsx)("h1",{children:i("teachers")}),Object(n.jsx)(Ya,{setCurrentItemId:x,currentItemId:O,items:l,setItems:d,defaultSearchBy:"full_name",searchByOptions:["full_name","id"],dataService:Cn,searchBarLabel:"teachers"}),y([v.post])&&Object(n.jsx)(R.a,{title:i("new_teacher"),children:Object(n.jsx)(Ra.a,{className:a.fab,color:"primary",onClick:function(e){x(null),p(!0)},children:Object(n.jsx)(Aa.a,{})})})]}),Object(n.jsx)(Q.a,{item:!0,xs:8,className:a.left,children:Object(n.jsx)(Rn,{currentTeacherId:O,newTeacher:h,setNewTeacher:p,history:t,addTeacherId:function(e){x(e)},deleteTeacher:function(e){e===O&&x(null),d(l.filter((function(t){return t.id!==e})))}})})]})},title:"teachers",icon:H.a,needs:[Ue.teachers,Ue.get]},{path:"/rooms",component:function(e){var t=e.history,a=(Object(m.a)(e,["history"]),kn()),i=Object($.a)().t,c=Object(r.useState)([]),s=Object(o.a)(c,2),l=s[0],d=s[1],u=Object(r.useState)(!1),b=Object(o.a)(u,2),h=b[0],p=b[1],j=Object(r.useState)(null),f=Object(o.a)(j,2),O=f[0],x=f[1],_=new URLSearchParams(window.location.search).get("id");Object(r.useEffect)((function(){null!==_&&void 0!==_&&x(_)}),[_]),Object(r.useEffect)((function(){null!==O&&p(!1)}),[O]);var g=Ve(),y=Object(o.a)(g,2),v=y[0],w=y[1];return Object(n.jsxs)(Q.a,{container:!0,spacing:3,className:a.root,children:[Object(n.jsxs)(Q.a,{item:!0,xs:4,className:a.left,children:[Object(n.jsx)("h1",{children:i("rooms")}),Object(n.jsx)(Ya,{setCurrentItemId:x,currentItemId:O,items:l,setItems:d,defaultSearchBy:"name",displayNameField:"name",searchByOptions:["name","id"],dataService:On,searchBarLabel:"rooms"}),v([w.post])&&Object(n.jsx)(R.a,{title:i("new_room"),children:Object(n.jsx)(Ra.a,{className:a.fab,color:"primary",onClick:function(e){x(null),p(!0)},children:Object(n.jsx)(Aa.a,{})})})]}),Object(n.jsx)(Q.a,{item:!0,xs:8,className:a.left,children:Object(n.jsx)(Sn,{currentRoomId:O,newRoom:h,setNewRoom:p,history:t,addRoomId:function(e){x(e)},deleteRoom:function(e){e===O&&x(null),d(l.filter((function(t){return t.id!==e})))}})})]})},title:"rooms",icon:V.a,needs:[Ue.rooms,Ue.get]},{path:"/payments",component:function(e){e.history,Object(m.a)(e,["history"]);var t=fn(),a=Object($.a)().t,r=Ee(),c=i.a.useContext(Ct);return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:a("payments")}),Object(n.jsxs)(P.a,{className:t.list,children:[Object(n.jsxs)(E.a,{button:!0,onClick:function(){var e;c.loading||(c.startLoading(),(e=ht.downloadCsv(null,null,"*",null)).then.apply(e,Object(Z.a)(r({}))).finally((function(){c.stopLoading()})))},children:[Object(n.jsx)(Fa.a,{children:Object(n.jsx)(Wt.a,{className:t.avatar,children:"csv"})}),Object(n.jsx)(B.a,{id:"name",primary:a("export_all")})]}),Object(n.jsx)(T.a,{})]})]})},title:"payments",icon:X.a,needs:[Ue.payments,Ue.get]},{path:"/users",component:function(e){var t=e.history,a=(Object(m.a)(e,["history"]),mn()),c=Object($.a)().t,s=Object(r.useState)([]),l=Object(o.a)(s,2),d=l[0],u=l[1],b=Object(r.useState)(null),h=Object(o.a)(b,2),p=h[0],j=h[1],f=i.a.useState(!1),O=Object(o.a)(f,2),x=O[0],_=O[1],g=Ve(),y=Object(o.a)(g,2),v=y[0],w=y[1],S=function(){_(!1)},k=new URLSearchParams(window.location.search).get("id");Object(r.useEffect)((function(){null!==k&&void 0!==k&&j(k)}),[k]);var C=Ee(),N=Object(De.a)({initialValues:{email:"",needs:[]},validationSchema:ye.d({email:nt(c)}),enableReinitialize:!0,onSubmit:function(e,t){var a,n=t.setStatus,r=t.setSubmitting;r(!0),(a=Za.inviteUser(e.email,e.needs)).then.apply(a,Object(Z.a)(C({snackbarSuccess:!0}))).then((function(e){S()})).catch((function(e){n(!0)})).finally((function(){r(!1)}))}});return Object(n.jsxs)(Q.a,{container:!0,spacing:3,className:a.root,children:[Object(n.jsxs)(pt.a,{open:x,onClose:S,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(ot.a,{id:"form-dialog-title",children:c("invite_user")})," ",Object(n.jsxs)("form",{onSubmit:N.handleSubmit,children:[Object(n.jsxs)(lt.a,{children:[Object(n.jsx)(Se.a,{autoFocus:!0,margin:"dense",id:"email",name:"email",label:c("email"),type:"email",fullWidth:!0,value:N.values.email,onChange:N.handleChange,onBlur:N.handleBlur,error:N.status||void 0!==N.errors.email,helperText:N.touched.email&&N.errors.email}),Object(n.jsx)(ie.a,{my:2,className:a.dialog,children:Object(n.jsx)(sn,{noDirty:!0,formik:N})})]}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(Pe.a,{onClick:S,color:"primary",children:c("cancel")}),Object(n.jsx)(Pe.a,{type:"submit",color:"primary",disabled:N.isSubmitting,children:c("invite")})]})]})]}),Object(n.jsxs)(Q.a,{item:!0,xs:4,className:a.left,children:[Object(n.jsx)("h1",{children:c("users")}),Object(n.jsx)(Ya,{setCurrentItemId:j,currentItemId:p,items:d,setItems:u,defaultSearchBy:"full_name",searchByOptions:["full_name","id"],dataService:Qa,searchBarLabel:"users"}),v([w.invite_users])&&Object(n.jsx)(R.a,{title:c("new_user"),children:Object(n.jsx)(Ra.a,{className:a.fab,color:"primary",onClick:function(){_(!0)},children:Object(n.jsx)(se.a,{})})})]}),Object(n.jsx)(Q.a,{item:!0,xs:8,className:a.left,children:Object(n.jsx)(jn,{currentStudentId:p,history:t,deleteUser:function(e){e===p&&j(null),u(d.filter((function(t){return t.id!==e})))}})})]})},title:"users",icon:J.a,needs:[Ue.users,Ue.get]}],cr=a(115),sr=a(271),or=a.n(sr),lr=a(272),dr=a.n(lr),ur=a(288),br=a(68),hr={login:function(e,t){return new Promise((function(a,n){_t()({url:"".concat(je,"/auth/v1/login"),method:"POST",auth:{username:e,password:t},headers:Object(j.a)(Object(j.a)({},{"Cache-Control":"no-cache"}),he())}).then((function(e){a(e.data.needs)})).catch((function(e){try{401===e.response.status&&a(!1)}catch(t){}n(e)}))}))},logout:function(){return new Promise((function(e,t){_t()({url:"".concat(je,"/auth/v1/logout"),method:"GET",headers:Object(j.a)(Object(j.a)({},{"Cache-Control":"no-cache"}),he())}).then((function(t){e(!1)})).catch((function(e){t(e)}))}))},ping:function(){return new Promise((function(e,t){_t()({url:"".concat(je,"/auth/v1/ping"),method:"GET",headers:{"Cache-Control":"no-cache"}}).then((function(t){e(t.data.needs)})).catch((function(a){try{401===a.response.status&&e(!1)}catch(n){}t(a)}))}))}};var pr=a(270),jr=a.n(pr),mr=function(){return localStorage.getItem("i18nextLng")||"cat"};function fr(e){var t=Object.assign({},e),a=Object($.a)().t,r=mr();return Object(n.jsx)(R.a,Object(j.a)(Object(j.a)({title:a("cat"===r?"use_eng":"use_cat")},t),{},{children:Object(n.jsx)(S.a,{color:"inherit",onClick:function(){br.a.changeLanguage("eng"===mr()?"cat":"eng").then()},"aria-label":a("cat"===r?"use_eng":"use_cat"),children:Object(n.jsx)(jr.a,{})})}))}var Or=a(158),xr=a.n(Or);function _r(e){var t=Object.assign({},e),a=i.a.useContext(Wa),r=Object($.a)().t;return Object(n.jsx)(R.a,Object(j.a)(Object(j.a)({title:a.theme?r("use_light"):r("use_dark"),style:{float:"right"}},t),{},{children:Object(n.jsx)(S.a,{color:"inherit","aria-label":a.theme?r("use_light"):r("use_dark"),onClick:a.switchTheme,children:Object(n.jsx)(xr.a,{})})}))}var gr={eng:{label:"english",dir:"ltr",active:!0},cat:{label:"catal\xe0",dir:"ltr",active:!1}},yr=Object(g.a)((function(e){return Object(y.a)({toolbar:Object(j.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),grow:{flexGrow:1}})}));function vr(e){e.changeTheme;var t,a=yr(),c=Ee(),s=localStorage.getItem("i18nextLng")||"eng",l=Object($.a)().t,d=i.a.useState(null),u=Object(o.a)(d,2),b=u[0],h=u[1],p=Boolean(b),j=function(){h(null)},m=i.a.useState(null),f=Object(o.a)(m,2),x=f[0],g=f[1],y=Boolean(x),v=function(){g(null)};i.a.useEffect((function(){document.body.dir=gr[s].dir}),[x,s]);var k=Object(n.jsx)(ur.a,{anchorEl:x,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-language-select-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:y,onClose:v,children:null===(t=Object.keys(gr))||void 0===t?void 0:t.map((function(e){return Object(n.jsx)(oe.a,{onClick:function(){return t=e,br.a.changeLanguage(t).then(),void v();var t},children:gr[e].label},e)}))}),C=Object(r.useContext)(O),N="primary-search-account-menu",I=Object(n.jsx)(ur.a,{anchorEl:b,anchorOrigin:{vertical:"top",horizontal:"right"},id:N,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:j,children:Object(n.jsx)(oe.a,{onClick:function(e){var t;(t=hr.logout()).then.apply(t,Object(Z.a)(c({}))).then((function(){C.setUser({logged:!1,ping:!1})})),j()},children:l("log_out")})});return Object(n.jsxs)(la.a,{children:[Object(n.jsx)(S.a,{color:"inherit","aria-label":l("open_drawer"),onClick:e.handleDrawerOpen,edge:"start",className:Object(w.a)(a.menuButton,Object(_.a)({},a.hide,e.open)),children:Object(n.jsx)(or.a,{})}),Object(n.jsx)(Et.a,{variant:"h6",noWrap:!0,children:"centr\xedfuga4"}),Object(n.jsx)("div",{className:a.grow}),Object(n.jsx)(fr,{}),Object(n.jsx)(_r,{}),Object(n.jsx)(R.a,{title:l("my_account"),children:Object(n.jsx)(S.a,{color:"inherit",onClick:function(e){h(e.currentTarget)},"aria-label":l("my_account"),"aria-controls":N,"aria-haspopup":"true",children:Object(n.jsx)(dr.a,{})})}),k,I]})}var wr=a(273),Sr=a(292),kr=a(561),Cr=240,Nr=Object(g.a)((function(e){return Object(y.a)({root:{display:"flex",height:"100vh"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),background:e.palette.neutral.main,color:e.palette.neutral.emphasisText.medium},appBarShift:{marginLeft:Cr,width:"calc(100% - ".concat(Cr,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:Cr,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:Cr,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(_.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},toolbar:Object(j.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{display:"flex",flexFlow:"column",height:"100%",width:"100%",overflow:"auto"},main:{flex:1,padding:e.spacing(3),overflow:"auto"},icon:{"&":{color:e.palette.neutral.emphasisText.medium}},selectedIcon:{"&":{color:e.palette.primary.main}},grow:{flexGrow:1}})})),Ir=function(e){var t,a,r=L()(),c=Nr(),s=Object($.a)().t,d=i.a.useState(!1),u=Object(o.a)(d,2),b=u[0],h=u[1],p=i.a.useState("/students"),j=Object(o.a)(p,2),m=j[0],O=j[1],x=Ve(),g=Object(o.a)(x,2),y=g[0],C=(g[1],function(){h(!1)}),I=Object(wr.a)(),A=i.a.useState(!1),F=Object(o.a)(A,2),M=F[0],G=F[1];return Object(n.jsxs)("div",{className:c.root,children:[Object(n.jsx)(l.a,{}),Object(n.jsxs)(Ct.Provider,{value:{loading:M,startLoading:function(){G(!0)},stopLoading:function(){G(!1)}},children:[Object(n.jsx)(v.a,{position:"fixed",className:Object(w.a)(c.appBar,Object(_.a)({},c.appBarShift,b)),children:Object(n.jsx)(vr,{changeTheme:e.changeTheme,handleDrawerOpen:function(){h(!0)},handleDrawerClose:C,open:b})}),Object(n.jsxs)(cr.a,{history:I,basename:"/app/home",children:[Object(n.jsxs)(k.a,{variant:"permanent",className:Object(w.a)(c.drawer,(t={},Object(_.a)(t,c.drawerOpen,b),Object(_.a)(t,c.drawerClose,!b),t)),classes:{paper:Object(w.a)((a={},Object(_.a)(a,c.drawerOpen,b),Object(_.a)(a,c.drawerClose,!b),a))},children:[Object(n.jsx)("div",{className:c.toolbar,children:Object(n.jsx)(S.a,{onClick:C,children:"rtl"===r.direction?Object(n.jsx)(N.a,{}):Object(n.jsx)(q.a,{})})}),Object(n.jsx)(T.a,{}),Object(n.jsx)(P.a,{children:ir.filter((function(e){return y(e.needs)})).map((function(e){return Object(n.jsxs)(E.a,{to:e.path,button:!0,component:cr.b,onClick:function(){O(e.path)},children:[Object(n.jsx)(D.a,{className:e.path===m?c.selectedIcon:c.icon,children:Object(n.jsx)(R.a,{title:s(e.title),"aria-label":s(e.title),children:Object(n.jsx)(e.icon,{})})}),Object(n.jsx)(B.a,{primary:s(e.title)})]},e.title)}))})]}),Object(n.jsxs)("div",{className:c.content,children:[Object(n.jsx)("div",{className:c.toolbar}),Object(n.jsx)("main",{className:c.main,children:ir.filter((function(e){return y(e.needs)})).map((function(e){return Object(n.jsx)(f.b,{path:e.path,component:e.component},e.title)}))})]})]}),Object(n.jsx)(Sr.a,{className:c.backdrop,open:M,onClick:function(){G(!1)},children:Object(n.jsx)(kr.a,{color:"inherit"})})]})]})},qr=a(562),Tr={reset:function(e,t,a,n){return new Promise((function(r,i){_t()({url:"".concat(je,"/password-reset/v1/newPassword"),method:"POST",data:{email:e,password:t,token:a,recaptcha:n},headers:Object(j.a)(Object(j.a)({},{"Cache-Control":"no-cache"}),he())}).then((function(e){r(!0)})).catch((function(e){i(e)}))}))},startReset:function(e,t){return new Promise((function(a,n){_t()({url:"".concat(je,"/password-reset/v1/passwordReset"),method:"POST",data:{email:e,recaptcha:t},headers:Object(j.a)(Object(j.a)({},{"Cache-Control":"no-cache"}),he())}).then((function(e){a(!0)})).catch((function(e){n(e)}))}))}};var Pr=function(e){return Object(r.useEffect)((function(){return e()}),[])},Er=a(114),Dr=Object(g.a)((function(e){return{root:{display:"flex",flexGrow:1,height:"100vh"},field:{width:"100%",margin:"5px"},paper:{width:"50%",height:"50%",minWidth:"500px",padding:"50px",margin:"auto"},reset:{width:"100%",textAlign:"end",cursor:""}}})),Rr=function(e){var t=Dr(),a=i.a.useContext(O),r=i.a.useContext(Wa),c=i.a.useState(null),s=Object(o.a)(c,2),l=s[0],d=s[1],u=i.a.useState(!1),b=Object(o.a)(u,2),h=b[0],j=b[1];var m=Ee(),f=Object(p.b)().enqueueSnackbar,x=function(t){var n=a.setUser,r=a.setNeeds;n({logged:!0,ping:!0}),r(t);var i=(e.location.state||{from:{pathname:"/home/students"}}).from;e.history.push(i)},_=Object($.a)().t,g=Object(De.a)({initialValues:{username:"",password:""},validationSchema:ye.d({username:at(_),password:ye.f().required(_("password_required"))}),enableReinitialize:!0,onSubmit:function(e,t){var a,n=e.username,r=e.password,i=t.setStatus,c=t.setSubmitting;i(),(a=hr.login(n,r)).then.apply(a,Object(Z.a)(m({}))).then((function(e){x(e)})).catch((function(){i(!0)})).finally((function(){c(!1)}))}});Pr((function(){if(a.user.logged)return e.history.push("/home/students"),null;var t;!1!==a.user.ping&&(t=hr.ping()).then.apply(t,Object(Z.a)(m({errorOut:!1}))).then((function(e){x(e)}))}));return Object(n.jsx)("div",{className:t.root,children:Object(n.jsxs)(Q.a,{container:!0,children:[Object(n.jsx)(Q.a,{xs:2,item:!0}),Object(n.jsx)(Q.a,{xs:8,item:!0,children:Object(n.jsx)(Q.a,{container:!0,spacing:0,align:"center",justify:"center",direction:"column",style:{height:"100%"},children:Object(n.jsx)(Q.a,{item:!0,children:Object(n.jsx)(ie.a,{m:2,children:Object(n.jsxs)(ee.a,{className:t.paper,children:[Object(n.jsx)("img",{src:"".concat(fe,"/logo_centrifuga4_").concat(r.label,".svg"),alt:"Logo Centr\xedfuga",style:{height:"85px"}}),Object(n.jsxs)("form",{onSubmit:g.handleSubmit,children:[Object(n.jsx)(Se.a,{label:_("email"),disabled:g.isSubmitting,helperText:g.touched.username&&g.errors.username,type:"email",name:"username",className:t.field,value:g.values.username,onChange:g.handleChange,onBlur:g.handleBlur,error:g.status}),Object(n.jsx)(Se.a,{label:_("password"),name:"password",type:"password",helperText:g.touched.password&&g.errors.password,className:t.field,value:g.values.password,disabled:g.isSubmitting,onChange:g.handleChange,onBlur:g.handleBlur,error:g.status}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(Pe.a,{variant:"contained",color:"primary",type:"submit",disabled:g.isSubmitting,className:t.field,children:_("log_in")})})]}),h&&Object(n.jsxs)("div",{children:[Object(n.jsx)(Er.a,{sitekey:me,onChange:function(e){d(e)},theme:r.theme?"dark":"light",className:t.recaptcha}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(Pe.a,{variant:"contained",color:"primary",onClick:function(){var e,t=g.values.username;null===t||""===t||void 0===t?f(_("username_required_password_reset"),{variant:"warning"}):(e=Tr.startReset(t,l)).then.apply(e,Object(Z.a)(m({}))).then((function(e){j(!1),f(_("started_password_reset"),{variant:"success"})}))},disabled:null===l,className:t.field,children:_("reset_password")})})]}),Object(n.jsx)(ie.a,{className:t.reset,children:Object(n.jsx)(Et.a,{variant:"caption",children:Object(n.jsx)(qr.a,{component:"button",variant:"body2",onClick:function(){j(!0)},children:_("reset_password")})})})]})})})})}),Object(n.jsxs)(Q.a,{xs:2,item:!0,children:[Object(n.jsx)(fr,{style:{float:"right"}}),Object(n.jsx)(_r,{style:{float:"right"}})]})]})})},Br={signup:function(e,t,a,n,r,i,c){return new Promise((function(e,s){_t()({url:"".concat(je,"/invites/v1/newUser"),method:"POST",data:{password:t,email:a,name:n,surname1:r,surname2:i,token:c},headers:Object(j.a)(Object(j.a)({},{"Cache-Control":"no-cache"}),he())}).then((function(t){e(!0)})).catch((function(e){s(e)}))}))}};var Ar=Object(g.a)((function(e){return{root:{display:"flex",flexGrow:1,height:"100vh"},field:{width:"100%",margin:"5px"},paper:{width:"50%",minWidth:"500px",height:"50%",padding:"50px",margin:"auto"}}})),Lr=function(e){var t=Ar(),a=i.a.useContext(Wa),r=Object(p.b)().enqueueSnackbar;Pr((function(){br.a.changeLanguage(o.get("lan")).then()}));var c=Object($.a)().t,s=Ee(),o=new URLSearchParams(window.location.search),l=o.get("token"),d=o.get("email"),u=Object(De.a)({initialValues:{username:d,email:d,password:"",name:"",surname1:"",surname2:"",password2:""},validationSchema:ye.d({username:at(c),email:nt(c),password:$e(c),password2:et(c),name:ye.f().required(c("name_required")),surname1:ye.f().required(c("surname1_required")),surname2:ye.f().required(c("surname2_required"))}),enableReinitialize:!0,onSubmit:function(t,a){var n,i=t.username,o=t.email,d=t.password,u=t.name,b=t.surname1,h=t.surname2,p=(t.password2,a.setStatus),j=a.setSubmitting;p(),(n=Br.signup(i,d,o,u,b,h,l)).then.apply(n,Object(Z.a)(s({handle401:!1,handle400:!1}))).then((function(t){r(c("sign_up_success"),{variant:"success"}),j(!1),e.history.push("/login")}),(function(e){j(!1),p(e),401===e.response.status?r(c("invalid_expired_invite"),{variant:"warning"}):400===e.response.status&&r(c("used_invite"),{variant:"warning"})}))}});return Object(n.jsx)("div",{className:t.root,children:Object(n.jsxs)(Q.a,{container:!0,children:[Object(n.jsx)(Q.a,{xs:2,item:!0}),Object(n.jsx)(Q.a,{xs:8,item:!0,children:Object(n.jsx)(Q.a,{container:!0,spacing:0,align:"center",justify:"center",direction:"column",style:{height:"100%"},children:Object(n.jsx)(Q.a,{item:!0,children:Object(n.jsx)(ie.a,{m:2,children:Object(n.jsxs)(ee.a,{className:t.paper,children:[Object(n.jsx)("img",{src:"".concat(fe,"/logo_centrifuga4_").concat(a.label,".svg"),alt:"Logo Centr\xedfuga",style:{height:"85px"}}),Object(n.jsx)(ie.a,{m:2,children:Object(n.jsx)(Et.a,{children:c("been_invited")})}),Object(n.jsxs)("form",{onSubmit:u.handleSubmit,children:[Object(n.jsx)(Se.a,{label:c("email"),helperText:u.touched.email&&u.errors.email,type:"email",name:"email",className:t.field,value:u.values.email,onChange:u.handleChange,onBlur:u.handleBlur,error:u.status,disabled:!0}),Object(n.jsx)(Se.a,{label:c("name"),helperText:u.touched.name&&u.errors.name,name:"name",className:t.field,value:u.values.name,onChange:u.handleChange,disabled:u.isSubmitting,onBlur:u.handleBlur,error:u.status}),Object(n.jsx)(Se.a,{label:c("surname1"),helperText:u.touched.surname1&&u.errors.surname1,name:"surname1",disabled:u.isSubmitting,className:t.field,value:u.values.surname1,onChange:u.handleChange,onBlur:u.handleBlur,error:u.status}),Object(n.jsx)(Se.a,{label:c("surname2"),helperText:u.touched.surname2&&u.errors.surname2,name:"surname2",disabled:u.isSubmitting,className:t.field,value:u.values.surname2,onChange:u.handleChange,onBlur:u.handleBlur,error:u.status}),Object(n.jsx)(Se.a,{label:c("password"),name:"password",type:"password",helperText:u.touched.password&&u.errors.password,className:t.field,value:u.values.password,disabled:u.isSubmitting,onChange:u.handleChange,onBlur:u.handleBlur,error:u.status}),Object(n.jsx)(Se.a,{label:c("confirm_password"),name:"password2",type:"password",helperText:u.touched.password2&&u.errors.password2,className:t.field,value:u.values.password2,disabled:u.isSubmitting,onChange:u.handleChange,onBlur:u.handleBlur,error:u.status}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(Pe.a,{variant:"contained",color:"primary",type:"submit",disabled:u.isSubmitting,className:t.field,children:c("sign_up")})})]})]})})})})}),Object(n.jsxs)(Q.a,{xs:2,item:!0,children:[Object(n.jsx)(fr,{style:{float:"right"}}),Object(n.jsx)(_r,{style:{float:"right"}})]})]})})},Fr=Object(g.a)((function(e){return{root:{display:"flex",flexGrow:1,height:"100vh"},field:{width:"100%",margin:"5px"},recaptcha:{margin:e.spacing(3)},paper:{width:"50%",minWidth:"500px",height:"50%",padding:"50px",margin:"auto"}}})),Mr=function(e){var t=Fr(),a=i.a.useContext(Wa),r=i.a.useState(null),c=Object(o.a)(r,2),s=c[0],l=c[1];var d=Object(p.b)().enqueueSnackbar;Pr((function(){br.a.changeLanguage(b.get("lan")).then()}));var u=Object($.a)().t,b=new URLSearchParams(window.location.search),h=Ee(),j=b.get("token"),m=b.get("email"),f=Object(De.a)({initialValues:{email:m,password:"",password2:""},validationSchema:ye.d({email:at(u),password:$e(u),password2:et(u)}),enableReinitialize:!0,onSubmit:function(t,a){var n,r=t.email,i=t.password,c=(t.password2,a.setStatus),o=a.setSubmitting;c(),(n=Tr.reset(r,i,j,s)).then.apply(n,Object(Z.a)(h({handle401:!1}))).then((function(t){d(u("reset_password_success"),{variant:"success"}),o(!1),e.history.push("/login")}),(function(e){o(!1),c(e),401===e.response.status&&d(u("invalid_expired_reset"),{variant:"warning"})}))}});return Object(n.jsx)("div",{className:t.root,children:Object(n.jsxs)(Q.a,{container:!0,children:[Object(n.jsx)(Q.a,{xs:2,item:!0}),Object(n.jsx)(Q.a,{xs:8,item:!0,children:Object(n.jsx)(Q.a,{container:!0,spacing:0,align:"center",justify:"center",direction:"column",style:{height:"100%"},children:Object(n.jsx)(Q.a,{item:!0,children:Object(n.jsx)(ie.a,{m:2,children:Object(n.jsxs)(ee.a,{className:t.paper,children:[Object(n.jsx)("img",{src:"".concat(fe,"/logo_centrifuga4_").concat(a.label,".svg"),alt:"Logo Centr\xedfuga",style:{height:"85px"}}),Object(n.jsx)(ie.a,{m:2,children:Object(n.jsx)(Et.a,{children:u("new_password")})}),Object(n.jsxs)("form",{onSubmit:f.handleSubmit,children:[Object(n.jsx)(Se.a,{label:u("email"),helperText:f.touched.email&&f.errors.email,type:"email",name:"email",className:t.field,value:f.values.email,onChange:f.handleChange,onBlur:f.handleBlur,error:f.status,disabled:!0}),Object(n.jsx)(Se.a,{label:u("password"),name:"password",type:"password",helperText:f.touched.password&&f.errors.password,className:t.field,value:f.values.password,disabled:f.isSubmitting,onChange:f.handleChange,onBlur:f.handleBlur,error:f.status}),Object(n.jsx)(Se.a,{label:u("confirm_password"),name:"password2",type:"password",helperText:f.touched.password2&&f.errors.password2,className:t.field,value:f.values.password2,disabled:f.isSubmitting,onChange:f.handleChange,onBlur:f.handleBlur,error:f.status}),Object(n.jsx)(Er.a,{sitekey:me,onChange:function(e){l(e)},theme:a.theme?"dark":"light",className:t.recaptcha}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(Pe.a,{variant:"contained",color:"primary",type:"submit",disabled:f.isSubmitting||null==s,className:t.field,children:u("change_password")})})]})]})})})})}),Object(n.jsxs)(Q.a,{xs:2,item:!0,children:[Object(n.jsx)(fr,{style:{float:"right"}}),Object(n.jsx)(_r,{style:{float:"right"}})]})]})})},Gr=a(571),zr=a(563),Ur=a(569),Vr={getCourses:function(){return new Promise((function(e,t){_t()({method:"get",url:"".concat(je,"/pre-enrolment/v1/courses"),headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(t){e(t.data)})).catch((function(e){t(e)}))}))},postPreEnrollment:function(e,t){return new Promise((function(a,n){_t()({method:"post",url:"".concat(je,"/pre-enrolment/v1/pre-enrolment"),data:{body:e,recaptcha:t},headers:Object(j.a)(Object(j.a)({},{"Content-Type":"application/json","Cache-Control":"no-cache"}),he())}).then((function(e){a(e)})).catch((function(e){n(e)}))}))}};var Wr=Object(g.a)((function(e){return{root:{width:"100%"},field:{width:"100%",margin:"5px"},cards:{"& > *":{margin:e.spacing(3)}},buttons:{"& > *":{margin:e.spacing(1)}},line:{width:"100%",marginTop:e.spacing(1)},card:{minWidth:200,width:"fit-content",maxWidth:500,display:"inline-block"},recaptcha:{margin:e.spacing(4)},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},list:{maxHeight:"30vh",minHeight:"150px",overflow:"auto"},composite:{display:"flex",flexDirection:"row",flex:1,flexWrap:"wrap",gap:e.spacing(1),width:"100%"}}})),Hr=function(e){var t=new Date,a=t.getDay(),n=e-a;return t.setDate(a+n),t.toLocaleString(window.navigator.language,{weekday:"short"})},Kr=function(e){var t=new Date,a=new Date(e),n=t.getFullYear()-a.getFullYear(),r=t.getMonth()-a.getMonth();return(r<0||0===r&&t.getDate()<a.getDate())&&n--,n<18},Xr=function(e){var t=Object($.a)().t,a="Puc pagar la quota trimestral de 60\u20ac/estudiant",c="Puc pagar una quota trimestral de 50\u20ac/estudiant",s="Puc pagar una quota trimestral de 40\u20ac/estudiant",l=Wr(),d=i.a.useState(null),u=Object(o.a)(d,2),b=u[0],h=u[1];Object(p.b)().enqueueSnackbar;var m=i.a.useState(new Set),f=Object(o.a)(m,2),O=f[0],x=f[1],_=i.a.useState([]),g=Object(o.a)(_,2),y=g[0],v=g[1],w=i.a.useState([]),k=Object(o.a)(w,2),C=k[0],N=k[1],I=i.a.useState([]),q=Object(o.a)(I,2),D=q[0],R=q[1],A=i.a.useState([]),L=Object(o.a)(A,2),F=L[0],M=L[1],G=function(e){return O.has(e)},z=i.a.useState(0),U=Object(o.a)(z,2),V=U[0],W=U[1],H=[t("data_protection"),t("student_info"),t("contact_person_1"),t("contact_person_2"),t("courses"),t("confirmation")];Pr((function(){var e;br.a.changeLanguage("cat").then(),(e=Vr.getCourses()).then.apply(e,Object(Z.a)(Q({}))).then((function(e){v(e),N(e)}))}));var K=Object(r.useState)(""),X=Object(o.a)(K,2),Y=X[0],J=X[1],Q=Ee(),te=t("required"),ae=Re(!1,{initialValues:Object(j.a)(Object(j.a)({},kt),{},{__person1__name:"",__person2__name:"",__person1__surname1:"",__person1__surname2:"",__person1__email:"",__person1__phone:"",__person1__relation:"",__person1__is_studying:"",__person1__is_working:"",__person1__career:"",__person1__education_entity:"",__person1__education_year:"",__person2__surname1:"",__person2__surname2:"",__person2__email:"",__person2__phone:"",__person2__relation:"",__person2__is_studying:"",__person2__is_working:"",__person2__career:"",__person2__education_entity:"",__person2__education_year:"",image_agreement:!1}),validationSchema:ye.d({name:ye.f(te).required(te),surname1:ye.f(te).required(te),surname2:ye.f(te).required(te),email:nt(t).when("birth_date",(function(e,t){return e&&!Kr(e)?t.required(te):t})),phone:ye.f().when("birth_date",(function(e,t){return e&&!Kr(e)?t.required(te):t})),address:ye.f(te).required(te),city:ye.f(te).required(te),zip:ye.c(te).required(te),dni:ye.f(te).matches(/^[0-9]{8}[TRWAGMYFPDXBNJZSQVHLCKE]$/i,"format de DNI inv\xe0lid"),country_of_origin:ye.f(te).notOneOf(["empty"]).test("countryNonEmpty",te,(function(e){return void 0!==e})),gender:ye.f(te).required(te),is_studying:ye.a(te).required(te),is_working:ye.a(te).required(te),career:ye.f(te).when("is_working",{is:!0,then:ye.f().required(te)}),education_entity:ye.f(te).when("is_studying",{is:!0,then:ye.f().required(te)}),education_year:ye.f(te).when("is_studying",{is:!0,then:ye.f().required(te)}),birth_date:ye.b(te).required(te),years_in_xamfra:ye.c(te).required(te),__person1__name:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(2)})),__person1__surname1:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(2)})),__person1__surname2:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(2)})),__person1__email:nt(t).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(2)})),__person1__phone:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(2)})),__person1__relation:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(2)})),__person1__is_studying:ye.a(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(2)})),__person1__is_working:ye.a(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(2)})),__person1__career:ye.f(te).when("__person1__is_working",{is:!0,then:ye.f().required(te)}),__person1__education_entity:ye.f(te).when("__person1__is_studying",{is:!0,then:ye.f().required(te)}),__person1__education_year:ye.f(te).when("__person1__is_studying",{is:!0,then:ye.f().required(te)}),__person2__name:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(3)})),__person2__surname1:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(3)})),__person2__surname2:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(3)})),__person2__email:nt(t).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(3)})),__person2__phone:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(3)})),__person2__relation:ye.f(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(3)})),__person2__is_studying:ye.a(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(3)})),__person2__is_working:ye.a(te).test("requiredIfNotSkipped",te,(function(e){return void 0!==e&&""!==e||G(3)})),__person2__career:ye.f(te).when("__person2__is_working",{is:!0,then:ye.f().required(te)}),__person2__education_entity:ye.f(te).when("__person2__is_studying",{is:!0,then:ye.f().required(te)}),__person2__education_year:ye.f(te).when("__person2__is_studying",{is:!0,then:ye.f().required(te)}),image_agreement:ye.a(te)}),enableReinitialize:!0,onSubmit:function(e,t){var n,r=t.setStatus,i=t.setSubmitting;r();var o={};o.image_agreement=e.image_agreement,o.name=e.name,o.surname1=e.surname1,o.surname2=e.surname2,o.email=e.email,o.address=e.address,o.city=e.city,o.zip=e.zip,o.dni=e.dni,o.phone=e.phone,o.country_of_origin=e.country_of_origin,o.gender=e.gender,o.is_studying=e.is_studying,o.is_working=e.is_working,o.education_entity=e.education_entity,o.education_year=e.education_year,o.career=e.career,o.birth_date=e.birth_date,o.years_in_xamfra=e.years_in_xamfra,o.guardians=[],[2,3].map((function(t){if(!G(t)){var a={},n="__person".concat(t-1,"__");a.name=e[n+"name"],a.surname1=e[n+"surname1"],a.surname2=e[n+"surname2"],a.email=e[n+"email"],a.phone=e[n+"phone"],a.is_studying=e[n+"is_studying"],a.is_working=e[n+"is_working"],a.education_entity=e[n+"education_entity"],a.education_year=e[n+"education_year"],a.career=e[n+"career"],a.relation=e[n+"relation"],o.guardians.push(a)}})),o.payment_comments=F.join(". "),F.includes(s)?o.price_term=40:F.includes(c)?o.price_term=50:F.includes(a)?o.price_term=60:o.price_term=null,o.other_comments=e.other_comments,o.courses=D.map((function(e){return e.id})),i(!1),(n=Vr.postPreEnrollment(o,b)).then.apply(n,Object(Z.a)(Q({snackbarSuccess:!0}))).then((function(){W(H.length)}))}});Object(r.useEffect)((function(){var e=[];Kr(ae.values.birth_date)||e.push("adult"),ae.values.is_studying&&e.push(ae.values.education_year),N(y.filter((function(t){return e.some((function(e){return t.labels.includes(e)}))})))}),[y,ae.values.education_year,ae.values.birth_date]);var ne=function(e){return 3===e||2===e&&""!==ae.values.birth_date&&!Kr(ae.values.birth_date)},re=[[],["birth_date","name","surname1","surname2","address","city","zip","gender","is_studying","is_working","education_entity","education_year","career","years_in_xamfra","country_of_origin","phone","email"],["__person1__name","__person1__surname1","__person1__surname2","__person1__email","__person1__phone","__person1__phone","__person1__relation","__person1__is_studying","__person1__education_entity","__person1__education_year","__person1__is_working","__person1__career"],["__person2__name","__person2__surname1","__person2__surname2","__person2__email","__person2__phone","__person2__phone","__person2__relation","__person2__is_studying","__person2__education_entity","__person2__education_year","__person2__is_working","__person2__career"],[],["image_agreement"]],ce=i.a.useContext(Wa);return Object(n.jsxs)(ie.a,{p:5,style:{width:"100%"},children:[Object(n.jsx)(fr,{style:{float:"right"}}),Object(n.jsx)(_r,{style:{float:"right"}}),Object(n.jsx)(ie.a,{m:2,style:{textAlign:"center"},children:Object(n.jsx)("img",{src:"".concat(fe,"/logo_xamfra_").concat(ce.label,".png"),alt:"Logo Xamfr\xe0",style:{height:"85px"}})}),Object(n.jsx)(ee.a,{className:"".concat(l.paper," ").concat(l.root),children:Object(n.jsxs)(ie.a,{p:2,children:[" ",Object(n.jsx)(Gr.a,{activeStep:V,children:H.map((function(e,t){var a={},r={};return ne(t)&&(r.optional=Object(n.jsx)(Et.a,{variant:"caption",children:"opcional"})),G(t)&&(a.completed=!1),Object(n.jsx)(zr.a,Object(j.a)(Object(j.a)({},a),{},{children:Object(n.jsx)(Ur.a,Object(j.a)(Object(j.a)({},r),{},{children:e}))}),e)}))}),Object(n.jsx)("div",{children:V===H.length?Object(n.jsx)("div",{style:{textAlign:"center"},children:Object(n.jsx)(Et.a,{children:"Prematr\xedcula completada amb \xe8xit! | \xa1Prematr\xedcula completada con \xe9xito! | Pre-enrolment successful!"})}):Object(n.jsx)("form",{onSubmit:ae.handleSubmit,children:Object(n.jsxs)(ie.a,{m:2,children:[Object(n.jsxs)("div",{children:[0===V&&Object(n.jsxs)("div",{children:[Object(n.jsxs)(Et.a,{children:["Podeu consultar el quadre horari del curs 20-21 ",Object(n.jsx)(qr.a,{target:"_blank",href:"https://xamfra.net/com-participar-hi/horaris/",children:"aqu\xed"}),"."]}),Object(n.jsx)("br",{}),Object(n.jsx)(Et.a,{variant:"caption",children:"Enviar aquest formulari implica consentiment per fer \xfas de les dades per tal de rebre informaci\xf3 durant el per\xedode de preinscripci\xf3 i inici de curs. La posterior matr\xedcula presencial al centre implica tamb\xe9 l'\xfas de les dades durant tot el curs 2020-2021. La nostra pol\xedtica protecci\xf3 de dades es basa en que: 1) El Responsable del Tractament de les teves dades personals \xe9s de Xamfr\xe0, Centre de M\xfasica i Escena del Raval (Fundaci\xf3 l'ARC M\xfasica) 2) Les finalitats del tractament de les dades personals \xe9s la de gestionar la teva vinculaci\xf3 amb Xamfr\xe0. La base de dades disposa de noms, tel\xe8fons, adre\xe7a postal i adre\xe7a electr\xf2nica. 3) Les teves dades no seran comunicades a tercers sense previ consentiment. 4) Pots exercir els drets d'acc\xe9s, rectificaci\xf3 i oposici\xf3 segons preveu a la normativa."})]}),1===V&&Object(n.jsxs)("div",{children:[Object(n.jsx)(Et.a,{variant:"h2",children:t("student")}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsx)(Ce,{label:t("name"),style:{flex:1},name:"name",formik:ae,noDirty:!0}),Object(n.jsx)(Ce,{label:t("surname1"),style:{flex:1},name:"surname1",formik:ae,noDirty:!0}),Object(n.jsx)(Ce,{label:t("surname2"),style:{flex:1},formik:ae,name:"surname2",noDirty:!0})]}),Object(n.jsx)(ie.a,{className:[l.line,l.composite],children:Object(n.jsx)(Ce,{label:t("email"),type:"email",style:{flex:1},formik:ae,name:"email",noDirty:!0,helperText:ae.touched.email&&ae.errors.email})}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsx)(Ce,{label:t("address"),formik:ae,noDirty:!0,style:{flex:4},name:"address"}),Object(n.jsx)(Ce,{label:t("city"),style:{flex:2},formik:ae,noDirty:!0,name:"city"}),Object(n.jsx)(Ce,{label:t("zip"),formik:ae,type:"number",noDirty:!0,style:{flex:1},name:"zip"})]}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsx)(Ce,{label:t("dni"),style:{flex:1},noDirty:!0,formik:ae,name:"dni"}),Object(n.jsx)(Ce,{label:t("phone"),type:"tel",style:{flex:1},formik:ae,noDirty:!0,name:"phone"})]}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsx)(Te,{formik:ae,style:{flex:1},noDirty:!0,name:"country_of_origin",label:t("country_of_origin")}),Object(n.jsxs)(Ce,{label:t("gender"),style:{flex:1},formik:ae,noDirty:!0,name:"gender",select:!0,children:[Object(n.jsx)(oe.a,{value:"m",children:t("m")}),Object(n.jsx)(oe.a,{value:"f",children:t("f")}),Object(n.jsx)(oe.a,{value:"nb",children:t("nb")})]})]}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsxs)(Ce,{label:t("is_studying"),style:{flex:1},name:"is_studying",formik:ae,noDirty:!0,select:!0,children:[Object(n.jsx)(oe.a,{value:!0,children:t("yes")}),Object(n.jsx)(oe.a,{value:!1,children:t("no")})]}),Object(n.jsx)(Ce,{label:t("school_university"),style:{flex:2},formik:ae,name:"education_entity",noDirty:!0}),Object(n.jsx)(Ce,{label:t("education_year"),style:{flex:2},noDirty:!0,name:"education_year",formik:ae,select:!0,children:Be.map((function(e){return Object(n.jsx)(oe.a,{value:e,children:t(e)},e)}))})]}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsxs)(Ce,{label:t("is_working"),style:{flex:1},name:"is_working",formik:ae,noDirty:!0,select:!0,children:[Object(n.jsx)(oe.a,{value:!0,children:t("yes")}),Object(n.jsx)(oe.a,{value:!1,children:t("no")})]}),Object(n.jsx)(Ce,{label:t("career"),style:{flex:4},formik:ae,noDirty:!0,name:"career"})]}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsx)(Ce,{label:t("birthdate"),type:"date",style:{flex:1},noDirty:!0,formik:ae,name:"birth_date",InputLabelProps:{shrink:!0}}),Object(n.jsx)(Ce,{label:t("years_in_xamfra"),type:"number",noDirty:!0,formik:ae,style:{flex:1},name:"years_in_xamfra"})]})]}),(2===V||3===V)&&Object(n.jsxs)("div",{children:[Object(n.jsx)(Et.a,{variant:"h2",children:t("contact")+" "+(V-1)}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsx)(Ce,{label:t("name"),style:{flex:1},name:"__person"+(V-1)+"__name",formik:ae,noDirty:!0}),Object(n.jsx)(Ce,{label:t("surname1"),style:{flex:1},name:"__person"+(V-1)+"__surname1",formik:ae,noDirty:!0}),Object(n.jsx)(Ce,{label:t("surname2"),style:{flex:1},formik:ae,name:"__person"+(V-1)+"__surname2",noDirty:!0})]}),Object(n.jsx)(ie.a,{className:[l.line,l.composite],children:Object(n.jsx)(Ce,{label:t("email"),type:"email",style:{flex:1},formik:ae,name:"__person"+(V-1)+"__email",noDirty:!0,helperText:ae.touched.email&&ae.errors.email})}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsx)(Ce,{label:t("phone"),type:"tel",style:{flex:1},formik:ae,noDirty:!0,name:"__person"+(V-1)+"__phone"}),Object(n.jsxs)(Ce,{label:t("relation"),style:{flex:1},name:"__person"+(V-1)+"__relation",select:!0,noDirty:!0,formik:ae,children:[Tt.map((function(e){return Object(n.jsx)(oe.a,{value:e,children:t(e)},e)})),"))}"]})]}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsxs)(Ce,{label:t("is_studying"),style:{flex:1},name:"__person"+(V-1)+"__is_studying",formik:ae,noDirty:!0,select:!0,children:[Object(n.jsx)(oe.a,{value:!0,children:t("yes")}),Object(n.jsx)(oe.a,{value:!1,children:t("no")})]}),Object(n.jsx)(Ce,{label:t("school_university"),style:{flex:2},formik:ae,name:"__person"+(V-1)+"__education_entity",noDirty:!0}),Object(n.jsx)(Ce,{label:t("education_year"),style:{flex:2},noDirty:!0,name:"__person"+(V-1)+"__education_year",formik:ae,select:!0,children:Be.map((function(e){return Object(n.jsx)(oe.a,{value:e,children:t(e)},e)}))})]}),Object(n.jsxs)(ie.a,{className:[l.line,l.composite],children:[Object(n.jsxs)(Ce,{label:t("is_working"),style:{flex:1},name:"__person"+(V-1)+"__is_working",formik:ae,noDirty:!0,select:!0,children:[Object(n.jsx)(oe.a,{value:!0,children:t("yes")}),Object(n.jsx)(oe.a,{value:!1,children:t("no")})]}),Object(n.jsx)(Ce,{label:t("career"),style:{flex:4},formik:ae,noDirty:!0,name:"__person"+(V-1)+"__career"})]})]}),4===V&&Object(n.jsxs)("div",{children:[Object(n.jsx)(ie.a,{className:l.cards,children:D&&D.map((function(e){return Object(n.jsxs)(Mt.a,{className:l.card,raised:!0,children:[Object(n.jsxs)(zt.a,{children:[Object(n.jsx)(Et.a,{variant:"h5",component:"h2",children:e.name}),Object(n.jsx)(Et.a,{className:l.pos,color:"textSecondary",children:e.description?e.description:"..."}),e.base_schedules&&e.base_schedules.map((function(e){return Object(n.jsxs)(Et.a,{variant:"body2",component:"p",children:[Hr(e.day_week),", ",e.start_time.slice(0,-3)," - ",e.end_time.slice(0,-3)]})}))]}),Object(n.jsx)(Ut.a,{children:Object(n.jsx)(S.a,{size:"small",onClick:function(){R(D.filter((function(t){return t!==e})))},children:Object(n.jsx)(mt.a,{})})})]})}))}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsxs)(ie.a,{className:l.box,m:3,children:[Object(n.jsx)(pa,{label:t("courses"),value:Y,onChange:function(e){J(e.target.value)},onSearch:function(){}}),Object(n.jsx)(P.a,{className:l.list,children:C&&C.filter((function(e){return!D.includes(e)&&(e.name.includes(Y)||null!==e.description&&e.description.includes(Y))})).map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsxs)(E.a,{button:!0,onClick:function(){R([].concat(Object(Z.a)(D),[e]))},children:[Object(n.jsx)(B.a,{id:"description",primary:e.name,secondary:e.description}),e.base_schedules&&e.base_schedules.map((function(e){return Object(n.jsx)(B.a,{id:"schedule",secondary:Hr(e.day_week)+", "+e.start_time.slice(0,-3)+" - "+e.end_time.slice(0,-3)},e.id)}))]},e.id),Object(n.jsx)(T.a,{})]},e.id)}))}),0===C.length&&Object(n.jsx)(Et.a,{children:t("no_courses_found_add_edu")})]})]}),5===V&&Object(n.jsxs)("div",{children:[Object(n.jsx)(Et.a,{children:"Xamfr\xe0 \xe9s un centre que treballa perqu\xe8 tots els infants i joves puguin fer m\xfasica, teatre i dansa. Les fam\xedlies aporten el que poden per ajudar a fer sostenible el centre. En cap cas, la quota cobreix el cost dels tallers que fan els nens i nenes. Marqueu, si us plau, una o v\xe0ries opcions."}),Object(n.jsx)(Et.a,{children:"IMPORTANT: CAP INFANT O JOVE HA DE DEIXAR DE FER TEATRE, M\xdaSICA O DANSA A XAMFR\xc0 PER MOTIUS ECON\xd2MICS. A QUI NO PUGUI, L'AJUDAREM; I QUI PUGUI AJUDAR: MOLTES GR\xc0CIES!"}),[a,c,s,"Puc pagar una quota a acordar personalment","No puc pagar la quota trimestral","Puc aportar una segona quota per un altre nen/a (desgravaci\xf3 fiscal)","Puc fer-me teamer (1 \u20ac/mes)","Puc fer donatius puntuals (desgravaci\xf3 fiscal)","Puc fer donatius regulars (desgravaci\xf3 fiscal)","Puc ajudar en tasques puntuals","Puc ajudar a la Campanya RISUONA (donaci\xf3 d'instruments)","Puc fer serveis professionals relacionats amb els meus estudis o professi\xf3"].map((function(e){return Object(n.jsx)(an.a,{control:Object(n.jsx)(nn.a,{onChange:function(t,a){a?F.push(e):M(F.filter((function(t){return t!==e})))}}),label:e},e)})),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsx)(ie.a,{className:[l.line,l.composite],children:Object(n.jsx)(Ce,{label:t("other_comments"),style:{flex:1},multiline:!0,formik:ae,rowsMax:8,noDirty:!0,name:"other_comments"})}),Object(n.jsx)(ie.a,{my:3,children:Object(n.jsx)(T.a,{})}),Object(n.jsx)(an.a,{control:Object(n.jsx)(nn.a,{defaultValue:!1,defaultChecked:!1,checked:ae.values.image_agreement,name:"image_agreement",value:ae.values.image_agreement,onChange:ae.handleChange,onBlur:ae.handleBlur}),label:Kr(ae.values.birth_date)?"En cas de matricular-lo, autoritzo l\u2019\xfas de la imatge de l\u2019estudiant, menor d'edat, per a que pugui apar\xe8ixer a materials escrits o multim\xe8dia corresponents a activitats educatives organitzades per Xamfr\xe0.":"En cas de matricular-me, autoritzo l\u2019\xfas de la meva imatge per a que pugui apar\xe8ixer a materials escrits o multim\xe8dia corresponents a activitats educatives organitzades per Xamfr\xe0."},"image_agreement"),Object(n.jsx)(Er.a,{sitekey:me,onChange:function(e){h(e)},theme:ce.theme?"dark":"light",className:l.recaptcha})]})]}),Object(n.jsxs)(ie.a,{m:2,className:l.buttons,children:[Object(n.jsx)(Pe.a,{disabled:0===V,onClick:function(){W((function(e){return e-1}))},className:l.backButton,children:t("back")}),ne(V)&&Object(n.jsx)(Pe.a,{variant:"contained",color:"primary",onClick:function(){if(!ne(V))throw new Error("You can't skip a step that isn't optional.");W((function(e){return e+1})),x((function(e){var t=new Set(e.values());return t.add(V),t}))},className:l.button,children:t("skip")}),Object(n.jsx)(Pe.a,{variant:"contained",color:"primary",disabled:V===H.length-1||!re[V].every((function(e){return!ae.errors[e]})),onClick:function(){ae.setFieldTouched("");var e=O;G(V)&&(e=new Set(e.values())).delete(V),W((function(e){return e+1})),x(e)},children:t("next")}),V===H.length-1&&Object(n.jsx)(Pe.a,{variant:"contained",color:"primary",type:"submit",disabled:ae.isSubmitting||null===b||!re[V].every((function(e){return!ae.errors[e]})),children:t("finish")})]})]})})})]})})]})},Yr=a(276);function Jr(e){Object(Yr.a)(e);i.a.useContext(Wa),Object($.a)().t;return Object(n.jsx)(Et.a,{variant:"h1",children:"Nope, not found... \ud83d\udc7b"})}var Zr=function(){var e=Object(r.useState)("true"===localStorage.getItem("darkTheme")),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(d.a)(a?h:b),s=Object(r.useState)({logged:!1,ping:!0}),j=Object(o.a)(s,2),m=j[0],_=j[1],g=Object(r.useState)([]),y=Object(o.a)(g,2),v=y[0],w=y[1];return Object(n.jsxs)(u.a,{theme:c,children:[Object(n.jsx)(l.a,{}),Object(n.jsx)(p.a,{maxSnack:3,children:Object(n.jsx)(O.Provider,{value:{user:m,setUser:_,needs:v,setNeeds:function(e){return Array.isArray(e)?w(e):w([])}},children:Object(n.jsx)(Wa.Provider,{value:{theme:a,switchTheme:function(){localStorage.setItem("darkTheme",(!a).toString()),i(!a)},label:a?"dark":"light"},children:Object(n.jsx)(cr.a,{basename:"/app",children:Object(n.jsxs)(f.d,{children:[Object(n.jsx)(x,{path:"/home",component:Ir}),Object(n.jsx)(f.b,{path:"/login",component:Rr}),Object(n.jsx)(f.b,{path:"/signup",component:Lr}),Object(n.jsx)(f.b,{path:"/password-reset",component:Mr}),Object(n.jsx)(f.b,{path:"/prematricula",component:Xr}),Object(n.jsx)(f.b,{component:Jr})]})})})})})]})},Qr=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,577)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))},$r=a(277),ei=a(131),ti=a(280),ai=a(281),ni={eng:{translation:a(282)},cat:{translation:a(283)}};br.a.use(ti.a).use(ai.a).use(ei.e).init({resources:ni,fallbackLng:["eng"],detection:{checkWhitelist:!0},debug:!1,whitelist:["eng","cat"],interpolation:{escapeValue:!1}}).then((function(e){return{}}));br.a;s.a.render(Object(n.jsxs)(i.a.StrictMode,{children:[Object(n.jsxs)($r.a,{children:[Object(n.jsx)("title",{children:"centr\xedfuga4"}),Object(n.jsx)("base",{href:"".concat("https://centrifuga4.herokuapp.com","/")}),Object(n.jsx)("link",{nonce:"{{csp_nonce()}}",rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),Object(n.jsx)("link",{nonce:"{{csp_nonce()}}",rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),Object(n.jsx)("meta",{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width"})]}),Object(n.jsx)(Zr,{})]}),document.getElementById("root")),Qr()}},[[489,1,2]]]);
//# sourceMappingURL=main.076a0b2a.chunk.js.map